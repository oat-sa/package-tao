{"version":3,"sources":["routes.js","manageMedia.js"],"names":["define","MediaManager","actions","editInstance","$","__","module","helpers","binder","uri","manageMediaController","start","$previewer","file","url","data","mime","ajax","xml","method","success","response","previewer","off","on","action","binding","_url","exec","classUri","this","id","_resourceContext"],"mappings":"AAAA,AAqBAA,OAAA,uCAAA,WACA,YAEA,QACAC,cACAC,SACAC,aAAA,8BCxBAH,OAAA,0CACA,SACA,OACA,SACA,UACA,wBACA,MACA,gBACA,SAAAI,EAAAC,GAAAC,OAAAC,QAAAC,OAAAC,KACA,YAEA,IAAAC,wBAKAC,MAAA,WAEA,GAAAC,YAAAR,EAAA,cACAS,OACAA,MAAAC,IAAAF,WAAAG,KAAA,OACAF,KAAAG,KAAAJ,WAAAG,KAAA,QAEAH,WAAAG,KAAA,OAIAX,EAAAa,MACAH,IAAAD,KAAAC,IACAC,MAAAG,KAAA,GACAC,OAAA,SACAC,QAAA,SAAAC,UACAR,KAAAK,IAAAG,SACAT,WAAAU,UAAAT,QATAD,WAAAU,UAAAT,MAaAT,EAAA,eAAAmB,MACAC,GAAA,QAAA;AACA,ADzCA,GCyCAC,SAAAC,QAAA,OAAAZ,IAAAP,QAAAoB,KAAA,YAAA,cAAA,mBACAnB,QAAAoB,KAAAH,QAAAI,SAAAzB,EAAA0B,MAAAf,KAAA,YAAAgB,GAAA3B,EAAA0B,MAAAf,KAAA,SAAAe,KAAAE,qBAKA,OAAAtB;AD9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA,ADiCA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"taoMediaManager/controller/routes.js","sourcesContent":["/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n * \n * \n */\n\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\ndefine('taoMediaManager/controller/routes',[],function(){\n    'use strict';\n\n    return {\n        'MediaManager': {\n            'actions': {\n                'editInstance' : 'controller/manageMedia'\n            }\n        }\n    };\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoMediaManager/controller/manageMedia',[\n    'jquery', \n    'i18n', \n    'module',\n    'helpers', \n    'layout/actions/binder',\n    'uri',\n    'ui/previewer'\n], function($, __, module, helpers, binder, uri) {\n    'use strict';\n\n    var manageMediaController =  {\n\n        /**\n         * Controller entry point\n         */\n        start : function(){\n\n            var $previewer = $('.previewer');\n            var file = {};\n            file.url = $previewer.data('url');\n            file.mime = $previewer.data('type');\n\n            if(!$previewer.data('xml')){\n                $previewer.previewer(file);\n            }\n            else{\n                $.ajax({\n                    url: file.url,\n                    data: {xml:true},\n                    method: \"POST\",\n                }).success(function(response){\n                    file.xml = response;\n                    $previewer.previewer(file);\n                });\n            }\n\n            $('#edit-media').off()\n                .on('click', function(){\n                    var action = {binding : \"load\", url: helpers._url('editMedia', 'MediaImport', 'taoMediaManager')};\n                    binder.exec(action, {classUri : $(this).data('classuri'), id : $(this).data('uri')} || this._resourceContext);\n                });\n        }\n    };\n\n    return manageMediaController;\n});\n\n"]}