{"version":3,"file":"routes.js","sources":["routes.js","../qtiCreator/model/helper/event.js","../qtiItem/helper/util.js","../qtiItem/helper/rendererConfig.js","../qtiItem/core/Element.js","../qtiCreator/helper/panel.js","../qtiItem/core/qtiClasses.js","../qtiItem/core/Loader.js","../qtiCreator/model/helper/invalidator.js","../qtiCreator/model/mixin/editable.js","../qtiCreator/model/qtiClasses.js","../qtiCreator/model/helper/container.js","../qtiCreator/model/mixin/editableContainer.js","../qtiItem/core/IdentifiedElement.js","../qtiItem/mixin/Mixin.js","../qtiItem/core/Container.js","../qtiItem/mixin/Container.js","../qtiItem/mixin/ContainerItemBody.js","../qtiItem/core/Item.js","../qtiItem/core/Stylesheet.js","../qtiCreator/model/Stylesheet.js","../qtiItem/core/ResponseProcessing.js","../qtiCreator/model/ResponseProcessing.js","../qtiItem/core/variables/VariableDeclaration.js","../qtiItem/core/variables/OutcomeDeclaration.js","../qtiCreator/model/variables/OutcomeDeclaration.js","../qtiItem/core/feedbacks/ModalFeedback.js","../qtiCreator/model/feedbacks/ModalFeedback.js","../qtiCreator/model/Item.js","../qtiCreator/helper/itemLoader.js","../qtiItem/helper/interactionHelper.js","../qtiRunner/core/Renderer.js","../qtiDefaultRenderer/renderers/config.js","../qtiCommonRenderer/renderers/config.js","../qtiCreator/renderers/config.js","../qtiCreator/renderers/Renderer.js","../qtiCreator/helper/creatorRenderer.js","../../taoQtiItemCss/qti!css","../qtiCommonRenderer/renderers/Renderer.js","../qtiCommonRenderer/helpers/container.js","../qtiCreator/helper/commonRenderer.js","../qtiCreator/helper/qtiElements.js","json!taoItems/preview/resources/device-list.json","../../taoItems/preview/tpl/preview!tpl","../../taoItems/preview/preview.js","../qtiCreator/editor/preparePrint.js","json!taoQtiItem/qtiCreator/editor/resources/font-stacks.json","../qtiCreator/tpl/toolbars/cssToggler!tpl","../qtiCreator/editor/styleEditor/styleEditor.js","../qtiCreator/editor/styleEditor/fontSelector.js","../qtiCreator/helper/popup.js","../../lib/farbtastic/farbtastic.js","../qtiCreator/editor/styleEditor/colorSelector.js","../qtiCreator/editor/styleEditor/fontSizeChanger.js","../qtiCreator/editor/styleEditor/itemResizer.js","../qtiCreator/tpl/notifications/genericFeedbackPopup!tpl","../qtiCreator/editor/styleEditor/styleSheetToggler.js","../qtiCreator/helper/itemSerializer.js","../qtiCreator/editor/editor.js","../qtiCreator/editor/customElementRegistryFactory.js","../qtiCreator/editor/customInteractionRegistry.js","../qtiCreator/tpl/toolbars/insertInteractionButton!tpl","../qtiCreator/tpl/toolbars/insertInteractionGroup!tpl","../qtiCreator/tpl/toolbars/tooltip!tpl","../qtiCreator/editor/interactionsToolbar.js","../qtiCreator/editor/infoControlRegistry.js","../qtiCreator/editor/blockAdder/tpl/addColumnRow!tpl","../qtiCreator/editor/gridEditor/config.js","../qtiCreator/editor/gridEditor/helper.js","../qtiCreator/editor/gridEditor/resizable.js","../qtiCreator/editor/gridEditor/content.js","../qtiCreator/editor/elementSelector/tpl/popup!tpl","../qtiCreator/editor/elementSelector/tpl/content!tpl","../qtiCreator/editor/elementSelector/selector.js","../qtiCreator/widgets/Widget.js","../qtiCreator/editor/widgetToolbar.js","../qtiCreator/widgets/static/Widget.js","../qtiCreator/widgets/states/factory.js","../qtiCreator/widgets/states/Sleep.js","../qtiCreator/widgets/static/states/Sleep.js","../qtiCreator/widgets/helpers/content.js","../qtiCreator/widgets/states/Active.js","../qtiCreator/widgets/static/states/Active.js","../qtiCreator/widgets/states/Inactive.js","../qtiCreator/tpl/notifications/deletingInfoBox!tpl","../qtiCreator/widgets/helpers/deletingState.js","../qtiCreator/helper/gridUnits.js","../qtiCreator/widgets/states/Deleting.js","../qtiCreator/widgets/static/states/states.js","../qtiCreator/widgets/static/text/states/Sleep.js","../qtiCreator/editor/ckEditor/htmlEditor.js","../qtiCreator/tpl/forms/static/text!tpl","../qtiCreator/widgets/static/text/states/Active.js","../qtiCreator/widgets/static/text/states/states.js","../qtiCreator/tpl/toolbars/textBlock!tpl","../qtiCreator/widgets/static/text/Widget.js","../qtiCreator/editor/blockAdder/blockAdder.js","creator/main.js","../qtiCreator/editor/MathEditor.js","../qtiCreator/editor/ckEditor/ckProtector.js","../qtiCreator/editor/colorPicker/tpl/popup!tpl","../qtiCreator/editor/colorPicker/colorPicker.js","../qtiCreator/model/Container.js","../qtiXmlRenderer/renderers/config.js","../qtiXmlRenderer/renderers/Renderer.js","../qtiCreator/helper/xmlRenderer.js","../qtiCreator/helper/simpleParser.js","../qtiCreator/tpl/toolbars/htmlEditorTrigger!tpl","../qtiCreator/editor/containerEditor.js","../qtiCreator/editor/gridEditor/arrow.js","../qtiCreator/editor/targetFinder.js","../qtiCreator/editor/gridEditor/droppable.js","../qtiCreator/editor/gridEditor/draggable.js","../qtiCreator/editor/jquery.gridEditor.js","../qtiCreator/editor/simpleContentEditableElement.js","../qtiCreator/helper/adaptSize.js","../qtiCreator/helper/devTools.js","../qtiCreator/helper/dummyElement.js","../qtiCreator/helper/uploadMime.js","../qtiItem/core/Img.js","../qtiCreator/model/Img.js","../qtiItem/core/Math.js","../qtiCreator/model/Math.js","../qtiItem/core/Object.js","../qtiCreator/model/Object.js","../qtiCreator/model/helper/portableElement.js","../qtiItem/mixin/CustomElement.js","../qtiItem/core/PortableInfoControl.js","../qtiCreator/model/PortableInfoControl.js","../qtiItem/core/RubricBlock.js","../qtiCreator/model/RubricBlock.js","../qtiItem/core/choices/Choice.js","../qtiItem/core/choices/Hotspot.js","../qtiItem/core/choices/AssociableHotspot.js","../qtiCreator/model/choices/AssociableHotspot.js","../qtiItem/core/choices/Gap.js","../qtiCreator/model/choices/Gap.js","../qtiItem/core/choices/GapImg.js","../qtiCreator/model/choices/GapImg.js","../qtiItem/core/choices/TextVariableChoice.js","../qtiItem/core/choices/GapText.js","../qtiCreator/model/choices/GapText.js","../qtiItem/core/choices/HotspotChoice.js","../qtiCreator/model/choices/HotspotChoice.js","../qtiItem/mixin/ContainerInline.js","../qtiItem/core/choices/Hottext.js","../qtiCreator/model/choices/Hottext.js","../qtiItem/core/choices/InlineChoice.js","../qtiCreator/model/choices/InlineChoice.js","../qtiItem/core/choices/ContainerChoice.js","../qtiItem/core/choices/SimpleAssociableChoice.js","../qtiCreator/model/choices/SimpleAssociableChoice.js","../qtiItem/core/choices/SimpleChoice.js","../qtiCreator/model/choices/SimpleChoice.js","../qtiCreator/model/helper/response.js","../qtiItem/core/variables/ResponseDeclaration.js","../qtiItem/core/response/SimpleFeedbackRule.js","../qtiItem/helper/response.js","../qtiCreator/model/variables/ResponseDeclaration.js","../qtiCreator/model/mixin/editableInteraction.js","../qtiItem/core/interactions/Interaction.js","../qtiItem/core/interactions/Prompt.js","../qtiItem/core/interactions/BlockInteraction.js","../qtiItem/core/interactions/AssociateInteraction.js","../qtiCreator/model/interactions/AssociateInteraction.js","../qtiItem/core/interactions/ChoiceInteraction.js","../qtiCreator/model/interactions/ChoiceInteraction.js","../qtiItem/core/interactions/InlineInteraction.js","../qtiItem/core/interactions/EndAttemptInteraction.js","../qtiCreator/model/interactions/EndAttemptInteraction.js","../qtiItem/core/interactions/ExtendedTextInteraction.js","../qtiCreator/model/interactions/ExtendedTextInteraction.js","../qtiItem/core/interactions/ContainerInteraction.js","../qtiItem/core/interactions/GapMatchInteraction.js","../qtiCreator/model/interactions/GapMatchInteraction.js","../qtiItem/core/interactions/ObjectInteraction.js","../qtiItem/core/interactions/GraphicInteraction.js","../qtiItem/core/interactions/GraphicAssociateInteraction.js","../qtiCreator/model/interactions/GraphicAssociateInteraction.js","../qtiItem/core/interactions/GraphicGapMatchInteraction.js","../qtiCreator/model/interactions/GraphicGapMatchInteraction.js","../qtiItem/core/interactions/GraphicOrderInteraction.js","../qtiCreator/model/interactions/GraphicOrderInteraction.js","../qtiItem/core/interactions/HotspotInteraction.js","../qtiCreator/model/interactions/HotspotInteraction.js","../qtiItem/core/interactions/HottextInteraction.js","../qtiCreator/model/interactions/HottextInteraction.js","../qtiItem/core/interactions/InlineChoiceInteraction.js","../qtiCreator/model/interactions/InlineChoiceInteraction.js","../qtiItem/core/interactions/MatchInteraction.js","../qtiCreator/model/interactions/MatchInteraction.js","../qtiItem/core/interactions/MediaInteraction.js","../qtiCreator/model/interactions/MediaInteraction.js","../qtiItem/core/interactions/OrderInteraction.js","../qtiCreator/model/interactions/OrderInteraction.js","../qtiItem/core/interactions/CustomInteraction.js","../qtiCreator/model/interactions/PortableCustomInteraction.js","../qtiItem/core/interactions/SelectPointInteraction.js","../qtiCreator/model/interactions/SelectPointInteraction.js","../qtiItem/core/interactions/SliderInteraction.js","../qtiCreator/model/interactions/SliderInteraction.js","../qtiItem/core/interactions/TextEntryInteraction.js","../qtiCreator/model/interactions/TextEntryInteraction.js","../qtiItem/core/interactions/UploadInteraction.js","../qtiCreator/model/interactions/UploadInteraction.js","../qtiCreator/model/pciCreatorContext.js","../qtiCreator/tpl/container!tpl","../qtiCreator/renderers/Container.js","../qtiCommonRenderer/tpl/img!tpl","../qtiCommonRenderer/renderers/Img.js","../qtiCreator/widgets/static/img/states/Sleep.js","../qtiCreator/tpl/forms/static/img!tpl","../qtiCreator/widgets/helpers/validators.js","../../lib/polyfill/placeholders.js","../qtiCreator/widgets/helpers/formElement.js","../qtiCreator/widgets/static/helpers/inline.js","../qtiCreator/widgets/static/img/states/Active.js","../qtiCreator/widgets/static/img/states/states.js","../qtiCreator/widgets/static/helpers/widget.js","../qtiCreator/tpl/toolbars/media!tpl","../qtiCreator/widgets/static/img/Widget.js","../qtiCreator/renderers/Img.js","../qtiCommonRenderer/tpl/item!tpl","../qtiCommonRenderer/helpers/itemStylesheetHandler.js","../qtiCommonRenderer/renderers/Item.js","../qtiCreator/tpl/forms/item!tpl","../qtiCreator/widgets/item/states/Active.js","../qtiCreator/widgets/item/states/states.js","../qtiCreator/widgets/item/Widget.js","../qtiCreator/tpl/item!tpl","../qtiCreator/renderers/Item.js","../qtiCommonRenderer/tpl/math!tpl","../qtiCommonRenderer/renderers/Math.js","../qtiCreator/widgets/static/math/states/Sleep.js","../qtiCreator/tpl/forms/static/math!tpl","../qtiCreator/widgets/static/math/states/Active.js","../qtiCreator/widgets/static/math/states/states.js","../qtiCreator/widgets/static/math/Widget.js","../qtiCreator/renderers/Math.js","../qtiCommonRenderer/tpl/modalFeedback!tpl","../qtiCommonRenderer/renderers/ModalFeedback.js","../qtiCreator/widgets/static/modalFeedback/states/Sleep.js","../qtiCreator/tpl/forms/static/modalFeedback!tpl","../qtiCreator/widgets/static/modalFeedback/states/Active.js","../qtiCreator/widgets/static/modalFeedback/states/states.js","../qtiCreator/tpl/toolbars/okButton!tpl","../qtiCreator/widgets/static/modalFeedback/Widget.js","../qtiCreator/renderers/ModalFeedback.js","../qtiCommonRenderer/tpl/object!tpl","../qtiDefaultRenderer/widgets/Object.js","../qtiCommonRenderer/renderers/Object.js","../qtiCreator/widgets/static/object/states/Sleep.js","../qtiCreator/tpl/forms/static/object!tpl","../qtiCreator/widgets/static/object/states/Active.js","../qtiCreator/widgets/static/object/states/states.js","../qtiCreator/tpl/notifications/widgetOverlay!tpl","../qtiCreator/widgets/static/object/Widget.js","../qtiCreator/renderers/Object.js","../qtiCommonRenderer/tpl/infoControl!tpl","../qtiCommonRenderer/helpers/PortableElement.js","../runtime/qtiInfoControlContext.js","../qtiCommonRenderer/renderers/PortableInfoControl.js","../qtiCreator/renderers/PortableInfoControl.js","../qtiCommonRenderer/tpl/rubricBlock!tpl","../qtiCommonRenderer/renderers/RubricBlock.js","../qtiCreator/widgets/static/rubricBlock/states/Sleep.js","../qtiCreator/tpl/forms/static/rubricBlock!tpl","../qtiCreator/widgets/static/rubricBlock/states/Active.js","../qtiCreator/widgets/static/rubricBlock/states/states.js","../qtiCreator/widgets/static/rubricBlock/Widget.js","../qtiCreator/renderers/RubricBlock.js","../qtiCommonRenderer/tpl/choices/gap!tpl","../qtiCommonRenderer/renderers/choices/Gap.js","../qtiCreator/widgets/choices/Widget.js","../qtiCreator/widgets/states/Answer.js","../qtiCreator/widgets/states/Choice.js","../qtiCreator/widgets/states/Correct.js","../qtiCreator/widgets/states/Map.js","../qtiCreator/widgets/states/Question.js","../qtiCreator/tpl/notifications/invalidInfoBox!tpl","../qtiCreator/widgets/states/Invalid.js","../qtiCreator/widgets/states/states.js","../qtiCreator/widgets/choices/states/Sleep.js","../qtiCreator/widgets/choices/states/Active.js","../qtiCreator/tpl/toolbars/simpleChoice.content!tpl","../qtiCreator/widgets/choices/helpers/formElement.js","../qtiCreator/widgets/choices/states/Question.js","../qtiCreator/widgets/choices/states/Answer.js","../qtiCreator/widgets/choices/states/states.js","../qtiCreator/widgets/choices/states/Choice.js","../qtiCreator/tpl/forms/choices/gap!tpl","../qtiCreator/widgets/helpers/identifier.js","../qtiCreator/widgets/choices/gap/states/Choice.js","../qtiCreator/tpl/toolbars/gap!tpl","../qtiCreator/widgets/choices/gap/states/Question.js","../qtiCreator/widgets/choices/gap/states/states.js","../qtiCreator/widgets/choices/gap/Widget.js","../qtiCreator/renderers/choices/Gap.js","../qtiCommonRenderer/tpl/choices/choice!tpl","../qtiCommonRenderer/renderers/choices/GapText.js","../qtiCreator/tpl/forms/choices/simpleAssociableChoice!tpl","../qtiCreator/widgets/choices/simpleAssociableChoice/states/Choice.js","../qtiCreator/widgets/choices/gapText/states/Choice.js","../qtiCreator/widgets/choices/gapText/states/states.js","../qtiCreator/widgets/choices/gapText/Widget.js","../qtiCreator/renderers/choices/GapText.js","../qtiCommonRenderer/tpl/choices/hottext!tpl","../qtiCommonRenderer/renderers/choices/Hottext.js","../qtiCreator/tpl/forms/choices/choice!tpl","../qtiCreator/widgets/choices/simpleChoice/states/Choice.js","../qtiCreator/widgets/choices/hottext/states/Choice.js","../qtiCreator/tpl/toolbars/hottext!tpl","../qtiCreator/widgets/choices/hottext/states/Question.js","../qtiCreator/widgets/choices/hottext/states/states.js","../qtiCreator/widgets/choices/hottext/Widget.js","../qtiCreator/renderers/choices/Hottext.js","../qtiCreator/renderers/choices/InlineChoice.js","../qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.AssociateInteraction.js","../qtiCreator/widgets/choices/simpleAssociableChoice/states/Question.js","../qtiCreator/widgets/choices/simpleAssociableChoice/states/states.js","../qtiCreator/widgets/choices/simpleAssociableChoice/Widget.js","../qtiCreator/renderers/choices/SimpleAssociableChoice.AssociateInteraction.js","../qtiCommonRenderer/tpl/choices/simpleAssociableChoice.matchInteraction!tpl","../qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction.js","../qtiCreator/renderers/choices/SimpleAssociableChoice.MatchInteraction.js","../qtiCommonRenderer/tpl/choices/simpleChoice.choiceInteraction!tpl","../qtiCommonRenderer/renderers/choices/SimpleChoice.ChoiceInteraction.js","../qtiCreator/widgets/choices/simpleChoice/states/states.js","../qtiCreator/widgets/choices/simpleChoice/Widget.js","../qtiCreator/renderers/choices/SimpleChoice.ChoiceInteraction.js","../qtiCommonRenderer/renderers/choices/SimpleChoice.OrderInteraction.js","../qtiCreator/renderers/choices/SimpleChoice.OrderInteraction.js","../qtiCommonRenderer/tpl/interactions/associateInteraction!tpl","../qtiCommonRenderer/tpl/interactions/associateInteraction.pair!tpl","../qtiCommonRenderer/tpl/instruction!tpl","../qtiCommonRenderer/helpers/instructions/Instruction.js","../qtiCommonRenderer/tpl/notification!tpl","../qtiCommonRenderer/helpers/instructions/instructionManager.js","../qtiCommonRenderer/helpers/PciPrettyPrint.js","../qtiCommonRenderer/helpers/PciResponse.js","../qtiCommonRenderer/renderers/interactions/AssociateInteraction.js","../qtiCreator/tpl/toolbars/grip!tpl","../qtiCreator/widgets/helpers/movable.js","../qtiCreator/tpl/toolbars/interaction!tpl","../qtiCreator/widgets/interactions/Widget.js","../qtiCreator/widgets/interactions/states/Sleep.js","../qtiCreator/widgets/interactions/states/Active.js","../qtiCreator/tpl/toolbars/addChoice!tpl","../qtiCreator/widgets/interactions/states/Question.js","../qtiCreator/widgets/interactions/states/Choice.js","../qtiCreator/tpl/forms/response/responseForm!tpl","../qtiCreator/widgets/interactions/helpers/formElement.js","../qtiCreator/tpl/modalFeedback/rule!tpl","../qtiCreator/tpl/modalFeedback/panel!tpl","../qtiCreator/widgets/helpers/modalFeedbackRule.js","../qtiCreator/widgets/interactions/helpers/answerState.js","../qtiCreator/widgets/interactions/states/Answer.js","../qtiCreator/widgets/interactions/states/Correct.js","../qtiCreator/widgets/interactions/states/Map.js","../qtiCreator/widgets/states/Custom.js","../qtiCreator/widgets/interactions/states/Custom.js","../qtiCreator/widgets/interactions/states/states.js","../qtiCreator/widgets/interactions/blockInteraction/states/Question.js","../qtiCreator/widgets/interactions/blockInteraction/states/states.js","../qtiCreator/tpl/forms/interactions/associate!tpl","../qtiCreator/widgets/interactions/associateInteraction/helper.js","../qtiCreator/widgets/interactions/associateInteraction/states/Question.js","../qtiCreator/widgets/interactions/associateInteraction/states/Choice.js","../qtiCreator/widgets/interactions/associateInteraction/states/Answer.js","../qtiCreator/widgets/interactions/associateInteraction/ResponseWidget.js","../qtiCreator/widgets/interactions/associateInteraction/states/Correct.js","../qtiCreator/tpl/toolbars/associableChoice.answer!tpl","../qtiCreator/widgets/interactions/associateInteraction/states/Map.js","../qtiCreator/widgets/interactions/associateInteraction/states/states.js","../qtiCreator/widgets/interactions/associateInteraction/Widget.js","../qtiCreator/renderers/interactions/AssociateInteraction.js","../qtiCommonRenderer/tpl/interactions/choiceInteraction!tpl","../qtiCommonRenderer/renderers/interactions/ChoiceInteraction.js","../qtiCreator/tpl/forms/interactions/choice!tpl","../qtiCreator/widgets/interactions/choiceInteraction/states/Question.js","../qtiCreator/widgets/interactions/choiceInteraction/states/Answer.js","../qtiCreator/tpl/toolbars/simpleChoice.score!tpl","../qtiCreator/tpl/toolbars/simpleChoice.label!tpl","../qtiCreator/widgets/interactions/choiceInteraction/ResponseWidget.js","../qtiCreator/widgets/interactions/choiceInteraction/states/Correct.js","../qtiCreator/widgets/interactions/choiceInteraction/states/Map.js","../qtiCreator/widgets/interactions/choiceInteraction/states/states.js","../qtiCreator/widgets/interactions/choiceInteraction/Widget.js","../qtiCreator/renderers/interactions/ChoiceInteraction.js","../qtiCommonRenderer/tpl/interactions/endAttemptInteraction!tpl","../qtiCommonRenderer/renderers/interactions/EndAttemptInteraction.js","../qtiCreator/widgets/interactions/inlineInteraction/Widget.js","../qtiCreator/widgets/interactions/inlineInteraction/states/Sleep.js","../qtiCreator/widgets/interactions/inlineInteraction/states/Active.js","../qtiCreator/widgets/interactions/inlineInteraction/states/states.js","../qtiCreator/tpl/forms/interactions/endAttempt!tpl","../qtiCreator/widgets/interactions/endAttemptInteraction/states/Question.js","../qtiCreator/widgets/interactions/endAttemptInteraction/states/states.js","../qtiCreator/tpl/inlineInteraction/endAttemptInteraction!tpl","../qtiCreator/widgets/interactions/endAttemptInteraction/Widget.js","../qtiCreator/tpl/inlineInteraction/endAttemptInteraction.placeholder!tpl","../qtiCreator/renderers/interactions/EndAttemptInteraction.js","../qtiCommonRenderer/tpl/interactions/extendedTextInteraction!tpl","../qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction.js","../qtiCreator/tpl/forms/interactions/extendedText!tpl","../qtiCreator/widgets/interactions/extendedTextInteraction/states/Question.js","../qtiCreator/widgets/interactions/extendedTextInteraction/states/Answer.js","../qtiCreator/widgets/interactions/extendedTextInteraction/states/Correct.js","../qtiCreator/widgets/interactions/extendedTextInteraction/states/states.js","../qtiCreator/widgets/interactions/extendedTextInteraction/Widget.js","../qtiCreator/renderers/interactions/ExtendedTextInteraction.js","../qtiCommonRenderer/tpl/interactions/gapMatchInteraction!tpl","../qtiCommonRenderer/renderers/interactions/GapMatchInteraction.js","../qtiCreator/widgets/helpers/textWrapper.js","../qtiCreator/widgets/interactions/containerInteraction/states/Question.js","../qtiCreator/widgets/interactions/containerInteraction/states/states.js","../qtiCreator/tpl/forms/interactions/gapMatch!tpl","tpl!taoQtiItem/qtiCreator/tpl/toolbars/gap-create","../qtiCreator/widgets/interactions/gapMatchInteraction/states/Question.js","../qtiCreator/widgets/interactions/gapMatchInteraction/states/Answer.js","../qtiCreator/widgets/interactions/gapMatchInteraction/states/Correct.js","../qtiCreator/tpl/forms/response/pairScoreMappingForm!tpl","../qtiCreator/tpl/forms/response/pairScoreForm!tpl","../qtiCreator/widgets/interactions/helpers/pairScoringForm.js","../qtiCreator/widgets/interactions/gapMatchInteraction/states/Map.js","../qtiCreator/widgets/interactions/gapMatchInteraction/states/states.js","../qtiCreator/widgets/interactions/gapMatchInteraction/Widget.js","../qtiCreator/renderers/interactions/GapMatchInteraction.js","../qtiCommonRenderer/tpl/interactions/graphicAssociateInteraction!tpl","json!taoQtiItem/qtiCommonRenderer/renderers/graphic-style.json","../qtiCommonRenderer/helpers/Graphic.js","../qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction.js","../qtiCreator/widgets/interactions/graphicInteraction/Widget.js","../qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Sleep.js","../qtiCreator/tpl/graphicInteraction/sidebar!tpl","../qtiCreator/widgets/interactions/helpers/shapeSideBar.js","../qtiCreator/widgets/interactions/helpers/shapeHandlers.js","../qtiCreator/widgets/interactions/helpers/shapeResizer.js","../qtiCreator/widgets/interactions/helpers/shapeMover.js","../qtiCreator/widgets/interactions/helpers/pathBuilder.js","../qtiCreator/widgets/interactions/helpers/shapeFactory.js","../qtiCreator/widgets/interactions/helpers/shapeEditor.js","../qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor.js","../qtiCreator/widgets/interactions/helpers/resourceManager.js","../qtiCreator/widgets/interactions/helpers/imageSelector.js","../qtiCreator/tpl/forms/interactions/graphicAssociate!tpl","../qtiCreator/tpl/forms/choices/associableHotspot!tpl","../qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Question.js","../qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Answer.js","../qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Correct.js","../qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Map.js","../qtiCreator/widgets/interactions/graphicAssociateInteraction/states/states.js","../qtiCreator/widgets/interactions/graphicAssociateInteraction/Widget.js","../qtiCreator/renderers/interactions/GraphicAssociateInteraction.js","../qtiCommonRenderer/tpl/interactions/graphicGapMatchInteraction!tpl","../qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction.js","../qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Sleep.js","../qtiCreator/tpl/forms/interactions/graphicGapMatch!tpl","../qtiCreator/tpl/forms/choices/gapImg!tpl","../qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Question.js","../qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Answer.js","../qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Correct.js","../qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Map.js","../qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/states.js","../qtiCommonRenderer/tpl/choices/gapImg!tpl","../qtiCreator/widgets/interactions/graphicGapMatchInteraction/Widget.js","../qtiCreator/renderers/interactions/GraphicGapMatchInteraction.js","../qtiCommonRenderer/tpl/interactions/graphicOrderInteraction!tpl","../qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction.js","../qtiCreator/widgets/interactions/graphicOrderInteraction/states/Sleep.js","../qtiCreator/tpl/forms/interactions/graphicOrder!tpl","../qtiCreator/tpl/forms/choices/hotspot!tpl","../qtiCreator/widgets/interactions/graphicOrderInteraction/states/Question.js","../qtiCreator/widgets/interactions/graphicOrderInteraction/states/Answer.js","../qtiCreator/widgets/interactions/graphicOrderInteraction/states/Correct.js","../qtiCreator/widgets/interactions/graphicOrderInteraction/states/states.js","../qtiCreator/widgets/interactions/graphicOrderInteraction/Widget.js","../qtiCreator/renderers/interactions/GraphicOrderInteraction.js","../qtiCommonRenderer/tpl/interactions/hotspotInteraction!tpl","../qtiCommonRenderer/renderers/interactions/HotspotInteraction.js","../qtiCreator/widgets/interactions/hotspotInteraction/states/Sleep.js","../qtiCreator/tpl/forms/interactions/hotspot!tpl","../qtiCreator/widgets/interactions/hotspotInteraction/states/Question.js","../qtiCreator/widgets/interactions/hotspotInteraction/states/Answer.js","../qtiCreator/widgets/interactions/hotspotInteraction/states/Correct.js","../qtiCreator/widgets/interactions/helpers/graphicScorePopup.js","../qtiCreator/tpl/forms/response/graphicScoreMappingForm!tpl","../qtiCreator/widgets/interactions/hotspotInteraction/states/Map.js","../qtiCreator/widgets/interactions/hotspotInteraction/states/states.js","../qtiCreator/widgets/interactions/hotspotInteraction/Widget.js","../qtiCreator/renderers/interactions/HotspotInteraction.js","../qtiCommonRenderer/tpl/interactions/hottextInteraction!tpl","../qtiCommonRenderer/renderers/interactions/HottextInteraction.js","../qtiCreator/tpl/forms/interactions/hottext!tpl","tpl!taoQtiItem/qtiCreator/tpl/toolbars/hottext-create","../qtiCreator/widgets/interactions/hottextInteraction/states/Question.js","../qtiCreator/widgets/interactions/hottextInteraction/states/Answer.js","../qtiCreator/widgets/interactions/hottextInteraction/states/Correct.js","../qtiCreator/widgets/interactions/hottextInteraction/states/Map.js","../qtiCreator/widgets/interactions/hottextInteraction/states/states.js","../qtiCreator/widgets/interactions/hottextInteraction/Widget.js","../qtiCreator/renderers/interactions/HottextInteraction.js","../qtiCommonRenderer/tpl/interactions/inlineChoiceInteraction!tpl","../qtiCommonRenderer/renderers/interactions/InlineChoiceInteraction.js","../qtiCreator/widgets/choices/inlineChoice/states/Question.js","../qtiCreator/widgets/choices/inlineChoice/states/Choice.js","../qtiCreator/widgets/choices/inlineChoice/states/states.js","../qtiCreator/widgets/choices/inlineChoice/Widget.js","../qtiCreator/tpl/forms/interactions/inlineChoice!tpl","../qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Question.js","../qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Answer.js","../qtiCreator/widgets/interactions/inlineChoiceInteraction/ResponseWidget.js","../qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Correct.js","../qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Map.js","../qtiCreator/widgets/interactions/inlineChoiceInteraction/states/states.js","../qtiCreator/tpl/inlineInteraction/inlineChoiceInteraction!tpl","../qtiCreator/tpl/inlineInteraction/inlineChoice!tpl","../qtiCreator/widgets/interactions/inlineChoiceInteraction/Widget.js","../qtiCreator/tpl/inlineInteraction/inlineChoiceInteraction.placeholder!tpl","../qtiCreator/renderers/interactions/InlineChoiceInteraction.js","../qtiCommonRenderer/tpl/interactions/matchInteraction!tpl","../qtiCommonRenderer/renderers/interactions/MatchInteraction.js","../qtiCreator/tpl/toolbars/matchInteraction.adder!tpl","../qtiCreator/tpl/interactions/matchInteraction.row!tpl","../qtiCreator/tpl/interactions/matchInteraction.cell!tpl","../qtiCreator/widgets/interactions/matchInteraction/states/Question.js","../qtiCreator/widgets/interactions/matchInteraction/states/Answer.js","../qtiCreator/tpl/toolbars/matchInteraction.score!tpl","../qtiCreator/widgets/interactions/matchInteraction/ResponseWidget.js","../qtiCreator/widgets/interactions/matchInteraction/states/Correct.js","../qtiCreator/widgets/interactions/matchInteraction/states/Map.js","../qtiCreator/widgets/interactions/matchInteraction/states/states.js","../qtiCreator/widgets/interactions/matchInteraction/Widget.js","../qtiCreator/renderers/interactions/MatchInteraction.js","../qtiCommonRenderer/tpl/interactions/mediaInteraction!tpl","../qtiCommonRenderer/renderers/interactions/MediaInteraction.js","../qtiCreator/tpl/forms/interactions/media!tpl","../qtiCreator/widgets/interactions/mediaInteraction/states/Question.js","../qtiCreator/widgets/interactions/mediaInteraction/states/Sleep.js","../qtiCreator/widgets/interactions/mediaInteraction/states/states.js","../qtiCreator/widgets/interactions/mediaInteraction/Widget.js","../qtiCreator/tpl/interactions/mediaInteraction!tpl","../qtiCreator/renderers/interactions/MediaInteraction.js","../qtiCommonRenderer/tpl/interactions/orderInteraction!tpl","../qtiCommonRenderer/renderers/interactions/OrderInteraction.js","../qtiCreator/widgets/interactions/orderInteraction/states/Question.js","../qtiCreator/widgets/interactions/orderInteraction/states/Answer.js","../qtiCreator/widgets/interactions/orderInteraction/states/Correct.js","../qtiCreator/widgets/interactions/orderInteraction/states/states.js","../qtiCreator/widgets/interactions/orderInteraction/Widget.js","../qtiCreator/renderers/interactions/OrderInteraction.js","../qtiCommonRenderer/tpl/interactions/customInteraction!tpl","../runtime/qtiCustomInteractionContext.js","../qtiCommonRenderer/renderers/interactions/PortableCustomInteraction.js","../qtiCreator/renderers/interactions/PortableCustomInteraction.js","../qtiCommonRenderer/tpl/interactions/selectPointInteraction!tpl","../qtiCommonRenderer/renderers/interactions/SelectPointInteraction.js","../qtiCreator/widgets/interactions/selectPointInteraction/states/Sleep.js","../qtiCreator/tpl/forms/interactions/selectPoint!tpl","../qtiCreator/widgets/interactions/selectPointInteraction/states/Question.js","../qtiCreator/widgets/interactions/selectPointInteraction/states/Answer.js","../qtiCreator/widgets/interactions/selectPointInteraction/states/Map.js","../qtiCreator/widgets/interactions/selectPointInteraction/states/states.js","../qtiCreator/widgets/interactions/selectPointInteraction/Widget.js","../qtiCreator/renderers/interactions/SelectPointInteraction.js","../qtiCommonRenderer/tpl/interactions/sliderInteraction!tpl","../qtiCommonRenderer/renderers/interactions/SliderInteraction.js","../qtiCreator/tpl/forms/interactions/slider!tpl","../qtiCreator/widgets/interactions/sliderInteraction/states/Question.js","../qtiCreator/widgets/interactions/sliderInteraction/states/Answer.js","../qtiCreator/widgets/interactions/sliderInteraction/states/Correct.js","../qtiCreator/widgets/interactions/sliderInteraction/states/states.js","../qtiCreator/widgets/interactions/sliderInteraction/Widget.js","../qtiCreator/renderers/interactions/SliderInteraction.js","../qtiCommonRenderer/tpl/interactions/textEntryInteraction!tpl","../qtiCommonRenderer/renderers/interactions/TextEntryInteraction.js","../qtiCreator/tpl/forms/interactions/textEntry!tpl","../qtiCreator/widgets/interactions/textEntryInteraction/states/Question.js","../qtiCreator/widgets/interactions/textEntryInteraction/states/Answer.js","../qtiCreator/widgets/interactions/textEntryInteraction/states/Correct.js","../qtiCreator/tpl/inlineInteraction/textEntry!tpl","../qtiCreator/widgets/interactions/textEntryInteraction/states/Map.js","../qtiCreator/widgets/interactions/textEntryInteraction/states/states.js","../qtiCreator/tpl/inlineInteraction/textEntryInteraction!tpl","../qtiCreator/widgets/interactions/textEntryInteraction/Widget.js","../qtiCreator/tpl/inlineInteraction/textEntryInteraction.placeholder!tpl","../qtiCreator/renderers/interactions/TextEntryInteraction.js","../qtiCommonRenderer/tpl/interactions/uploadInteraction!tpl","../qtiCommonRenderer/renderers/interactions/UploadInteraction.js","../qtiCreator/tpl/forms/interactions/upload!tpl","../qtiCreator/widgets/interactions/uploadInteraction/states/Question.js","../qtiCreator/widgets/interactions/uploadInteraction/states/states.js","../qtiCreator/widgets/interactions/uploadInteraction/Widget.js","../qtiCreator/tpl/interactions/uploadInteraction!tpl","../qtiCreator/renderers/interactions/UploadInteraction.js","../qtiCreator/widgets/interactions/customInteraction/Widget.js","../qtiCreator/widgets/interactions/customInteraction/states/Question.js","../qtiCreator/widgets/interactions/customInteraction/states/Sleep.js","../qtiCreator/widgets/interactions/customInteraction/states/states.js","../qtiCreator/widgets/interactions/mediaInteraction/states/Answer.js","../qtiCreator/widgets/static/portableInfoControl/Widget.js","../qtiCreator/widgets/static/portableInfoControl/states/Sleep.js","../qtiCreator/widgets/static/portableInfoControl/states/states.js","../qtiXmlRenderer/tpl/container!tpl","../qtiXmlRenderer/renderers/Container.js","../qtiXmlRenderer/tpl/element!tpl","../qtiXmlRenderer/renderers/Img.js","../qtiXmlRenderer/tpl/item!tpl","../qtiXmlRenderer/renderers/Item.js","../qtiXmlRenderer/renderers/Math.js","../qtiXmlRenderer/renderers/Object.js","../qtiXmlRenderer/tpl/outcomeDeclaration!tpl","../qtiXmlRenderer/renderers/OutcomeDeclaration.js","../qtiXmlRenderer/tpl/portableInfoControl!tpl","../qtiXmlRenderer/tpl/interactions/portableCustomInteraction/properties!tpl","../qtiXmlRenderer/helper/portableElementTpl.js","../qtiXmlRenderer/renderers/PortableInfoControl.js","../qtiXmlRenderer/tpl/responseDeclaration!tpl","../qtiXmlRenderer/renderers/ResponseDeclaration.js","../qtiXmlRenderer/tpl/responseProcessing!tpl","../qtiXmlRenderer/tpl/responses/match_correct!tpl","../qtiXmlRenderer/tpl/responses/map_response!tpl","../qtiXmlRenderer/tpl/responses/map_response_point!tpl","../qtiXmlRenderer/renderers/ResponseProcessing.js","../qtiXmlRenderer/renderers/RubricBlock.js","../qtiXmlRenderer/renderers/Stylesheet.js","../qtiXmlRenderer/renderers/choices/AssociableHotspot.js","../qtiXmlRenderer/renderers/choices/Gap.js","../qtiXmlRenderer/tpl/choices/gapImg!tpl","../qtiXmlRenderer/renderers/choices/GapImg.js","../qtiXmlRenderer/renderers/choices/GapText.js","../qtiXmlRenderer/renderers/choices/HotspotChoice.js","../qtiXmlRenderer/renderers/choices/Hottext.js","../qtiXmlRenderer/renderers/choices/InlineChoice.js","../qtiXmlRenderer/renderers/choices/SimpleAssociableChoice.js","../qtiXmlRenderer/renderers/choices/SimpleChoice.js","../qtiXmlRenderer/renderers/feedbacks/ModalFeedback.js","../qtiXmlRenderer/tpl/interactions/blockInteraction!tpl","../qtiXmlRenderer/renderers/interactions/AssociateInteraction.js","../qtiXmlRenderer/renderers/interactions/ChoiceInteraction.js","../qtiXmlRenderer/renderers/interactions/EndAttemptInteraction.js","../qtiXmlRenderer/renderers/interactions/ExtendedTextInteraction.js","../qtiXmlRenderer/renderers/interactions/GapMatchInteraction.js","../qtiXmlRenderer/renderers/interactions/GraphicAssociateInteraction.js","../qtiXmlRenderer/tpl/interactions/graphicGapMatchInteraction!tpl","../qtiXmlRenderer/renderers/interactions/GraphicGapMatchInteraction.js","../qtiXmlRenderer/renderers/interactions/GraphicOrderInteraction.js","../qtiXmlRenderer/renderers/interactions/HotspotInteraction.js","../qtiXmlRenderer/tpl/interactions/hottextInteraction!tpl","../qtiXmlRenderer/renderers/interactions/HottextInteraction.js","../qtiXmlRenderer/renderers/interactions/InlineChoiceInteraction.js","../qtiXmlRenderer/tpl/interactions/matchInteraction!tpl","../qtiXmlRenderer/renderers/interactions/MatchInteraction.js","../qtiXmlRenderer/tpl/interactions/mediaInteraction!tpl","../qtiXmlRenderer/renderers/interactions/MediaInteraction.js","../qtiXmlRenderer/renderers/interactions/OrderInteraction.js","../qtiXmlRenderer/tpl/interactions/portableCustomInteraction/main!tpl","../qtiXmlRenderer/renderers/interactions/PortableCustomInteraction.js","../qtiXmlRenderer/renderers/interactions/Prompt.js","../qtiXmlRenderer/renderers/interactions/SelectPointInteraction.js","../qtiXmlRenderer/renderers/interactions/SliderInteraction.js","../qtiXmlRenderer/renderers/interactions/TextEntryInteraction.js","../qtiXmlRenderer/renderers/interactions/UploadInteraction.js","../qtiXmlRenderer/tpl/responses/rule!tpl","../qtiXmlRenderer/tpl/responses/rule_condition!tpl","../qtiXmlRenderer/tpl/responses/rule_correct!tpl","../qtiXmlRenderer/tpl/responses/rule_incorrect!tpl","../qtiXmlRenderer/renderers/responses/SimpleFeedbackRule.js"],"names":[],"mappings":"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","sourcesContent":["/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n * \n * \n */\n\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\ndefine('taoQtiItem/controller/routes',[],function(){\n    'use strict';\n\n    return {\n        'QtiPreview' : {\n            'actions' : {\n                'index' : 'taoItems/controller/preview/itemRunner'\n            }\n        },\n        'QtiCreator' : {\n            'actions' : {\n                'index' : 'controller/creator/main'\n            }\n        }\n    };\n});\n\n","define('taoQtiItem/qtiCreator/model/helper/event',['jquery', 'lodash'], function($, _){\n    \"use strict\";\n    var _ns = '.qti-creator';\n    var _ns_model = '.qti-creator';\n    var eventList = [\n        'containerBodyChange',\n        'containerElementAdded',\n        'elementCreated.qti-widget',\n        'attributeChange.qti-widget',\n        'choiceCreated.qti-widget',\n        'correctResponseChange.qti-widget',\n        'mapEntryChange.qti-widget',\n        'mapEntryRemove.qti-widget',\n        'deleted.qti-widget',\n        'choiceTextChange.qti-widget',\n        'responseTemplateChange.qti-widget',\n        'mappingAttributeChange.qti-widget',\n        'feedbackRuleConditionChange.qti-widget',\n        'feedbackRuleCreated.qti-widget',\n        'feedbackRuleRemoved.qti-widget',\n        'feedbackRuleElseCreated.qti-widget',\n        'feedbackRuleElseRemoved.qti-widget'\n    ];\n\n    var event = {\n        choiceCreated : function(choice, interaction){\n            $(document).trigger('choiceCreated.qti-widget', {choice : choice, interaction : interaction});\n        },\n        deleted : function(element, parent){\n\n            if(element.isset()){\n                element.unset();\n            }\n\n            $(document).off('.' + element.getSerial());\n            $(document).trigger('deleted.qti-widget', {element : element, parent : parent});\n        },\n        getList : function(addedNamespace){\n            var events = _.clone(eventList);\n            if(addedNamespace){\n                return _.map(events, function(e){\n                    return e + '.' + addedNamespace;\n                });\n            }else{\n                return events;\n            }\n        },\n        initElementToWidgetListeners : function(){\n\n            var ns = '.widget-container';\n\n            //forward all event to the widget $container\n            $(document).off(ns).on(event.getList(ns).join(' '), function(e, data){\n                var element = data.element || data.container || null;\n                if(data && element && element.data('widget')){\n                    element.data('widget').$container.trigger(e.type + _ns + _ns_model, data);\n                }\n            });\n\n        },\n        getNs : function(){\n            return _ns;\n        },\n        getNsModel : function(){\n            return _ns_model;\n        }\n    };\n\n    return event;\n});\n","/**\n * Common basic util functions\n */\ndefine('taoQtiItem/qtiItem/helper/util',['lodash'], function(_){\n    var util = {\n        buildSerial : function buildSerial(prefix){\n            var id = prefix || '';\n            var chars = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n            for(var i = 0; i < 22; i++){\n                id += chars.charAt(Math.floor(Math.random() * chars.length));\n            }\n            return id;\n        },\n        fullpath : function fullpath(src, baseUrl){\n\n            src = src || '';\n            baseUrl = baseUrl || '';\n\n            if(src){\n\n                src = src.replace(/^\\//, '');\n\n                if(!src.match(/^http/i)){\n\n                    if(baseUrl && !baseUrl.match(/\\/$/)){\n                        baseUrl += '/';\n                    }\n\n                    src = baseUrl + src;\n                }\n            }\n\n            return src;\n        },\n        findInCollection : function findInCollection(element, collectionNames, searchedSerial){\n\n            var found = null;\n\n            if(_.isString(collectionNames)){\n                collectionNames = [collectionNames];\n            }\n\n            if(_.isArray(collectionNames)){\n\n                _.each(collectionNames, function(collectionName){\n\n                    //get collection to search in (resolving case like interaction.choices.0\n                    var collection = element;\n                    _.each(collectionName.split('.'), function(nameToken){\n                        collection = collection[nameToken];\n                    });\n                    var elt = collection[searchedSerial];\n\n                    if(elt){\n                        found = {'parent' : element, 'element' : elt};\n                        return false;//break the each loop\n                    }\n\n                    //search inside each elements:\n                    _.each(collection, function(elt){\n\n                        if(_.isFunction(elt.find)){\n                            found = elt.find(searchedSerial);\n                            if(found){\n                                return false;//break the each loop\n                            }\n                        }\n\n                    });\n\n                    if(found){\n                        return false;//break the each loop\n                    }\n\n                });\n\n            }else{\n\n                throw new Error('invalid argument : collectionNames must be an array or a string');\n            }\n\n            return found;\n        },\n        addMarkupNamespace : function addMarkupNamespace(markup, ns){\n            if(ns) {\n                markup = markup.replace(/<(\\/)?([a-z]+)(\\s?)([^><]*)>/g, '<$1' + ns + ':$2$3$4>');\n                return markup;\n            }\n            return markup;\n\n        },\n        removeMarkupNamespaces : function removeMarkupNamespace(markup){\n            return markup.replace(/<(\\/)?(\\w*):([^>]*)>/g, '<$1$3>');\n        },\n        getMarkupUsedNamespaces : function getMarkupUsedNamespaces(markup){\n            var namespaces = [];\n            markup.replace(/<(\\/)?(\\w*):([^>]*)>/g, function(original, slash, ns, node){\n                namespaces.push(ns);\n                return '<'+slash+node+'>';\n            });\n            return _.uniq(namespaces);\n        }\n    };\n\n    return util;\n});\n","define('taoQtiItem/qtiItem/helper/rendererConfig',['lodash', 'jquery'], function(_, $){\n\n    var rendererConfigHelper = {};\n\n    rendererConfigHelper.getOptionsFromArguments = function(args){\n\n        var options = {\n            data : {},\n            placeholder : null,\n            subclass : '',\n            renderer : null\n        };\n        \n        _.each(args, function(arg){\n            if(arg){\n                if(arg.isRenderer){\n                    options.renderer = arg;\n                }else if(arg instanceof $ && arg.length){\n                    options.placeholder = arg;\n                }else if(_.isString(arg)){\n                    options.subclass = arg;\n                }else if(_.isPlainObject(arg)){\n                    options.data = arg;\n                }else{\n                    console.log('invalid arg', arg, args);\n                }\n            }\n        });\n        \n        return options;\n    };\n    \n    return rendererConfigHelper;\n});\n\n","define('taoQtiItem/qtiItem/core/Element',['jquery', 'class', 'lodash', 'taoQtiItem/qtiItem/helper/util', 'taoQtiItem/qtiItem/helper/rendererConfig'], function($, Class, _, util, rendererConfig){\n\n    var _instances = {};\n\n    var Element = Class.extend({\n        qtiClass : '',\n        serial : '',\n        relatedItem : null,\n        init : function(serial, attributes){\n\n            //init own attributes\n            this.attributes = {};\n\n            //system properties, for item creator internal use only\n            this.metaData = {};\n\n            //init call in the format init(attributes)\n            if(typeof (serial) === 'object'){\n                attributes = serial;\n                serial = '';\n            }\n\n            if(!serial){\n                serial = util.buildSerial(this.qtiClass + '_');\n            }\n\n            if(serial && (typeof serial !== 'string' || !serial.match(/^[a-z_0-9]*$/i))){\n                throw 'invalid QTI serial : (' + (typeof serial) + ') ' + serial;\n            }\n\n            if(!_instances[serial]){\n                _instances[serial] = this;\n                this.serial = serial;\n                this.setAttributes(attributes || {});\n            }else{\n                throw 'a QTI Element with the same serial already exists ' + serial;\n            }\n\n            if(typeof this.initContainer === 'function'){\n                this.initContainer(arguments[2] || '');\n            }\n            if(typeof this.initObject === 'function'){\n                this.initObject();\n            }\n        },\n        is : function(qtiClass){\n            return (qtiClass === this.qtiClass);\n        },\n        placeholder : function(){\n            return '{{' + this.serial + '}}';\n        },\n        getSerial : function(){\n            return this.serial;\n        },\n        getUsedIdentifiers : function(){\n            var usedIds = {};\n            var elts = this.getComposingElements();\n            for(var i in elts){\n                var elt = elts[i];\n                var id = elt.attr('identifier');\n                if(id){\n                    //warning: simplistic implementation, allow only one unique identifier in the item no matter the element class/type\n                    usedIds[id] = elt;\n                }\n            }\n            return usedIds;\n        },\n        attr : function(name, value){\n            if(name){\n                if(value !== undefined){\n                    this.attributes[name] = value;\n                }else{\n                    if(typeof (name) === 'object'){\n                        for(var prop in name){\n                            this.attr(prop, name[prop]);\n                        }\n                    }else if(typeof (name) === 'string'){\n                        if(this.attributes[name] === undefined){\n                            return undefined;\n                        }else{\n                            return this.attributes[name];\n                        }\n                    }\n                }\n            }\n            return this;\n        },\n        data : function(name, value){\n            if(name){\n                if(value !== undefined){\n                    this.metaData[name] = value;\n                    $(document).trigger('metaChange.qti-widget', {element : this, key : name, value : value});\n                }else{\n                    if(typeof (name) === 'object'){\n                        for(var prop in name){\n                            this.data(prop, name[prop]);\n                        }\n                    }else if(typeof (name) === 'string'){\n                        if(this.metaData[name] === undefined){\n                            return undefined;\n                        }else{\n                            return this.metaData[name];\n                        }\n                    }\n                }\n            }\n            return this;\n        },\n        removeData : function(name){\n            delete this.metaData[name];\n            return this;\n        },\n        removeAttr : function(name){\n            return this.removeAttributes(name);\n        },\n        setAttributes : function(attributes){\n            this.attributes = attributes;\n            return this;\n        },\n        getAttributes : function(){\n            return _.clone(this.attributes);\n        },\n        removeAttributes : function(attrNames){\n            if(typeof (attrNames) === 'string'){\n                attrNames = [attrNames];\n            }\n            for(var i in attrNames){\n                delete this.attributes[attrNames[i]];\n            }\n            return this;\n        },\n        getComposingElements : function(){\n            var elts = {};\n            function append(element){\n                elts[element.getSerial()] = element;//pass individual object by ref, instead of the whole list(object)\n                elts = _.extend(elts, element.getComposingElements());\n            }\n            if(typeof this.initContainer === 'function'){\n                append(this.getBody());\n            }\n            if(typeof this.initObject === 'function'){\n                append(this.getObject());\n            }\n            _.each(this.metaData, function(v){\n                if(Element.isA(v, '_container')){\n                    append(v);\n                }else if(_.isArray(v)){\n                    _.each(v, function(v){\n                        if(Element.isA(v, '_container')){\n                            append(v);\n                        }\n                    });\n                }\n            });\n            return elts;\n        },\n        getUsedClasses : function(){\n\n            var ret = [this.qtiClass],\n                composingElts = this.getComposingElements();\n\n            _.each(composingElts, function(elt){\n                ret.push(elt.qtiClass);\n            });\n\n            return _.uniq(ret);\n        },\n        find : function(serial){\n\n            var found = null;\n\n            if(typeof this.initObject === 'function'){\n                var object = this.getObject();\n                if(object.serial === serial){\n                    found = {'parent' : this, 'element' : object, 'location' : 'object'};\n                }\n            }\n\n            if(!found && typeof this.initContainer === 'function'){\n                found = this.getBody().find(serial, this);\n            }\n\n            return found;\n        },\n        parent : function(){\n            var item = this.getRelatedItem();\n            if(item){\n                var found = item.find(this.getSerial());\n                if(found){\n                    return found.parent;\n                }\n            }\n            return null;\n        },\n        setRelatedItem : function(item, recursive){\n\n            recursive = (typeof recursive === 'undefined') ? true : recursive;\n\n            if(Element.isA(item, 'assessmentItem')){\n                this.relatedItem = item;\n                var composingElts = this.getComposingElements();\n                for(var i in composingElts){\n                    composingElts[i].setRelatedItem(item, false);\n                }\n            }\n\n        },\n        getRelatedItem : function(){\n            var ret = null;\n            if(Element.isA(this.relatedItem, 'assessmentItem')){\n                ret = this.relatedItem;\n            }\n            return ret;\n        },\n        setRenderer : function(renderer){\n            if(renderer && renderer.isRenderer){\n                this.renderer = renderer;\n                var elts = this.getComposingElements();\n                for(var serial in elts){\n                    elts[serial].setRenderer(renderer);\n                }\n            }else{\n                throw 'invalid qti rendering engine';\n            }\n        },\n        getRenderer : function(){\n            return this.renderer;\n        },\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments);\n            var renderer = args.renderer || this.getRenderer();\n\n            var tplData = {},\n                defaultData = {\n                    'tag' : this.qtiClass,\n                    'serial' : this.serial,\n                    'attributes' : this.getAttributes()\n                };\n\n            if(!renderer){\n                throw 'render: no renderer found for the element ' + this.qtiClass + ':' + this.serial;\n            }\n\n            if(typeof this.initContainer === 'function'){\n                defaultData.body = this.getBody().render(renderer);\n            }\n            if(typeof this.initObject === 'function'){\n                defaultData.object = {\n                    attributes : this.object.getAttributes()\n                };\n                defaultData.object.attributes.data = renderer.getAbsoluteUrl(this.object.attr('data'));\n            }\n\n            tplData = _.merge(defaultData, args.data || {});\n            tplData = renderer.getData(this, tplData, args.subclass);\n            var rendering = renderer.renderTpl(this, tplData, args.subclass);\n            if(args.placeholder){\n                args.placeholder.replaceWith(rendering);\n            }\n\n            return rendering;\n        },\n        postRender : function(data, altClassName, renderer){\n\n            renderer = renderer || this.getRenderer();\n\n            if(typeof this.initContainer === 'function'){\n                //post render body element\n                this.getBody().postRender({}, '', renderer);\n            }\n\n            if(renderer){\n                return renderer.postRender(this, data, altClassName);\n            }else{\n                throw 'postRender: no renderer found for the element ' + this.qtiClass + ':' + this.serial;\n            }\n        },\n        getContainer : function($scope, subclass){\n            var renderer = this.getRenderer();\n            if(renderer){\n                return renderer.getContainer(this, $scope, subclass);\n            }else{\n                throw 'getContainer: no renderer found for the element ' + this.qtiClass + ':' + this.serial;\n            }\n        },\n        toArray : function(){\n            var arr = {\n                serial : this.serial,\n                type : this.qtiClass,\n                attributes : this.getAttributes()\n            };\n\n            if(typeof this.initContainer === 'function'){\n                arr.body = this.getBody().toArray();\n            }\n            if(typeof this.initObject === 'function'){\n                arr.object = this.object.toArray();\n            }\n\n            return arr;\n        },\n        isEmpty : function(){\n            //tells whether the element should be considered empty or not, from the rendering point of view\n            return false;\n        },\n        addClass : function(className){\n            var clazz = this.attr('class') || '';\n            if(!_containClass(clazz, className)){\n                this.attr('class', clazz + (clazz.length ? ' ' : '') + className);\n            }\n        },\n        hasClass : function(className){\n            return _containClass(this.attr('class'), className);\n        },\n        removeClass : function(className){\n\n            var clazz = this.attr('class') || '';\n            if(clazz){\n                var regex = new RegExp('(?:^|\\\\s)' + className + '(?:\\\\s|$)', '');\n                clazz = clazz.replace(regex, '').replace(/^\\s+/, '');\n                if(clazz){\n                    this.attr('class', clazz);\n                }else{\n                    this.removeAttr('class');\n                }\n            }\n        },\n        isset : function(){\n            return Element.issetElement(this.serial);\n        },\n        unset : function(){\n            return Element.unsetElement(this.serial);\n        }\n    });\n\n    var _containClass = function(allClassStr, className){\n        var regex = new RegExp('(?:^|\\\\s)' + className + '(?:\\\\s|$)', '');\n        return allClassStr && regex.test(allClassStr);\n    };\n\n    //helpers\n    Element.isA = function(qtiElement, qtiClass){\n        return (qtiElement instanceof Element && qtiElement.is(qtiClass));\n    };\n\n    Element.getElementBySerial = function(serial){\n        return _instances[serial];\n    };\n\n    Element.issetElement = function(serial){\n        return !!_instances[serial];\n    };\n   \n    /**\n     * Unset a registered element from it's serial\n     * @param {String} serial - the element serial\n     * @returns {Boolean} true if unset\n     */ \n    Element.unsetElement = function(serial){\n\n        var element = Element.getElementBySerial(serial);\n\n        if(element){\n\n            var composingElements = element.getComposingElements();\n            _.each(composingElements, function(elt){\n                delete _instances[elt.serial];\n            });\n            delete _instances[element.serial];\n            \n            return true;\n        }\n        return false;\n    };\n\n    return Element;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/helper/panel',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiItem/core/Element'\n], function($, _, Element){\n    \"use strict\";\n    var _getItemContainer = function(){\n        return $('#item-editor-panel');\n    };\n\n    var showPanel = function($panel, $fold){\n\n        $panel.show();\n        openSections($panel.children('section'));\n\n        if($fold && $fold.length){\n            closeSections($fold.children('section'));\n        }\n    };\n\n    var initFormVisibilityListener = function(){\n\n        //first of all, clear all listener\n        $(document).off('.panel');\n\n        var $itemContainer = _getItemContainer();\n\n        var _staticElements = {\n            img : 'Image',\n            object : 'Media',\n            rubricBlock : 'Rubric Block',\n            math : 'Math'\n        };\n\n        // all sections on the right sidebar are invisible by default\n        var $formInteractionPanel = $('#item-editor-interaction-property-bar'),\n            $formChoicePanel = $('#item-editor-choice-property-bar'),\n            $formResponsePanel = $('#item-editor-response-property-bar'),\n            $formItemPanel = $('#item-editor-item-property-bar'),\n            $formBodyElementPanel = $('#item-editor-body-element-property-bar'),\n            $formTextBlockPanel = $('#item-editor-text-property-bar'),\n            $formModalFeedbackPanel = $('#item-editor-modal-feedback-property-bar'),\n            $formStylePanel = $('#item-style-editor-bar'),\n            $appearanceToggler = $('#appearance-trigger'),\n            $menuLabel = $appearanceToggler.find('.menu-label'),\n            $itemIcon = $appearanceToggler.find('.icon-item'),\n            $styleIcon = $appearanceToggler.find('.icon-style');\n\n        var _toggleAppearanceEditor = function(active){\n\n            if(active){\n\n                $appearanceToggler.addClass('active');\n                $formStylePanel.show();\n                $formItemPanel.hide();\n\n                //current widget sleep:\n                $itemContainer.trigger('styleedit');\n\n                /* At the time of writing this the following sections are available:\n                 *\n                 * #sidebar-left-section-text\n                 * #sidebar-left-section-block-interactions\n                 * #sidebar-left-section-inline-interactions\n                 * #sidebar-left-section-graphic-interactions\n                 * #sidebar-left-section-media\n                 * #sidebar-right-css-manager\n                 * #sidebar-right-style-editor\n                 * #sidebar-right-item-properties\n                 * #sidebar-right-body-element-properties\n                 * #sidebar-right-text-block-properties\n                 * #sidebar-right-interaction-properties\n                 * #sidebar-right-choice-properties\n                 * #sidebar-right-response-properties\n                 */\n                showPanel($formStylePanel);\n                $menuLabel.text($menuLabel.data('item'));\n                $itemIcon.show();\n                $styleIcon.hide();\n            }else{\n                $appearanceToggler.removeClass('active');\n                $formStylePanel.hide();\n                showPanel($formItemPanel);\n                $menuLabel.text($menuLabel.data('style'));\n                $itemIcon.hide();\n                $styleIcon.show();\n            }\n        };\n\n        $appearanceToggler.on('click', function(){\n\n            if($appearanceToggler.hasClass('active')){\n                _toggleAppearanceEditor(false);\n            }else{\n                _toggleAppearanceEditor(true);\n            }\n        });\n\n        //@todo : fix this timeout event\n        _.delay(function(){\n            showPanel($formItemPanel);\n        }, 200);\n\n        $(document).on('afterStateInit.qti-widget.panel', function(e, element, state){\n\n            switch(state.name){\n                case 'active':\n\n                    _toggleAppearanceEditor(false);\n                    if(!Element.isA(element, 'assessmentItem')){\n                        $formItemPanel.hide();\n                    }\n\n                    var label = _staticElements[element.qtiClass];\n                    if(label){\n                        $formBodyElementPanel.find('h2').html(label + ' Properties');\n                        showPanel($formBodyElementPanel);\n                    }else if(element.qtiClass === '_container'){\n                        showPanel($formTextBlockPanel);\n                    }\n\n                    if(element.qtiClass === 'modalFeedback'){\n                        showPanel($formModalFeedbackPanel);\n                        $formResponsePanel.hide();\n                    }\n                    break;\n\n                case 'question':\n\n                    showPanel($formInteractionPanel);\n                    break;\n\n                case 'answer':\n\n                    showPanel($formResponsePanel);\n                    break;\n\n                case 'choice':\n                    showPanel($formChoicePanel, $formInteractionPanel);\n                    break;\n\n                case 'sleep':\n\n                    if(_staticElements[element.qtiClass]){\n                        $formBodyElementPanel.hide();\n                    }else if(element.qtiClass === '_container'){\n                        $formTextBlockPanel.hide();\n                    }\n\n                    if(!Element.isA(element, 'choice')){\n                        if(!$itemContainer.find('.widget-box.edit-active').length){\n                            showPanel($formItemPanel);\n                        }\n                    }\n                    break;\n            }\n\n        }).on('afterStateExit.qti-widget.panel', function(e, element, state){\n\n            switch(state.name){\n                case 'active':\n                    if(element.qtiClass === 'modalFeedback'){\n                        showPanel($formResponsePanel);\n                        $formModalFeedbackPanel.hide();\n                    }\n                    break;\n                case 'question':\n                    if(element.is('interaction')){\n                        $formChoicePanel.hide();\n                        $formInteractionPanel.hide();\n                    }\n                    break;\n                case 'choice':\n                    $formChoicePanel.hide();\n                    showPanel($formInteractionPanel);\n                    break;\n                case 'answer':\n                    $formResponsePanel.hide();\n                    break;\n            }\n\n        }).on('elementCreated.qti-widget.panel', function(e, data){\n\n            if(data.element.qtiClass === '_container'){\n                enableSubGroup('inline-interactions');\n            }\n\n        }).on('deleted.qti-widget.panel', function(e, data){\n\n            if(data.element.qtiClass === '_container'){\n                toggleInlineInteractionGroup();\n            }\n\n        });\n    };\n\n    var toggleInlineInteractionGroup = function(){\n\n        var $itemContainer = _getItemContainer();\n        if($itemContainer.find('.widget-textBlock').length){\n            enableSubGroup('inline-interactions');\n        }else{\n            disableSubGroup('inline-interactions');\n        }\n    };\n    \n    // selectors and classes\n    var heading = 'h2',\n        section = 'section',\n        panel = 'hr, .panel',\n        closed = 'closed',\n        ns = 'accordion';\n\n    var initSidebarAccordion = function($sidebar){\n\n        var $sections = $sidebar.find(section),\n            $allPanels = $sidebar.children(panel).hide(),\n            $allTriggers = $sidebar.find(heading);\n\n        if($allTriggers.length === 0){\n            return true;\n        }\n\n        // setup events\n        $allTriggers.each(function(){\n            var $heading = $(this),\n                $section = $heading.parents(section),\n                $panel = $section.children(panel),\n                $closer = $('<span>', {'class' : 'icon-up'}),\n                $opener = $('<span>', {'class' : 'icon-down'}),\n                action = $panel.is(':visible') ? 'open' : 'close';\n\n            $heading.append($closer).append($opener).addClass(closed);\n\n            // toggle heading class arrow (actually switch arrow)\n            $panel.on('panelclose.' + ns + ' panelopen.' + ns, function(e, args){\n                var fn = e.type === 'panelclose' ? 'add' : 'remove';\n                args.heading[fn + 'Class'](closed);\n            });\n\n            $panel.trigger('panel' + action + '.' + ns, {heading : $heading});\n        });\n\n        $sections.each(function(){\n\n            // assign click action to headings\n            $(this).find(heading).on('click', function(e, args){\n\n                var $heading = $(this),\n                    $panel = $heading.parents(section).children(panel),\n                    preserveOthers = !!(args && args.preserveOthers),\n                    actions = {\n                        close : 'hide',\n                        open : 'fadeIn'\n                    },\n                action,\n                    forceState = (args && args.forceState ? args.forceState : false),\n                    classFn;\n\n                if(forceState){\n                    classFn = forceState === 'open' ? 'addClass' : 'removeClass';\n                    $heading[classFn](closed);\n                }\n\n                action = $heading.hasClass(closed) ? 'open' : 'close';\n\n                // whether or not to close other sections in the same sidebar\n                // @todo (optional): remove 'false' in the condition below\n                // to change the style to accordion, i.e. to allow for only one open section\n                if(false && !preserveOthers){\n                    $allPanels.not($panel).each(function(){\n                        var $panel = $(this),\n                            $heading = $panel.parent().find(heading),\n                            _action = 'close';\n\n                        $panel.trigger('panel' + _action + '.' + ns, {heading : $heading})[actions[_action]]();\n                    });\n                }\n\n                $panel.trigger('panel' + action + '.' + ns, {heading : $heading})[actions[action]]();\n            });\n\n        });\n    };\n\n    /**\n     * Toggle section display\n     *\n     * @param sections\n     */\n    var _toggleSections = function(sections, preserveOthers, state){\n        sections.each(function(){\n            $(this).find(heading).trigger('click', {preserveOthers : preserveOthers, forceState : state});\n        });\n    }\n\n    /**\n     * Close specific sections\n     *\n     * @param sections\n     */\n    var closeSections = function(sections, preserveOthers){\n        _toggleSections(sections, !!preserveOthers, 'close');\n    };\n\n    /**\n     * Open specific sections\n     *\n     * @param sections\n     */\n    var openSections = function(sections, preserveOthers){\n        _toggleSections(sections, !!preserveOthers, 'open');\n    };\n\n    /**\n     * toggle availability of sub group\n     * @param subGroup\n     */\n    var _toggleSubGroup = function(subGroup, state){\n        subGroup = $('.' + subGroup);\n        if(subGroup.length){\n            var fn = state === 'disable' ? 'addClass' : 'removeClass';\n            subGroup.data('cover')[fn]('blocking');\n        }\n    };\n\n    /**\n     * enable sub group\n     * @param subGroup\n     */\n    var enableSubGroup = function(subGroup){\n        _toggleSubGroup(subGroup, 'enable');\n    };\n\n    /**\n     * disable sub group\n     * @param subGroup\n     */\n    var disableSubGroup = function(subGroup){\n        _toggleSubGroup(subGroup, 'disable');\n    };\n\n    return {\n        initFormVisibilityListener : initFormVisibilityListener,\n        showPanel : showPanel,\n        toggleInlineInteractionGroup : toggleInlineInteractionGroup,\n        initSidebarAccordion : initSidebarAccordion,\n        openSections : openSections,\n        closeSections : closeSections,\n        enableSubGroup : enableSubGroup,\n        disableSubGroup : disableSubGroup\n    };\n\n});\n\n","define('taoQtiItem/qtiItem/core/qtiClasses',[], function(){\n    return {\n        '_container' : 'taoQtiItem/qtiItem/core/Container',\n        'assessmentItem' : 'taoQtiItem/qtiItem/core/Item',\n        'responseProcessing' : 'taoQtiItem/qtiItem/core/ResponseProcessing',\n        '_simpleFeedbackRule' : 'taoQtiItem/qtiItem/core/response/SimpleFeedbackRule',\n        'stylesheet' : 'taoQtiItem/qtiItem/core/Stylesheet',\n        'math' : 'taoQtiItem/qtiItem/core/Math',\n        'img' : 'taoQtiItem/qtiItem/core/Img',\n        'object' : 'taoQtiItem/qtiItem/core/Object',\n        'outcomeDeclaration' : 'taoQtiItem/qtiItem/core/variables/OutcomeDeclaration',\n        'responseDeclaration' : 'taoQtiItem/qtiItem/core/variables/ResponseDeclaration',\n        'rubricBlock' : 'taoQtiItem/qtiItem/core/RubricBlock',\n        'associableHotspot' : 'taoQtiItem/qtiItem/core/choices/AssociableHotspot',\n        'gap' : 'taoQtiItem/qtiItem/core/choices/Gap',\n        'gapImg' : 'taoQtiItem/qtiItem/core/choices/GapImg',\n        'gapText' : 'taoQtiItem/qtiItem/core/choices/GapText',\n        'hotspotChoice' : 'taoQtiItem/qtiItem/core/choices/HotspotChoice',\n        'hottext' : 'taoQtiItem/qtiItem/core/choices/Hottext',\n        'inlineChoice' : 'taoQtiItem/qtiItem/core/choices/InlineChoice',\n        'simpleAssociableChoice' : 'taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice',\n        'simpleChoice' : 'taoQtiItem/qtiItem/core/choices/SimpleChoice',\n        'associateInteraction' : 'taoQtiItem/qtiItem/core/interactions/AssociateInteraction',\n        'choiceInteraction' : 'taoQtiItem/qtiItem/core/interactions/ChoiceInteraction',\n        'endAttemptInteraction' : 'taoQtiItem/qtiItem/core/interactions/EndAttemptInteraction',\n        'extendedTextInteraction' : 'taoQtiItem/qtiItem/core/interactions/ExtendedTextInteraction',\n        'gapMatchInteraction' : 'taoQtiItem/qtiItem/core/interactions/GapMatchInteraction',\n        'graphicAssociateInteraction' : 'taoQtiItem/qtiItem/core/interactions/GraphicAssociateInteraction',\n        'graphicGapMatchInteraction' : 'taoQtiItem/qtiItem/core/interactions/GraphicGapMatchInteraction',\n        'graphicOrderInteraction' : 'taoQtiItem/qtiItem/core/interactions/GraphicOrderInteraction',\n        'hotspotInteraction' : 'taoQtiItem/qtiItem/core/interactions/HotspotInteraction',\n        'hottextInteraction' : 'taoQtiItem/qtiItem/core/interactions/HottextInteraction',\n        'inlineChoiceInteraction' : 'taoQtiItem/qtiItem/core/interactions/InlineChoiceInteraction',\n        'matchInteraction' : 'taoQtiItem/qtiItem/core/interactions/MatchInteraction',\n        'mediaInteraction' : 'taoQtiItem/qtiItem/core/interactions/MediaInteraction',\n        'orderInteraction' : 'taoQtiItem/qtiItem/core/interactions/OrderInteraction',\n        'prompt' : 'taoQtiItem/qtiItem/core/interactions/Prompt',\n        'selectPointInteraction' : 'taoQtiItem/qtiItem/core/interactions/SelectPointInteraction',\n        'sliderInteraction' : 'taoQtiItem/qtiItem/core/interactions/SliderInteraction',\n        'textEntryInteraction' : 'taoQtiItem/qtiItem/core/interactions/TextEntryInteraction',\n        'uploadInteraction' : 'taoQtiItem/qtiItem/core/interactions/UploadInteraction',\n        'feedbackBlock' : 'taoQtiItem/qtiItem/core/feedbacks/FeedbackBlock',\n        'feedbackInline' : 'taoQtiItem/qtiItem/core/feedbacks/FeedbackInline',\n        'modalFeedback' : 'taoQtiItem/qtiItem/core/feedbacks/ModalFeedback',\n        'customInteraction' : 'taoQtiItem/qtiItem/core/interactions/CustomInteraction',\n        'infoControl' : 'taoQtiItem/qtiItem/core/PortableInfoControl'\n    };\n});\n","//@todo : move this to the ../helper directory\ndefine('taoQtiItem/qtiItem/core/Loader',['lodash', 'class', 'taoQtiItem/qtiItem/core/qtiClasses', 'taoQtiItem/qtiItem/core/Element'], function(_, Class, qtiClasses, Element){\n\n    var Loader = Class.extend({\n        init : function(item, classesLocation){\n\n            this.qti = {}; //loaded qti classes are store here\n            this.classesLocation = {};\n\n            this.item = item || null;//starts either from scratch or with an existing item object\n            this.setClassesLocation(classesLocation || qtiClasses);//load default location for qti classes model\n        },\n        setClassesLocation : function(qtiClasses){\n            _.extend(this.classesLocation, qtiClasses);\n            return this;\n        },\n        getRequiredClasses : function(data){\n            var ret = [];\n            for(var i in data){\n                if(i === 'qtiClass' && data[i] !== '_container' && i !== 'relatedItem'){//although a _container is a concrete class in TAO, it is not defined in QTI standard\n                    ret.push(data[i]);\n                }else if(typeof(data[i]) === 'object' && i !== 'responseRules'){    //responseRules should'nt be part of the parsing\n                    ret = _.union(ret, this.getRequiredClasses(data[i]));\n                }\n            }\n            return ret;\n        },\n        loadRequiredClasses : function(data, callback, reload){\n\n            var requiredClasses = this.getRequiredClasses(data, reload), required = [];\n\n            for(var i in requiredClasses){\n                var requiredClass = requiredClasses[i];\n                if(this.classesLocation[requiredClass]){\n                    required.push(this.classesLocation[requiredClass]);\n                }else{\n                    throw new Error('missing qti class location declaration : ' + requiredClass);\n                }\n            }\n\n            var _this = this;\n            require(required, function(){\n                _.each(arguments, function(QtiClass){\n                    _this.qti[QtiClass.prototype.qtiClass] = QtiClass;\n                });\n                callback.call(_this, _this.qti);\n            });\n        },\n        getLoadedClasses : function(){\n            return _.keys(this.qti);\n        },\n        loadItemData : function(data, callback){\n\n            var _this = this;\n            _this.loadRequiredClasses(data, function(Qti){\n                var i;\n                if(typeof(data) === 'object' && data.qtiClass === 'assessmentItem'){\n\n                    //unload an item from it's serial (in case of a reload)\n                    if(data.serial){\n                        Element.unsetElement(data.serial);\n                    }\n\n                    _this.item = new Qti.assessmentItem(data.serial, data.attributes || {});\n                    _this.loadContainer(_this.item.getBody(), data.body);\n\n                    for(i in data.outcomes){\n                        var outcome = _this.buildOutcome(data.outcomes[i]);\n                        if(outcome){\n                            _this.item.addOutcomeDeclaration(outcome);\n                        }\n                    }\n                    for(i in data.feedbacks){\n                        var feedback = _this.buildElement(data.feedbacks[i]);\n                        if(feedback){\n                            _this.item.addModalFeedback(feedback);\n                        }\n                    }\n                    for(i in data.stylesheets){\n                        var stylesheet = _this.buildElement(data.stylesheets[i]);\n                        if(stylesheet){\n                            _this.item.addStylesheet(stylesheet);\n                        }\n                    }\n\n                    //important : build responses after all modal feedbacks and outcomes has been loaded, because the simple feedback rules need to reference them\n                    for(i in data.responses){\n                        var response = _this.buildResponse(data.responses[i]);\n                        if(response){\n                            _this.item.addResponseDeclaration(response);\n\n                            var feedbackRules = data.responses[i].feedbackRules;\n                            if(feedbackRules){\n                                _.forIn(feedbackRules, function(fbData, serial){\n                                    response.feedbackRules[serial] = _this.buildSimpleFeedbackRule(fbData);\n                                });\n                            }\n                        }\n                    }\n\n                    if(data.responseProcessing){\n                        _this.item.setResponseProcessing(_this.buildResponseProcessing(data.responseProcessing));\n                    }\n                    _this.item.setNamespaces(data.namespaces);\n                }\n\n                if(typeof(callback) === 'function'){\n                    callback.call(_this, _this.item);\n                }\n            });\n        },\n        loadElement : function(data, callback){\n\n            var _this = this;\n\n            _this.loadRequiredClasses(data, function(Qti){\n\n                var element = _this.buildElement(data);\n\n                if(typeof(callback) === 'function'){\n                    callback.call(_this, element);\n                }\n            });\n        },\n        /**\n         * Load ALL given elements into existing loaded item\n         *\n         * @todo to be renamed to loadItemElements\n         * @param {object} data\n         * @param {function} callback\n         * @returns {undefined}\n         */\n        loadElements : function(data, callback){\n\n            var _this = this;\n\n            if(_this.item){\n\n                this.loadRequiredClasses(data, function(){\n\n                    var allElements = _this.item.getComposingElements();\n\n                    for(var i in data){\n                        var elementData = data[i];\n                        if(elementData && elementData.qtiClass && elementData.serial){\n                            //find and update element\n                            if(allElements[elementData.serial]){\n                                _this.loadElementData(allElements[elementData.serial], elementData);\n                            }\n                        }\n                    }\n\n                    if(typeof(callback) === 'function'){\n                        callback.call(_this, _this.item);\n                    }\n                });\n            }else{\n                throw 'QtiLoader : cannot load elements in empty item';\n            }\n\n        },\n        buildResponse : function(data){\n\n            var response = this.buildElement(data);\n\n            response.template = data.howMatch || null;\n            response.defaultValue = data.defaultValue || null;\n            response.correctResponse = data.correctResponses || null;\n\n            if(_.size(data.mapping)){\n                response.mapEntries = data.mapping;\n            }else if(_.size(data.areaMapping)){\n                response.mapEntries = data.areaMapping;\n            }else{\n                response.mapEntries = {};\n            }\n\n            response.mappingAttributes = data.mappingAttributes || {};\n\n            return response;\n        },\n        buildSimpleFeedbackRule : function(data){\n\n            var feedbackRule = this.buildElement(data);\n\n            if(data.condition){\n                feedbackRule.condition = data.condition;\n            }\n            if(data.comparedValue){\n                feedbackRule.comparedValue = data.comparedValue;\n            }\n\n            feedbackRule.comparedOutcome = this.item.responses[data.comparedOutcome] || null;\n            feedbackRule.feedbackOutcome = this.item.outcomes[data.feedbackOutcome] || null;\n            feedbackRule.feedbackThen = this.item.modalFeedbacks[data.feedbackThen] || null;\n            feedbackRule.feedbackElse = this.item.modalFeedbacks[data.feedbackElse] || null;\n\n            return feedbackRule;\n        },\n        buildOutcome : function(data){\n            var outcome = this.buildElement(data);\n            outcome.defaultValue = data.defaultValue || null;\n            return outcome;\n        },\n        buildResponseProcessing : function(data){\n            var rp = this.buildElement(data);\n            if(data && data.processingType){\n                if(data.processingType === 'custom'){\n                    rp.xml = data.data;\n                    rp.processingType = 'custom';\n                }else{\n                    rp.processingType = 'templateDriven';\n                }\n            }\n            return rp;\n        },\n        loadContainer : function(bodyObject, bodyData){\n            if(!Element.isA(bodyObject, '_container')){\n                throw 'bodyObject must be a QTI Container';\n            }\n\n            if(bodyData && typeof bodyData.body === 'string' && (typeof bodyData.elements === 'array' || typeof bodyData.elements === 'object')){\n                for(var serial in bodyData.elements){\n                    var eltData = bodyData.elements[serial];\n                    //check if class is loaded:\n                    var element = this.buildElement(eltData);\n                    if(element){\n                        bodyObject.setElement(element, bodyData.body);\n                    }\n                }\n                bodyObject.body(bodyData.body);\n            }else{\n                throw 'wrong bodydata format';\n            }\n        },\n        buildElement : function(elementData){\n            var elt = null;\n            if(elementData && elementData.qtiClass && elementData.serial){\n                var className = elementData.qtiClass;\n                if(this.qti[className]){\n                    elt = new this.qti[className](elementData.serial);\n                    this.loadElementData(elt, elementData);\n                }else{\n                    throw 'the qti element class does not exist: ' + className;\n                }\n            }else{\n                throw 'wrong elementData format';\n            }\n            return elt;\n        },\n        loadElementData : function(element, data){\n\n            element.setAttributes(_.clone(data.attributes) || {});\n\n            if(element.body && data.body){\n                if(element.bdy){\n                    this.loadContainer(element.getBody(), data.body);\n                }\n            }\n\n            if(element.object && data.object){\n                if(element.object){\n                    this.loadObjectData(element.object, data.object);\n                }\n            }\n\n            if(Element.isA(element, 'interaction')){\n                this.loadInteractionData(element, data);\n            }else if(Element.isA(element, 'choice')){\n                this.loadChoiceData(element, data);\n            }else if(Element.isA(element, 'math')){\n                this.loadMathData(element, data);\n            }else if(Element.isA(element, 'infoControl')){\n                this.loadPicData(element, data);\n            }\n\n            return element;\n        },\n        loadInteractionData : function(interaction, data){\n            if(Element.isA(interaction, 'blockInteraction')){\n                if(data.prompt){\n                    this.loadContainer(interaction.prompt.getBody(), data.prompt);\n                }\n            }\n\n            this.buildInteractionChoices(interaction, data);\n\n            if(Element.isA(interaction, 'customInteraction')){\n                this.loadPciData(interaction, data);\n            }\n        },\n        buildInteractionChoices : function(interaction, data){\n\n            //note: Qti.ContainerInteraction (Qti.GapMatchInteraction and Qti.HottextInteraction) has already been parsed by builtElement(interacionData);\n            if(data.choices){\n                if(Element.isA(interaction, 'matchInteraction')){\n                    for(var set = 0; set < 2; set++){\n                        if(!data.choices[set]){\n                            throw 'missing match set #' + set;\n                        }\n                        var matchSet = data.choices[set];\n                        for(var serial in matchSet){\n                            var choice = this.buildElement(matchSet[serial]);\n                            if(choice){\n                                interaction.addChoice(choice, set);\n                            }\n                        }\n                    }\n                }else{\n                    for(var serial in data.choices){\n                        var choice = this.buildElement(data.choices[serial]);\n                        if(choice){\n                            interaction.addChoice(choice);\n                        }\n                    }\n                }\n\n                if(Element.isA(interaction, 'graphicGapMatchInteraction')){\n                    if(data.gapImgs){\n                        for(var serial in data.gapImgs){\n                            var gapImg = this.buildElement(data.gapImgs[serial]);\n                            if(gapImg){\n                                interaction.addGapImg(gapImg);\n                            }\n                        }\n                    }\n                }\n\n            }\n\n        },\n        loadChoiceData : function(choice, data){\n            if(Element.isA(choice, 'textVariableChoice')){\n                choice.val(data.text);\n            }else if(Element.isA(choice, 'gapImg')){\n                //has already been taken care of in buildElement()\n            }else if(Element.isA(choice, 'containerChoice')){\n                //has already been taken care of in buildElement()\n            }\n        },\n        loadObjectData : function(object, data){\n            object.setAttributes(data.attributes);\n            //@todo: manage object like a container\n            if(data._alt){\n                if(data._alt.qtiClass === 'object'){\n                    object._alt = Loader.buildElement(data._alt);\n                }else{\n                    object._alt = data._alt;\n                }\n            }\n        },\n        loadMathData : function(math, data){\n            math.ns = data.ns || {};\n            math.setMathML(data.mathML || '');\n            math.annotations = data.annotations || {};\n        },\n        loadPciData : function(pci, data){\n            loadPortableCustomElementData(pci, data);\n        },\n        loadPicData : function(pic, data){\n            loadPortableCustomElementData(pic, data);\n        }\n    });\n\n    function loadPortableCustomElementData(portableElement, data){\n        portableElement.typeIdentifier = data.typeIdentifier;\n        portableElement.markup = data.markup;\n        portableElement.entryPoint = data.entryPoint;\n        portableElement.properties = data.properties;\n        portableElement.libraries = data.libraries;\n    }\n\n    return Loader;\n});\n\n","define('taoQtiItem/qtiCreator/model/helper/invalidator',['lodash'], function(_){\n    \"use strict\";\n    var invalidator = {\n        completelyValid : function(element){\n            \n            var item = element.getRelatedItem();\n            var serial, invalidElements;\n            if(item){\n                serial = element.getSerial();\n                invalidElements = item.data('invalid') || {};\n            \n                delete invalidElements[serial];\n                item.data('invalid', invalidElements);\n            }\n        },\n        valid : function(element, key){\n\n            var item = element.getRelatedItem();\n            var serial = element.getSerial();\n            var invalidElements;\n\n            if(item){\n                invalidElements = item.data('invalid') || {};\n\n                if(key){\n\n                    if(invalidElements[serial] && invalidElements[serial][key]){\n                        delete invalidElements[serial][key];\n                        if(!_.size(invalidElements[serial])){\n                            delete invalidElements[serial];\n                        }\n\n                        item.data('invalid', invalidElements);\n                    }\n\n                }else{\n                    throw new Error('missing required argument \"key\"');\n                }\n            }\n        },\n        invalid : function(element, key, message, stateName){\n\n            var item = element.getRelatedItem();\n            var serial = element.getSerial();\n            var invalidElements;\n\n            if(item){\n                invalidElements = item.data('invalid') || {};\n\n                if(key){\n\n                    if(!invalidElements[serial]){\n                        invalidElements[serial] = {};\n                    }\n\n                    invalidElements[serial][key] = {\n                        message : message || '',\n                        stateName : stateName || 'active'\n                    };\n                    item.data('invalid', invalidElements);\n\n                }else{\n                    throw new Error('missing required arguments \"key\"');\n                }\n            }\n        },\n        isValid : function(element){\n\n            var item = element.getRelatedItem();\n            var serial = element.getSerial();\n            var invalidElements;\n\n            if(item){\n                invalidElements = item.data('invalid') || {};\n                return !invalidElements[serial];\n            }\n            return true;\n        }\n    };\n\n    return invalidator;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/mixin/editable',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/model/helper/event',\n    'taoQtiItem/qtiCreator/model/helper/invalidator'\n], function(_, $, Element, event, invalidator){\n    \"use strict\";\n    var _removeSelf = function(element){\n\n        var removed = false,\n            related = element.getRelatedItem();\n\n        if(related){\n\n            var found = related.find(element.getSerial());\n\n            if(found){\n\n                var parent = found.parent;\n                if(Element.isA(parent, 'interaction')){\n\n                    if(element.qtiClass === 'gapImg'){\n                        parent.removeGapImg(element);\n                    }else if(Element.isA(element, 'choice')){\n                        parent.removeChoice(element);\n                    }\n                    removed = true;\n\n                }else if(found.location === 'body' && _.isFunction(parent.initContainer)){\n\n                    if(_.isFunction(element.beforeRemove)){\n                        element.beforeRemove();\n                    }\n\n                    parent.getBody().removeElement(element);\n                    removed = true;\n\n                }else if(Element.isA(parent, '_container')){\n\n                    if(_.isFunction(element.beforeRemove)){\n                        element.beforeRemove();\n                    }\n\n                    parent.removeElement(element);\n                    removed = true;\n                }\n\n                if(removed){\n                    //mark it instantly as removed in case its is being used somewhere else\n                    element.data('removed', true);\n                    invalidator.completelyValid(element);\n                    event.deleted(element, parent);\n                }\n            }\n        }else{\n            throw 'no related item found';\n        }\n\n        return removed;\n    };\n\n    var _removeElement = function(element, containerPropName, eltToBeRemoved){\n\n        if(element[containerPropName]){\n\n            var targetSerial = '',\n                targetElt;\n\n            if(typeof (eltToBeRemoved) === 'string'){\n                targetSerial = eltToBeRemoved;\n                targetElt = Element.getElementBySerial[targetSerial];\n            }else if(eltToBeRemoved instanceof Element){\n                targetSerial = eltToBeRemoved.getSerial();\n                targetElt = eltToBeRemoved;\n            }\n\n            if(targetSerial){\n                invalidator.completelyValid(targetElt);\n                delete element[containerPropName][targetSerial];\n                Element.unsetElement(targetSerial);\n            }\n        }\n\n        return element;\n    };\n\n    var methods = {\n        init : function(serial, attributes){\n\n            //init call in the format init(attributes)\n            if(typeof (serial) === 'object'){\n                attributes = serial;\n                serial = '';\n            }\n\n            var attr = {};\n\n            if(_.isFunction(this.getDefaultAttributes)){\n                _.extend(attr, this.getDefaultAttributes());\n            }\n            _.extend(attr, attributes);\n\n            this._super(serial, attr);\n        },\n        attr : function(key, value){\n            var ret = this._super(key, value);\n            if(key !== undefined && value !== undefined){\n                $(document).trigger('attributeChange.qti-widget', {'element' : this, 'key' : key, 'value' : value});\n            }\n            return ret;\n        },\n        removeAttr : function(key){\n            var ret = this._super(key);\n            $(document).trigger('attributeChange.qti-widget', {'element' : this, 'key' : key, 'value' : null});\n            return ret;\n        },\n        remove : function(){\n            if(arguments.length === 0){\n                return _removeSelf(this);\n            }else if(arguments.length === 2){\n                return _removeElement(this, arguments[0], arguments[1]);\n            }else{\n                throw 'invalid number of argument given';\n            }\n        }\n    };\n\n    return methods;\n});\n","/**\n * Define the location of all qti classes used in the QTI Creator\n */\ndefine('taoQtiItem/qtiCreator/model/qtiClasses',['lodash', 'taoQtiItem/qtiItem/core/qtiClasses'], function(_, qtiClasses){\n    \"use strict\";\n    //clone the qtiClasses instead of modifying it by direct extend:\n    return _.defaults({\n        'assessmentItem' : 'taoQtiItem/qtiCreator/model/Item',\n        '_container' : 'taoQtiItem/qtiCreator/model/Container',\n        'img' : 'taoQtiItem/qtiCreator/model/Img',\n        'math' : 'taoQtiItem/qtiCreator/model/Math',\n        'object' : 'taoQtiItem/qtiCreator/model/Object',\n        'rubricBlock' : 'taoQtiItem/qtiCreator/model/RubricBlock',\n        'modalFeedback' : 'taoQtiItem/qtiCreator/model/feedbacks/ModalFeedback',\n        'choiceInteraction' : 'taoQtiItem/qtiCreator/model/interactions/ChoiceInteraction',\n        'orderInteraction' : 'taoQtiItem/qtiCreator/model/interactions/OrderInteraction',\n        'associateInteraction' : 'taoQtiItem/qtiCreator/model/interactions/AssociateInteraction',\n        'matchInteraction' : 'taoQtiItem/qtiCreator/model/interactions/MatchInteraction',\n        'inlineChoiceInteraction' : 'taoQtiItem/qtiCreator/model/interactions/InlineChoiceInteraction',\n        'simpleChoice' : 'taoQtiItem/qtiCreator/model/choices/SimpleChoice',\n        'simpleAssociableChoice' : 'taoQtiItem/qtiCreator/model/choices/SimpleAssociableChoice',\n        'inlineChoice' : 'taoQtiItem/qtiCreator/model/choices/InlineChoice',\n        'mediaInteraction' : 'taoQtiItem/qtiCreator/model/interactions/MediaInteraction',\n        'uploadInteraction' : 'taoQtiItem/qtiCreator/model/interactions/UploadInteraction',\n        'textEntryInteraction' : 'taoQtiItem/qtiCreator/model/interactions/TextEntryInteraction',\n        'sliderInteraction' : 'taoQtiItem/qtiCreator/model/interactions/SliderInteraction',\n        'extendedTextInteraction' : 'taoQtiItem/qtiCreator/model/interactions/ExtendedTextInteraction',\n        'hotspotInteraction' : 'taoQtiItem/qtiCreator/model/interactions/HotspotInteraction',\n        'selectPointInteraction' : 'taoQtiItem/qtiCreator/model/interactions/SelectPointInteraction',\n        'graphicInteraction' : 'taoQtiItem/qtiCreator/model/interactions/GraphicOrderInteraction',\n        'graphicAssociateInteraction' : 'taoQtiItem/qtiCreator/model/interactions/GraphicAssociateInteraction',\n        'graphicGapMatchInteraction' : 'taoQtiItem/qtiCreator/model/interactions/GraphicGapMatchInteraction',\n        'graphicOrderInteraction' : 'taoQtiItem/qtiCreator/model/interactions/GraphicOrderInteraction',\n        'hotspotChoice' : 'taoQtiItem/qtiCreator/model/choices/HotspotChoice',\n        'gapImg' : 'taoQtiItem/qtiCreator/model/choices/GapImg',\n        'associableHotspot' : 'taoQtiItem/qtiCreator/model/choices/AssociableHotspot',\n        'gapMatchInteraction' : 'taoQtiItem/qtiCreator/model/interactions/GapMatchInteraction',\n        'hottextInteraction' : 'taoQtiItem/qtiCreator/model/interactions/HottextInteraction',\n        'hottext' : 'taoQtiItem/qtiCreator/model/choices/Hottext',\n        'gapText' : 'taoQtiItem/qtiCreator/model/choices/GapText',\n        'gap' : 'taoQtiItem/qtiCreator/model/choices/Gap',\n        'responseDeclaration' : 'taoQtiItem/qtiCreator/model/variables/ResponseDeclaration',\n        'responseProcessing' : 'taoQtiItem/qtiCreator/model/ResponseProcessing',\n        'customInteraction' : 'taoQtiItem/qtiCreator/model/interactions/PortableCustomInteraction',\n        'endAttemptInteraction' : 'taoQtiItem/qtiCreator/model/interactions/EndAttemptInteraction',\n        'infoControl' : 'taoQtiItem/qtiCreator/model/PortableInfoControl'\n    }, qtiClasses);\n\n});\n\n","define('taoQtiItem/qtiCreator/model/helper/container',['jquery', 'lodash', 'taoQtiItem/qtiCreator/model/qtiClasses'], function($, _, qtiClasses){\n    \"use strict\";\n    var methods = {\n        createElements : function(container, body, callback){\n\n            var regex = /{{([a-z_]+)\\.?([a-z_]*):new}}/ig;\n\n            //first pass to get required qti classes, but do not replace\n            var required = {};\n            body.replace(regex,\n                function(original, qtiClass, subClass){\n                    if(qtiClasses[qtiClass]){\n                        required[qtiClass] = qtiClasses[qtiClass];\n                    }else{\n                        throw 'missing required class : ' + qtiClass;\n                    }\n                });\n                \n            //second pass after requiring classes:\n            require(_.values(required), function(){\n\n                //register and name all loaded classes:\n                var Qti = {};\n                for(var i in arguments){\n                    Qti[arguments[i].prototype.qtiClass] = arguments[i];\n                }\n                \n//                debugger;\n                \n                //create new elements\n                var newElts = {};\n                var newBody = body.replace(regex,\n                    function(original, qtiClass, subClass){\n                        if(Qti[qtiClass]){\n                            //create new element\n                            var elt = new Qti[qtiClass]();\n                            if(container.getRenderer()){\n                                elt.setRenderer(container.getRenderer());\n                            }\n                            newElts[elt.getSerial()] = elt;\n\n                            //manage sub-classed qtiClass\n                            if(subClass){\n                                //@todo generalize it from customInteraction\n                                elt.typeIdentifier = subClass;\n                            }\n\n                            return elt.placeholder();\n                        }else{\n                            return original;\n                        }\n                    });\n\n                //insert them:\n                container.setElements(newElts, newBody);\n                \n                //operations after insertions:\n                var $doc = $(document);\n                _.each(newElts, function(elt){\n                    if(_.isFunction(elt.buildIdentifier)){\n                        elt.buildIdentifier();\n                    }\n                    if(_.isFunction(elt.afterCreate)){\n                        elt.afterCreate();\n                    }\n                    $doc.trigger('elementCreated.qti-widget', {parent : container.parent(), element : elt});\n                });\n\n                if(typeof(callback) === 'function'){\n                    callback.call(container, newElts);\n                }\n            });\n\n        }\n    };\n\n    return methods;\n});\n\n","define('taoQtiItem/qtiCreator/model/mixin/editableContainer',['taoQtiItem/qtiCreator/model/helper/container'], function(containerHelper){\n    \"use strict\";\n    var methods = {\n        createElements : function(body, callback){\n            \n            var _this = this;\n            containerHelper.createElements(_this.getBody(), body, function(newElts){\n                callback.call(_this, newElts);\n            });\n\n        }\n    };\n\n    return methods;\n});\n","define('taoQtiItem/qtiItem/core/IdentifiedElement',['taoQtiItem/qtiItem/core/Element'], function(Element){\n    var IdentifiedElement = Element.extend({\n        buildIdentifier : function(prefix, useSuffix){\n            if(useSuffix === undefined){\n                useSuffix = true;\n            }\n            var item = this.getRelatedItem();\n            if(item){\n                var suffix = '', i = 1, usedIds = item.getUsedIdentifiers();\n                if(prefix){\n                    prefix = prefix.replace(/_[0-9]+$/ig, '_'); //detect incremental id of type choice_12, response_3, etc.\n                    prefix = prefix.replace(/[^a-zA-Z0-9_]/ig, '_');\n                    prefix = prefix.replace(/(_)+/ig, '_');\n                    if(useSuffix){\n                        suffix = '_' + i;\n                    }\n                }else{\n                    prefix = this.qtiClass;\n                    suffix = '_' + i;\n                }\n\n                do{\n                    var exists = false;\n                    var id = prefix + suffix;\n                    if(usedIds[id]){\n                        exists = true;\n                        suffix = '_' + i;\n                        i++;\n                    }\n                }while(exists);\n\n                this.attr('identifier', id);\n            }else{\n                throw 'cannot build identifier of an element that is not attached to an assessment item';\n            }\n            return this;\n        },\n        id : function(value){\n            if(!value && !this.attr('identifier')){\n                this.buildIdentifier(value);\n            }\n            return this.attr('identifier', value);\n        }\n    });\n\n    return IdentifiedElement;\n});\n\n\n","define('taoQtiItem/qtiItem/mixin/Mixin',[],function(){\n    \n    //@todo : need refactoring of qti item mixin with lodash.mixin()\n    return {\n        augment : function(targetClass, methods, options){\n            if(typeof(targetClass) === 'function' && typeof(methods) === 'object'){\n                for(var methodName in methods){\n                    if(!Object.hasOwnProperty(targetClass.prototype, methodName)){\n                        targetClass.prototype[methodName] = methods[methodName];\n                    }else{\n                        if(options && options.append){\n                            var _parent = targetClass.prototype[methodName];\n                            targetClass.prototype[methodName] = function(){\n                                methods[methodName].apply(this, arguments);\n                                return _parent.apply(this, arguments);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n});\n","define('taoQtiItem/qtiItem/core/Container',['taoQtiItem/qtiItem/core/Element', 'lodash', 'jquery', 'taoQtiItem/qtiItem/helper/rendererConfig'], function(Element, _, $, rendererConfig){\n\n    var Container = Element.extend({\n        qtiClass : '_container',\n        init : function(body){\n            this._super();//generate serial, attributes array always empty\n            if(body && typeof body !== 'string'){\n                throw 'the body of a container must be a string';\n            }\n            this.bdy = body || '';\n            this.elements = {};\n        },\n        body : function(body){\n            if(typeof body === 'undefined'){\n                return this.bdy;\n            }else{\n                if(typeof body === 'string'){\n                    this.bdy = body;\n                    $(document).trigger('containerBodyChange', {\n                        body : body,\n                        container : this\n                    });\n                }else{\n                    throw 'body must be a string';\n                }\n            }\n        },\n        setElements : function(elements, body){\n            var returnValue = false;\n\n            for(var i in elements){\n                var elt = elements[i];\n                if(elt instanceof Element){\n                    \n                    body = body || this.bdy;\n                    if(body.indexOf(elt.placeholder()) === -1){\n                        body += elt.placeholder();//append the element if no placeholder found\n                    }\n\n                    elt.setRelatedItem(this.getRelatedItem() || null);\n                    this.elements[elt.getSerial()] = elt;\n                    $(document).trigger('containerElementAdded', {\n                        element : elt,\n                        container : this\n                    });\n\n                    returnValue = true;\n                }else{\n                    returnValue = false;\n                    throw 'expected a qti element';\n                }\n            }\n\n            this.body(body);\n\n            return returnValue;\n        },\n        setElement : function(element, body){\n            return this.setElements([element], body);\n        },\n        removeElement : function(element){\n            var serial = '';\n            if(typeof(element) === 'string'){\n                serial = element;\n            }else if(element instanceof Element){\n                serial = element.getSerial();\n            }\n            delete this.elements[serial];\n            this.body(this.body().replace('{{' + serial + '}}', ''));\n            return this;\n        },\n        getElements : function(qtiClass){\n            var elts = {};\n            if(typeof(qtiClass) === 'string'){\n                for(var serial in this.elements){\n                    if(Element.isA(this.elements[serial], qtiClass)){\n                        elts[serial] = this.elements[serial];\n                    }\n                }\n            }else{\n                elts = _.clone(this.elements);\n            }\n            return elts;\n        },\n        getElement : function(serial){\n            return this.elements[serial] ? this.elements[serial] : null;\n        },\n        getComposingElements : function(){\n            var elements = this.getElements();\n            var elts = {};\n            for(var serial in elements){\n                elts[serial] = elements[serial];//pass individual object by ref, instead of the whole list(object)\n                elts = _.extend(elts, elements[serial].getComposingElements());\n            }\n            return elts;\n        },\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                elementsData = [],\n                tpl = this.body();\n\n            for(var serial in this.elements){\n                var elt = this.elements[serial];\n                if(typeof elt.render === 'function'){\n                    if(elt.qtiClass === '_container'){\n                        //@todo : container rendering merging, to be tested\n                        tpl = tpl.replace(elt.placeholder(), elt.render(renderer));\n                    }else{\n                        tpl = tpl.replace(elt.placeholder(), '{{{' + serial + '}}}');\n                        elementsData[serial] = elt.render(renderer);\n                    }\n                }else{\n                    throw 'render() is not defined for the qti element: ' + serial;\n                }\n            }\n\n            if(renderer.isRenderer){\n                return this._super({\n                    body : renderer.renderDirect(tpl, elementsData),\n                    contentModel : this.contentModel || 'flow'\n                }, renderer, args.placeholder);\n            }else{\n                throw 'invalid qti renderer for qti container';\n            }\n        },\n        postRender : function(data, altClassName, renderer){\n\n            renderer = renderer || this.getRenderer();\n\n            for(var serial in this.elements){\n                var elt = this.elements[serial];\n                if(typeof elt.postRender === 'function'){\n                    elt.postRender(data, '', renderer);\n                }\n            }\n            this._super(data, altClassName, renderer);\n        },\n        toArray : function(){\n            var arr = {\n                serial : this.serial,\n                body : this.bdy,\n                elements : {}\n            };\n\n            for(var serial in this.elements){\n                arr.elements[serial] = this.elements[serial].toArray();\n            }\n\n            return arr;\n        },\n        find : function(serial, parent){\n\n            var found = null;\n\n            if(this.elements[serial]){\n                \n                found = {parent : parent || this, element : this.elements[serial], location : 'body'};\n                \n            }else{\n                \n                _.each(this.elements, function(elt){\n                    \n                    found = elt.find(serial);\n                    if(found){\n                        return false;//break loop\n                    }\n                });\n            }\n\n            return found;\n        }\n    });\n\n    return Container;\n});\n","define('taoQtiItem/qtiItem/mixin/Container',['taoQtiItem/qtiItem/mixin/Mixin', 'taoQtiItem/qtiItem/core/Container'], function(Mixin, Container){\n\n    var methods = {\n        initContainer : function(body){\n            this.bdy = new Container(body || '');\n            this.bdy.setRelatedItem(this.getRelatedItem() || null);\n            this.bdy.contentModel = 'blockStatic';\n        },\n        getBody : function(){\n            return this.bdy;\n        },\n        body : function(body){\n            var ret = this.bdy.body(body);\n            return (body) ? this : ret;//for method chaining on get\n        },\n        setElement : function(element, body){\n            this.bdy.setElement(element, body);\n            return this;\n        },\n        removeElement : function(element){\n            return this.bdy.removeElement(element);\n        },\n        getElements : function(qtiClass){\n            return this.bdy.getElements(qtiClass);\n        },\n        getElement : function(serial){\n            return this.bdy.getElement(serial);\n        }\n    };\n\n    return {\n        augment : function(targetClass){\n            Mixin.augment(targetClass, methods);\n        },\n        methods : methods\n    };\n});\n","define('taoQtiItem/qtiItem/mixin/ContainerItemBody',['taoQtiItem/qtiItem/mixin/Mixin', 'taoQtiItem/qtiItem/mixin/Container', 'lodash'], function(Mixin, Container, _){\n    \n    var methods = {};\n    _.extend(methods, Container.methods);\n    _.extend(methods, {\n        initContainer:function(body){\n            Container.methods.initContainer.call(this, body);\n            this.bdy.contentModel = 'itemBody';\n        }\n    });\n\n    return {\n        augment : function(targetClass){\n            Mixin.augment(targetClass, methods);\n        },\n        methods : methods\n    };\n});\n","define('taoQtiItem/qtiItem/core/Item',[\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiItem/core/IdentifiedElement',\n    'taoQtiItem/qtiItem/mixin/ContainerItemBody',\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiItem/helper/util'\n], function(Element, IdentifiedElement, Container, _, $, util){\n\n    var Item = IdentifiedElement.extend({\n        qtiClass : 'assessmentItem',\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n            this.relatedItem = this;\n            this.stylesheets = {};\n            this.responses = {};\n            this.outcomes = {};\n            this.modalFeedbacks = {};\n            this.namespaces = {};\n            this.responseProcessing = null;\n        },\n        getInteractions : function(){\n            var interactions = [];\n            var elts = this.getComposingElements();\n            for(var serial in elts){\n                if(Element.isA(elts[serial], 'interaction')){\n                    interactions.push(elts[serial]);\n                }\n            }\n            return interactions;\n        },\n        addResponseDeclaration : function(response){\n            if(Element.isA(response, 'responseDeclaration')){\n                response.setRelatedItem(this);\n                this.responses[response.getSerial()] = response;\n            }else{\n                throw 'is not a qti response declaration';\n            }\n            return this;\n        },\n        getResponseDeclaration : function(identifier){\n            for(var i in this.responses){\n                if(this.responses[i].attr('identifier') === identifier){\n                    return this.responses[i];\n                }\n            }\n            return null;\n        },\n        addOutcomeDeclaration : function(outcome){\n            if(Element.isA(outcome, 'outcomeDeclaration')){\n                outcome.setRelatedItem(this);\n                this.outcomes[outcome.getSerial()] = outcome;\n            }else{\n                throw 'is not a qti outcome declaration';\n            }\n            return this;\n        },\n        addModalFeedback : function(feedback){\n            if(Element.isA(feedback, 'modalFeedback')){\n                feedback.setRelatedItem(this);\n                this.modalFeedbacks[feedback.getSerial()] = feedback;\n            }else{\n                throw 'is not a qti modal feedback';\n            }\n            return this;\n        },\n        getComposingElements : function(){\n            var elts = this._super(), _this = this;\n            _.each(['responses', 'outcomes', 'modalFeedbacks', 'stylesheets'], function(elementCollection){\n                for(var i in _this[elementCollection]){\n                    var elt = _this[elementCollection][i];\n                    elts[i] = elt;\n                    elts = _.extend(elts, elt.getComposingElements());\n                }\n            });\n            if(this.responseProcessing instanceof Element){\n                elts[this.responseProcessing.getSerial()] = this.responseProcessing;\n            }\n            return elts;\n        },\n        find : function(serial){\n\n            var found = this._super(serial);\n\n            if(!found){\n                found = util.findInCollection(this, ['responses', 'outcomes', 'modalFeedbacks', 'stylesheets'], serial);\n            }\n\n            return found;\n        },\n        getResponses : function(){\n            return _.clone(this.responses);\n        },\n        getRelatedItem : function(){\n            return this;\n        },\n        addNamespace : function(name, uri){\n            this.namespaces[name] = uri;\n        },\n        setNamespaces : function(namespaces){\n            this.namespaces = namespaces;\n        },\n        getNamespaces : function(){\n            return _.clone(this.namespaces);\n        },\n        addStylesheet : function(stylesheet){\n            if(Element.isA(stylesheet, 'stylesheet')){\n                stylesheet.setRelatedItem(this);\n                this.stylesheets[stylesheet.getSerial()] = stylesheet;\n            }else{\n                throw 'is not a qti stylesheet declaration';\n            }\n            return this;\n        },\n        removeStyleSheet : function(stylesheet){\n            delete this.stylesheets[stylesheet.getSerial()];\n            return this;\n        },\n        stylesheetExists : function(href){\n            var exists = false;\n            _.each(this.stylesheets, function(stylesheet){\n                if(stylesheet.attr('href') === href){\n                    exists = true;\n                    return false;//break each loop\n                }\n            });\n            return exists;\n        },\n        setResponseProcessing : function(rp){\n            if(Element.isA(rp, 'responseProcessing')){\n                rp.setRelatedItem(this);\n                this.responseProcessing = rp;\n            }else{\n                throw 'is not a response processing';\n            }\n            return this;\n        },\n        toArray : function(){\n            var arr = this._super();\n            arr.outcomes = {};\n            for(var i in this.outcomes){\n                arr.outcomes[i] = this.outcomes[i].toArray();\n            }\n            arr.responses = {};\n            for(var i in this.responses){\n                arr.responses[i] = this.responses[i].toArray();\n            }\n            arr.stylesheets = {};\n            for(var i in this.stylesheets){\n                arr.stylesheets[i] = this.stylesheets[i].toArray();\n            }\n            arr.namespaces = this.namespaces;\n            return arr;\n        },\n        isEmpty : function(){\n        \n            var body = this.body().trim();\n            \n            if(body){\n                \n                //hack to fix #2652\n                var $dummy = $('<div>').html(body),\n                    $children = $dummy.children();\n                \n                if($children.length === 1 && $children.hasClass('empty')){\n                    return true;\n                }else{\n                    return false;\n                }\n            }else{\n                return true;\n            }\n        }\n    });\n\n    Container.augment(Item);\n\n    return Item;\n});\n","define('taoQtiItem/qtiItem/core/Stylesheet',['taoQtiItem/qtiItem/core/Element', 'lodash', 'taoQtiItem/qtiItem/helper/rendererConfig'], function(Element, _, rendererConfig){\n\n    var Stylesheet = Element.extend({\n        qtiClass : 'stylesheet',\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {};\n\n            defaultData.attributes = {href : renderer.getAbsoluteUrl(this.attr('href'))};\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        }\n    });\n\n    return Stylesheet;\n});\n","define('taoQtiItem/qtiCreator/model/Stylesheet',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/Stylesheet'\n], function(_, editable, Stylesheet){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                href : 'css/tao-user-styles.css',\n                title : '',\n                type:'text/css',\n                media:'all'\n            };\n        }\n    });\n\n    return Stylesheet.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/ResponseProcessing',['taoQtiItem/qtiItem/core/Element', 'lodash'], function(Element, _){\n    \n    var ResponseProcessing = Element.extend({\n        qtiClass : 'responseProcessing',\n        processingType : '',\n        xml : ''\n    });\n    \n    return ResponseProcessing;\n});\n","define('taoQtiItem/qtiCreator/model/ResponseProcessing',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/ResponseProcessing'\n], function(_, editable, ResponseProcessing){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {};\n        },\n        setProcessingType : function(processingType){\n        \n            if(this.processingType !== processingType){\n                \n                if(this.processingType === 'custom'){\n\n                    //change all response template to default : \"correct\"\n                    _.each(this.getRelatedItem().getResponses(), function(r){\n                         r.setTemplate('MATCH_CORRECT');\n                    });\n                }\n                \n                this.processingType = processingType;\n            }\n\n        }\n    });\n\n    return ResponseProcessing.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/variables/VariableDeclaration',['taoQtiItem/qtiItem/core/IdentifiedElement'], function(IdentifiedElement){\n\n    /**\n     * It is the top abstract class for all variable classes\n     * (so not renderable and qtiClass undefined)\n     */\n    var VariableDeclaration = IdentifiedElement.extend({\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n            this.defaultValue = null;\n        },\n        is : function(qtiClass){\n            return (qtiClass === 'variableDeclaration') || this._super(qtiClass);\n        },\n        toArray : function(){\n            var arr = this._super();\n            arr.defaultValue = this.defaultValue;\n            return arr;\n        }\n    });\n\n    return VariableDeclaration;\n});\n","define('taoQtiItem/qtiItem/core/variables/OutcomeDeclaration',['taoQtiItem/qtiItem/core/variables/VariableDeclaration'], function(VariableDeclaration){\n    return  VariableDeclaration.extend({\n        qtiClass : 'outcomeDeclaration'\n    });\n});\n","define('taoQtiItem/qtiCreator/model/variables/OutcomeDeclaration',['lodash', 'taoQtiItem/qtiCreator/model/mixin/editable', 'taoQtiItem/qtiItem/core/variables/OutcomeDeclaration'], function(_, editable, OutcomeDeclaration){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    return OutcomeDeclaration.extend(methods);\n});\n\n","define('taoQtiItem/qtiItem/core/feedbacks/ModalFeedback',['taoQtiItem/qtiItem/core/IdentifiedElement', 'taoQtiItem/qtiItem/mixin/Container'], function(IdentifiedElement, Container){\n    \n    var ModalFeedback = IdentifiedElement.extend({\n        'qtiClass' : 'modalFeedback',\n        is : function(qtiClass){\n            return (qtiClass === 'feedback') || this._super(qtiClass);\n        }\n    });\n    \n    Container.augment(ModalFeedback);\n    \n    return ModalFeedback;\n});\n","define('taoQtiItem/qtiCreator/model/feedbacks/ModalFeedback',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/feedbacks/ModalFeedback'\n], function(_,editable,ModalFeedback){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                title : 'modal feedback title',\n                showHide : 'show'\n            };\n        }\n    });\n    \n    return ModalFeedback.extend(methods);\n});\n","define('taoQtiItem/qtiCreator/model/Item',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableContainer',\n    'taoQtiItem/qtiItem/core/Item',\n    'taoQtiItem/qtiCreator/model/Stylesheet',\n    'taoQtiItem/qtiCreator/model/ResponseProcessing',\n    'taoQtiItem/qtiCreator/model/variables/OutcomeDeclaration',\n    'taoQtiItem/qtiCreator/model/feedbacks/ModalFeedback'\n], function(_, editable, editableContainer, Item, Stylesheet, ResponseProcessing, OutcomeDeclaration, ModalFeedback){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableContainer);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                identifier : 'myItem_1',\n                title : 'Item title',\n                adaptive : false,\n                timeDependent : false\n            };\n        },\n        createResponseProcessing : function(){\n            var rp = new ResponseProcessing();\n            rp.processingType = 'templateDriven';\n            this.setResponseProcessing(rp);\n            return rp;\n        },\n        createStyleSheet : function(href){\n            if(href && _.isString(href)){\n                var stylesheet = new Stylesheet({href : href});\n                stylesheet.setRenderer(this.getRenderer());\n                this.addStylesheet(stylesheet);\n                return stylesheet;\n            }else{\n                throw 'missing or invalid type for the required arg \"href\"';\n                return null;\n            }\n        },\n        createOutcomeDeclaration : function(attributes){\n\n            var identifier = attributes.identifier || '';\n            delete attributes.identifier;\n            var outcome = new OutcomeDeclaration(attributes);\n\n            this.addOutcomeDeclaration(outcome);\n            outcome.buildIdentifier(identifier);\n\n            return outcome;\n        },\n        createModalFeedback : function(attributes){\n\n            var identifier = attributes.identifier || '';\n            delete attributes.identifier;\n            var modalFeedback = new ModalFeedback(attributes);\n\n            this.addModalFeedback(modalFeedback);\n            modalFeedback.buildIdentifier(identifier);\n            modalFeedback.body('Some feedback text.');\n\n            return modalFeedback;\n        },\n        deleteResponseDeclaration : function(response){\n            var serial;\n            if(_.isString(response)){\n                serial = response;\n            }else if(response && response.qtiClass === 'responseDeclaration'){\n                serial = response.getSerial();\n            }\n            delete this.responses[serial];\n            return this;\n        }\n    });\n    return Item.extend(methods);\n});\n","define('taoQtiItem/qtiCreator/helper/itemLoader',[\n    'jquery',\n    'helpers',\n    'taoQtiItem/qtiItem/core/Loader',\n    'taoQtiItem/qtiCreator/model/Item',\n    'taoQtiItem/qtiCreator/model/qtiClasses'\n], function($, helpers, Loader, Item, qtiClasses){\n    \"use strict\";\n    var _generateIdentifier = function(uri){\n        var pos = uri.lastIndexOf('#');\n        return uri.substr(pos + 1);\n    };\n\n    var creatorLoader = {\n        loadItem : function(config, callback){\n\n            if(config.uri){\n                $.ajax({\n                    url : helpers._url('getItemData', 'QtiCreator', 'taoQtiItem'),\n                    dataType : 'json',\n                    data : {\n                        uri : config.uri\n                    }\n                }).done(function(data){\n\n                    if(data.itemData && data.itemData.qtiClass === 'assessmentItem'){\n\n                        var loader = new Loader().setClassesLocation(qtiClasses),\n                            itemData = data.itemData;\n\n                        loader.loadItemData(itemData, function(item){\n                            \n                            //hack to fix #2652\n                            if(item.isEmpty()){\n                                item.body('');\n                            }\n                            \n                            callback(item, this.getLoadedClasses());\n                        });\n                    }else{\n\n                        var item = new Item().id(_generateIdentifier(config.uri));\n                        var outcome = item.createOutcomeDeclaration({\n                            cardinality : 'single',\n                            baseType : 'float'\n                        });\n                        outcome.buildIdentifier('SCORE', false);\n                        \n                        item.createResponseProcessing();\n                        \n                        //always add math element : since it has become difficult to know when a math element has been added to the item\n                        item.addNamespace('m', 'http://www.w3.org/1998/Math/MathML');\n                        \n                        callback(item);\n                    }\n\n                });\n            }\n        }\n    };\n\n    return creatorLoader;\n});\n\n","/**\n * Common helper functions\n */\ndefine('taoQtiItem/qtiItem/helper/interactionHelper',['lodash', 'taoQtiItem/qtiItem/core/Element'], function(_, Element){\n    return {\n        convertChoices : function(choices, outputType){\n\n            var ret = [], _this = this;\n\n            _.each(choices, function(c){\n                if(Element.isA(c, 'choice')){\n                    switch(outputType){\n                        case 'serial':\n                            ret.push(c.getSerial());\n                            break;\n                        case 'identifier':\n                            ret.push(c.id());\n                            break;\n                        default:\n                            ret.push(c);\n                    }\n\n                }else if(_.isArray(c)){\n                    ret.push(_this.convertChoices(c, outputType));\n                }\n            });\n\n            return ret;\n        },\n        findChoices : function(interaction, choices, inputType){\n\n            var ret = [], _this = this;\n\n            _.each(choices, function(c){\n                var choice;\n                if(_.isString(c)){\n                    if(inputType === 'serial'){\n                        choice = interaction.getChoice(c);\n                        if(choice){\n                            ret.push(choice);\n                        }\n                    }else if(inputType === 'identifier'){\n                        choice = interaction.getChoiceByIdentifier(c);\n                        if(choice){\n                            ret.push(choice);\n                        }\n                    }else{\n                        ret.push(c);\n                    }\n                }else if(_.isArray(c)){\n                    ret.push(_this.findChoices(interaction, c, inputType));\n                }else{\n                    ret.push(c);\n                }\n            });\n\n            return ret;\n        },\n        shuffleChoices : function(choices){\n            var r = [], //returned array\n                f = {}, //fixed choices array\n                j = 0;\n\n            for(var i in choices){\n                if(Element.isA(choices[i], 'choice')){\n                    var choice = choices[i];\n                    if(choice.attr('fixed')){\n                        f[j] = choice;\n                    }\n                    r.push(choice);\n                    j++;\n                }else{\n                    throw 'invalid element in array: is not a qti choice';\n                }\n            }\n\n            for(var n = 0; n < r.length - 1; n++){\n                if(f[n]){\n                    continue;\n                }\n                var k = -1;\n                do{\n                    k = n + Math.floor(Math.random() * (r.length - n));\n                }while(f[k]);\n                var tmp = r[k];\n                r[k] = r[n];\n                r[n] = tmp;\n            }\n\n            return r;\n        },\n        serialToIdentifier : function(interaction, choiceSerial){\n            var choice = interaction.getChoice(choiceSerial);\n            if(choice){\n                return choice.id();\n            }else{\n                return '';\n            }\n        }\n    }\n});\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * A factory to create a QTI renderer.\n *\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiRunner/core/Renderer',[\n    'lodash',\n    'jquery',\n    'handlebars',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiItem/helper/interactionHelper'\n], function(_, $, Handlebars, Element, interactionHelper){\n    'use strict';\n\n    var _isValidRenderer = function(renderer){\n\n        var valid = true;\n\n        if(typeof (renderer) !== 'object'){\n            return false;\n        }\n\n        var classCorrect = false;\n        if(renderer.qtiClass){\n            if(_.indexOf(_renderableClasses, renderer.qtiClass) >= 0){\n                classCorrect = true;\n            }else{\n                var pos = renderer.qtiClass.indexOf('.');\n                if(pos > 0){\n                    var qtiClass = renderer.qtiClass.slice(0, pos);\n                    var subClass = renderer.qtiClass.slice(pos + 1);\n                    if(_renderableSubclasses[qtiClass] && _.indexOf(_renderableSubclasses[qtiClass], subClass) >= 0){\n                        classCorrect = true;\n                    }\n                }\n            }\n        }\n        if(!classCorrect){\n            valid = false;\n            throw new Error('invalid qti class name in renderer declaration : ' + renderer.qtiClass);\n        }\n\n        if(!renderer.template){\n            valid = false;\n            throw new Error('missing template in renderer declaration : ' + renderer.qtiClass);\n        }\n\n        return valid;\n    };\n\n    var _renderableClasses = [\n        '_container',\n        'assessmentItem',\n        'stylesheet',\n        'responseDeclaration',\n        'outcomeDeclaration',\n        'responseProcessing',\n        '_simpleFeedbackRule',\n        'img',\n        'math',\n        'object',\n        'modalFeedback',\n        'rubricBlock',\n        'associateInteraction',\n        'choiceInteraction',\n        'extendedTextInteraction',\n        'gapMatchInteraction',\n        'graphicAssociateInteraction',\n        'graphicGapMatchInteraction',\n        'graphicOrderInteraction',\n        'hotspotInteraction',\n        'hottextInteraction',\n        'inlineChoiceInteraction',\n        'matchInteraction',\n        'mediaInteraction',\n        'orderInteraction',\n        'selectPointInteraction',\n        'sliderInteraction',\n        'textEntryInteraction',\n        'uploadInteraction',\n        'endAttemptInteraction',\n        'customInteraction',\n        'prompt',\n        'associableHotspot',\n        'gap',\n        'gapImg',\n        'gapText',\n        'hotspotChoice',\n        'hottext',\n        'inlineChoice',\n        'simpleAssociableChoice',\n        'simpleChoice',\n        'infoControl'\n    ];\n\n    var _dependencies = {\n        assessmentItem : ['stylesheet', '_container', 'prompt', 'modalFeedback'],\n        rubricBlock : ['_container'],\n        associateInteraction : ['simpleAssociableChoice'],\n        choiceInteraction : ['simpleChoice'],\n        gapMatchInteraction : ['gap', 'gapText'],\n        graphicAssociateInteraction : ['associableHotspot'],\n        graphicGapMatchInteraction : ['associableHotspot', 'gapImg'],\n        graphicOrderInteraction : ['hotspotChoice'],\n        hotspotInteraction : ['hotspotChoice'],\n        hottextInteraction : ['hottext'],\n        inlineChoiceInteraction : ['inlineChoice'],\n        matchInteraction : ['simpleAssociableChoice'],\n        orderInteraction : ['simpleChoice']\n    };\n\n    var _renderableSubclasses = {\n        'simpleAssociableChoice' : ['associateInteraction', 'matchInteraction'],\n        'simpleChoice' : ['choiceInteraction', 'orderInteraction']\n    };\n\n    /**\n     * Get the location of the document, useful to define a baseUrl for the required context\n     * @returns {String}\n     */\n    function getDocumentBaseUrl(){\n        return window.location.protocol + '//' + window.location.host + window.location.pathname.replace(/([^\\/]*)$/, '');\n    }\n\n    /**\n     * The built Renderer class\n     * @constructor\n     * @param {Object} [options] - the renderer options\n     * @param {Object} [options.decorators] - to set up rendering decorator\n     * @param {preRenderDecorator} [options.decorators.before] - to set up a pre decorator\n     * @param {postRenderDecorator} [options.decorators.after] - to set up a post decorator\n     */\n    var Renderer = function(options){\n\n        options = options || {};\n\n        this.isRenderer = true;\n        this.name = '';\n        this.shuffleChoices = (options.shuffleChoices !== undefined) ? options.shuffleChoices : true;\n\n        //store shuffled choice here\n        this.shuffledChoices = [];\n\n        /**\n         * Store the registered renderer location\n         */\n        var _locations = {};\n\n        /**\n         * Store loaded renderers\n         */\n        var _renderers = {};\n\n        /**\n         * Get the actual renderer of the give qti class or subclass:\n         * e.g. simplceChoice, simpleChoice.choiceInteraction, simpleChoice.orderInteraction\n         */\n        var _getClassRenderer = function(qtiClass){\n            var ret = null;\n            if(_renderers[qtiClass]){\n                ret = _renderers[qtiClass];\n            }else{\n                var pos = qtiClass.indexOf('.');\n                if(pos > 0){\n                    qtiClass = qtiClass.slice(0, pos);\n                    if(_renderers[qtiClass]){\n                        ret = _renderers[qtiClass];\n                    }\n                }\n            }\n            return ret;\n        };\n\n        /**\n         * Set the renderer options\n         * @param {String} key - the name of the option\n         * @param {*} value - the option vallue\n         * @returns {Renderer} for chaining\n         */\n        this.setOption = function(key, value){\n            if(typeof (key) === 'string'){\n                options[key] = value;\n            }\n            return this;\n        };\n\n        /**\n         * Set the renderer options\n         * @param {Object} opts - the options\n         * @returns {Renderer} for chaining\n         */\n        this.setOptions = function(opts){\n            _.extend(options, opts);\n            return this;\n        };\n\n        /**\n         * Get the renderer option\n         * @param {String} key - the name of the option\n         * @returns {*|null} the option vallue\n         */\n        this.getOption = function(key){\n            if(typeof (key) === 'string' && options[key]){\n                return options[key];\n            }\n            return null;\n        };\n\n        /**\n         * Renders the template\n         * @param {Object} element - the QTI model element\n         * @param {Object} data - the data to give to the template\n         * @param {String} [qtiSubclass] - to get the render of the element subclass (when element's qtiClass is abstract)\n         * @returns {String} the template results\n         * @throws {Error} if the renderer is not set or has no template bound\n         */\n        this.renderTpl = function(element, data, qtiSubclass){\n\n            var res;\n            var ret        = '';\n            var tplFound   = false;\n            var qtiClass   = qtiSubclass || element.qtiClass;\n            var renderer   = _getClassRenderer(qtiClass);\n            var decorators = this.getOption('decorators');\n\n            if(!renderer && !_.isFunction(renderer.template)){\n                throw new Error('no renderer template loaded under the class name : ' + qtiClass);\n            }\n\n            //pre rendering decoration\n            if(_.isObject(decorators) && _.isFunction(decorators.before)){\n\n                /**\n                 * @callback preRenderDecoractor\n                 * @param {Object} element - the QTI model element\n                 * @param {String} [qtiSubclass] - to get the render of the element subclass (when element's qtiClass is abstract)\n                 * @returns {String} the decorator result\n                 */\n                res = decorators.before(element, qtiSubclass);\n                if(_.isString(res)){\n                    ret += res;\n                }\n            }\n\n            //render the template\n            ret += renderer.template(data);\n\n\n            //post rendering decoration\n            if(_.isObject(decorators) && _.isFunction(decorators.after)){\n\n                /**\n                 * @callback postRenderDecoractor\n                 * @param {Object} element - the QTI model element\n                 * @param {String} [qtiSubclass] - to get the render of the element subclass (when element's qtiClass is abstract)\n                 * @returns {String} the decorator result\n                 */\n                res = decorators.after(element, qtiSubclass);\n                if(_.isString(res)){\n                    ret += res;\n                }\n            }\n            return ret;\n        };\n\n        this.getData = function(element, data, qtiSubclass){\n\n            var ret = data,\n                qtiClass = qtiSubclass || element.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(typeof (renderer.getData) === 'function'){\n                    ret = renderer.getData.call(this, element, data);\n                }\n            }\n\n            return ret;\n        };\n\n        this.renderDirect = function(tpl, data){\n            return Handlebars.compile(tpl)(data);\n        };\n\n        this.getContainer = function(qtiElement, $scope, qtiSubclass){\n\n            var ret = null,\n                qtiClass = qtiSubclass || qtiElement.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                ret = renderer.getContainer(qtiElement, $scope);\n            }else{\n                throw 'no renderer found for the class : ' + qtiElement.qtiClass;\n            }\n            return ret;\n        };\n\n        this.postRender = function(qtiElement, data, qtiSubclass){\n\n            var ret = false,\n                qtiClass = qtiSubclass || qtiElement.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(typeof (renderer.render) === 'function'){\n                    ret = renderer.render.call(this, qtiElement, data);\n                }\n                //postRendering is optional, log missing call of postRender?\n            }\n\n            return ret;\n        };\n\n        this.setResponse = function(qtiInteraction, response, qtiSubclass){\n\n            var ret = false,\n                qtiClass = qtiSubclass || qtiInteraction.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(typeof (renderer.setResponse) === 'function'){\n                    ret = renderer.setResponse.call(this, qtiInteraction, response);\n                    var $container = renderer.getContainer.call(this, qtiInteraction);\n                    if($container instanceof $ && $container.length){\n                        $container.trigger('responseSet', [qtiInteraction, response]);\n                    }\n                }\n            }else{\n                throw 'no renderer registered under the name : ' + qtiClass;\n            }\n            return ret;\n        };\n\n        this.getResponse = function(qtiInteraction, qtiSubclass){\n\n            var ret = false,\n                qtiClass = qtiSubclass || qtiInteraction.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(typeof (renderer.getResponse) === 'function'){\n                    ret = renderer.getResponse.call(this, qtiInteraction);\n                }\n            }else{\n                throw 'no renderer registered under the name : ' + qtiClass;\n            }\n            return ret;\n        };\n\n        this.resetResponse = function(qtiInteraction, qtiSubclass){\n\n            var ret = false,\n                qtiClass = qtiSubclass || qtiInteraction.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(typeof (renderer.resetResponse) === 'function'){\n                    ret = renderer.resetResponse.call(this, qtiInteraction);\n                }\n            }else{\n                throw 'no renderer registered under the name : ' + qtiClass;\n            }\n            return ret;\n        };\n\n        /**\n         * Retrieve the state of the interaction.\n         * If the renderer has no state management, it falls back to the response management.\n         *\n         * @param {Object} qtiInteraction - the interaction\n         * @param {String} [qtiSubClass] - (not sure of the type and how it is used - Sam ? )\n         * @returns {Object} the interaction's state\n         *\n         * @throws {Error} if no renderer is registered\n         */\n        this.getState = function(qtiInteraction, qtiSubclass){\n\n            var ret = false;\n            var qtiClass = qtiSubclass || qtiInteraction.qtiClass;\n            var renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(_.isFunction(renderer.getState)){\n                    ret = renderer.getState.call(this, qtiInteraction);\n                } else {\n                    ret = renderer.getResponse.call(this, qtiInteraction);\n                }\n            }else{\n                throw 'no renderer registered under the name : ' + qtiClass;\n            }\n            return ret;\n        };\n\n        /**\n         * Retrieve the state of the interaction.\n         * If the renderer has no state management, it falls back to the response management.\n         *\n         * @param {Object} qtiInteraction - the interaction\n         * @param {Object} state - the interaction's state\n         * @param {String} [qtiSubClass] - (not sure of the type and how it is used - Sam ? )\n         *\n         * @throws {Error} if no renderer is found\n         */\n        this.setState =  function(qtiInteraction, state, qtiSubclass){\n\n            var qtiClass = qtiSubclass || qtiInteraction.qtiClass;\n            var renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(_.isFunction(renderer.setState)){\n                    renderer.setState.call(this, qtiInteraction, state);\n                } else {\n                    renderer.resetResponse.call(this, qtiInteraction);\n                    renderer.setResponse.call(this, qtiInteraction, state);\n                }\n            }else{\n                throw 'no renderer registered under the name : ' + qtiClass;\n            }\n        };\n\n        /**\n         * Calls the renderer destroy.\n         * Ask the renderer to run destroy if exists.\n         *\n         * @throws {Error} if no renderer is found\n         */\n        this.destroy = function(qtiInteraction, qtiSubclass){\n\n            var ret = false,\n                qtiClass = qtiSubclass || qtiInteraction.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(_.isFunction(renderer.destroy)){\n                    ret = renderer.destroy.call(this, qtiInteraction);\n                }\n            }else{\n                throw 'no renderer registered under the name : ' + qtiClass;\n            }\n            return ret;\n        };\n\n        this.getLoadedRenderers = function(){\n            return _renderers;\n        };\n\n        this.register = function(renderersLocations){\n            _.extend(_locations, renderersLocations);\n        };\n\n        this.load = function(callback, requiredClasses){\n           var self = this;\n            var required = [];\n            if(requiredClasses){\n                if(_.isArray(requiredClasses)){\n\n                    //exclude abstract classes\n                    requiredClasses = _.intersection(requiredClasses, _renderableClasses);\n\n                    //add dependencies\n                    _.each(requiredClasses, function(reqClass){\n                        var deps = _dependencies[reqClass];\n                        if(deps){\n                            requiredClasses = _.union(requiredClasses, deps);\n                        }\n                    });\n\n                    _.forEach(requiredClasses, function(qtiClass){\n\n                        if(_renderableSubclasses[qtiClass]){\n                            var requiredSubClasses = _.intersection(requiredClasses, _renderableSubclasses[qtiClass]);\n                            _.each(requiredSubClasses, function(subclass){\n                                if(_locations[qtiClass + '.' + subclass]){\n                                    required.push(_locations[qtiClass + '.' + subclass]);\n                                }else if(_locations[qtiClass]){\n                                    required.push(_locations[qtiClass]);\n                                }else{\n                                    throw new Error(self.name + ' : missing qti class location declaration: ' + qtiClass + ', subclass: ' + subclass);\n                                }\n                            });\n                        } else {\n                            if(_locations[qtiClass] === false){\n                                _renderers[qtiClass] = false;//mark this class as not renderable\n                            }else if(_locations[qtiClass]){\n                                required.push(_locations[qtiClass]);\n                            }else{\n                                throw new Error(self.name + ' : missing qti class location declaration: ' + qtiClass);\n                            }\n                        }\n                    });\n                } else {\n                    throw new Error('invalid argument type: expected array for arg \"requireClasses\"');\n                }\n\n            }else{\n                required = _.values(_locations);\n            }\n\n            var _this = this;\n            require(required, function(){\n\n                _.each(arguments, function(clazz){\n                    if(_isValidRenderer(clazz)){\n                        _renderers[clazz.qtiClass] = clazz;\n                    }\n                });\n\n                if(typeof (callback) === 'function'){\n                    callback.call(_this, _renderers);\n                }\n            });\n\n            return this;\n        };\n\n        /**\n         * Define the shuffling manually\n         *\n         * @param {Object} interaction - the interaction\n         * @param {Array} choices - the shuffled choices\n         * @param {String} identificationType -\n         */\n        this.setShuffledChoices = function(interaction, choices, identificationType){\n            if(Element.isA(interaction, 'interaction')){\n                this.shuffledChoices[interaction.getSerial()] = _.pluck(interactionHelper.findChoices(interaction, choices, identificationType), 'serial');\n            }\n        };\n\n        /**\n         * Get the choices shuffled for this interaction.\n         *\n         * @param {Object} interaction - the interaction\n         * @param {Boolean} reshuffle - by default choices are shuffled only once and store, but if true you can force shuffling again\n         * @param {String} returnedType - the choice type\n         * @returns {Array} the choices\n         */\n        this.getShuffledChoices = function(interaction, reshuffle, returnedType){\n            var choices = [];\n            var shuffled = [];\n            var serial, i;\n\n            if(Element.isA(interaction, 'interaction')){\n                serial = interaction.getSerial();\n\n                //1st time, we shuffle (or asked to force shuffling)\n                if(!this.shuffledChoices[serial] || reshuffle){\n                    if(Element.isA(interaction, 'matchInteraction')){\n                        this.shuffledChoices[serial] = [];\n                        for(i = 0; i < 2; i++){\n                            choices[i] = interactionHelper.shuffleChoices(interaction.getChoices(i));\n                            this.shuffledChoices[serial][i] = _.pluck(choices[i], 'serial');\n                        }\n                    } else {\n                        choices = interactionHelper.shuffleChoices(interaction.getChoices());\n                        this.shuffledChoices[serial] = _.pluck(choices, 'serial');\n                    }\n\n                //otherwise get the choices from the serials\n                } else {\n                    if(Element.isA(interaction, 'matchInteraction')){\n                        _.forEach(choices, function(choice, index){\n                            if(index < 2){\n                                _.forEach(this.shuffledChoices[serial][i], function(choiceSerial){\n                                    choice.push(interaction.getChoice(choiceSerial));\n                                });\n                            }\n                        });\n                    } else {\n                        _.forEach(this.shuffledChoices[serial], function(choiceSerial){\n                            choices.push(interaction.getChoice(choiceSerial));\n                        });\n                    }\n                }\n\n                //do some type convertion\n                if(returnedType === 'serial' || returnedType === 'identifier'){\n                    return interactionHelper.convertChoices(choices, returnedType);\n                }\n\n                //pass value only, not ref\n                return _.clone(choices);\n            }\n\n            return [];\n        };\n\n        this.getRenderers = function(){\n            return _renderers;\n        };\n\n        this.getLocations = function(){\n            return _locations;\n        };\n\n        this.getAbsoluteUrl = function(relUrl){\n\n            //allow relative url outpu only if explicitely said so\n            if(this.getOption('userRelativeUrl')){\n                return relUrl.replace(/^\\.?\\//, '');\n            }\n\n            if(/^http(s)?:\\/\\//i.test(relUrl)){\n                //already absolute\n                return relUrl;\n            }else{\n\n                var absUrl = '';\n                var runtimeLocations = this.getOption('runtimeLocations');\n\n                if(runtimeLocations && _.size(runtimeLocations)){\n                    _.forIn(runtimeLocations, function(runtimeLocation, typeIdentifier){\n                        if(relUrl.indexOf(typeIdentifier) === 0){\n                            absUrl = relUrl.replace(typeIdentifier, runtimeLocation);\n                            return false;//break\n                        }\n                    });\n                }\n\n                if(absUrl){\n                    return absUrl;\n                }else{\n                    var baseUrl = this.getOption('baseUrl') || getDocumentBaseUrl();\n                    return baseUrl + relUrl;\n                }\n\n            }\n        };\n    };\n\n    return {\n        build : function(renderersLocations, name, defaultOptions){\n            var NewRenderer = function(){\n                Renderer.apply(this, arguments);\n                this.register(renderersLocations);\n                this.name = name || '';\n                if(defaultOptions){\n                    this.setOptions(defaultOptions);\n                }\n            };\n            NewRenderer.prototype = Renderer.prototype;\n            return NewRenderer;\n        }\n    };\n});\n\n","define('taoQtiItem/qtiDefaultRenderer/renderers/config',[],function(){\n    return {\n        name : 'defaultRenderer',\n        locations : {\n            '_container' : 'taoQtiItem/qtiDefaultRenderer/renderers/Container',\n            'assessmentItem' : 'taoQtiItem/qtiDefaultRenderer/renderers/Item',\n            'stylesheet' : 'taoQtiItem/qtiDefaultRenderer/renderers/Stylesheet',\n            'outcomeDeclaration' : 'taoQtiItem/qtiDefaultRenderer/renderers/OutcomeDeclaration',\n            'responseDeclaration' : 'taoQtiItem/qtiDefaultRenderer/renderers/ResponseDeclaration',\n            'responseProcessing' : 'taoQtiItem/qtiDefaultRenderer/renderers/ResponseProcessing',\n            'math' : 'taoQtiItem/qtiDefaultRenderer/renderers/Math',\n            'object' : 'taoQtiItem/qtiDefaultRenderer/renderers/Object',\n            'modalFeedback' : 'taoQtiItem/qtiDefaultRenderer/renderers/ModalFeedback',\n            'rubricBlock' : 'taoQtiItem/qtiDefaultRenderer/renderers/RubricBlock',\n            'associateInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/AssociateInteraction',\n            'choiceInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/ChoiceInteraction',\n            'extendedTextInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/ExtendedTextInteraction',\n            'gapMatchInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/GapMatchInteraction',\n            'graphicAssociateInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicAssociateInteraction',\n            'graphicGapMatchInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicGapMatchInteraction',\n            'graphicOrderInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicOrderInteraction',\n            'hotspotInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/HotspotInteraction',\n            'hottextInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/HottextInteraction',\n            'inlineChoiceInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/InlineChoiceInteraction',\n            'matchInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/MatchInteraction',\n            'mediaInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/MediaInteraction',\n            'orderInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/OrderInteraction',\n            'selectPointInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/SelectPointInteraction',\n            'sliderInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/SliderInteraction',\n            'textEntryInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/TextEntryInteraction',\n            'prompt' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/Prompt',\n            'associableHotspot' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/AssociableHotspot',\n            'gap' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/Gap',\n            'gapImg' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/GapImg',\n            'gapText' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/GapText',\n            'hotspotChoice' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/HotspotChoice',\n            'hottext' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/Hottext',\n            'inlineChoice' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/InlineChoice',\n            'simpleAssociableChoice' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/SimpleAssociableChoice',\n            'simpleChoice' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/SimpleChoice'\n        }\n    }\n});\n","define('taoQtiItem/qtiCommonRenderer/renderers/config',['lodash', 'taoQtiItem/qtiDefaultRenderer/renderers/config'], function(_, defaultRenderConfig){\n    var locations = _.extend(_.clone(defaultRenderConfig.locations), {\n        'assessmentItem' : 'taoQtiItem/qtiCommonRenderer/renderers/Item',\n        '_container' : 'taoQtiItem/qtiCommonRenderer/renderers/Container',\n        '_simpleFeedbackRule' : false,\n        'stylesheet' : 'taoQtiItem/qtiCommonRenderer/renderers/Stylesheet',\n        'outcomeDeclaration' : 'taoQtiItem/qtiCommonRenderer/renderers/OutcomeDeclaration',\n        'responseDeclaration' : 'taoQtiItem/qtiCommonRenderer/renderers/ResponseDeclaration',\n        'responseProcessing' : 'taoQtiItem/qtiCommonRenderer/renderers/ResponseProcessing',\n        'img' : 'taoQtiItem/qtiCommonRenderer/renderers/Img',\n        'math' : 'taoQtiItem/qtiCommonRenderer/renderers/Math',\n        'object' : 'taoQtiItem/qtiCommonRenderer/renderers/Object',\n        'rubricBlock' : 'taoQtiItem/qtiCommonRenderer/renderers/RubricBlock',\n        'modalFeedback' : 'taoQtiItem/qtiCommonRenderer/renderers/ModalFeedback',\n        'prompt' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/Prompt',\n        'choiceInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/ChoiceInteraction',\n        'extendedTextInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction',\n        'orderInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/OrderInteraction',\n        'associateInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/AssociateInteraction',\n        'matchInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/MatchInteraction',\n        'textEntryInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/TextEntryInteraction',\n        'sliderInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/SliderInteraction',\n        'inlineChoiceInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/InlineChoiceInteraction',\n        'simpleChoice.choiceInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.ChoiceInteraction',\n        'simpleChoice.orderInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.OrderInteraction',\n        'hottext' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/Hottext',\n        'gap' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/Gap',\n        'gapText' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/GapText',\n        'simpleAssociableChoice.matchInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction',\n        'simpleAssociableChoice.associateInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.AssociateInteraction',\n        'inlineChoice' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/InlineChoice',\n        'hottextInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction',\n        'hotspotInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction',\n        'gapMatchInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction',\n        'selectPointInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction',\n        'graphicOrderInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction',\n        'mediaInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/MediaInteraction',\n        'uploadInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/UploadInteraction',\n        'graphicGapMatchInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction',\n        'gapImg' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/GapImg',\n        'graphicAssociateInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction',\n        'customInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/PortableCustomInteraction',\n        'infoControl' : 'taoQtiItem/qtiCommonRenderer/renderers/PortableInfoControl',\n        'endAttemptInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/EndAttemptInteraction'\n    });\n    return {\n        name:'commonRenderer',\n        locations : locations\n    };\n});\n\n\n\n\n\n","define('taoQtiItem/qtiCreator/renderers/config',['lodash', 'taoQtiItem/qtiCommonRenderer/renderers/config'], function(_, commonRenderConfig){\n\n    var locations = _.defaults({\n        '_container' : 'taoQtiItem/qtiCreator/renderers/Container',\n        'assessmentItem' : 'taoQtiItem/qtiCreator/renderers/Item',\n        'rubricBlock' : 'taoQtiItem/qtiCreator/renderers/RubricBlock',\n        'img' : 'taoQtiItem/qtiCreator/renderers/Img',\n        'math' : 'taoQtiItem/qtiCreator/renderers/Math',\n        'object' : 'taoQtiItem/qtiCreator/renderers/Object',\n        'modalFeedback' : 'taoQtiItem/qtiCreator/renderers/ModalFeedback',\n        'choiceInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/ChoiceInteraction',\n        'orderInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/OrderInteraction',\n        'matchInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/MatchInteraction',\n        'associateInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/AssociateInteraction',\n        'inlineChoiceInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/InlineChoiceInteraction',\n        'textEntryInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/TextEntryInteraction',\n        'hotspotInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/HotspotInteraction',\n        'selectPointInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/SelectPointInteraction',\n        'graphicOrderInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/GraphicOrderInteraction',\n        'graphicAssociateInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/GraphicAssociateInteraction',\n        'graphicGapMatchInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/GraphicGapMatchInteraction',\n        'mediaInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/MediaInteraction',\n        'uploadInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/UploadInteraction',\n        'sliderInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/SliderInteraction',\n        'extendedTextInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/ExtendedTextInteraction',\n        'simpleChoice.choiceInteraction' : 'taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.ChoiceInteraction',\n        'simpleChoice.orderInteraction' : 'taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.OrderInteraction',\n        'simpleAssociableChoice.associateInteraction' : 'taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.AssociateInteraction',\n        'simpleAssociableChoice.matchInteraction' : 'taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.MatchInteraction',\n        'gapMatchInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/GapMatchInteraction',\n        'hottextInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/HottextInteraction',\n        'customInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/PortableCustomInteraction',\n        'endAttemptInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/EndAttemptInteraction',\n        'infoControl' : 'taoQtiItem/qtiCreator/renderers/PortableInfoControl',\n        'gap' : 'taoQtiItem/qtiCreator/renderers/choices/Gap',\n        'gapText' : 'taoQtiItem/qtiCreator/renderers/choices/GapText',\n        'hottext' : 'taoQtiItem/qtiCreator/renderers/choices/Hottext'\n    }, commonRenderConfig.locations);\n\n    return {\n        name : 'creatorRenderer',\n        locations : locations\n    };\n});\n\n","define('taoQtiItem/qtiCreator/renderers/Renderer',['taoQtiItem/qtiRunner/core/Renderer', 'taoQtiItem/qtiCreator/renderers/config'], function(Renderer, config){\n    return Renderer.build(config.locations, config.name);\n});\n","define('taoQtiItem/qtiCreator/helper/creatorRenderer',[\n    'taoQtiItem/qtiCreator/renderers/Renderer',\n    'helpers',\n    'jquery',\n    'lodash',\n    'util/dom'\n], function(Renderer, helpers, $, _, dom){\n    \"use strict\";\n    //configure and instanciate once only:\n    var _creatorRenderer = null;\n    \n    //list of configurable interactions\n    //some interactions allow additional non-standard but sometimes useful configuration\n    var _configurableInteractions = ['endAttempt'];\n    \n    /**\n     * Extract interaction-specific configuration from the main one\n     * \n     * @param {object} config - the configuration object of the creatorRenderer\n     * @returns {module.exports.properties|Function.properties|config.properties}\n     */\n    function _extractInteractionsConfig(config){\n        var ret = {};\n        if(config && config.properties){\n            _.each(_configurableInteractions, function(interactionName){\n                if(config.properties[interactionName]){\n                    ret[interactionName] = config.properties[interactionName];\n                }\n            });\n        }\n        return ret;\n    }\n    \n    /**\n     * Get a preconfigured renderer singleton\n     * \n     * @param {Boolean} reset\n     * @param {Object} config\n     * @returns {Object} - a configured instance of creatorRenderer\n     */\n    var get = function(reset, config){\n        if(!_creatorRenderer || reset){\n\n            var $bodyEltForm = _creatorRenderer ? _creatorRenderer.getOption('bodyElementOptionForm') : null;\n            var mediaSources = config.properties.mediaSources || [];\n            if(reset\n                || !$bodyEltForm\n                || !$bodyEltForm.length\n                || !dom.contains($bodyEltForm)){\n\n                _creatorRenderer = new Renderer({\n                    baseUrl : '',\n                    lang : '',\n                    uri : '',\n                    shuffleChoices : false,\n                    itemOptionForm : $('#item-editor-item-property-bar .panel'),\n                    interactionOptionForm : $('#item-editor-interaction-property-bar .panel'),\n                    choiceOptionForm : $('#item-editor-choice-property-bar .panel'),\n                    responseOptionForm : $('#item-editor-response-property-bar .panel'),\n                    bodyElementOptionForm : $('#item-editor-body-element-property-bar .panel'),\n                    textOptionForm : $('#item-editor-text-property-bar .panel'),\n                    modalFeedbackOptionForm : $('#item-editor-modal-feedback-property-bar .panel'),\n                    mediaManager : {\n                        appendContainer : '#mediaManager',\n                        browseUrl : helpers._url('files', 'ItemContent', 'taoItems'),\n                        uploadUrl : helpers._url('upload', 'ItemContent', 'taoItems'),\n                        deleteUrl : helpers._url('delete', 'ItemContent', 'taoItems'),\n                        downloadUrl : helpers._url('download', 'ItemContent', 'taoItems'),\n                        fileExistsUrl : helpers._url('fileExists', 'ItemContent', 'taoItems'),\n                        mediaSources : mediaSources\n                    },\n                    interactions : _extractInteractionsConfig(config)\n                });\n\n            }\n        }\n\n        return _creatorRenderer;\n    };\n\n\n    return {\n        get : function(reset, config){\n            return get(reset, config);\n        },\n        setOption : function(name, value){\n            return get().setOption(name, value);\n        },\n        setOptions : function(options){\n            return get().setOptions(options);\n        },\n        load : function(qtiClasses, done){\n            return get().load(function(){\n                if(_.isFunction(done)){\n                    done.apply(this, arguments);\n                }\n            }, qtiClasses);\n        }\n    };\n\n});\n\n","\ndefine('css!taoQtiItemCss/qti',[],function(){});\n","/**\n * Define the Qti Item Common Renderer\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/Renderer',[\n    'taoQtiItem/qtiRunner/core/Renderer',\n    'taoQtiItem/qtiCommonRenderer/renderers/config',\n    'css!taoQtiItemCss/qti'\n], function(Renderer, config){\n    return Renderer.build(config.locations, config.name);\n});\n\n","\ndefine('taoQtiItem/qtiCommonRenderer/helpers/container',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiItem/core/Element'\n], function(_, $, Element){\n\n    \n    //containers are cached, so do not forget to remove them.\n    var _containers = {};\n    var _$containerContext = $();\n\n    /**\n     * Build the selector for your element (from the element serial)\n     * @private\n     * @param {QtiElement} element\n     * @returns {String} the selector\n     */\n    var _getSelector = function(element){\n\n        var serial = element.getSerial(),\n            selector = '[data-serial=' + serial + ']';\n\n        if(Element.isA(element, 'choice')){\n            selector = '.qti-choice' + selector;\n        }else if(Element.isA(element, 'interaction')){\n            selector = '.qti-interaction' + selector;\n        }\n\n        return selector;\n    };\n\n    /**\n     * Helps you to retrieve the DOM element (as a jquery element) \n     * @exports taoQtiItem/qtiCommonRenderer/helpers/containerHelper \n     */\n    var containerHelper =  {\n        \n        /**\n         * Set a global scope to look for element container\n         * @param {jQueryElement} [$scope] - if you want to retrieve the element in a particular scope or context\n         */\n        setContext : function($scope){\n            _$containerContext = $scope;\n        },\n\n        /**\n         * Get the container of the given element\n         * @param {QtiElement} element - the QTI Element to find the container for\n         * @param {jQueryElement} [$scope] - if you want to retrieve the element in a particular scope or context\n         * @returns {jQueryElement} the container\n         */\n        get : function(element, $scope){\n            \n            var serial = element.getSerial();\n            if($scope instanceof $ && $scope.length){\n                \n                //find in the given context\n                return $scope.find(_getSelector(element));\n                \n            }else if(_$containerContext instanceof $ && _$containerContext.length){\n                \n                //find in the globally set context\n                return _$containerContext.find(_getSelector(element));\n                \n            }else if(!_containers[serial] || _containers[serial].length){\n                \n                //find in the global context\n                _containers[serial] = $(_getSelector(element));\n            }\n\n            return _containers[serial];\n        },\n\n        /**\n         * getContainer use a cache to store elements. This methods helps you to purge it.\n         * @param {Element} element - find the container of this element \n         */ \n        reset : function(element){\n            if(element instanceof Element && _containers[element.getSerial()]){\n                _containers = _.omit(_containers, element.getSerial());\n            }\n        },\n        \n        /**\n         * Trigger an event on the element's container\n         * @param {String} eventType - the name of the event\n         * @param {QtiElement} element - find the container of this element \n         * @param {Array} [data] - data to give to the event\n         */\n        trigger : function(eventType, element, data){\n            if(eventType){\n                if(data && !_.isArray(data)){\n                    data = [data];\n                }\n                this.get(element).trigger(eventType, data);\n\n            }\n        },\n\n        /**\n         * Alias to trigger a responseChange Event from an interaction\n         * @param {QtiElement} interaction - the interaction that had a response changed\n         * @param {Object} [extraData] - additionnal data to give to the event\n         */\n        triggerResponseChangeEvent : function(interaction, extraData){\n            this.trigger('responseChange', interaction, [{\n                    interaction : interaction,\n                    response : interaction.getResponse()\n                },\n                extraData\n            ]);\n        },\n\n        /**\n         * Make all links to opens in another tab/window\n         * @param {jQueryElement} $container\n         */\n        targetBlank : function($container){\n            \n            $container.on('click', 'a', function(e) {\n                e.preventDefault();\n                var href = $(this).attr('href');\n                if(href && href.match(/^http/i)){\n                    window.open(href, '_blank');\n                }\n            });\n        }\n    };\n\n\n    return containerHelper;\n});\n\n","define('taoQtiItem/qtiCreator/helper/commonRenderer',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/Renderer',\n    'taoQtiItem/qtiCommonRenderer/helpers/container'\n], function(_, Renderer, containerHelper){\n    \"use strict\";\n    //store the curret execution context of the common renderer (preview)\n    var _$previousContext = null;\n    \n    //configure and instanciate once only:\n    var _renderer = new Renderer({\n        baseUrl : '',\n        shuffleChoices : true\n    });\n    \n    \n    var commonRenderer = {\n        render : function(item, $container){\n\n            commonRenderer.setContext($container);\n            \n            return _renderer.load(function(){\n                \n                $container.append(item.render(this));\n                item.postRender({}, '', this);\n                \n            }, item.getUsedClasses());\n        },\n        get : function(){\n            return _renderer;\n        },\n        setOption : function(name, value){\n            return _renderer.setOption(name, value);\n        },\n        setOptions : function(options){\n            return _renderer.setOptions(options);\n        },\n        setContext : function($context){\n            _$previousContext = $context;\n            return containerHelper.setContext($context);\n        },\n        restoreContext : function(){\n            containerHelper.setContext(_$previousContext);\n             _$previousContext = null;\n        },\n        load : function(qtiClasses, done){\n            return _renderer.load(function(){\n                if(_.isFunction(done)){\n                    done.apply(this, arguments);\n                }\n            }, qtiClasses);\n        }\n    };\n\n    return commonRenderer;\n\n});\n\n","/**\n * @author Sam <sams@taotesting.com>\n * @requires jquery\n * @requires lodash\n */\ndefine('taoQtiItem/qtiCreator/helper/qtiElements',['jquery', 'lodash', 'i18n'], function($, _, __){\n    \"use strict\";\n    var QtiElements = {};\n\n    QtiElements.classes = {\n        //abstract classes:\n        'itemBody' : {'parents' : ['bodyElement'], 'contains' : ['block'], 'abstract' : true},\n        'atomicBlock' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'contains' : ['inline'], 'abstract' : true},\n        'atomicInline' : {'parents' : ['bodyElement', 'flowStatic', 'inlineStatic'], 'contains' : ['inline'], 'abstract' : true},\n        'simpleBlock' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'contains' : ['block'], 'abstract' : true},\n        'simpleInline' : {'parents' : ['bodyElement', 'flowStatic', 'inlineStatic'], 'contains' : ['inline'], 'abstract' : true},\n        'flowStatic' : {'parents' : ['flow'], 'abstract' : true},\n        'blockStatic' : {'parents' : ['block'], 'abstract' : true},\n        'inlineStatic' : {'parents' : ['inline'], 'abstract' : true},\n        'flow' : {'parents' : ['objectFlow'], 'abstract' : true},\n        'tableCell' : {'parents' : ['bodyElement'], 'contains' : ['flow'], 'abstract' : true},\n        //html-derived qti elements:\n        'caption' : {'parents' : ['bodyElement'], 'contains' : ['inline'], 'xhtml' : true},\n        'col' : {'parents' : ['bodyElement'], 'xhtml' : true},\n        'colgroup' : {'parents' : ['bodyElement'], 'contains' : ['col'], 'xhtml' : true},\n        'div' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'contains' : ['flow'], 'xhtml' : true},\n        'dl' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'contains' : ['dlElement'], 'xhtml' : true},\n        'dt' : {'parents' : ['dlElement'], 'contains' : ['inline'], 'xhtml' : true},\n        'dd' : {'parents' : ['dlElement'], 'contains' : ['flow'], 'xhtml' : true},\n        'hr' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'xhtml' : true},\n        'math' : {'parents' : ['blockStatic', 'flowStatic', 'inlineStatic'], 'xhtml' : true},\n        'li' : {'parents' : ['bodyElement'], 'contains' : ['flow'], 'xhtml' : true},\n        'ol' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'contains' : ['li'], 'xhtml' : true},\n        'ul' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'contains' : ['li'], 'xhtml' : true},\n        'object' : {'parents' : ['bodyElement', 'flowStatic', 'inlineStatic'], 'contains' : ['objectFlow'], 'xhtml' : true},\n        'param' : {'parents' : ['objectFlow'], 'xhtml' : true},\n        'table' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'contains' : ['caption', 'col', 'colgroup', 'thead', 'tfoot', 'tbody'], 'xhtml' : true},\n        'tbody' : {'parents' : ['bodyElement'], 'contains' : ['tr'], 'xhtml' : true},\n        'tfoot' : {'parents' : ['bodyElement'], 'contains' : ['tr'], 'xhtml' : true},\n        'thead' : {'parents' : ['bodyElement'], 'contains' : ['tr'], 'xhtml' : true},\n        'td' : {'parents' : ['tableCell'], 'xhtml' : true},\n        'th' : {'parents' : ['tableCell'], 'xhtml' : true},\n        'tr' : {'parents' : ['bodyElement'], 'contains' : ['tableCell'], 'xhtml' : true},\n        'a' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'abbr' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'acronym' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'b' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'big' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'cite' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'code' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'dfn' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'em' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'i' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'kbd' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'q' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'samp' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'small' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'span' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'strong' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'sub' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'sup' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'tt' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'var' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'blockquote' : {'parents' : ['simpleBlock'], 'xhtml' : true},\n        'address' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'h1' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'h2' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'h3' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'h4' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'h5' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'h6' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'p' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'pre' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'img' : {'parents' : ['atomicInline'], 'xhtml' : true, attributes : ['src', 'alt', 'longdesc', 'height', 'width']},\n        'br' : {'parents' : ['atomicInline'], 'xhtml' : true},\n        //qti elements:\n        'infoControl' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'qti' : true},\n        'textRun' : {'parents' : ['inlineStatic', 'flowstatic'], 'qti' : true},\n        'feedbackInline' : {'parents' : ['simpleInline', 'feedbackElement'], 'qti' : true},\n        'feedbackBlock' : {'parents' : ['simpleBlock'], 'qti' : true},\n        'rubricBlock' : {'parents' : ['simpleBlock'], 'qti' : true}, //strange qti 2.1 exception, marked as simpleBlock instead of\n        'blockInteraction' : {'parents' : ['block', 'flow', 'interaction'], 'qti' : true},\n        'inlineInteraction' : {'parents' : ['inline', 'flow', 'interaction'], 'qti' : true},\n        'gap' : {'parents' : ['inlineStatic'], 'qti' : true},\n        'hottext' : {'parents' : ['flowstatic', 'inlineStatic'], 'contains' : ['inlineStatic'], 'qti' : true},\n        'printedVariable' : {'parents' : ['bodyElement', 'flowStatic', 'inlineStatic', 'textOrVariable'], 'qti' : true},\n        'prompt' : {'parents' : ['bodyElement'], 'contains' : ['inlineStatic'], 'qti' : true},\n        'templateElement' : {'parents' : ['bodyElement'], 'qti' : true},\n        'templateBlock' : {'parents' : ['blockStatic', 'flowStatic', 'templateElement'], 'contains' : ['blockStatic'], 'qti' : true},\n        'templateInline' : {'parents' : ['inlineStatic', 'flowStatic', 'templateElement'], 'contains' : ['inlineStatic'], 'qti' : true},\n        'choiceInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'associateInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'orderInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'matchInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'hottextInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'gapMatchInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'mediaInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'sliderInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'uploadInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'drawingInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'graphicInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'hotspotInteraction' : {'parents' : ['graphicInteraction'], 'qti' : true},\n        'graphicAssociateInteraction' : {'parents' : ['graphicInteraction'], 'qti' : true},\n        'graphicOrderInteraction' : {'parents' : ['graphicInteraction'], 'qti' : true},\n        'graphicGapMatchInteraction' : {'parents' : ['graphicInteraction'], 'qti' : true},\n        'selectPointInteraction' : {'parents' : ['graphicInteraction'], 'qti' : true},\n        'textEntryInteraction' : {'parents' : ['stringInteraction', 'inlineInteraction'], 'qti' : true},\n        'extendedTextInteraction' : {'parents' : ['stringInteraction', 'blockInteraction'], 'qti' : true},\n        'inlineChoiceInteraction' : {'parents' : ['inlineInteraction'], 'qti' : true},\n        'endAttemptInteraction' : {'parents' : ['inlineInteraction'], 'qti' : true},\n        'customInteraction' : {'parents' : ['block', 'flow', 'interaction'], 'qti' : true},\n        '_container' : {'parents' : ['block'], 'qti' : true}//a pseudo class introduced in TAO\n    };\n\n    QtiElements.cache = {containable : {}, children : {}, parents : {}};\n\n    QtiElements.getAllowedContainersElements = function(qtiClass, $container){\n        var classes = QtiElements.getAllowedContainers(qtiClass);\n        var jqSelector = '';\n        for(var i in classes){\n            if(classes[i].qti){\n                //qti element:\n\n            }else{\n                //html element:\n                jqSelector += classes[i] + ', ';\n            }\n        }\n\n        if(jqSelector){\n            jqSelector = jqSelector.substring(0, jqSelector.length - 2);\n        }\n\n        return $(jqSelector, $container ? $container : $(document)).filter(':not([data-qti-type])');\n    };\n\n    QtiElements.getAllowedContainers = function(qtiClass){\n\n        if(QtiElements.cache.containable[qtiClass]){\n            var ret = QtiElements.cache.containable[qtiClass];\n        }else{\n            var ret = [];\n            var parents = QtiElements.getParentClasses(qtiClass, true);\n            for(var aClass in QtiElements.classes){\n                var model = QtiElements.classes[aClass];\n                if(model.contains){\n                    var intersect = _.intersection(model.contains, parents);\n                    if(intersect.length){\n                        if(!model.abstract){\n                            ret.push(aClass);\n                        }\n                        ret = _.union(ret, QtiElements.getChildClasses(aClass, true));\n                    }\n                }\n            }\n            QtiElements.cache.containable[qtiClass] = ret;\n        }\n\n        return ret;\n    };\n\n    QtiElements.getAllowedContents = function(qtiClass, recursive, checked){\n\n        var ret = [];\n        checked = checked || {};\n\n        var model = QtiElements.classes[qtiClass];\n        if(model && model.contains){\n            for(var i in model.contains){\n                var contain = model.contains[i];\n                if(!checked[contain]){\n                    checked[contain] = true;\n\n                    //qtiClass can contain everything defined as its contents\n                    ret.push(contain);\n\n                    //qtiClass can also contain subclass of its contents\n                    var children = QtiElements.getChildClasses(contain, true);\n                    for(var i in children){\n                        var child = children[i];\n                        if(!checked[child]){\n                            checked[child] = true;\n\n                            ret.push(child);\n\n                            //adding children allowed contents depends on the option \"recursive\"\n                            if(recursive){\n                                ret = _.union(ret, QtiElements.getAllowedContents(child, true, checked));\n                            }\n                        }\n                    }\n\n                    //adding allowed contents of qtiClass' allowed contents depends on the option \"recursive\"\n                    if(recursive){\n                        ret = _.union(ret, QtiElements.getAllowedContents(contain, true, checked));\n                    }\n\n                }\n            }\n        }\n\n        //qtiClass can contain all allowed contents of its parents:\n        var parents = QtiElements.getParentClasses(qtiClass, true);\n        for(var i in parents){\n            ret = _.union(ret, QtiElements.getAllowedContents(parents[i], recursive, checked));\n        }\n\n        return _.uniq(ret, false);\n    };\n\n    QtiElements.isAllowedClass = function(qtiContainerClass, qtiContentClass){\n        var allowedClasses = QtiElements.getAllowedContents(qtiContainerClass);\n        return (_.indexOf(allowedClasses, qtiContentClass) >= 0);\n    };\n\n    QtiElements.getParentClasses = function(qtiClass, recursive){\n\n        if(recursive && QtiElements.cache.parents[qtiClass]){\n            var ret = QtiElements.cache.parents[qtiClass];\n        }else{\n            var ret = [];\n            if(QtiElements.classes[qtiClass]){\n                ret = QtiElements.classes[qtiClass].parents;\n                if(recursive){\n                    for(var i in ret){\n                        ret = _.union(ret, QtiElements.getParentClasses(ret[i], recursive));\n                    }\n                    ret = _.uniq(ret, false);\n                }\n            }\n            QtiElements.cache.parents[qtiClass] = ret;\n        }\n\n        return ret;\n    };\n\n    QtiElements.getChildClasses = function(qtiClass, recursive, type){\n\n        var cacheType = type ? type : 'all';\n        if(recursive && QtiElements.cache.children[qtiClass] && QtiElements.cache.children[qtiClass][cacheType]){\n            var ret = QtiElements.cache.children[qtiClass][cacheType];\n        }else{\n            var ret = [];\n            for(var aClass in QtiElements.classes){\n                var model = QtiElements.classes[aClass];\n                if(_.indexOf(model.parents, qtiClass) >= 0){\n                    if(type){\n                        if(model[type]){\n                            ret.push(aClass);\n                        }\n                    }else{\n                        ret.push(aClass);\n                    }\n                    if(recursive){\n                        ret = _.union(ret, QtiElements.getChildClasses(aClass, recursive, type));\n                    }\n                }\n            }\n            if(!QtiElements.cache.children[qtiClass]){\n                QtiElements.cache.children[qtiClass] = {};\n            }\n            QtiElements.cache.children[qtiClass][cacheType] = ret;\n        }\n\n        return ret;\n    };\n\n    QtiElements.isBlock = function(qtiClass){\n        return QtiElements.is(qtiClass, 'block');\n    };\n\n    QtiElements.isInline = function(qtiClass){\n        return QtiElements.is(qtiClass, 'inline');\n    };\n\n    QtiElements.is = function(qtiClass, topClass){\n        if(qtiClass === topClass){\n            return true;\n        }else{\n            var parents = QtiElements.getParentClasses(qtiClass, true);\n            return (_.indexOf(parents, topClass) >= 0);\n        }\n    };\n    \n    QtiElements.getAvailableAuthoringElements = function(){\n        \n        return {\n            choiceInteraction : {\n                label : __('Choice Interaction'),\n                description : __('Select a single (radio buttons) or multiple (check boxes) responses among a set of choices.'),\n                icon : 'icon-choice',\n                short : __('Choice'),\n                qtiClass : 'choiceInteraction',\n                tags:['Common Interactions', 'mcq']\n            },\n            orderInteraction : {\n                label : __('Order Interaction'),\n                icon : 'icon-order',\n                description : __('Arrange a list of choices in the correct order.'),\n                short : __('Order'),\n                qtiClass : 'orderInteraction',\n                tags:['Common Interactions', 'ordering']\n            },\n            associateInteraction : {\n                label : __('Associate Interaction'),\n                icon : 'icon-associate',\n                description : __('Create pair(s) from a series of choices.'),\n                short : __('Associate'),\n                qtiClass : 'associateInteraction',\n                tags:['Common Interactions', 'association']\n            },\n            matchInteraction : {\n                label : __('Match Interaction'),\n                icon : 'icon-match',\n                description : __('Create association(s) between two sets of choices displayed in a table (row and column).'),\n                short : __('Match'),\n                qtiClass : 'matchInteraction',\n                tags:['Common Interactions', 'association']\n            },\n            hottextInteraction : {\n                label : __('Hottext Interaction'),\n                icon : 'icon-hottext',\n                description : __('Select one or more text parts (hottext) within a text.'),\n                short : __('Hottext'),\n                qtiClass : 'hottextInteraction',\n                tags:['Common Interactions', 'text']\n            },\n            gapMatchInteraction : {\n                label : __('Gap Match Interaction'),\n                icon : 'icon-gap-match',\n                description : __(' Fill in the gaps in a text from a set of choices.'),\n                short : __('Gap Match'),\n                qtiClass : 'gapMatchInteraction',\n                tags:['Common Interactions', 'text', 'association']\n            },\n            sliderInteraction : {\n                label : __('Slider Interaction'),\n                icon : 'icon-slider',\n                description :__('Select a value within a numerical range.'),\n                short : __('Slider'),\n                qtiClass : 'sliderInteraction',\n                tags:['Common Interactions', 'special']\n            },\n            extendedTextInteraction : {\n                label : __('Extended Text Interaction'),\n                icon : 'icon-extended-text',\n                description : __('Collect open-ended information in one or more text area(s) (strings or numeric values).'),\n                short : __('Extended Text'),\n                qtiClass : 'extendedTextInteraction',\n                tags:['Common Interactions', 'text']\n            },\n            uploadInteraction : {\n                label : __('File Upload Interaction'),\n                icon : 'icon-upload',\n                description : __('Upload a file (e.g. document, picture...) as a response.'),\n                short : __('File Upload'),\n                qtiClass : 'uploadInteraction',\n                tags:['Common Interactions', 'special']\n            },\n            mediaInteraction : {\n                label : __('Media Interaction'),\n                icon : 'icon-media',\n                description : __('Control the playing parameters (auto-start, loop) of a video or audio file and report the number of time it has been played.'),\n                short : __('Media'),\n                qtiClass : 'mediaInteraction',\n                tags:['Common Interactions', 'media']\n            },\n            _container : {\n                label : __('Text Block'),\n                icon : 'icon-font',\n                description : __('Block contains the content (stimulus) of the item such as text or image. It is also required for Inline Interactions.'),\n                short : __('Block'),\n                qtiClass : '_container',\n                tags:['Inline Interactions', 'text']\n            },\n            inlineChoiceInteraction : {\n                label : __('Inline Choice Interaction'),\n                icon : 'icon-inline-choice',\n                description : __('Select a choice from a drop-down list.'),\n                short : __('Inline Choice'),\n                qtiClass : 'inlineChoiceInteraction',\n                tags:['Inline Interactions', 'inline-interactions', 'mcq']\n            },\n            textEntryInteraction : {\n                label : __('Text Entry Interaction'),\n                icon : 'icon-text-entry',\n                description : __('Collect open-ended information in a short text input (strings or numeric values).'),\n                short : __('Text Entry'),\n                qtiClass : 'textEntryInteraction',\n                tags:['Inline Interactions', 'inline-interactions', 'text']\n            },\n            endAttemptInteraction : {\n                label : __('End Attempt Interaction'),\n                icon : 'icon-end-attempt',\n                description : __('Trigger the end of the item attempt.'),\n                short : __('End Attempt'),\n                qtiClass : 'endAttemptInteraction',\n                tags:['Inline Interactions', 'inline-interactions', 'button', 'submit']\n            },\n            hotspotInteraction : {\n                label : __('Hotspot Interaction'),\n                icon : 'icon-hotspot',\n                description : __('Select one or more areas (hotspots) displayed on an picture.'),\n                short : __('Hotspot'),\n                qtiClass : 'hotspotInteraction',\n                tags:['Graphic Interactions', 'mcq']\n            },\n            graphicOrderInteraction : {\n                label : __('Graphic Order Interaction'),\n                icon : 'icon-graphic-order',\n                description : __('Order the areas (hotspots) displayed on a picture.'),\n                short : __('Graphic Order'),\n                qtiClass : 'graphicOrderInteraction',\n                tags:['Graphic Interactions', 'ordering']\n            },\n            graphicAssociateInteraction : {\n                label : __('Graphic Associate Interaction'),\n                icon : 'icon-graphic-associate',\n                description : __('Create association(s) between areas (hotspots) displayed on a picture.'),\n                short : __('Graphic Associate'),\n                qtiClass : 'graphicAssociateInteraction',\n                tags:['Graphic Interactions', 'association']\n            },\n            graphicGapMatchInteraction : {\n                label : __('Graphic Gap Match Interaction'),\n                icon : 'icon-graphic-gap',\n                description : __('Fill in the gaps on a picture with a set of image choices.'),\n                short : __('Graphic Gap'),\n                qtiClass : 'graphicGapMatchInteraction',\n                tags:['Graphic Interactions', 'association']\n            },\n            selectPointInteraction : {\n                label : __('Select Point Interaction'),\n                icon : 'icon-select-point',\n                description : __('Position one or more points on a picture (response areas are not displayed).'),\n                short : __('Select Point'),\n                qtiClass : 'selectPointInteraction',\n                tags:['Graphic Interactions']\n            }\n        };\n    };\n    \n    return QtiElements;\n\n});\n","\ndefine(\"json!taoItems/preview/resources/device-list.json\", function(){ return {\n    \"tablets\": {\n        \"193986c3715c81838870f908fa98d69a\": {\n            \"label\": \"Amazon Kindle Fire HDX 7\\u2033\",\n            \"width\": 960,\n            \"height\": 600\n        },\n        \"4e8eafab11aad1486992d7ee2c8c16ca\": {\n            \"label\": \"Apple iPad\",\n            \"width\": 1024,\n            \"height\": 768\n        },\n        \"5aac2932d9ad00d6d8a1604b8f9e4e8d\": {\n            \"label\": \"Google Nexus 10, Motorola Xoom, Xyboard\",\n            \"width\": 1280,\n            \"height\": 800\n        },\n        \"9805d9753ad08c7630a9ee5418aa6c6c\": {\n            \"label\": \"Google Nexus 7\",\n            \"width\": 966,\n            \"height\": 604\n        },\n        \"d4a431cedf4705d6bf2cba6d5788378b\": {\n            \"label\": \"Samsung Galaxy Tab 7.7, 8.9, 10.1\",\n            \"width\": 1280,\n            \"height\": 800\n        }\n    },\n    \"phones\": {\n        \"1b89338531ef0155c8d6abc2ac02c81a\": {\n            \"label\": \"Apple iPhone 3GS\",\n            \"width\": 320,\n            \"height\": 480,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 320,\n            \"dpHeight\": 480\n        },\n        \"3f89da99d84214cde7df87ebe0699a6f\": {\n            \"label\": \"Apple iPhone 4\",\n            \"width\": 640,\n            \"height\": 960,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1920\n        },\n        \"0d36971a5b98b367f54ced708c9af849\": {\n            \"label\": \"Apple iPhone 5\",\n            \"width\": 640,\n            \"height\": 1136,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 320,\n            \"dpHeight\": 2272\n        },\n        \"026beffcc051af995660ebdede986ace\": {\n            \"label\": \"BlackBerry Z10\",\n            \"width\": 768,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 384,\n            \"dpHeight\": 2560\n        },\n        \"fd2dd53e667d6d49e4fa73356fa941dd\": {\n            \"label\": \"BlackBerry Z30\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"707584c1ae17d9b5b2cbe8603c91c147\": {\n            \"label\": \"Google Nexus 4\",\n            \"width\": 768,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 384,\n            \"dpHeight\": 2560\n        },\n        \"91823264de952e7f2347e07db5c4058b\": {\n            \"label\": \"Google Nexus 5\",\n            \"width\": 1080,\n            \"height\": 1920,\n            \"scaleFactor\": 3,\n            \"dpWidth\": 360,\n            \"dpHeight\": 5760\n        },\n        \"cd69817a6e147e8a4677389e56fcf568\": {\n            \"label\": \"Google Nexus S\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"75994faa6a38e31e99b53fcd75534a33\": {\n            \"label\": \"HTC Evo, Touch HD, Desire HD, Desire\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"0cab4dfccdfc880687cb608cfe4159db\": {\n            \"label\": \"HTC One X, EVO LTE\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"c4ff41fcba24d74fc21dc3490ca1edc9\": {\n            \"label\": \"HTC Sensation, Evo 3D\",\n            \"width\": 540,\n            \"height\": 960,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 360,\n            \"dpHeight\": 1440\n        },\n        \"fa969a5e0dd2de53700eeee4ba4ba142\": {\n            \"label\": \"LG Optimus 2X, Optimus 3D, Optimus Black\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"33c4f9364e295ec03531f3a3425819cf\": {\n            \"label\": \"LG Optimus G\",\n            \"width\": 768,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 384,\n            \"dpHeight\": 2560\n        },\n        \"bc47f5275f0efd56fee52d43a8082981\": {\n            \"label\": \"LG Optimus LTE, Optimus 4X HD\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 1.7,\n            \"dpWidth\": 424,\n            \"dpHeight\": 2176\n        },\n        \"0732887e6e324fd10777b735520a34cf\": {\n            \"label\": \"LG Optimus One\",\n            \"width\": 320,\n            \"height\": 480,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 213,\n            \"dpHeight\": 720\n        },\n        \"2e38a78364f09d0da0e9e1a3a68e7fb0\": {\n            \"label\": \"Motorola Defy, Droid, Droid X, Milestone\",\n            \"width\": 480,\n            \"height\": 854,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1281\n        },\n        \"bd4b78dddc7c9625a4141a1b1ddabb87\": {\n            \"label\": \"Motorola Droid 3, Droid 4, Droid Razr, Atrix 4G, Atrix 2\",\n            \"width\": 540,\n            \"height\": 960,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 540,\n            \"dpHeight\": 960\n        },\n        \"3bf1edf21cfa81006183d2b02974c84e\": {\n            \"label\": \"Motorola Droid Razr HD\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 720,\n            \"dpHeight\": 1280\n        },\n        \"ab5a352e0e016b97dac986f06c394f55\": {\n            \"label\": \"Nokia C5, C6, C7, N97, N8, X7\",\n            \"width\": 360,\n            \"height\": 640,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 360,\n            \"dpHeight\": 640\n        },\n        \"4826fb7d7257aeaac992ce699df41b3c\": {\n            \"label\": \"Nokia Lumia 7X0, Lumia 8XX, Lumia 900, N800, N810, N900\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"0a691ab20add7c432200f8fa6527b488\": {\n            \"label\": \"Samsung Galaxy Note\",\n            \"width\": 800,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 400,\n            \"dpHeight\": 2560\n        },\n        \"9c23ee31be29960fbac9e9bbfc2fc7b0\": {\n            \"label\": \"Samsung Galaxy Note 3\",\n            \"width\": 1080,\n            \"height\": 1920,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 540,\n            \"dpHeight\": 3840\n        },\n        \"92177c0508c1d73905a58e2338f2a81f\": {\n            \"label\": \"Samsung Galaxy Note II\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"5222b8866dc4cc606725e16ffcc0a783\": {\n            \"label\": \"Samsung Galaxy S III, Galaxy Nexus\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"37c1541e2bd55cfd0f4073b0ccdf68b3\": {\n            \"label\": \"Samsung Galaxy S, S II, W\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"2f7f64b7dda0144907ff300e83eed465\": {\n            \"label\": \"Samsung Galaxy S4\",\n            \"width\": 1080,\n            \"height\": 1920,\n            \"scaleFactor\": 3,\n            \"dpWidth\": 360,\n            \"dpHeight\": 5760\n        },\n        \"9c24f9057744dad56043702a9703127f\": {\n            \"label\": \"Sony Xperia S, Ion\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"0a8b2732a016a9395c3af5f12dd9c0da\": {\n            \"label\": \"Sony Xperia Sola, U\",\n            \"width\": 480,\n            \"height\": 854,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 480,\n            \"dpHeight\": 854\n        },\n        \"5a153d7f53d82dcb0801f041574a6a43\": {\n            \"label\": \"Sony Xperia Z, Z1\",\n            \"width\": 1080,\n            \"height\": 1920,\n            \"scaleFactor\": 3,\n            \"dpWidth\": 360,\n            \"dpHeight\": 5760\n        }\n    },\n    \"screens\": {\n        \"9e523ae15b61dc766f5c818726881ecf\": {\n            \"label\": \"1920 \\u00d7 1080\",\n            \"width\": 1920,\n            \"height\": 1080,\n            \"dpWidth\": 1920,\n            \"dpHeight\": 1080,\n            \"scaleFactor\": 1\n        },\n        \"07769cd8d0a7d09818b2f0b018042fb7\": {\n            \"label\": \"1366 \\u00d7 768\",\n            \"width\": 1366,\n            \"height\": 768,\n            \"dpWidth\": 1366,\n            \"dpHeight\": 768,\n            \"scaleFactor\": 1\n        },\n        \"72d5478a24194f98b9378e8e0fd65737\": {\n            \"label\": \"1280 \\u00d7 1024\",\n            \"width\": 1280,\n            \"height\": 1024,\n            \"dpWidth\": 1280,\n            \"dpHeight\": 1024,\n            \"scaleFactor\": 1\n        },\n        \"b7a6dd5900cc72e61f0d3479c7e314ec\": {\n            \"label\": \"1280 \\u00d7 800\",\n            \"width\": 1280,\n            \"height\": 800,\n            \"dpWidth\": 1280,\n            \"dpHeight\": 800,\n            \"scaleFactor\": 1\n        },\n        \"43193b0ff671a37d8232ab664190a125\": {\n            \"label\": \"1024 \\u00d7 768\",\n            \"width\": 1024,\n            \"height\": 768,\n            \"dpWidth\": 1024,\n            \"dpHeight\": 768,\n            \"scaleFactor\": 1\n        },\n        \"c29e48814af5443ff5688d9e967ce917\": {\n            \"label\": \"800 \\u00d7 600\",\n            \"width\": 800,\n            \"height\": 600,\n            \"dpWidth\": 800,\n            \"dpHeight\": 600,\n            \"scaleFactor\": 1\n        }\n    }\n};});\n\n","\ndefine('tpl!taoItems/preview/tpl/preview', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n                        <option value=\\\"\";\n  if (helper = helpers.value) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.value); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.selected), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n                        \";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  \n  return \"selected=\\\"selected\\\"\";\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n                        <option value=\\\"\";\n  if (helper = helpers.value) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.value); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-value=\\\"\";\n  if (helper = helpers.dataValue) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.dataValue); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.selected), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n                        \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"preview-overlay tao-scope overlay preview-\";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" item-no-print\\\"\\n     style=\\\"overflow-x: hidden;display:none\\\">\\n    <div class=\\\"preview-container-outer\\\">\\n        <form class=\\\"preview-utility-bar plain\\\">\\n            <div class=\\\"preview-utility-bar-inner grid-row\\\">\\n\\n                <div class=\\\"col-4\\\">\\n                    <input type=\\\"hidden\\\" value=\\\"\\\" data-value=\\\"\\\" class=\\\"standard-device-selector preview-device-selector\\\" data-target=\\\"standard\\\">\\n                    <select class=\\\"preview-type-selector\\\">\\n                        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.previewTypes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                    </select>\\n                </div>\\n                <div class=\\\"col-6 standard-only device-type-and-orientation\\\"></div>\\n                <div class=\\\"col-6 desktop-only device-type-and-orientation\\\">\\n                    <select class=\\\"desktop-device-selector preview-device-selector\\\" data-target=\\\"desktop\\\">\\n                        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.desktopDevices), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                    </select>\\n                </div>\\n                <div class=\\\"col-6 mobile-only device-type-and-orientation\\\">\\n                    <select class=\\\"mobile-device-selector preview-device-selector\\\" data-target=\\\"mobile\\\">\\n                        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.mobileDevices), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                    </select>\\n                    <select tabindex=\\\"-1\\\" class=\\\"mobile-orientation-selector orientation-selector\\\"\\n                            data-target=\\\"mobile\\\">\\n                        <option value=\\\"landscape\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Landscape\", options) : helperMissing.call(depth0, \"__\", \"Landscape\", options)))\n    + \"</option>\\n                        <option value=\\\"portrait\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Portrait\", options) : helperMissing.call(depth0, \"__\", \"Portrait\", options)))\n    + \"</option>\\n                    </select>\\n                </div>\\n                <div class=\\\"col-2\\\">\\n                    <!--label>\\n                        <input type=\\\"checkbox\\\"/>\\n                        <span class=\\\"icon-checkbox\\\"></span>\\n                        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Scale \", options) : helperMissing.call(depth0, \"__\", \"Scale \", options)))\n    + \"\\n                    </label-->\\n                        <span class=\\\"btn-info small preview-closer rgt\\\">\\n                            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Close\", options) : helperMissing.call(depth0, \"__\", \"Close\", options)))\n    + \"\\n                            <span class=\\\"icon-close r\\\"></span>\\n                        </span>\\n                </div>\\n            </div>\\n            <div class=\\\"preview-message-box\\\">\\n                <div class=\\\"feedback-info small\\\">\\n                    <span class=\\\"icon-info\\\"></span>\\n                    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"This preview may be scaled to fit your screen. The final rendering may differ.\", options) : helperMissing.call(depth0, \"__\", \"This preview may be scaled to fit your screen. The final rendering may differ.\", options)))\n    + \"\\n                    <a href=\\\"#\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Dont show this again!\", options) : helperMissing.call(depth0, \"__\", \"Dont show this again!\", options)))\n    + \"</a>\\n                    <span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove this message\", options) : helperMissing.call(depth0, \"__\", \"Remove this message\", options)))\n    + \"\\\" class=\\\"icon-close close-trigger\\\"></span>\\n                </div>\\n            </div>\\n        </form>\\n        <div class=\\\"preview-canvas\\\">\\n\\n            <div class=\\\"preview-scale-container\\\">\\n                <div class=\\\"\";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-preview-frame preview-outer-frame \";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-preview-landscape\\\">\\n                    <div class=\\\"\";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-preview-container preview-container\\\">\\n                        <div class=\\\"preview-item-container\\\"></div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n    <div id=\\\"preview-console\\\">\\n        <span class=\\\"icon-close preview-console-closer\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Close console\", options) : helperMissing.call(depth0, \"__\", \"Close console\", options)))\n    + \"\\\"></span>\\n\\n        <div class=\\\"preview-console-header grid-row clearfix\\\">\\n            <div class=\\\"col-12\\\">\\n                <button type=\\\"button\\\" class=\\\"btn-info small rgt\\\" id=\\\"preview-submit-button\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Submit\", options) : helperMissing.call(depth0, \"__\", \"Submit\", options)))\n    + \"</button>\\n            </div>\\n        </div>\\n        <div class=\\\"preview-console-body clear\\\">\\n            <ul></ul>\\n        </div>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoItems/preview/preview',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'util/strPad',\n    'json!taoItems/preview/resources/device-list.json',\n    'tpl!taoItems/preview/tpl/preview',\n    'ui/modal',\n    'select2',\n    'jquery.cookie'\n], function ($, _, __, strPad, deviceList, previewTpl) {\n    'use strict';\n\n    var overlay,\n        container,\n        orientation = 'landscape',\n        previewType = 'standard',\n        previewTypes = {\n            desktop: __('Desktop preview'),\n            mobile: __('Mobile preview'),\n            standard: __('Actual size')\n        },\n        $doc = $(document),\n        $window = $(window),\n        $body = $(document.body),\n        screenSize = {\n            width: $window.innerWidth(),\n            height: $window.innerHeight()\n        },\n        maxDeviceSize = {\n            width: 0,\n            height: 0\n        },\n        scaleFactor = 1,\n        typeDependant,\n        $feedbackBox,\n        $console,\n        previewContainerMaxWidth,\n        itemUri;\n\n\n    /**\n     * Create data set for device selectors\n     *\n     * @param type\n     * @returns {Array}\n     * @private\n     */\n    var _getDeviceSelectorData = function (type) {\n\n        /*\n         * @todo\n         * The device list is currently based on the devices found on the Chrome emulator.\n         * This is not ideal and should be changed in the future.\n         * I have http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density in mind but we\n         * will need to figure what criteria to apply when generating the list.\n         */\n        var devices = type === 'mobile' ? deviceList.tablets : deviceList.screens,\n            options = [];\n\n        _.forEach(devices, function (value) {\n\n            // figure out the widest possible screen to calculate the scale factor\n            maxDeviceSize = {\n                width: Math.max(maxDeviceSize.width, value.width),\n                height: Math.max(maxDeviceSize.height, value.height)\n            };\n\n            options.push({\n                value: value.label,\n                label: value.label,\n                dataValue: [value.width, value.height].join(','),\n                selected: previewType === value.label\n            });\n        });\n\n\n        return options;\n    };\n\n    /**\n     * Collect all elements that can toggle their class name between mobile-* and desktop-*\n     *\n     * @private\n     */\n    var _setupTypeDependantElements = function () {\n        typeDependant = overlay.add(overlay.find('.preview-scale-container').find('[class*=\"' + previewType + '\"]'));\n    };\n\n\n    /**\n     * Change the class name of all type dependant elements\n     *\n     * @param type\n     */\n    var _setPreviewType = function (newType) {\n\n        if (newType === previewType) {\n            return;\n        }\n        var re = new RegExp(previewType, 'g');\n\n        typeDependant.each(function () {\n            this.className = this.className.replace(re, newType);\n        });\n\n        previewType = newType;\n    };\n\n\n    /**\n     * Set orientation\n     *\n     * @param newOrientation\n     * @private\n     */\n    var _setOrientation = function (newOrientation) {\n        if (newOrientation === orientation) {\n            return;\n        }\n\n        var re = new RegExp(orientation, 'g'),\n            previewFrame = $('.preview-outer-frame')[0];\n\n        previewFrame.className = previewFrame.className.replace(re, newOrientation);\n\n        // reset global orientation\n        orientation = newOrientation;\n    };\n\n    /**\n     * Scale devices down to fit screen\n     * @private\n     */\n    var _scale = function () {\n\n        var $scaleContainer = $('.preview-scale-container'),\n            _scaleFactor = previewType === 'standard' ? 1 : scaleFactor,\n            containerScaledWidth = $scaleContainer.width() * _scaleFactor,\n            left = (screenSize.width - containerScaledWidth) / 2;\n\n        $scaleContainer.css({\n            left: left,\n            '-webkit-transform': 'scale(' + _scaleFactor + ',' + _scaleFactor + ')',\n            '-ms-transform': 'scale(' + _scaleFactor + ',' + _scaleFactor + ')',\n            'transform': 'scale(' + _scaleFactor + ',' + _scaleFactor + ')',\n            '-webkit-transform-origin': '0 0',\n            '-ms-transform-origin': '0 0',\n            'transform-origin': '0 0'\n        });\n    };\n\n    /**\n     * position the preview depending on the height of the toolbar\n     *\n     * @private\n     */\n    var _positionPreview = function () {\n        $('.preview-canvas').css({ paddingTop: $('.preview-utility-bar').outerHeight() + 5 })\n    };\n\n\n    /**\n     * Compute scale factor based on screen size and device size\n     *\n     * @private\n     */\n    var _computeScaleFactor = function () {\n\n        var scaleValues = {\n            x: 1,\n            y: 1\n        };\n\n        // 150/200 = device frames plus toolbar plus console plus some margin\n\n        var requiredSize = {\n            width: maxDeviceSize.width + 150,\n            height: maxDeviceSize.height + 275\n        };\n\n        if (requiredSize.width > screenSize.width) {\n            scaleValues.x = screenSize.width / requiredSize.width;\n        }\n\n        if (requiredSize.height > screenSize.height) {\n            scaleValues.y = screenSize.height / requiredSize.height;\n        }\n\n        scaleFactor = Math.min(scaleValues.x, scaleValues.y);\n    };\n\n    /**\n     * Add functionality to device selectors\n     *\n     * @private\n     */\n    var _setupDeviceSelectors = function () {\n\n\n        var previewDeviceSelectors = overlay.find('.preview-device-selector');\n\n        previewDeviceSelectors.on('change', function () {\n            var elem = $(this),\n                option = this.nodeName.toLowerCase() === 'select' ? this.options[this.selectedIndex] : this,\n                type = elem.data('target'),\n                val = $(option).data('value').split(','),\n                sizeSettings,\n                i = val.length,\n                container = overlay.find('.' + type + '-preview-container');\n\n\n            while (i--) {\n                val[i] = parseFloat(val[i]);\n            }\n\n            if (type === 'mobile' && orientation === 'portrait') {\n                sizeSettings = {\n                    width: val[1],\n                    height: val[0]\n                };\n            }\n            else {\n                sizeSettings = {\n                    width: val[0],\n                    height: val[1]\n                };\n            }\n\n            if (sizeSettings.width === container.width() && sizeSettings.height === container.height()) {\n                return false;\n            }\n            _setPreviewType(type);\n            container.css(sizeSettings);\n            _scale();\n            _adaptFrameSize();\n        });\n\n        previewDeviceSelectors.each(function () {\n            if (this.nodeName.toLowerCase() === 'select') {\n                $(this).select2({\n                    minimumResultsForSearch: -1\n                });\n            }\n        });\n    };\n\n    /**\n     * Setup orientation selector. There is no actual orientation switch for desktop but it could\n     * be added easily if required.\n     * @private\n     */\n    var _setupOrientationSelectors = function () {\n\n        $('select.orientation-selector').on('change',function () {\n\n            var type = $(this).data('target'),\n                previewFrame = $('.' + type + '-preview-frame'),\n                container = previewFrame.find('.' + type + '-preview-container'),\n                sizeSettings,\n                newOrientation = $(this).val();\n\n            if (newOrientation === orientation) {\n                return false;\n            }\n\n            sizeSettings = {\n                height: container.width(),\n                width: container.height()\n            };\n\n            container.css(sizeSettings);\n            _scale();\n            _adaptFrameSize();\n\n\n            _setOrientation(newOrientation);\n\n        }).select2({\n            minimumResultsForSearch: -1\n        });\n    };\n\n    /**\n     * Close preview\n     *\n     * @returns {*|HTMLElement}\n     */\n    var _setupClosers = function () {\n        var $closer = overlay.find('.preview-closer'),\n            $feedbackCloser = $feedbackBox.find('.close-trigger'),\n            $hideForever = $feedbackBox.find('a');\n        var $iframe = $('#preview-iframe');\n\n        $closer.on('click', function () {\n//            commonRenderer.setContext($('.item-editor-item'));\n            overlay.hide();\n\n            //empty the iframe\n            $iframe.off('load').attr('src', 'about:blank');\n        });\n\n        $doc.keyup(function (e) {\n            if (e.keyCode === 27) {\n                $closer.trigger('click');\n            }\n        });\n\n        $feedbackCloser.on('click', function () {\n            $feedbackBox.hide();\n            _positionPreview();\n            _scale();\n        });\n\n        $hideForever.on('click', function (e) {\n            e.preventDefault();\n            $.cookie('hidePreviewFeedback', true, { expires: 1000, path: '/' });\n            $feedbackCloser.trigger('click');\n        });\n    };\n\n    /**\n     * Build options for preview types\n     *\n     * @returns {Array}\n     * @private\n     */\n    var _getPreviewTypes = function () {\n        var options = [];\n        _(previewTypes).forEach(function (_previewLabel, _previewType) {\n            options.push({\n                value: _previewType,\n                label: _previewLabel,\n                selected: previewType === _previewType\n            });\n        });\n        return options;\n    };\n\n    /**\n     * Select preview type\n     *\n     * @private\n     */\n    var _setupViewSelector = function () {\n\n        $('select.preview-type-selector').on('change',function () {\n            var _previewType = $(this),\n                value = _previewType.val();\n\n            _setPreviewType(value);\n\n            $('.' + value + '-device-selector').trigger('change');\n        }).select2({\n            minimumResultsForSearch: -1\n        });\n\n    };\n\n    var _adaptFrameSize = function () {\n\n        var $previewContainer = $('.preview-container'),\n            $iframe = (function () {\n                var _iframe = $previewContainer.find('iframe');\n                _iframe.height('');\n                return _iframe;\n            }()),\n            contentHeight = $iframe.contents().outerHeight(),\n            containerHeight = $previewContainer.innerHeight();\n\n        if (previewType !== 'standard') {\n            if (contentHeight < containerHeight) {\n                contentHeight = containerHeight;\n            }\n        }\n        else {\n            $previewContainer.height(contentHeight + 10);\n        }\n\n        $iframe.height(contentHeight);\n    };\n\n\n    /**\n     * Set the size for the standard preview\n     * @param height\n     * @private\n     */\n    var _updateStandardPreviewSize = function (height) {\n        var $selector = $('.standard-device-selector'),\n            values = ($selector.val() ? $selector.val().split(',') : '') || [$window.width().toString()],\n            valueStr = values.join(',');\n\n        values[1] = height || values[1] || '1200';\n\n        $selector.val(valueStr).data('value', valueStr);\n    };\n\n    var _initConsole = function () {\n\n        var $body = $console.find('.preview-console-body'),\n            $listing = $body.find('ul'),\n            $closer = $console.find('.preview-console-closer');\n\n        $console.off('updateConsole').on('updateConsole', function (event, type, message) {\n            var timer = new Date(),\n                logTime = [\n                    strPad(timer.getHours(), 2, '0', 'STR_PAD_LEFT'),\n                    strPad(timer.getMinutes(), 2, '0', 'STR_PAD_LEFT'),\n                    strPad(timer.getSeconds(), 2, '0', 'STR_PAD_LEFT')\n                ].join(':'),\n                msgStr = '<span class=\"log-time\">' + strPad(logTime, 12, ' ') + '</span> '\n                    + '<span class=\"log-type\">' + strPad(type, 18, ' ') + '</span> '\n                    + '<span class=\"log-message\">' + strPad(message, 18, ' ') + '</span>';\n            $listing.append('<li><pre>' + msgStr + '</pre></li>');\n            if (!$body.is(':visible')) {\n                $body.slideDown('slow', function () {\n                    $closer.show();\n                    $listing.scrollTop(10000);\n                });\n            }\n            else {\n                $listing.scrollTop(10000);\n            }\n        });\n\n        $closer.on('click', function () {\n            $body.slideUp('slow', function () {\n                $closer.hide();\n            });\n        });\n    };\n\n\n    /**\n     * Display the preview\n     */\n    var show = function () {\n\n        $.ajax({\n            url: itemUri,\n            dataType: 'html'\n        }).done(function (data) {\n            $('.preview-item-container').html(data);\n        });\n\n        // $.show() does not work from the item manager\n        // this is either a miracle or a jquery bug\n        // overlay.hide().show();\n        overlay[0].style.display = 'block';\n        overlay.height('100%');\n        overlay.find('select:visible').trigger('change');\n        _scale();\n        _positionPreview();\n    };\n\n    /**\n     * Create preview\n     *\n     * @param string _itemUri\n     */\n    var init = function (_itemUri) {\n\n        if(!_itemUri || _itemUri.length === 0){\n            throw new TypeError('Wrong URI');\n        }\n\n        $('.preview-overlay').remove();\n        container = null;\n        overlay = $(previewTpl({\n            mobileDevices: _getDeviceSelectorData('mobile'),\n            desktopDevices: _getDeviceSelectorData('desktop'),\n            previewTypes: _getPreviewTypes(),\n            previewType: previewType\n        }));\n\n        $body.append(overlay);\n\n        previewContainerMaxWidth = parseInt($('.preview-container').css('max-width'), 10);\n\n        $feedbackBox = overlay.find('.preview-message-box');\n        if ($.cookie('hidePreviewFeedback')) {\n            $feedbackBox.hide();\n        }\n\n        $console = overlay.find('#preview-console');\n\n        _initConsole();\n        _updateStandardPreviewSize();\n        _setupTypeDependantElements();\n        _setupDeviceSelectors();\n        _setupOrientationSelectors();\n        _setupViewSelector();\n        _setupClosers();\n        _computeScaleFactor();\n        _setPreviewType(previewType);\n        _setOrientation(orientation);\n\n        $window.on('resize orientationchange', function (e) {\n            screenSize = {\n                width: $window.innerWidth(),\n                height: $window.innerHeight()\n            };\n            _updateStandardPreviewSize();\n            _computeScaleFactor();\n            _scale();\n        });\n\n        itemUri = _itemUri;\n\n        return overlay;\n    };\n\n    return {\n        init: init,\n        show: show\n    };\n});\n\n","define('taoQtiItem/qtiCreator/editor/preparePrint',[\n    'jquery'\n], function ($) {\n    'use strict';\n\n    /**\n     * Prepare item for printing.\n     *\n     * @author <a href=\"mailto:dieter@taotesting.com\">Dieter Raber</a>\n     */\n    var preparePrint = function () {\n\n        function initHideOnPrint(elem) {\n            elem.siblings().each(function () {\n                $(this).addClass('item-no-print');\n            });\n            return elem.parent();\n        }\n\n        var parent = initHideOnPrint($('#item-editor-scope').parent());\n        while (parent.length && parent.get(0).nodeName.toLowerCase() !== 'body') {\n            parent = initHideOnPrint(parent);\n        }\n\n        $('#item-editor-toolbar, .item-editor-sidebar').addClass('item-no-print');\n    };\n\n    $('#print-trigger').on('click', function () {\n        window.print();\n    });\n\n    return preparePrint;\n});\n\n\n\n","\ndefine(\"json!taoQtiItem/qtiCreator/editor/resources/font-stacks.json\", function(){ return {\"sans-serif\":[\"Arial, \\\"Helvetica Neue\\\", Helvetica, sans-serif\",\"\\\"Avant Garde\\\", Avantgarde, \\\"Century Gothic\\\", CenturyGothic, \\\"AppleGothic\\\", sans-serif\",\"Calibri, Candara, Segoe, \\\"Segoe UI\\\", Optima, Arial, sans-serif\",\"Candara, Calibri, Segoe, \\\"Segoe UI\\\", Optima, Arial, sans-serif\",\"\\\"Century Gothic\\\", CenturyGothic, AppleGothic, sans-serif\",\"Corbel, \\\"Lucida Grande\\\", \\\"Lucida Sans Unicode\\\", \\\"Lucida Sans\\\", \\\"DejaVu Sans\\\", \\\"Bitstream Vera Sans\\\", \\\"Liberation Sans\\\", Verdana, \\\"Verdana Ref\\\", sans-serif\",\"\\\"Franklin Gothic Medium\\\", \\\"Franklin Gothic\\\", \\\"ITC Franklin Gothic\\\", Arial, sans-serif\",\"Frutiger, \\\"Frutiger Linotype\\\", Univers, Calibri, \\\"Gill Sans\\\", \\\"Gill Sans MT\\\", \\\"Myriad Pro\\\", Myriad, \\\"DejaVu Sans Condensed\\\", \\\"Liberation Sans\\\", \\\"Nimbus Sans L\\\", Tahoma, Geneva, \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif\",\"Futura, \\\"Century Gothic\\\", AppleGothic, \\\"Trebuchet MS\\\", sans-serif\",\"Geneva, Verdana, \\\"Lucida Sans\\\", \\\"Lucida Grande\\\", \\\"Lucida Sans Unicode\\\", sans-serif\",\"\\\"Gill Sans\\\", \\\"Gill Sans MT\\\", Calibri, sans-serif\",\"\\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif\",\"Impact, Haettenschweiler, \\\"Franklin Gothic Bold\\\", Charcoal, \\\"Helvetica Inserat\\\", \\\"Bitstream Vera Sans Bold\\\", \\\"Arial Black\\\", sans-serif\",\"\\\"Lucida Grande\\\", \\\"Lucida Sans Unicode\\\", \\\"Lucida Sans\\\", Geneva, Verdana, sans-serif\",\"Optima, Segoe, \\\"Segoe UI\\\", Candara, Calibri, Arial, sans-serif\",\"\\\"Segoe UI\\\", Candara, \\\"Bitstream Vera Sans\\\", \\\"DejaVu Sans\\\", \\\"Bitstream Vera Sans\\\", \\\"Trebuchet MS\\\", Verdana, \\\"Verdana Ref\\\", sans-serif\",\"Tahoma, Verdana, Segoe, sans-serif\",\"\\\"Trebuchet MS\\\", \\\"Lucida Grande\\\", \\\"Lucida Sans Unicode\\\", \\\"Lucida Sans\\\", Tahoma, sans-serif\",\"Verdana, Geneva, Tahoma, sans-serif\"],\"serif\":[\"Baskerville, \\\"Baskerville Old Face\\\", \\\"Hoefler Text\\\", Garamond, \\\"Times New Roman\\\", serif\",\"\\\"Big Caslon\\\", \\\"Book Antiqua\\\", \\\"Palatino Linotype\\\", Georgia, serif\",\"\\\"Bodoni MT\\\", Didot, \\\"Didot LT STD\\\", \\\"Hoefler Text\\\", Garamond, \\\"Times New Roman\\\", serif\",\"\\\"Book Antiqua\\\", Palatino, \\\"Palatino Linotype\\\", \\\"Palatino LT STD\\\", Georgia, serif\",\"\\\"Calisto MT\\\", \\\"Bookman Old Style\\\", Bookman, \\\"Goudy Old Style\\\", Garamond, \\\"Hoefler Text\\\", \\\"Bitstream Charter\\\", Georgia, serif\",\"Cambria, \\\"Hoefler Text\\\", Utopia, \\\"Liberation Serif\\\", \\\"Nimbus Roman No9 L Regular\\\", Times, \\\"Times New Roman\\\", serif\",\"Constantia, \\\"Lucida Bright\\\", Lucidabright, \\\"Lucida Serif\\\", Lucida, \\\"DejaVu Serif\\\", \\\"Bitstream Vera Serif\\\", \\\"Liberation Serif\\\", Georgia, serif\",\"Didot, \\\"Didot LT STD\\\", \\\"Hoefler Text\\\", Garamond, \\\"Times New Roman\\\", serif\",\"Garamond, Baskerville, \\\"Baskerville Old Face\\\", \\\"Hoefler Text\\\", \\\"Times New Roman\\\", serif\",\"Georgia, Palatino,\\\" Palatino Linotype\\\", Times, \\\"Times New Roman\\\", serif\",\"\\\"Goudy Old Style\\\", Garamond, \\\"Big Caslon\\\", \\\"Times New Roman\\\", serif\",\"\\\"Hoefler Text\\\", \\\"Baskerville old face\\\", Garamond, \\\"Times New Roman\\\", serif\",\"\\\"Lucida Bright\\\", Georgia, serif\",\"\\\"Palatino Linotype\\\", Palatino, Palladio, \\\"URW Palladio L\\\", \\\"Book Antiqua\\\", Baskerville, \\\"Bookman Old Style\\\", \\\"Bitstream Charter\\\", \\\"Nimbus Roman No9 L\\\", Garamond, \\\"Apple Garamond\\\", \\\"ITC Garamond Narrow\\\", \\\"New Century Schoolbook\\\", \\\"Century Schoolbook\\\", \\\"Century Schoolbook L\\\", Georgia, serif\",\"Perpetua, Baskerville, \\\"Big Caslon\\\", \\\"Palatino Linotype\\\", Palatino, \\\"URW Palladio L\\\", \\\"Nimbus Roman No9 L\\\", serif\",\"Rockwell, \\\"Courier Bold\\\", Courier, Georgia, Times, \\\"Times New Roman\\\", serif\",\"\\\"Times New Roman\\\", TimesNewRoman, Times, Baskerville, Georgia, serif\"],\"monospace\":[\"\\\"Andale Mono\\\", AndaleMono, monospace\",\"Consolas, \\\"Andale Mono WT\\\", \\\"Andale Mono\\\", \\\"Lucida Console\\\", \\\"Lucida Sans Typewriter\\\", \\\"DejaVu Sans Mono\\\", \\\"Bitstream Vera Sans Mono\\\", \\\"Liberation Mono\\\", \\\"Nimbus Mono L\\\", Monaco, \\\"Courier New\\\", Courier, monospace\",\"\\\"Courier New\\\", Courier, \\\"Lucida Sans Typewriter\\\", \\\"Lucida Typewriter\\\", monospace\",\"\\\"Lucida Console\\\", \\\"Lucida Sans Typewriter\\\", Monaco, \\\"Bitstream Vera Sans Mono\\\", monospace\",\"Monaco, Consolas, \\\"Lucida Console\\\", monospace\",\"\\\"Rockwell Extra Bold\\\", \\\"Rockwell Bold\\\", monospace\"]};});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/cssToggler', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n<li data-css-res=\\\"\";\n  if (helper = helpers.path) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.path); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"icon-preview style-sheet-toggler\\\" title=\\\"\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></span>\\n    <span class=\\\"file-label truncate\\\" title=\\\"\";\n  if (helper = helpers.editLabelTxt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.editLabelTxt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n    <input type=\\\"text\\\" class=\\\"style-sheet-label-editor\\\" value=\\\"\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"icon-bin\\\" title=\\\"\";\n  if (helper = helpers.deleteTxt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.deleteTxt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-role=\\\"css-delete\\\"></span>\\n    <span class=\\\"icon-download\\\" title=\\\"\";\n  if (helper = helpers.downloadTxt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.downloadTxt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-role=\\\"css-download\\\"></span>\\n</li>\\n\";\n  return buffer;\n  }\n\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.stylesheets), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\n\n/**\n *\n * @author dieter <dieter@taotesting.com>\n */\n\ndefine('taoQtiItem/qtiCreator/editor/styleEditor/styleEditor',[\n    'jquery',\n    'lodash',\n    'helpers',\n    'i18n',\n    'urlParser',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/cssToggler',\n    'lib/jquery.fileDownload'\n], function (\n    $,\n    _,\n    helpers,\n    __,\n    UrlParser,\n    cssTpl\n    ) {\n    'use strict';\n\n    var itemConfig;\n\n    /**\n     * generate Ajax URI\n     * @param action\n     * @returns {*}\n     */\n    var _getUri = function(action) {\n        return helpers._url(action, 'QtiCssAuthoring', 'taoQtiItem');\n    };\n\n    /**\n     * Extract the file name from a path\n     * @param path\n     * @returns {*}\n     * @private\n     */\n    var _basename = function(path) {\n        return path.substring(path.lastIndexOf('/') + 1);\n    };\n\n    /**\n     * Manage style rules as CSS rather than style attributes.\n     * Must be used by all widgets that change the style of an item.\n     */\n    var styleEditor = (function ($, doc) {\n\n        // stylesheet as object\n        var style = {},\n            // DOM element to hold the style\n            $styleElem = (function () {\n                var styleElem = $('#item-editor-user-styles');\n                if(!styleElem.length) {\n                    styleElem = $('<style>', { id : 'item-editor-user-styles' } );\n                    $('head').append(styleElem);\n                }\n                else {\n                    styleElem.empty();\n                }\n                return styleElem;\n            }()),\n            currentItem,\n            common = {\n                title: __('Disable this stylesheet temporarily'),\n                deleteTxt: __('Remove this stylesheet'),\n                editLabelTxt: __('Edit stylesheet label'),\n                downloadTxt: __('Download this stylesheet'),\n                preparingMessageHtml: __('Preparing CSS, please wait'),\n                failMessageHtml: __('There was a problem downloading your CSS, please try again.'),\n                isInValidLocalTxt: __('This stylesheet has not been found on the server. you may want to delete this reference')\n            },\n            customStylesheet = '';\n\n\n        /**\n         * Create CSS and add it to DOM\n         *\n         * @param dontAppend whether or not to append the stylesheet to the DOM. This is used by the iframe preview\n         */\n        var create = function(dontAppend) {\n\n            var key1, // first level key, could be selector or media query\n                key2, // second level key, could be css property or selector\n                mSelector, // selector inside a media query\n                mProp, // property inside a media query\n                css = '';\n\n            if(_.isEmpty(style)){\n                return erase();\n            }\n\n            // rebuild CSS\n            for (key1 in style) {\n                if (!style.hasOwnProperty(key1)) {\n                    continue;\n                }\n\n                css += key1 + '{';\n                for (key2 in style[key1]) {\n                    if (!style[key1].hasOwnProperty(key2)) {\n                        continue;\n                    }\n                    // in the case of a surrounding media query\n                    if (_.isPlainObject(style[key1][key2])) {\n                        for (mSelector in style[key1][key2]) {\n                            css += key2 + '{';\n                            for (mProp in style[key1][key2]) {\n                                css += mProp + ':' + style[key1][key2][mSelector] + ';';\n                            }\n                            css += '}';\n                        }\n                    }\n                    // regular selectors\n                    else {\n                        css += key2 + ':' + style[key1][key2] + ';';\n                    }\n                }\n                css += '}\\n';\n            }\n\n            if(!dontAppend) {\n                $styleElem.text(css);\n            }\n            return css;\n\n        };\n\n        /**\n         * Apply rule to CSS\n         *\n         * @param {{string}} selector\n         * @param {{string}} property\n         * @param {{string}} value\n         */\n        var apply = function (selector, property, value) {\n            style[selector] = style[selector] || {};\n\n            // delete this rule\n            if (!value) {\n                delete(style[selector][property]);\n                if(_.size(style[selector]) === 0) {\n                    delete(style[selector]);\n                }\n            }\n            // add this rule\n            else {\n                style[selector][property] = value;\n            }\n\n            // apply rule\n            create();\n\n            /**\n             * Fires a change notification on the item style\n             * @event taoQtiItem/qtiCreator/editor/styleEditor/styleEditor#stylechange.qti-creator\n             */\n            $(document).trigger('stylechange.qti-creator');\n        };\n\n\n        /**\n         * Delete all custom styles\n         */\n        var erase = function() {\n            style = {};\n            $styleElem.text('');\n            return false;\n        };\n\n        /**\n         * Save the resulting CSS to a file\n         */\n        var save = function () {\n            verifyInit();\n            return $.post(_getUri('save'), _.extend({}, itemConfig,\n                {\n                    cssJson: JSON.stringify(style),\n                    stylesheetUri: customStylesheet.attr('href')\n                }\n            ));\n        };\n\n\n        /**\n         * Download CSS as file\n         */\n        var download = function(uri) {\n            verifyInit();\n            $.fileDownload(_getUri('download'), {\n                preparingMessageHtml: common.preparingMessageHtml,\n                failMessageHtml: common.failMessageHtml,\n                successCallback: function () { },\n                httpMethod: 'POST',\n                data: _.extend({}, itemConfig, { stylesheetUri: uri })\n            });\n        };\n\n\n        /**\n         * Has the class been initialized\n         *\n         * @returns {boolean}\n         */\n        var verifyInit = function() {\n            if(!itemConfig) {\n                throw new Error('Missing itemConfig, did you call styleEditor.init()?');\n            }\n            return true;\n        };\n\n        /**\n         * Add a single stylesheet, the custom stylesheet will be loaded as object\n         *\n         * @param stylesheet\n         * @returns {*} promise\n         */\n        var addStylesheet = function(stylesheet) {\n\n            var fileName,\n                link,\n                stylesheets = [],\n                listEntry,\n                parser,\n                loadStylesheet = function(link, stylesheet, isLocal, isValid) {\n\n                    // in the given scenario we cannot test whether a remote stylesheet really exists\n                    // this would require to pipe all remote css via php curl\n                    var isInvalidLocal = isLocal && !isValid,\n                        tplData = {\n                            path: stylesheet.attr('href'),\n                            label: (stylesheet.attr('title') || fileName),\n                            title: common.title,\n                            deleteTxt: common.deleteTxt,\n                            downloadTxt: common.downloadTxt,\n                            editLabelTxt: isInvalidLocal ? common.isInValidLocalTxt : common.editLabelTxt\n                        };\n\n                    stylesheets.push(tplData);\n\n                    // create list entry\n                    listEntry = $(cssTpl({ stylesheets: stylesheets }));\n\n                    listEntry.data('stylesheetObj', stylesheet);\n\n                    // initialize download button\n                    $('#style-sheet-toggler').append(listEntry);\n\n                    if(isInvalidLocal) {\n                        listEntry.addClass('not-available');\n                        listEntry.find('[data-role=\"css-download\"], .style-sheet-toggler').css('visibility', 'hidden');\n                        return;\n                    }\n\n                    $styleElem.before(link);\n\n                    // time difference between loading the css file and applying the styles\n                    setTimeout(function() {\n                        $(doc).trigger('customcssloaded.styleeditor', [style]);\n                        $(window).trigger('resize');\n                    }, isLocal ? 500 : 3500);\n\n                };\n\n            // argument is uri\n            if(_.isString(stylesheet)) {\n                stylesheet = currentItem.createStyleSheet(stylesheet);\n            }\n\n\n            fileName = _basename(stylesheet.attr('href'));\n            // link with cache buster\n            link = (function() {\n                var _link = $(stylesheet.render()),\n                    _href = _link.attr('href'),\n                    _sep  = _href.indexOf('?') > -1 ? '&' : '?';\n                _link.attr('href', _href + _sep + (new Date().getTime()).toString());\n                return _link;\n            }());\n\n            // cache css before applying allows for a pretty good guess\n            // when the stylesheet is loaded and the buttons in the style editor\n            // can be changed\n            parser = new UrlParser(link.attr('href'));\n            if (parser.checkCORS()) {\n            $.when($.ajax(link.attr('href'))).then(function() {\n                    loadStylesheet(link, stylesheet, true, true);\n                },\n                    // add file to list even on failure to be able to remove it from the item\n                    function() {\n                        loadStylesheet(link, stylesheet, true, false);\n            });\n            }\n            // otherwise load it with a big timeout and hope for the best\n            // unfortunately this dirty way is the only possibility in cross domain environments\n            else {\n                loadStylesheet(link, stylesheet, false);\n            }\n\n        };\n\n\n        /**\n         * Add style sheets to toggler\n         * @param item\n         */\n        var addItemStylesheets = function() {\n            \n            var currentStylesheet;\n\n            for(var key in currentItem.stylesheets) {\n                if(!currentItem.stylesheets.hasOwnProperty(key)) {\n                    continue;\n                }\n\n                currentStylesheet = currentItem.stylesheets[key];\n\n                if('tao-user-styles.css' === _basename(currentStylesheet.attr('href'))) {\n                    customStylesheet = currentStylesheet;\n                    continue;\n                }\n\n                // add those that are loaded synchronously\n                addStylesheet(currentItem.stylesheets[key]);\n            }\n            \n            // if no custom css had been found, add empty stylesheet anyway\n            if(!customStylesheet) {\n                customStylesheet = currentItem.createStyleSheet('style/custom/tao-user-styles.css');\n            }\n        };\n\n        /**\n         * Remove orphaned stylesheets. These would be present if previously another item has been edited\n         */\n        var removeOrphanedStylesheets = function() {\n            $('link[data-serial]').remove();\n        };\n        \n        /**\n         * retrieve the current item\n         *\n         * @returns {*}\n         */\n        var getItem = function() {\n            return currentItem;\n        };\n\n\n        /**\n         * Initialize class\n         * @param config\n         */\n        var init = function(item, config) {\n            \n            // promise\n            currentItem = item;\n            \n            //prepare config object (don't pass all of them, otherwise, $.param will break)\n            itemConfig = {\n                uri : config.uri,\n                lang : config.lang,\n                baseUrl : config.baseUrl\n            };\n\n            removeOrphanedStylesheets();\n            \n            // this creates at the same time customStylesheet in case it doesn't exist yet\n            addItemStylesheets();\n\n            var resizerTarget = $('#item-editor-item-resizer').data('target'),\n                href = customStylesheet.attr('href');\n            \n            currentItem.data('responsive', true);\n\n            $.when(\n                $.getJSON (\n                    _getUri('load'),\n                    _.extend({}, itemConfig, { stylesheetUri: href })\n                )\n            ).then(function(_style) {\n                // copy style to global style\n                style = _style;\n\n                // apply rules\n                create();\n\n                // reset meta in case the width is set in the custom stylesheet\n                if(style.length){\n                    currentItem.data('responsive', !!(style[resizerTarget] && style[resizerTarget].width));\n                }\n\n                // inform editors about custom sheet\n                $(doc).trigger('customcssloaded.styleeditor', [style]);\n\n            });\n\n        };\n\n        var getStyle = function() {\n            return style;\n        };\n\n        // expose public functions\n        return {\n            apply: apply,\n            save: save,\n            download: download,\n            erase: erase,\n            init: init,\n            create: create,\n            getItem: getItem,\n            getStyle: getStyle,\n            addStylesheet: addStylesheet\n        };\n    }($, document));\n\n    return styleEditor;\n});\n\n","define('taoQtiItem/qtiCreator/editor/styleEditor/fontSelector',[\n    'jquery',\n    'json!taoQtiItem/qtiCreator/editor/resources/font-stacks.json',\n    'taoQtiItem/qtiCreator/editor/styleEditor/styleEditor',\n    'i18n',\n    'select2'\n], function ($, fontStacks, styleEditor, __) {\n    'use strict';\n\n    /**\n     * Populate a select box with a list of fonts to select from.\n     * On change apply the selected font to the specified target.\n     *\n     * @example\n     * The expected mark-up must be like this:\n     * <select\n     *   data-target=\"selector-of-targeted-element\"\n     *   data-not-selected=\"Select a font\n     *   data-selected=\"Reset to default\">\n     * <option value=\"\"></option>\n     *\n     * The function is called like this:\n     * fontSelector('the-select-box-selector');\n     *\n     * @param selector\n     */\n    var fontSelector = function () {\n        var fontSelector = $('select#item-editor-font-selector'),\n            target = fontSelector.data('target'),\n            $target = $(target),\n            normalize = function (font) {\n                return font.replace(/\"/g, \"'\").replace(/, /g, \",\");\n            },\n            clean = function (font) {\n                return font.substring(0, font.indexOf(',')).replace(/'/g, '');\n            },\n            resetButton =  fontSelector.parent().find('[data-role=\"font-selector-reset\"]'),\n            generic,\n            optGroup,\n            option,\n            i = 0,\n            l,\n            toLabel = function (font) {\n                font = font.replace(/-/g, ' ');\n                return (font + '').replace(/^([a-z\\u00E0-\\u00FC])|\\s+([a-z\\u00E0-\\u00FC])/g, function ($1) {\n                    return $1.toUpperCase();\n                });\n            },\n            format = function (state) {\n                var originalOption = state.element;\n                if (!state.id) return state.text;\n                return '<span style=\"font-size: 12px;' + $(originalOption).attr('style') + '\">' + state.text + '</span>';\n            },\n            reset = function() {\n                styleEditor.apply(target, 'font-family');\n                fontSelector.select2('val', $target.css('font-family'));\n            };\n\n\n        fontSelector.append('<option value=\"\">' + __('Default')  + '</option>');\n\n        for (generic in fontStacks) {\n            if (fontStacks.hasOwnProperty(generic)) {\n                optGroup = $('<optgroup>', { label: toLabel(generic) });\n                l = fontStacks[generic].length;\n                for (i = 0; i < l; i++) {\n                    // normalize quotes\n                    fontStacks[generic][i] = normalize(fontStacks[generic][i]);\n                    option = $('<option>', {\n                        value: fontStacks[generic][i],\n                        text: clean(fontStacks[generic][i])\n                    })\n                        .css({\n                            fontFamily: fontStacks[generic][i]\n                        });\n                    optGroup.append(option);\n                }\n                fontSelector.append(optGroup);\n            }\n        }\n\n\n\n        resetButton.on('click', reset);\n\n        fontSelector.select2({\n            formatResult: format,\n            formatSelection: format,\n            width: 'resolve'\n        });\n\n        $(document).on('customcssloaded.styleeditor', function(e, style) {\n            //@todo : to be fixed ! currently disabled because keep triggering error \"style is undefined\"\n            return;\n            if(style[target] && style[target]['font-family']) {\n                fontSelector.select2('val', style[target]['font-family']);\n            }\n        });\n\n        fontSelector.on('change', function () {\n            styleEditor.apply(target, 'font-family', $(this).val());\n        });\n    };\n\n    return fontSelector;\n});\n\n\n","define('taoQtiItem/qtiCreator/helper/popup',[\n    'jquery',\n    'lodash',\n    'core/dataattrhandler'\n], function(\n    $,\n    _,\n    dataAttrHandler\n    ){\n\n    'use strict';\n\n\n    var init = function($trigger, options) {\n\n        var defaults = {\n            top: null,     // || pixels relative to the top border of the sidebar\n            right: 2,      // pixels relative to the left border of the sidebar\n            title: null    // || string title\n        };\n\n        options = _.assign(defaults, (options || {}));\n\n        // open the popup\n        var open = function($trigger, $popup) {\n\n            // The following sidebar related variables apply only in the case where the popup\n            // is attached to a sidebar. In the the case of farbtastic for example\n            // the popup is attached to the body.\n            var $container = $popup.parents('.sidebar-popup-parent');\n\n\n            // this makes sure the popup height never exceeds the height of the content part of the page\n            var $actionBar = $('.item-editor-action-bar');\n            var baseOffsetTop = $actionBar.offset().top - $actionBar.height();\n            var maxHeight = $(window).height() - baseOffsetTop;\n\n            var top = _.isNull(options.top) ? $trigger.offset().top - baseOffsetTop - ($popup.height() / 2) : options.top;\n            var $titleArea = $popup.find('.sidebar-popup-title');\n            var $title = $titleArea.find('h3');\n            if($titleArea.length) {\n                maxHeight -= $titleArea.height();\n            }\n\n            $trigger.trigger('beforeopen.popup', { popup: $popup, trigger: $trigger });\n            $popup.show();\n\n            $popup.css({\n                top: Math.max(baseOffsetTop, top),\n                right: $container.hasClass('item-editor-sidebar-wrapper') ? $container.width() + options.right : options.right\n            });\n\n            if(options.title) {\n                $title.text(options.title);\n            }\n\n            $popup.find('.sidebar-popup-content').css({ maxHeight: maxHeight });\n\n            $trigger.trigger('open.popup', { popup: $popup, trigger: $trigger });\n        };\n\n        // close the popup\n        var close = function($trigger, $popup) {\n            $trigger.trigger('beforeclose.popup', { popup: $popup, trigger: $trigger });\n            $popup.hide();\n            $trigger.trigger('close.popup', { popup: $popup, trigger: $trigger });\n        };\n\n\n        // find popup, assign basic actions, add it to trigger props\n        $trigger.each(function() {\n            var _trigger = $(this),\n                $popup = options.popup || (function() {\n                    return dataAttrHandler.getTarget('popup', _trigger);\n                }());\n\n            var $closer = $popup.find('.closer'),\n                $dragger = $popup.find('.sidebar-popup-title').not($closer);\n\n            if(!$popup || !$popup.length) {\n                throw new Error('No popup found');\n            }\n\n            // close popup by clicking on x button\n            if($closer.length) {\n                $closer.on('click', function() {\n                    close(_trigger, $popup);\n                });\n            }\n\n            // drag popup\n            if($dragger.length){\n                $popup.draggable({\n                    handle : $dragger\n                });\n            }\n\n            // assign popup to trigger to avoid future DOM operations\n            _trigger.prop('popup', $popup);\n        });\n\n        // toggle popup\n        $trigger.on('click', function(e) {\n            var _trigger = $(e.target),\n                $popup   = _trigger.prop('popup');\n\n            // in case the trigger is an <a>\n            e.preventDefault();\n\n            // toggle popup\n            if($popup.is(':visible')) {\n                close(_trigger, $popup);\n            }\n            else {\n                open(_trigger, $popup);\n            }\n        });\n    };\n\n\n    function reorderZindex() {\n\n    }\n\n\n\n    return {\n        init: init,\n        reorderZindex: reorderZindex\n    };\n\n});\n\n\n\n","/**\n * Farbtastic Color Picker 1.2\n *  2008 Steven Wittens\n *\n * This program is free software; you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation; either version 2 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n */\n\n/**\n * NOTE: THIS IS A MOD OF COLOR PICKER 1.2 - DO NOT UPGRADE!\n * 2014-03-06  dieter@taotesting.com\n */\ndefine('lib/farbtastic/farbtastic',['jquery'], function(jQuery){\n    var $ = jQuery;\n\njQuery.fn.farbtastic = function(callback) {\n    $.farbtastic(this, callback);\n    return this;\n};\n\njQuery.farbtastic = function(container, callback) {\n    if (!container.length) return;\n    var container = $(container).get(0);\n    return container.farbtastic || (container.farbtastic = new jQuery._farbtastic(container, callback));\n}\n\njQuery._farbtastic = function(container, callback) {\n    // Store farbtastic object\n    var fb = this;\n\n    // Insert markup\n    var e = $('<div>', {\n        'class': 'farbtastic'\n    }),\n        colorObj = $('<div>', {\n            'class': 'color'\n        }),\n        wheelObj = $('<div>', {\n            'class': 'wheel'\n        }),\n        overlayObj = $('<div>', {\n            'class': 'overlay'\n        }),\n        hMarkerObj = $('<div>', {\n            'class': 'h-marker marker'\n        }),\n        slMarkerObj = $('<div>', {\n            'class': 'sl-marker marker'\n        });\n\n    container = $(container);\n\n    $(e).append(colorObj);\n    $(e).append(wheelObj);\n    $(e).append(overlayObj);\n    $(e).append(hMarkerObj);\n    $(e).append(slMarkerObj);\n\n    container.append(e);\n\n\n    fb.wheel = wheelObj.get(0);\n    // Dimensions\n    fb.radius = 70;\n    fb.square = overlayObj.width();\n    fb.width = e.width();\n\n\n    /**\n     * Link to the given element(s) or callback.\n     */\n    fb.linkTo = function(callback) {\n        // Unbind previous nodes\n        if (typeof fb.callback == 'object') {\n            $(fb.callback).unbind('keyup', fb.updateValue);\n        }\n\n        // Reset color\n        fb.color = null;\n\n        // Bind callback or elements\n        if (typeof callback == 'function') {\n            fb.callback = callback;\n        } else if (typeof callback == 'object' || typeof callback == 'string') {\n            fb.callback = $(callback);\n            fb.callback.bind('keyup', fb.updateValue);\n            if (fb.callback.get(0).value) {\n                fb.setColor(fb.callback.get(0).value);\n            }\n        }\n        return this;\n    };\n\n    fb.updateValue = function(event) {\n        if (this.value && this.value != fb.color) {\n            fb.setColor(this.value);\n        }\n    };\n\n    /**\n     * Change color with HTML syntax #123456\n     */\n    fb.setColor = function(color) {\n        var unpack = fb.unpack(color);\n        if (fb.color != color && unpack) {\n            fb.color = color;\n            fb.rgb = unpack;\n            fb.hsl = fb.RGBToHSL(fb.rgb);\n            fb.updateDisplay();\n        }\n        return this;\n    };\n\n\n    /**\n     * Change color with HSL triplet [0..1, 0..1, 0..1]\n     */\n    fb.setHSL = function(hsl) {\n        fb.hsl = hsl;\n        fb.rgb = fb.HSLToRGB(hsl);\n        fb.color = fb.pack(fb.rgb);\n        fb.updateDisplay();\n        return this;\n    }\n\n    /////////////////////////////////////////////////////\n\n    /**\n     * Retrieve the coordinates of the given event relative to the center\n     * of the widget.\n     */\n    fb.widgetCoords = function(event) {\n        var x, y;\n        var el = event.target || event.srcElement;\n        var reference = fb.wheel;\n\n        if (typeof event.offsetX != 'undefined') {\n            // Use offset coordinates and find common offsetParent\n            var pos = {\n                x: event.offsetX,\n                y: event.offsetY\n            };\n\n            // Send the coordinates upwards through the offsetParent chain.\n            var e = el;\n            while (e) {\n                e.mouseX = pos.x;\n                e.mouseY = pos.y;\n                pos.x += e.offsetLeft;\n                pos.y += e.offsetTop;\n                e = e.offsetParent;\n            }\n\n            // Look for the coordinates starting from the wheel widget.\n            var e = reference;\n            var offset = {\n                x: 0,\n                y: 0\n            }\n            while (e) {\n                if (typeof e.mouseX != 'undefined') {\n                    x = e.mouseX - offset.x;\n                    y = e.mouseY - offset.y;\n                    break;\n                }\n                offset.x += e.offsetLeft;\n                offset.y += e.offsetTop;\n                e = e.offsetParent;\n            }\n\n            // Reset stored coordinates\n            e = el;\n            while (e) {\n                e.mouseX = undefined;\n                e.mouseY = undefined;\n                e = e.offsetParent;\n            }\n        } else {\n            // Use absolute coordinates\n            var pos = fb.absolutePosition(reference);\n            x = (event.pageX || 0 * (event.clientX + $('html').get(0).scrollLeft)) - pos.x;\n            y = (event.pageY || 0 * (event.clientY + $('html').get(0).scrollTop)) - pos.y;\n        }\n        // Subtract distance to middle\n        return {\n            x: x - fb.width / 2,\n            y: y - fb.width / 2\n        };\n    }\n\n    /**\n     * Mousedown handler\n     */\n    fb.mousedown = function(event) {\n        // Capture mouse\n        if (!document.dragging) {\n            $(document).bind('mousemove', fb.mousemove).bind('mouseup', fb.mouseup);\n            document.dragging = true;\n        }\n\n        // Check which area is being dragged\n        var pos = fb.widgetCoords(event);\n        fb.circleDrag = Math.max(Math.abs(pos.x), Math.abs(pos.y)) * 2 > fb.square;\n\n        // Process\n        fb.mousemove(event);\n        return false;\n    }\n\n    /**\n     * Mousemove handler\n     */\n    fb.mousemove = function(event) {\n        // Get coordinates relative to color picker center\n        var pos = fb.widgetCoords(event);\n\n        // Set new HSL parameters\n        if (fb.circleDrag) {\n            var hue = Math.atan2(pos.x, -pos.y) / 6.28;\n            if (hue < 0) hue += 1;\n            fb.setHSL([hue, fb.hsl[1], fb.hsl[2]]);\n        } else {\n            var sat = Math.max(0, Math.min(1, -(pos.x / fb.square) + .5));\n            var lum = Math.max(0, Math.min(1, -(pos.y / fb.square) + .5));\n            fb.setHSL([fb.hsl[0], sat, lum]);\n        }\n        return false;\n    }\n\n    /**\n     * Mouseup handler\n     */\n    fb.mouseup = function() {\n        // Uncapture mouse\n        $(document).unbind('mousemove', fb.mousemove);\n        $(document).unbind('mouseup', fb.mouseup);\n        document.dragging = false;\n    }\n\n    /**\n     * Update the markers and styles\n     */\n    fb.updateDisplay = function() {\n        // Markers\n        var angle = fb.hsl[0] * 6.28;\n        $('.h-marker', e).css({\n            left: Math.round(Math.sin(angle) * fb.radius + fb.width / 2) + 'px',\n            top: Math.round(-Math.cos(angle) * fb.radius + fb.width / 2) + 'px'\n        });\n\n        $('.sl-marker', e).css({\n            left: Math.round(fb.square * (.5 - fb.hsl[1]) + fb.width / 2) + 'px',\n            top: Math.round(fb.square * (.5 - fb.hsl[2]) + fb.width / 2) + 'px'\n        });\n\n        // Saturation/Luminance gradient\n        $('.color', e).css('backgroundColor', fb.pack(fb.HSLToRGB([fb.hsl[0], 1, 0.5])));\n\n        // Linked elements or callback\n        if (typeof fb.callback == 'object') {\n            // Set background/foreground color\n            $(fb.callback).css({\n                backgroundColor: fb.color,\n                color: fb.hsl[2] > 0.5 ? '#000' : '#fff'\n            });\n\n            // Change linked value\n            $(fb.callback).each(function() {\n                if (this.value && this.value != fb.color) {\n                    this.value = fb.color;\n                }\n            });\n        } else if (typeof fb.callback == 'function') {\n            fb.callback.call(fb, fb.color);\n        }\n        // mod by dieter\n        container.trigger('colorchange.farbtastic', [fb.color]);\n    }\n\n    /**\n     * Get absolute position of element\n     */\n    fb.absolutePosition = function(el) {\n        var r = {\n            x: el.offsetLeft,\n            y: el.offsetTop\n        };\n        // Resolve relative to offsetParent\n        if (el.offsetParent) {\n            var tmp = fb.absolutePosition(el.offsetParent);\n            r.x += tmp.x;\n            r.y += tmp.y;\n        }\n        return r;\n    };\n\n    /* Various color utility functions */\n    fb.pack = function(rgb) {\n        var r = Math.round(rgb[0] * 255);\n        var g = Math.round(rgb[1] * 255);\n        var b = Math.round(rgb[2] * 255);\n        return '#' + (r < 16 ? '0' : '') + r.toString(16) +\n            (g < 16 ? '0' : '') + g.toString(16) +\n            (b < 16 ? '0' : '') + b.toString(16);\n    }\n\n    fb.unpack = function(color) {\n        if (color.length == 7) {\n            return [parseInt('0x' + color.substring(1, 3)) / 255,\n                parseInt('0x' + color.substring(3, 5)) / 255,\n                parseInt('0x' + color.substring(5, 7)) / 255];\n        } else if (color.length == 4) {\n            return [parseInt('0x' + color.substring(1, 2)) / 15,\n                parseInt('0x' + color.substring(2, 3)) / 15,\n                parseInt('0x' + color.substring(3, 4)) / 15];\n        }\n    }\n\n    fb.HSLToRGB = function(hsl) {\n        var m1, m2, r, g, b;\n        var h = hsl[0],\n            s = hsl[1],\n            l = hsl[2];\n        m2 = (l <= 0.5) ? l * (s + 1) : l + s - l * s;\n        m1 = l * 2 - m2;\n        return [this.hueToRGB(m1, m2, h + 0.33333),\n            this.hueToRGB(m1, m2, h),\n            this.hueToRGB(m1, m2, h - 0.33333)];\n    };\n\n    fb.hueToRGB = function(m1, m2, h) {\n        h = (h < 0) ? h + 1 : ((h > 1) ? h - 1 : h);\n        if (h * 6 < 1) return m1 + (m2 - m1) * h * 6;\n        if (h * 2 < 1) return m2;\n        if (h * 3 < 2) return m1 + (m2 - m1) * (0.66666 - h) * 6;\n        return m1;\n    };\n\n    fb.RGBToHSL = function(rgb) {\n        var min, max, delta, h, s, l;\n        var r = rgb[0],\n            g = rgb[1],\n            b = rgb[2];\n        min = Math.min(r, Math.min(g, b));\n        max = Math.max(r, Math.max(g, b));\n        delta = max - min;\n        l = (min + max) / 2;\n        s = 0;\n        if (l > 0 && l < 1) {\n            s = delta / (l < 0.5 ? (2 * l) : (2 - 2 * l));\n        }\n        h = 0;\n        if (delta > 0) {\n            if (max == r && max != g) h += (g - b) / delta;\n            if (max == g && max != b) h += (2 + (b - r) / delta);\n            if (max == b && max != r) h += (4 + (r - g) / delta);\n            h /= 6;\n        }\n        return [h, s, l];\n    }\n\n    // Install mousedown handler (the others are set on the document on-demand)\n    $('*', e).mousedown(fb.mousedown);\n\n    // Init color\n    fb.setColor('#123456');\n\n    // Set linked elements/callback\n    if (callback) {\n        fb.linkTo(callback);\n    }\n}\n});\n\n","define('taoQtiItem/qtiCreator/editor/styleEditor/colorSelector',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/editor/styleEditor/styleEditor',\n    'taoQtiItem/qtiCreator/helper/popup',\n    'lib/farbtastic/farbtastic'\n], function ($, _, __, styleEditor, popup) {\n    'use strict';\n\n    // based on http://stackoverflow.com/a/14238466\n    // this conversion is required to communicate with farbtastic\n    function rgbToHex(color) {\n\n        function toHexPair(inp) {\n            return ('0' + parseInt(inp, 10).toString(16)).slice(-2);\n        }\n\n        // undefined can happen when no color is defined for a particular element\n        // isString on top of that should cover all sorts of weird input\n        if(!_.isString(color)) {\n            return color;\n        }\n\n        var rgbArr = /rgb\\s*\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)/i.exec(color);\n\n        // color is not rgb\n        if(!_.isArray(rgbArr) || rgbArr.length !== 4) {\n            return color;\n        }\n\n        return '#' + toHexPair(rgbArr[1]) + toHexPair(rgbArr[2]) + toHexPair(rgbArr[3]);\n    }\n\n    var colorSelector = function () {\n        var colorPicker = $('.item-editor-color-picker'),\n            widget = colorPicker.find('.color-picker'),\n            widgetBox = colorPicker.find('.color-picker-container'),\n            titleElement =  colorPicker.find('#color-picker-title'),\n            input = colorPicker.find('#color-picker-input'),\n            resetButtons = colorPicker.find('.reset-button'),\n            colorTriggers = colorPicker.find('.color-trigger'),\n            colorTriggerLabels = colorPicker.find('label'),\n            currentProperty = 'color',\n            widgetObj,\n            $doc = $(document);\n\n\n\n        /**\n         * Widget title\n         *\n         * @param property\n         * @param trigger\n         */\n        var setTitle = function (property, trigger) {\n            titleElement.text(trigger.parent().find('label').text());\n        };\n\n        /**\n         * Trigger button background\n         */\n        var setTriggerColor = function() {\n            colorTriggers.each(function () {\n                var $trigger = $(this),\n                    target   = $trigger.data('target'),\n                    $target  = $(target),\n                    style    = styleEditor.getStyle() || {},\n                    value;\n                // elements have a color from usage of style editor\n                if(style[target] && style[target][$trigger.data('value')]) {\n                    value = style[target][$trigger.data('value')];\n                    $trigger.css('background-color', value);\n                    $trigger.attr('title', rgbToHex(value));\n                }\n                // elements have a default color from tao css\n                else if($target.css($trigger.data('value'))) {\n                    value = $target.css($trigger.data('value'));\n                    $trigger.css('background-color', value);\n                    $trigger.attr('title', rgbToHex(value));\n                }\n                // elements have no color at all\n                else {\n                    $trigger.css('background-color', '');\n                    $trigger.attr('title', __('No value set'));\n                }\n\n            });\n        };\n\n        widgetObj = $.farbtastic(widget).linkTo(input);\n\n        // event received from modified farbtastic\n        widget.on('colorchange.farbtastic', function (e, color) {\n            styleEditor.apply(widget.prop('target'), currentProperty, color);\n            setTriggerColor();\n        });\n\n\n        // open color picker\n        setTriggerColor();\n        colorTriggers.add(colorTriggerLabels).on('click', function () {\n            var $tmpTrigger = $(this),\n                $trigger = (this.nodeName.toLowerCase() === 'label' ? $tmpTrigger.parent().find('.color-trigger') : $tmpTrigger),\n                value = $trigger.css('background-color');\n\n            widget.prop('target', $trigger.data('target'));\n            widgetBox.hide();\n            currentProperty = $trigger.data('value');\n            setTitle(currentProperty, $trigger);\n            widgetObj.setColor(rgbToHex($trigger.css('background-color')));\n            widgetBox.show();\n        });\n\n        // close color picker, when clicking somewhere outside or on the x\n        $doc.on('mouseup', function(e) {\n            if($(e.target).hasClass('closer')) {\n                widgetBox.hide();\n                return false;\n            }\n\n            if (!widgetBox.is(e.target) && widgetBox.has(e.target).length === 0) {\n                widgetBox.hide();\n                return false;\n            }\n        });\n\n        // close color picker on escape\n        $doc.on('keyup', function(e){\n            if (e.keyCode === 27) {\n                widgetBox.hide();\n                return false;\n            }\n        });\n\n\n        // reset to default\n        resetButtons.on('click', function () {\n            var $this = $(this),\n                $colorTrigger = $this.parent().find('.color-trigger'),\n                target = $colorTrigger.data('target'),\n                value = $colorTrigger.data('value');\n            styleEditor.apply(target, value);\n            setTriggerColor();\n        });\n\n\n        $doc.on('customcssloaded.styleeditor', setTriggerColor);\n    };\n\n    return colorSelector;\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\n\n/**\n *\n * @author dieter <dieter@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/editor/styleEditor/fontSizeChanger',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/editor/styleEditor/styleEditor'\n], function ($, _, styleEditor) {\n    'use strict';\n\n\n    /**\n     * Changes the font size in the Style Editor\n     */\n    var fontSizeChanger = function () {\n        var $fontSizeChanger = $('#item-editor-font-size-changer'),\n            itemSelector = $fontSizeChanger.data('target'),\n            $item = $(itemSelector),\n            itemFontSize = parseInt($item.css('font-size'), 10),\n            $resetBtn =  $fontSizeChanger.parents('.reset-group').find('[data-role=\"font-size-reset\"]'),\n            $input = $('#item-editor-font-size-text');\n\n        /**\n         * Writes new font size to virtual style sheet\n         */\n        var resizeFont = function() {\n            styleEditor.apply(itemSelector + ' *', 'font-size', itemFontSize.toString() + 'px');\n        };\n\n        /**\n         * Handle input field\n         */\n        $fontSizeChanger.find('a').on('click', function(e) {\n            e.preventDefault();\n            if($(this).data('action') === 'reduce') {\n                if(itemFontSize <= 10) {\n                    return;\n                }\n                itemFontSize--;\n            }\n            else {\n                itemFontSize++;\n            }\n            resizeFont();\n            $input.val(itemFontSize);\n            $(this).parent().blur();\n        });\n\n        /**\n         * Disallows invalid characters\n         */\n        $input.on('keydown', function(e) {\n            var c = e.keyCode;\n            return (_.contains([8, 37, 39, 46], c) ||\n                (c >= 48 && c <= 57) ||\n                (c >= 96 && c <= 105));\n        });\n\n        /**\n         * Apply font size on blur\n         */\n        $input.on('blur', function() {\n            itemFontSize = parseInt(this.value, 10);\n            resizeFont();\n        });\n\n        /**\n         * Apply font size on enter\n         */\n        $input.on('keydown', function(e) {\n            var c = e.keyCode;\n            if(c === 13) {\n                $input.trigger('blur');\n            }\n        });\n\n        /**\n         * Remove font size from virtual style sheet\n         */\n        $resetBtn.on('click', function () {\n            $input.val('');\n            styleEditor.apply(itemSelector + ' *', 'font-size');\n        });\n\n        /**\n         * style loaded from style sheet\n         */\n        $(document).on('customcssloaded.styleeditor', function(e, style) {\n            if(style[itemSelector] && style[itemSelector]['font-size']) {\n                $input.val(parseInt(style[itemSelector]['font-size'], 10));\n                $input.trigger('blur');\n            }\n            else {\n                $input.val(parseInt($item.css('font-size'), 10));\n            }\n        });\n    };\n\n    return fontSizeChanger;\n});\n\n","define('taoQtiItem/qtiCreator/editor/styleEditor/itemResizer',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/editor/styleEditor/styleEditor',\n    'nouislider',\n    'jqueryui'\n\n], function ($, _, styleEditor) {\n    'use strict';\n\n    /**\n     * Adapt the image editor to the target screen the students will be using\n     * @param {Object} item - the current item\n     */\n    var itemResizer = function (item) {\n\n        var itemResizer = $('#item-editor-item-resizer'),\n            target = itemResizer.data('target'),\n            $target = $(target),\n            targetWidth = $target.width(),\n            itemWidthPrompt = itemResizer.find('[name=\"item-width-prompt\"]'),\n            sliderBox = itemResizer.find('.slider-box'),\n            slider = itemResizer.find('#item-editor-item-resizer-slider'),\n            input = $('#item-editor-item-resizer-text'),\n            resetButton =  itemResizer.find('[data-role=\"item-width-reset\"]'),\n            sliderSettings = {\n                range : {\n                    min: Math.min(768, targetWidth),\n                    max: Math.max(1200, targetWidth)\n                },\n                start: targetWidth\n            };\n\n\n        var reset = function() {\n            itemResizer.find('[value=\"no-slider\"]').trigger('click');\n        };\n\n        /**\n         * Resize item\n         *\n         * @param val int|string\n         */\n        var resizeItem = function(val) {\n            // to make sure the value can come as int or string\n            val = parseInt(val).toString() + 'px';\n            styleEditor.apply(target, 'width', val);\n            styleEditor.apply(target, 'max-width', 'none');\n            \n            item.data('widget').$container.trigger('resize.itemResizer');\n        };\n\n        /**\n         * Initialize radio buttons\n         */\n        itemWidthPrompt.on('click', function() {\n            // user intends to resize the item\n            if(this.value === 'slider') {\n                resizeItem($target.width());\n                input.val($target.width());\n                sliderBox.slideDown();\n                slider.val($target.width()).trigger('slide');\n                item.data('responsive', false); \n            }\n            // user wants to use default\n            else {\n                slider.val(sliderSettings.start);\n                sliderBox.slideUp();\n                input.val('');\n\n                styleEditor.apply(target, 'width');\n                styleEditor.apply(target, 'max-width');\n                item.data('responsive', true); \n            }\n        });\n\n\n        slider.noUiSlider(sliderSettings);\n        slider.on('slide', function() {\n            var value = Math.round(slider.val());\n            input.val(value);\n            resizeItem(value);\n        });\n\n        input.on('keydown', function(e) {\n            var c = e.keyCode;\n            return (_.contains([8, 37, 39, 46], c)\n                || (c >= 48 && c <= 57)\n                || (c >= 96 && c <= 105));\n        });\n\n        input.on('blur', function() {\n            resizeItem(this.value);\n        });\n\n        resetButton.on('click', reset);\n        $(document).on('customcssloaded.styleeditor', function(e, style) {\n            var width;\n            // make a proper width change\n            if(style[target] && style[target].width) {\n                width = parseInt(style[target].width, 10);\n                input.val(width);\n                slider.val(width);\n                itemResizer.find('[value=\"slider\"]').trigger('click');\n            }\n            // just fill the text field\n            else {\n                input.val($target.width());\n            }\n        });\n    };\n    return itemResizer;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/notifications/genericFeedbackPopup', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<div class=\\\"feedback-\";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" popup\\\">\\n    <span class=\\\"icon-\";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></span>\\n    \";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove Message\", options) : helperMissing.call(depth0, \"__\", \"Remove Message\", options)))\n    + \"\\\" class=\\\"icon-close close-trigger\\\"></span>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/editor/styleEditor/styleSheetToggler',[\n    'jquery',\n    'taoQtiItem/qtiCreator/editor/styleEditor/styleEditor',\n    'i18n',\n    'helpers',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/Stylesheet',\n    'tpl!taoQtiItem/qtiCreator/tpl/notifications/genericFeedbackPopup',\n    'ui/resourcemgr'\n], function ($, styleEditor, __, helpers, _, Stylesheet, genericFeedbackPopup) {\n    'use strict';\n\n    var $doc = $(document);\n\n    var styleSheetToggler = (function () {\n\n        var init = function (itemConfig) {\n\n            var cssToggler = $('#style-sheet-toggler'),\n                uploader = $('#stylesheet-uploader'),\n                customCssToggler = $('[data-custom-css]'),\n                getContext = function (trigger) {\n                    trigger = $(trigger);\n                    var li = trigger.closest('li'),\n                        stylesheetObj = li.data('stylesheetObj') || new Stylesheet({href : li.data('css-res')}),\n                        input = li.find('.style-sheet-label-editor'),\n                        labelBox = input.prev('.file-label'),\n                        label = input.val();\n\n                    return {\n                        li: li,\n                        input: input,\n                        label: label,\n                        labelBox: labelBox,\n                        isCustomCss: !!li.data('custom-css'),\n                        isDisabled: li.find('.icon-preview').hasClass('disabled'),\n                        stylesheetObj: stylesheetObj,\n                        cssUri: stylesheetObj.attr('href')\n                    };\n                };\n\n\n\n            /**\n             * Upload custom stylesheets\n             */\n            uploader.on('click', function () {\n\n                uploader.resourcemgr({\n                    appendContainer: '#mediaManager',\n                    root: '/',\n                    browseUrl: helpers._url('files', 'ItemContent', 'taoItems'),\n                    uploadUrl: helpers._url('upload', 'ItemContent', 'taoItems'),\n                    deleteUrl: helpers._url('delete', 'ItemContent', 'taoItems'),\n                    downloadUrl: helpers._url('download', 'ItemContent', 'taoItems'),\n                    fileExistsUrl : helpers._url('fileExists', 'ItemContent', 'taoItems'),\n                    params: {\n                        uri: itemConfig.uri,\n                        lang: itemConfig.lang,\n                        filters: 'text/css'\n                    },\n                    pathParam: 'path',\n                    select: function (e, files) {\n                        var i, l = files.length;\n                        for (i = 0; i < l; i++) {\n                            styleEditor.addStylesheet(files[i].file);\n                        }\n                    }\n                });\n            });\n\n\n            /**\n             * Confirm to save the item\n             */\n            var deleteStylesheet = function(trigger) {\n                var context = getContext(trigger),\n                    attr = context.isDisabled ? 'disabled-href' : 'href',\n                    cssLinks = $('head link');\n\n\n                styleEditor.getItem().removeStyleSheet(context.stylesheetObj);\n\n                cssLinks.filter('[' + attr + '*=\"' + context.cssUri + '\"]').remove();\n                context.li.remove();\n\n                $('.feedback-info').hide();\n                _createInfoBox({\n                    message: __('Style Sheet <b>%s</b> removed<br> Click <i>Add Style Sheet</i> to re-apply.').replace('%s', context.label),\n                    type: 'info'\n                });\n\n                $doc.trigger('customcssloaded.styleeditor', [styleEditor.getStyle()]);\n            };\n\n\n            /**\n             * Modify stylesheet title (enable)\n             */\n            var initLabelEditor = function (trigger) {\n                var context = getContext(trigger);\n                context.labelBox.hide();\n                context.input.show();\n            };\n\n            /**\n             * Download current stylesheet\n             *\n             * @param trigger\n             */\n            var downloadStylesheet = function(trigger) {\n                styleEditor.download(getContext(trigger).cssUri);\n            };\n\n            /**\n             * Modify stylesheet title (save modification)\n             */\n            var saveLabel = function (trigger) {\n                var context = getContext(trigger),\n                    title = $.trim(context.input.val());\n\n                if (!title) {\n                    context.stylesheetObj.attr('title', '');\n                    return false;\n                }\n\n                context.stylesheetObj.attr('title', title);\n                context.input.hide();\n                context.labelBox.html(title).show();\n            };\n\n            /**\n             * Dis/enable style sheets\n             */\n            var handleAvailability = function (trigger) {\n                var context = getContext(trigger),\n                    link,\n                    attrTo = 'disabled-href',\n                    attrFrom = 'href';\n\n                // custom styles are handled in a style element, not in a link\n                if (context.isCustomCss) {\n                    if (context.isDisabled) {\n                        styleEditor.create();\n                        customCssToggler.removeClass('not-available');\n                    }\n                    else {\n                        styleEditor.erase();\n                        customCssToggler.addClass('not-available');\n                    }\n                }\n                // all other styles are handled via their link element\n                else {\n                    if (context.isDisabled) {\n                        attrTo = 'href';\n                        attrFrom = 'disabled-href';\n                    }\n\n                    link = $('link[' + attrFrom + '$=\"' + context.cssUri + '\"]');\n                    link.attr(attrTo, link.attr(attrFrom)).removeAttr(attrFrom);\n                }\n\n                // add some visual feed back to the triggers\n                $(trigger).toggleClass('disabled');\n            };\n\n            /**\n             * Distribute click events\n             */\n            cssToggler.on('click', function (e) {\n                var target = e.target,\n                    className = target.className;\n\n                // distribute click actions\n                if (className.indexOf('icon-bin') > -1) {\n                    deleteStylesheet(e.target);\n                }\n                else if (className.indexOf('file-label') > -1) {\n                    initLabelEditor(e.target);\n                }\n                else if (className.indexOf('icon-preview') > -1) {\n                    handleAvailability(e.target);\n                }\n                else if(className.indexOf('icon-download') > -1) {\n                    downloadStylesheet(e.target);\n                }\n            });\n\n\n            /**\n             * Handle renaming on enter\n             */\n            cssToggler.on('keydown', 'input', function (e) {\n                if (e.keyCode === 13) {\n                    $(e.target).trigger('blur');\n                }\n            });\n\n            /**\n             * Handle renaming on blur\n             */\n            cssToggler.on('blur', 'input', function (e) {\n                saveLabel(e.target);\n            });\n\n\n        };\n\n\n        var _createInfoBox = function(data){\n            var $messageBox = $(genericFeedbackPopup(data)),\n                closeTrigger = $messageBox.find('.close-trigger');\n\n            $('body').append($messageBox);\n\n            closeTrigger.on('click', function(){\n                $messageBox.fadeOut(function(){\n                    $(this).remove();\n                });\n            });\n\n            setTimeout(function() {\n                closeTrigger.trigger('click');\n            }, 4523);\n\n            return $messageBox;\n        };\n\n        return {\n            init: init\n        };\n\n    })();\n\n    return styleSheetToggler;\n});\n\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/helper/itemSerializer',['lodash'], function(_){\n    'use strict';\n\n    /**\n     * Helps you to create a JSON representation of an item\n     * @exports taoQtiItem/qtiCreator/helper/itemSerializer\n     */\n    var itemSerializer = {\n\n        /**\n         * Serialize an item object to JSON\n         * @param {Object} item - the {@link taoQtiItem/qtiCreator/model/Item} to serialize\n         * @returns {String} the JSON string\n         */\n        serialize : function(item){\n           var serialized = ''; \n           if(item){\n               try {\n                    //clone and serialize the cleaned up value \n                    serialized = JSON.stringify(item.toArray());\n                } catch(e){\n                    console.error(e);\n                }\n            }\n            return serialized;\n        }\n    };\n\n    return itemSerializer;\n});\n\n","define('taoQtiItem/qtiCreator/editor/editor',[\n    'jquery',\n    'lodash',\n    'helpers',\n    'core/dataattrhandler',\n    //gui components\n    'taoItems/preview/preview',\n    'taoQtiItem/qtiCreator/editor/preparePrint',\n    //appearance editor:\n    'taoQtiItem/qtiCreator/editor/styleEditor/fontSelector',\n    'taoQtiItem/qtiCreator/editor/styleEditor/colorSelector',\n    'taoQtiItem/qtiCreator/editor/styleEditor/fontSizeChanger',\n    'taoQtiItem/qtiCreator/editor/styleEditor/itemResizer',\n    'taoQtiItem/qtiCreator/editor/styleEditor/styleEditor',\n    'taoQtiItem/qtiCreator/editor/styleEditor/styleSheetToggler',\n    // item related\n    'taoQtiItem/qtiCreator/helper/itemSerializer'\n], function(\n    $,\n    _,\n    helpers,\n    dataAttrHandler,\n    preview,\n    preparePrint,\n    fontSelector,\n    colorSelector,\n    fontSizeChanger,\n    itemResizer,\n    styleEditor,\n    styleSheetToggler,\n    itemSerializer\n    ){\n\n    'use strict';\n\n    var askForSave = false,\n        serializeTimeOut,\n        lastItemData,\n        serializeItem = function (element) {\n            lastItemData = itemSerializer.serialize(element);\n        };\n\n\n    /**\n     * Limit the size of the editor panel. This addresses an issue in which a\n     * too large image would expand the editor panel to accommodate for the size\n     * of the image.\n     */\n    function limitItemPanelWidth () {\n        var itemEditorPanel = document.getElementById('item-editor-panel'),\n            width = (function() {\n                var _width = $('#panel-authoring').outerWidth();\n                $('.item-editor-sidebar').each(function() {\n                    _width -= $(this).outerWidth();\n                });\n                return _width.toString();\n            }()),\n            prefixes = ['webkit', 'ms', ''];\n\n        _.forEach(prefixes, function(prefix) {\n            itemEditorPanel.style[prefix + (prefix ? 'Flex' : 'flex')] = '0 0 ' + width + 'px';\n        });\n        itemEditorPanel.style.maxWidth = width + 'px';\n    }\n\n\n\n    var initStyleEditor = function(widget, config){\n\n        styleEditor.init(widget.element, config);\n\n        styleSheetToggler.init(config);\n\n        // CSS widgets\n        fontSelector();\n        colorSelector();\n        fontSizeChanger();\n        itemResizer(widget.element);\n\n    };\n\n\n    /**\n     * Confirm to save the item\n     */\n    var _confirmPreview = function (overlay) {\n\n        var confirmBox = $('.preview-modal-feedback'),\n            cancel = confirmBox.find('.cancel'),\n            save = confirmBox.find('.save'),\n            close = confirmBox.find('.modal-close');\n\n        confirmBox.modal({ width: 500 });\n\n        save.on('click', function () {\n            overlay.trigger('save.preview');\n            confirmBox.modal('close');\n        });\n\n        cancel.on('click', function () {\n            confirmBox.modal('close');\n        });\n    };\n\n\n    var initPreview = function(widget){\n\n        var previewContainer, previewUrl;\n\n        clearTimeout(serializeTimeOut);\n        //serialize the item at the initialization level\n        //TODO wait for an item ready event\n        // itemWidget.$container.on('ready...\n        serializeTimeOut = setTimeout(function() {\n            serializeItem(widget.element);\n        }, 500);\n\n        //get the last value by saving\n        $('#save-trigger').on('click.qti-creator', function() {\n            serializeItem(widget.element);\n        });\n\n        $(document).on('stylechange.qti-creator', function () {\n            //we need to save before preview of style has changed (because style content is not part of the item model)\n            askForSave = true;\n        });\n\n        //compare the current item with the last serialized to see if there is any change\n        if (!askForSave) {\n            var currentItemData = serializeItem(widget.element);\n            if (lastItemData !== currentItemData || currentItemData === '') {\n                lastItemData = currentItemData;\n                askForSave = true;\n            }\n        }\n\n        previewUrl = helpers._url('index', 'QtiPreview', 'taoQtiItem') + '?uri=' + encodeURIComponent(widget.itemUri);\n        previewContainer = preview.init(previewUrl);\n\n        // wait for confirmation to save the item\n        if (askForSave) {\n            _confirmPreview(previewContainer);\n            previewContainer.on('save.preview', function () {\n                previewContainer.off('save.preview');\n                askForSave = false;\n                $.when(styleEditor.save(), widget.save()).done(function () {\n                    preview.show();\n                });\n            });\n        }\n        else {\n            //or show the preview\n            preview.show();\n        }\n\n    };\n\n    /**\n     * Initialize interface\n     */\n    var initGui = function(widget, config){\n\n        updateHeight();\n        limitItemPanelWidth();\n\n        $(window).off('resize.qti-editor')\n            .on('resize.qti-editor', _.throttle(\n                function() {\n                    updateHeight();\n                    limitItemPanelWidth();\n                }, 50));\n\n        initStyleEditor(widget, config);\n\n        preparePrint();\n\n        var $itemPanel = $('#item-editor-panel'),\n            $label = $('#item-editor-label'),\n            $actionGroups = $('.action-group');\n\n        $itemPanel.addClass('has-item');\n        $label.text(config.label);\n        $actionGroups.show();\n\n    };\n\n    /**\n     * Update the height of the authoring tool\n     * @private \n     */\n    var updateHeight = function updateHeight(){\n        var $itemEditorPanel = $('#item-editor-panel');\n        var $itemSidebars = $('.item-editor-sidebar');\n        var $contentPanel = $('#panel-authoring');\n        var /*$searchBar,\n            searchBarHeight,*/\n            footerTop,\n            contentWrapperTop,\n            remainingHeight;\n\n        if (!$contentPanel.length || !$itemEditorPanel.length) {\n            return;\n        }\n\n        //$searchBar = $contentPanel.find('.search-action-bar');\n        //searchBarHeight = $searchBar.outerHeight() + parseInt($searchBar.css('margin-bottom')) + parseInt($searchBar.css('margin-top'));\n\n        footerTop = (function() {\n            var $footer = $('body > footer'),\n                footerTop;\n            $itemSidebars.hide();\n            footerTop = $footer.offset().top;\n            $itemSidebars.show();\n            return footerTop;\n        }());\n        contentWrapperTop = $contentPanel.offset().top;\n        remainingHeight = footerTop - contentWrapperTop - $('.item-editor-action-bar').outerHeight();\n\n\n        // in the item editor the action bars are constructed slightly differently\n        $itemEditorPanel.find('#item-editor-scroll-outer').css({ minHeight: remainingHeight, maxHeight: remainingHeight, height: remainingHeight });\n        $itemSidebars.css({ minHeight: remainingHeight, maxHeight: remainingHeight, height: remainingHeight });\n    };\n\n    return {\n        initGui : initGui,\n        initPreview: initPreview\n    };\n\n});\n\n\n\n","define('taoQtiItem/qtiCreator/editor/customElementRegistryFactory',[\n    'lodash',\n    'jquery',\n    'helpers'\n], function(_, $, helpers){\n    \"use strict\";\n    var _defaults = {\n        onRegister : _.noop\n    };\n    \n    var _urls = {\n        addRequiredResources : helpers._url('addRequiredResources', 'PortableElement', 'taoQtiItem')\n    };\n\n    function create(options){\n        \n        options = options || {};\n        options = _.defaults(options, _defaults);\n        \n        var _registeredHooks = {};\n        var _requirejs = window.require;\n\n        function isValidHook(hook){\n\n            if(!hook.typeIdentifier){\n                throw 'invalid hook : missing typeIdentifier';\n            }\n            if(!hook.baseUrl){\n                throw 'invalid hook : missing baseUrl';\n            }\n            if(!hook.file){\n                throw 'invalid hook : missing file';\n            }\n            return true;\n        }\n\n        /**\n         * Load manifest and baseUrl data\n         * \n         * @param {Object} hooks\n         * @param {Function} callback called after each hook registration\n         */\n        function register(hooks){\n\n            var paths = {};\n\n            _(hooks).values().each(function(hook){\n\n                if(isValidHook(hook)){\n\n                    var id = hook.typeIdentifier;\n\n                    //register the hook\n                    _registeredHooks[id] = hook;\n\n                    //load customInteraction namespace in _requirejs config \n                    paths[id] = hook.baseUrl;\n                    \n                    //exec callback\n                    if(_.isFunction(options.onRegister)){\n                        options.onRegister(hook);\n                    }\n                }\n            });\n\n            //register custom interaction paths\n            _requirejs.config({\n                paths : paths\n            });\n        }\n\n        /**\n         * Load all previously registered creator hooks\n         * \n         * @param {Function} callback\n         */\n        function loadAll(callback){\n\n            var required = [];\n            _.each(_registeredHooks, function(hook){\n                required.push(hook.file);\n            });\n           \n            _requirejs(required, function(){\n                var creators = {};\n                _.each(arguments, function(creator){\n                    var id = creator.getTypeIdentifier();\n                    creators[id] = creator;\n                    _registeredHooks[id].creator = creator;\n                });\n                callback(creators);\n            });\n        }\n\n        /**\n         * Load one single creator hook  identified by its typeIdentifier\n         * \n         * @param {String} typeIdentifier\n         * @param {Function} callback\n         */\n        function loadOne(typeIdentifier, callback){\n\n            var hook = _registeredHooks[typeIdentifier];\n            if(hook){\n                _requirejs([hook.file], function(creator){\n                    hook.creator = creator;\n                    callback(creator);\n                });\n            }else{\n                throw 'cannot load the hook because it is not registered '+typeIdentifier;\n            }\n\n        }\n\n        function getCreator(typeIdentifier){\n\n            var hook = _registeredHooks[typeIdentifier];\n            if(hook){\n                if(hook.creator){\n                    return hook.creator;\n                }else{\n                    throw 'the hook is not loaded ' + typeIdentifier;\n                }\n            }else{\n                throw 'the hook is not registered ' + typeIdentifier;\n            }\n        }\n\n        function isDev(typeIdentifier){\n            return _registeredHooks[typeIdentifier] && _registeredHooks[typeIdentifier].dev;\n        }\n\n        function get(typeIdentifier){\n            return _registeredHooks[typeIdentifier];\n        }\n\n        function getBaseUrl(typeIdentifier){\n            return get(typeIdentifier).baseUrl;\n        }\n\n        /**\n         * Get complete manifest object for a custom interaction\n         * \n         * @param {String} typeIdentifier\n         * @returns {Object}\n         */\n        function getManifest(typeIdentifier){\n            return get(typeIdentifier).manifest;\n        }\n\n        function isDev(typeIdentifier){\n            return _registeredHooks[typeIdentifier] && _registeredHooks[typeIdentifier].dev;\n        }\n\n        /**\n         *\n         * @param typeIdentifier\n         * @param itemUri\n         * @param callback\n         * @returns {*} jquery deferred object\n         */\n        function addRequiredResources(typeIdentifier, itemUri, callback){\n            \n            var registryClass = encodeURIComponent(get(typeIdentifier).registry);\n            return $.getJSON(_urls.addRequiredResources, {registryClass: registryClass, typeIdentifier : typeIdentifier, uri : itemUri}, function(r){\n                if(_.isFunction(callback)){\n                    callback(r);\n                }\n            });\n        }\n        \n        return {\n            register : register,\n            loadAll : loadAll,\n            loadOne : loadOne,\n            getBaseUrl : getBaseUrl,\n            getCreator : getCreator,\n            isDev : isDev,\n            get : get,\n            getManifest : getManifest,\n            addRequiredResources : addRequiredResources\n        };\n\n    };\n\n    return {\n        create : create\n    };\n});\n","define('taoQtiItem/qtiCreator/editor/customInteractionRegistry',[\n    'lodash',\n    'taoQtiItem/qtiCreator/helper/qtiElements',\n    'taoQtiItem/qtiCreator/editor/customElementRegistryFactory'\n], function(_, qtiElements, factory){\n    \n    \"use strict\";\n    \n    var registry = factory.create({\n        onRegister : function(hook){\n            //for compatiblility\n            qtiElements.classes['customInteraction.' + hook.typeIdentifier] = {parents : ['customInteraction'], qti : true};\n        }\n    });\n\n    /**\n     * Get authorign data for a custom interaction\n     * \n     * @param {String} typeIdentifier\n     * @returns {Object}\n     */\n    registry.getAuthoringData = function(typeIdentifier){\n\n        var manifest = registry.getManifest(typeIdentifier);\n\n        return {\n            label : manifest.label, //currently no translation available \n            icon : registry.getBaseUrl(typeIdentifier) + manifest.icon, //use baseUrl from context\n            short : manifest.short,\n            description : manifest.description,\n            qtiClass : 'customInteraction.' + manifest.typeIdentifier, //custom interaction is block type\n            tags : _.union(['Custom Interactions'], manifest.tags)\n        };\n    }\n\n    return registry;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/insertInteractionButton', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    data-sub-group=\\\"\";\n  if (helper = helpers.subGroup) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.subGroup); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"\\n    class=\\\"disabled\\\"\\n    title=\\\"element available in the final release\\\"\\n\";\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    title=\\\"\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n\";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    <span class=\\\"icon \";\n  if (helper = helpers.icon) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.icon); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></span>\\n    \";\n  return buffer;\n  }\n\nfunction program9(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    <img class=\\\"icon\\\" src=\\\"\";\n  if (helper = helpers.icon) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.icon); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  return buffer;\n  }\n\n  buffer += \"<li\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.subGroup), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    data-qti-class=\\\"\";\n  if (helper = helpers.qtiClass) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.qtiClass); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.disabled), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n>\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.iconFont), {hash:{},inverse:self.program(9, program9, data),fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \\n    <div class=\\\"truncate\\\">\";\n  if (helper = helpers['short']) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0['short']); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</div>\\n</li>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/insertInteractionGroup', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<section class=\\\"tool-group\\\" id=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <h2>\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h2>\\n    <div class=\\\"panel clearfix\\\">\\n        <ul class=\\\"tool-list plain\\\"></ul>\\n    </div>\\n</section>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/tooltip', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\\n        \";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/editor/interactionsToolbar',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/editor/customInteractionRegistry',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/insertInteractionButton',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/insertInteractionGroup',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/tooltip',\n    'ui/tooltipster'\n], function($, _, __, ciRegistry, insertInteractionTpl, insertSectionTpl, tooltipTpl, tooltip){\n    \"use strict\";\n    /**\n     * String to identify a custom interaction from the authoring data\n     * \n     * @type String\n     */\n    var _customInteractionTag = 'Custom Interactions';\n\n    /**\n     * Interaction types that require a sub group in the toolbar\n     * \n     * @type Object\n     */\n    var _subgroups = {\n        'inline-interactions' : 'Inline Interactions'\n    };\n\n    var _events = {\n        interactiontoolbarready : 'interactiontoolbarready.qti-widget'\n    };\n\n    function getGroupId(groupLabel){\n        return groupLabel.replace(/\\W+/g, '-').toLowerCase();\n    }\n\n    function getGroupSectionId(groupLabel){\n        return 'sidebar-left-section-' + getGroupId(groupLabel);\n    }\n\n    function addGroup($sidebar, groupLabel){\n\n        var groupId = getGroupSectionId(groupLabel);\n\n        var $section = $(insertSectionTpl({\n            id : groupId,\n            label : groupLabel\n        }));\n\n        $sidebar.append($section);\n\n        return $section;\n    }\n    \n    function create($sidebar, interactions){\n\n        _.each(interactions, function(interactionAuthoringData){\n            add($sidebar, interactionAuthoringData);\n        });\n\n        buildSubGroups($sidebar);\n\n        //set it ad \"ready\":\n        $sidebar.data('interaction-toolbar-ready', true);\n        $sidebar.trigger(_events.interactiontoolbarready);//interactiontoolbarready.qti-widget\n    }\n\n    function getGroup($sidebar, groupLabel){\n\n        var groupId = getGroupSectionId(groupLabel);\n        return $sidebar.find('#' + groupId);\n    }\n\n    function isReady($sidebar){\n\n        return !!$sidebar.data('interaction-toolbar-ready');\n    }\n\n    function remove($sidebar, interactionClass){\n        $sidebar.find('li[data-qti-class=\"' + interactionClass + '\"]:not(.dev)').remove();\n    }\n    \n    function exists($sidebar, interactionClass){\n        return !!$sidebar.find('li[data-qti-class=\"' + interactionClass + '\"]').length;\n    }\n    \n    function add($sidebar, interactionAuthoringData){\n        \n        if(exists($sidebar, interactionAuthoringData.qtiClass)){\n            throw 'the interaction is already in the sidebar';\n        }\n        \n        var groupLabel = interactionAuthoringData.tags[0] || '',\n            subGroupId = interactionAuthoringData.tags[1],\n            $group = getGroup($sidebar, groupLabel),\n            tplData = {\n                qtiClass : interactionAuthoringData.qtiClass,\n                disabled : !!interactionAuthoringData.disabled,\n                title : interactionAuthoringData.description,\n                iconFont : /^icon-/.test(interactionAuthoringData.icon),\n                icon : interactionAuthoringData.icon,\n                short : interactionAuthoringData.short,\n                dev : (_customInteractionTag === groupLabel) && ciRegistry.isDev(interactionAuthoringData.qtiClass.replace('customInteraction.', ''))\n            };\n\n        if(subGroupId && _subgroups[subGroupId]){\n            tplData.subGroup = subGroupId;\n        }\n\n        if(!$group.length){\n            //the group does not exist yet : create a <section> for the group\n            $group = addGroup($sidebar, groupLabel);\n        }\n\n        if(subGroupId && _subgroups[subGroupId]){\n            tplData.subGroup = subGroupId;\n        }\n\n        if(!$group.length){\n            //the group does not exist yet : create a <section> for the group\n            $group = addGroup($sidebar, groupLabel);\n        }\n        \n        var $interaction = $(insertInteractionTpl(tplData));\n        $group.find('.tool-list').append($interaction);\n        \n        return $interaction;\n    }\n\n    function buildSubGroups($sidebar){\n\n        $sidebar.find('[data-sub-group]').each(function(){\n\n            var $element = $(this),\n                $section = $element.parents('section'),\n                subGroup = $element.data('sub-group'),\n                $subGroupPanel,\n                $subGroupList,\n                $cover;\n\n            if(!subGroup){\n                return;\n            }\n\n            $subGroupPanel = $section.find('.sub-group.' + subGroup);\n            $subGroupList = $subGroupPanel.find('.tool-list');\n            if(!$subGroupPanel.length){\n                $subGroupPanel = $('<div>', {'class' : 'panel clearfix sub-group ' + subGroup});\n                $subGroupList = $('<ul>', {'class' : 'tool-list plain clearfix'});\n                $subGroupPanel.append($subGroupList);\n                $section.append($subGroupPanel);\n                $cover = $('<div>', {'class' : 'sub-group-cover blocking'});\n                $subGroupPanel.append($cover);\n                $subGroupPanel.data('cover', $cover);\n            }\n            $subGroupList.append($element);\n        });\n\n        addInlineInteractionTooltip();\n    }\n\n    /**\n     * add tooltip to explain special requirement and behaviours for inline interactions\n     * may need to generalize it in the future\n     */\n    function addInlineInteractionTooltip(){\n\n        var timer,\n            $inlineInteractionsPanel = $('#sidebar-left-section-inline-interactions .inline-interactions'),\n            $tooltip = $(tooltipTpl({\n                message : __('Inline interactions need to be inserted into a text block.')\n            }));\n\n        $inlineInteractionsPanel.append($tooltip);\n        tooltip($inlineInteractionsPanel);\n\n        $tooltip.css({\n            position : 'absolute',\n            zIndex : 11,\n            top : 0,\n            right : 10\n        });\n\n        $inlineInteractionsPanel.on('mouseenter', '.sub-group-cover', function(){\n\n            timer = setTimeout(function(){\n                $tooltip.find('[data-tooltip]').tooltipster('show');\n            }, 300);\n\n        }).on('mouseleave', '.sub-group-cover', function(){\n\n            $tooltip.find('[data-tooltip]').tooltipster('hide');\n            clearTimeout(timer);\n        });\n    }\n\n    return {\n        create : create,\n        add : add,\n        exists : exists,\n        addGroup : addGroup,\n        getGroupId : getGroupId,\n        getGroupSectionId : getGroupSectionId,\n        getGroup : getGroup,\n        isReady : isReady,\n        remove : remove,\n        getCustomInteractionTag : function(){\n            return _customInteractionTag;\n        }\n    };\n\n});\n","define('taoQtiItem/qtiCreator/editor/infoControlRegistry',[\n    'taoQtiItem/qtiCreator/editor/customElementRegistryFactory'\n], function(factory){\n    \"use strict\";\n    return factory.create();\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/editor/blockAdder/tpl/addColumnRow', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div class=\\\"add-block-element\\\">\\n    <div class=\\\"line\\\"></div>\\n    <div class=\\\"circle\\\" title=\\\"Insert block below\\\"><span>+</span></div>\\n</div>\";\n  });\n});\n\n","define('taoQtiItem/qtiCreator/editor/gridEditor/config',[],function(){\n    \"use strict\";\n    return {\n        min : {\n            interaction : 2,\n            text : 1,\n            rubricBlock : 12\n        },\n        throttle : {\n            resize : 100\n        }\n    };\n});\n\n\n\n","define('taoQtiItem/qtiCreator/editor/gridEditor/helper',[],function(){\n    \"use strict\";\n    var helpers = {\n        getColUnits : function getColUnits($elt){\n\n            var cssClasses = $elt.attr('class');\n            if(!cssClasses){\n                throw new Error('the element has no css class');\n            }\n\n            var colMatch = cssClasses.match(/col-([\\d]+)/);\n            if(colMatch && colMatch.length){\n                return parseInt(colMatch.pop());\n            }else{\n                throw 'the element has no col-* class';\n            }\n        },\n        setUnitsFromClass : function setUnitsFromClass($el){\n            var units = helpers.getColUnits($el);\n            $el.attr('data-units', units);\n            return units;\n        }\n    };\n\n    return helpers;\n});\n\n","define('taoQtiItem/qtiCreator/editor/gridEditor/resizable',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiCreator/editor/gridEditor/config',\n    'taoQtiItem/qtiCreator/editor/gridEditor/helper',\n    'taoQtiItem/qtiCreator/helper/qtiElements',\n    'jqueryui'\n], function(_, $, config, helper, qtiElements){\n    \"use strict\";\n    var _syncHandleHeight = function($row){\n        var h = $row.height() - parseFloat($row.children('[class^=\"col-\"], [class*=\" col-\"]').css('margin-bottom'));\n        $row.find('.grid-edit-resizable-zone').height(h);\n    };\n\n    var _createResizables = function createResizables($el){\n\n        var marginWidth = parseFloat($el.find('[class^=\"col-\"]:last, [class*=\" col-\"]:last').css('margin-left')),\n            activeWidth = 20;\n\n\n\n        $el.find('[class^=\"col-\"], [class*=\" col-\"]').each(function(){\n\n            var $col = $(this);\n\n            //@todo this should be more generic\n            //see draggable etc for more references\n            if($col.parent().hasClass('fixed-grid-row')) {\n                return true;\n            }\n\n            if($col.children('.grid-edit-resizable-zone').length){\n                //already created, next !\n                return true;\n            }\n\n            var $nextCol = $col.next(),\n                $row = $col.parent('.grid-row'),\n                offset = $col.offset(),\n                max = 12,\n                min = qtiElements.is($col.data('qti-class'), 'interaction') ? config.min.interaction : config.min.text,\n                nextMin = qtiElements.is($nextCol.data('qti-class'), 'interaction') ? config.min.interaction : config.min.text,\n                unitWidth = $row.width() / max;\n\n            var activeHeight = $row.height() - parseFloat($col.css('margin-bottom'));\n            var $activeZone = $('<div>', {'class' : 'grid-edit-resizable-zone grid-edit-resizable-zone-active'}).css({top : 0, right : -(marginWidth + (activeWidth - marginWidth) / 2), width : activeWidth, height : activeHeight});\n            var $handle = $('<span>', {'class' : 'grid-edit-resizable-handle'});\n            $activeZone.append($handle);\n            $col.append($activeZone);\n\n            var _syncOutlineHeight = function(){\n                var h = $row.height() - parseFloat($col.css('margin-bottom'));\n                $col.find('.grid-edit-resizable-outline').height(h);\n                $activeZone.height(h);\n            };\n\n            $activeZone.draggable({\n                containment : $nextCol.length ? [\n                    offset.left + min * unitWidth - marginWidth * 2 + 10,\n                    offset.top,\n                    offset.left + $col.outerWidth() + marginWidth + $nextCol.outerWidth() - nextMin * unitWidth - activeWidth / 2 - 10,\n                    offset.top + $col.height()\n                ] : [\n                    offset.left + min * unitWidth - marginWidth - activeWidth / 2 - 10,\n                    offset.top,\n                    $row.offset().left + $row.outerWidth() - marginWidth - activeWidth / 2 - 12,\n                    offset.top + $col.height()\n                ],\n                axis : 'x',\n                cursor : 'col-resize',\n                start : function(){\n\n                    $col.trigger('resizestart.gridEdit');\n\n                    var $overlay = $('<div>', {'class' : 'grid-edit-resizable-outline'});\n                    if($nextCol.length){\n                        $overlay.width(parseFloat($col.outerWidth()) + marginWidth + parseFloat($nextCol.outerWidth()));\n                    }else{\n                        $overlay.css({'width' : '100%', 'border-right-width' : 0});\n                    }\n                    //store in memory for quick access during resize:\n                    $(this).data('overlay', $overlay);\n                    $col.append($overlay);\n                    $handle.addClass('grid-edit-resizable-active');\n                    $el.find('.grid-edit-resizable-zone-active').removeClass('grid-edit-resizable-zone-active');\n                    _syncOutlineHeight();\n\n                },\n                drag : _.throttle(function(){\n\n                    var width = ($(this).offset().left + activeWidth / 2) - offset.left,\n                        units = helper.getColUnits($col),\n                        nextUnits = $nextCol.length ? helper.getColUnits($nextCol) : 0;\n\n                    if(!$nextCol.length){\n                        //need to resize the outline element:\n                        $col.find('.grid-edit-resizable-outline').width($handle.offset().left - offset.left);\n                    }\n\n                    if(width + marginWidth * 0 < (units - 1) * unitWidth){//need to compensate for the width of the active zone\n                        \n                        units--;\n                        _setColUnits($col, units);\n\n                        if($nextCol.length){\n                            nextUnits++;\n                            _setColUnits($nextCol, nextUnits);\n                        }\n\n                        _syncOutlineHeight();\n                        \n                        $col.trigger('resize.gridEdit');\n                        \n                    }else if(width + marginWidth + 20 > (units + 1) * unitWidth){//need to compensate for the width of the active zone\n                        \n                        units++;\n                        _setColUnits($col, units);\n\n                        if($nextCol.length){\n                            nextUnits--;\n                            _setColUnits($nextCol, nextUnits);\n                        }\n\n                        _syncOutlineHeight();\n                        \n                        $col.trigger('resize.gridEdit');\n                    }\n\n                }, config.throttle.resize),\n                stop : function(){\n\n                    $col.find('.grid-edit-resizable-outline').remove();\n\n                    _deleteResizables($el);\n                    _createResizables($el);\n\n                    $col.trigger('resizestop.gridEdit');\n                }\n            }).css('position', 'absolute');\n\n        });\n\n        $el.off('.gridEdit.resizable').on('dragoverstart.gridEdit.resizable', function(){\n\n            _deleteResizables($el);\n\n        }).on('dragoverstop.gridEdit.resizable', function(){\n\n            _createResizables($el);\n\n        }).on('contentChange.gridEdit.resizable', '.grid-row', function(){\n\n            _deleteResizables($el);\n            _createResizables($el);\n        });\n\n    };\n\n    var _deleteResizables = function _deleteResizables($el){\n        \n        $el.find('.grid-edit-resizable-zone').remove();\n    };\n\n    var _setColUnits = function _setColUnits($elt, newUnits){\n        \n        if($elt.attr('class').match(/col-([\\d]+)/)){\n            \n            var oldUnits = $elt.attr('data-units');\n            var $parentRow = $elt.parent('.grid-row');\n            var totalUnits = $parentRow.attr('data-units');\n            $parentRow.attr('data-units', totalUnits - oldUnits + newUnits);//update parent\n            $elt.attr('data-units', newUnits);//update element\n            $elt.removeClass('col-' + oldUnits).addClass('col-' + newUnits);\n            \n        }else{\n            \n            throw $.error('the element is not a grid column');\n        }\n    };\n\n    return {\n        create : function($element){\n            \n            _createResizables($element);\n            \n            $(window).off('resize.qtiEdit.resizable').on('resize.qtiEdit.resizable', function(){\n                \n                _deleteResizables($element);\n                _createResizables($element);\n            });\n        },\n        destroy : function($element, preserveGlobalEvents){\n            \n            _deleteResizables($element);\n            \n            if(!preserveGlobalEvents){\n                \n                $(window).off('resize.qtiEdit.resizable');\n            }\n        },\n        syncHandleHeight : function($row){\n        \n            if($row.hasClass('grid-row')){\n                _syncHandleHeight($row);\n            }else{\n                $row.find('.grid-row').each(function(){\n                    _syncHandleHeight($(this));\n                });\n            }\n        }\n\n    };\n});\n","define('taoQtiItem/qtiCreator/editor/gridEditor/content',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/editor/gridEditor/resizable'\n], function($, _, resizable){\n    \"use strict\";\n    var contentHelper = {};\n\n    /**\n     * Get html string content for a qti container\n     * \n     * @param {string|domelement|jquery} element\n     * @returns {string}\n     */\n    contentHelper.getContent = function(element, opts){\n\n        var options = _.defaults({\n            inner : true\n        }, opts);\n\n        var $body = options.inner ? $(element).clone() : $('<div>', {'class' : 'col-fictive content-helper-wrapper'}).append($(element).clone());\n\n        contentHelper.destroyGridWidgets($body, true);//working on clone only, so destroyGridWidgetsClone\n\n        contentHelper.serializeElements($body);\n        \n        return $body.html();\n    };\n\n    /**\n     * Create a callback function for the ck edit:\n     * \n     * @param {object} container\n     */\n    contentHelper.getChangeCallback = function(container){\n\n        return _.throttle(function(data){\n\n            var $pseudoContainer = $('<div>').html(data),\n                newBody = contentHelper.getContent($pseudoContainer);\n\n            container.body(newBody);\n\n        }, 800);\n    };\n\n    /**\n     * Create a callback function for the ck edit (special case of blockstatic content\n     * \n     * @param {object} container\n     */\n    contentHelper.getChangeCallbackForBlockStatic = function(container){\n\n        return _.throttle(function(data){\n\n            var $pseudoContainer = $('<div>').html(data);\n            \n            $pseudoContainer.contents().each(function(){\n                \n                if(this.nodeType === 3 && this.nodeValue.trim()){\n                    \n                    //use jquery to wrap all content by a <p> \n                    $pseudoContainer.wrapInner('<p>');\n                    \n                    //... transform it into valid html :  <p><p>aaa</p></p> becomes <p></p><p>aaa</p><p></p>\n                    $pseudoContainer = $('<div>').html($pseudoContainer.html());\n                    \n                    return false;//breaks jquery each loop\n                }\n            });\n\n            container.body(contentHelper.getContent($pseudoContainer));\n\n        }, 800);\n    };\n\n    contentHelper.serializeElements = function($el){\n\n        var existingElements = [];\n\n        //select only the first level of \".widget-box\" found\n        $el.find('.widget-box:not(.widget-box *)').each(function(){\n\n            var $qtiElementWidget = $(this);\n\n            if($qtiElementWidget.data('serial')){\n\n                //an existing qti element:\n                var serial = $qtiElementWidget.data('serial');\n                $qtiElementWidget.replaceWith('{{' + serial + '}}');\n\n                //store existing element\n                existingElements.push(serial);\n\n            }else if($qtiElementWidget.data('new') && $qtiElementWidget.data('qti-class')){\n\n                //a newly inserted qti element\n                var qtiClass = $qtiElementWidget.data('qti-class');\n                $qtiElementWidget.replaceWith('{{' + qtiClass + ':new}}');\n\n            }else{\n\n                throw 'unknown qti-widget type';\n            }\n\n        });\n\n        return existingElements;\n    };\n\n    contentHelper.destroyGridWidgets = function($elt, inClone){\n\n        $elt.removeData('qti-grid-options');\n\n        $elt.find('.grid-row, [class*=\" col-\"], [class^=\"col-\"]')\n            .removeAttr('style')\n            .removeAttr('data-active')\n            .removeAttr('data-units');\n\n        $elt.children('.ui-draggable-dragging').remove();\n\n        resizable.destroy($elt, inClone);\n        \n        $elt.find('.contextual-popup').remove();\n    };\n\n    return contentHelper;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/editor/elementSelector/tpl/popup', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<div class=\\\"contextual-popup\\\" style=\\\"top:\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.popup)),stack1 == null || stack1 === false ? stack1 : stack1.top)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"px; left:\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.popup)),stack1 == null || stack1 === false ? stack1 : stack1.left)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"px\\\">\\n    <div class=\\\"arrow\\\" style=\\\"left:\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.arrow)),stack1 == null || stack1 === false ? stack1 : stack1.left)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"px\\\"></div>\\n    <div class=\\\"arrow-cover\\\" style=\\\"left:\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.arrow)),stack1 == null || stack1 === false ? stack1 : stack1.leftCover)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"px\\\"></div>\\n    <div class=\\\"popup-content\\\">\";\n  if (helper = helpers.content) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.content); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\\n    <div class=\\\"footer\\\">\\n        <button class=\\\"btn btn-info small done\\\">done</button>\\n        <a href=\\\"#\\\" class=\\\"btn cancel\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"cancel\", options) : helperMissing.call(depth0, \"__\", \"cancel\", options)))\n    + \"\\\">cancel</a>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/editor/elementSelector/tpl/content', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n        <li data-group-name=\\\"\";\n  if (helper = helpers.name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"><a href=\\\"#\\\" class=\\\"group-selector\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</a></li>\\n        \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n        <div class=\\\"element-group\\\" data-group-name=\\\"\";\n  if (helper = helpers.name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n            <ul class=\\\"element-list plain\\\">\\n                \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.elements), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n            </ul>\\n        </div>\\n        \";\n  return buffer;\n  }\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n                <li data-qti-class=\\\"\";\n  if (helper = helpers.qtiClass) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.qtiClass); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" title=\\\"\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n                    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.iconFont), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                    <span class=\\\"label truncate\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n                </li>\\n                \";\n  return buffer;\n  }\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n                    <span class=\\\"icon \";\n  if (helper = helpers.icon) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.icon); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></span>\\n                    \";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n                    <img class=\\\"icon\\\" src=\\\"\";\n  if (helper = helpers.icon) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.icon); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"/>\\n                    \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"elementSelector\\\">\\n\\n    <ul class=\\\"group-list plain\\\">\\n        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.groups), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </ul>\\n\\n    <div class=\\\"element-group-container\\\">\\n        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.groups), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </div>\\n\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/editor/elementSelector/selector',[\n    'jquery',\n    'lodash',\n    'tpl!taoQtiItem/qtiCreator/editor/elementSelector/tpl/popup',\n    'tpl!taoQtiItem/qtiCreator/editor/elementSelector/tpl/content'\n], function($, _, popupTpl, contentTpl){\n\n    var _ns = '.element-selector';\n    \n    /**\n     * Create an element selector reltive to the $anchor and contained in the $container\n     * \n     * @param {JQuery} $anchor\n     * @param {JQuery} $container\n     * @param {Array} interactions - the list of authorable interactions\n     * @returns {Object} the new selector instance\n     */\n    function create($anchor, $container, interactions){\n        \n        //anchor must be positioned in css\n        var positions = _computePosition($anchor, $container);\n        var $element = $(popupTpl({\n            popup : positions.popup,\n            arrow : positions.arrow,\n            content : _renderContent(interactions)\n        }));\n\n        //only one \n        $anchor.find('.contextual-popup').remove();\n\n        //style and attach the form\n        $anchor.append($element);\n\n        $element.off(_ns).on('click' + _ns, '.group-list li', function(){\n            var $trigger = $(this);\n            _activatePanel($element, $trigger);\n        }).on('click' + _ns, '.element-list li', function(){\n            _activateElement($element, $(this));\n        }).on('click' + _ns, '.done', function(){\n            _done($element);\n        }).on('click' + _ns, '.cancel', function(){\n            _cancel($element);\n        });\n\n        return {\n            getPopup : function(){\n                return $element;\n            },\n            reposition : function(){\n                var pos = _computePosition($anchor, $container);\n                $element.css({\n                    top : pos.popup.top,\n                    left : pos.popup.left\n                });\n                $element.children('.arrow').css('left', pos.arrow.left);\n                $element.children('.arrow-cover').css('left', pos.arrow.leftCover);\n            },\n            activatePanel : function(groupName){\n                activatePanel($element, groupName);\n            },\n            activateElement : function(qtiClass){\n                activateElement($element, qtiClass);\n            },\n            done : function(){\n                _done($element);\n            },\n            cancel : function(){\n                _cancel($element);\n            },\n            show : function(){\n                $element.show();\n            },\n            destroy : function(){\n                $element.remove();\n            }\n        };\n    }\n    \n    /**\n     * Callback when the \"done\" button is clicked\n     * \n     * @param {JQuery} $element\n     */\n    function _done($element){\n        $element.hide();\n        $element.trigger('done' + _ns);\n    }\n    \n    /**\n     * Callback when the \"cancel\" button is clicked\n     * \n     * @param {JQuery} $element\n     */\n    function _cancel($element){\n        $element.hide();\n        $element.trigger('cancel' + _ns);\n    }\n    \n    /**\n     * Activate the panel defined by the groupName\n     * \n     * @param {JQuery} $container\n     * @param {String} groupName\n     */\n    function activatePanel($container, groupName){\n        var $trigger = $container.find('.group-list li[data-group-name=\"' + groupName + '\"]');\n        _activatePanel($container, $trigger);\n    }\n    \n    /**\n     * Activate a panel by its trigger button in the navigation tab\n     * \n     * @param {JQuery} $container\n     * @param {JQuery} $trigger\n     */\n    function _activatePanel($container, $trigger){\n        if(!$trigger.hasClass('active')){\n            $trigger.addClass('active').siblings('.active').removeClass('active');\n            var group = $trigger.data('group-name');\n            var $group = $container.find('.element-group[data-group-name=\"' + group + '\"]');\n            $group.show().siblings('.element-group').hide();\n        }\n    }\n    \n    /**\n     * Activate an element identified by its qti class\n     * \n     * @param {JQuery} $container\n     * @param {String} qtiClass\n     */\n    function activateElement($container, qtiClass){\n        var $trigger = $container.find('.element-list li[data-qti-class=\"' + qtiClass + '\"]');\n        _activateElement($container, $trigger);\n    }\n    \n    /**\n     * Activate an element identified by its $trigger dom element\n     * \n     * @param {JQuery} $container\n     * @param {JQuery} $trigger\n     */\n    function _activateElement($container, $trigger){\n        var qtiClass = $trigger.data('qti-class');\n        if(!$trigger.hasClass('active')){\n            $container.find('.element-list li').removeClass('active');\n            $trigger.addClass('active');\n            $container.trigger('selected' + _ns, [qtiClass, $trigger]);\n        }\n    }\n    \n    /**\n     * Calculate the position of the popup and arrow relative to the anchor and container elements\n     * \n     * @param {JQuery} $anchor\n     * @param {JQuery} $container\n     * @returns {Object} - Object containing the positioning data\n     */\n    function _computePosition($anchor, $container){\n        \n        var popupWidth = 500;\n        var arrowWidth = 6;\n        var marginTop = 15;\n        var marginLeft = 15;\n        var _anchor = {top : $anchor.offset().top, left : $anchor.offset().left, w : $anchor.innerWidth(), h : $anchor.innerHeight()};\n        var _container = {top : $container.offset().top, left : $container.offset().left, w : $container.innerWidth()};\n        var _popup = {\n            top : _anchor.h + marginTop,\n            left : -popupWidth / 2 + _anchor.w/2,\n            w : popupWidth\n        };\n        \n        var offset = _anchor.left - _container.left;\n        //do we have enough space on the left ?\n        if(offset + marginLeft + _anchor.w/2 < _popup.w / 2){\n            _popup.left = -offset + marginLeft;\n        }else if(_container.w - (offset + _anchor.w/2 + marginLeft) < _popup.w / 2){\n            _popup.left = -offset + _container.w - marginLeft - _popup.w;\n        }\n\n        var _arrow = {\n            left : -_popup.left + _anchor.w / 2 - arrowWidth,\n            leftCover : -_popup.left + _anchor.w / 2 - arrowWidth - 6\n        };\n\n        return {\n            popup : _popup,\n            arrow : _arrow\n        };\n    }\n    \n    /**\n     * Filter and format the raw authorable interactions array into useful data for this selector\n     * @param {Array} interactions\n     * @returns {Array}\n     */\n    function _filterInteractions(interactions){\n        var block;\n        //remove all inline interactions, keep block container only\n        var filtered = _.filter(interactions, function(interaction){\n            var tags = interaction.tags;\n            if(interaction.qtiClass === '_container'){\n                block = interaction;\n                interaction.tags[0] = 'Text Block';\n                return false;\n            }else if(tags && tags[0] !== 'Inline Interactions'){\n                return true;\n            }\n            return false;\n        });\n        block.tags[0] = 'Text Block';\n        filtered.unshift(block);\n        return filtered;\n    }\n    \n    /**\n     * Render the content of the selector from the list of authorable interactions as data\n     * \n     * @param {Array} interactions\n     * @returns {String} \n     */\n    function _renderContent(interactions){\n\n        var groups = [];\n        _.each(_filterInteractions(interactions), function(interaction){\n\n            var groupName = interaction.tags[0];\n            var panel = _.find(groups, {name : groupName});\n            if(!panel){\n                panel = {\n                    name : groupName,\n                    label : groupName.replace(/\\sInteractions$/, ''),\n                    elements : []\n                };\n                groups.push(panel);\n            }\n\n            panel.elements.push({\n                qtiClass : interaction.qtiClass,\n                disabled : !!interaction.disabled,\n                title : interaction.description,\n                iconFont : /^icon-/.test(interaction.icon),\n                icon : interaction.icon,\n                label : interaction.label\n            });\n        });\n\n        return contentTpl({\n            groups : groups\n        });\n    }\n\n    return {\n        create : create,\n        activateElement : activateElement,\n        activatePanel : activatePanel\n    };\n});\n","define('taoQtiItem/qtiCreator/widgets/Widget',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/model/helper/invalidator'\n], function(_, $, Element, invalidator){\n\n    var _pushState = function(widget, stateName){\n        var currentState = new widget.registeredStates[stateName](widget);\n        widget.stateStack.push(currentState);\n        currentState.init();\n    };\n\n    var _popState = function(widget){\n        var state = widget.stateStack.pop();\n        if(state){\n            state.exit();\n        }\n    };\n\n    var Widget = {\n        /**\n         * Intialize qti element creator widget\n         * \n         * @param {Object} element - standard qti object\n         * @param {Jquery} $original - tje proginal DOM element of the qti element\n         * @param {JQuery} $form - the property form of the qti element\n         * @param {Object} options\n         * @fires ready.qti-widget after it is executed\n         * @returns {Object} The initialized widget\n         */\n        init : function(element, $original, $form, options){\n            if(element instanceof Element){\n\n                options = options || {};\n\n                this.element = element;\n                this.serial = element.getSerial();\n                this.$original = $original;\n                this.$form = $form;\n                this.stateStack = [];\n\n                this.registeredStates = {};\n\n                //build container from origin element\n                this.buildContainer();\n\n                //attach the widget to widget $container and element:\n                this.$container.data('widget', this);\n                this.$original.data('widget', this);\n\n                this.element.data('widget', this);\n\n                //clean old referenced event\n                this.offEvents();//not sure if still required after state definition\n\n                //pass the options to the initCreator for custom options usage\n                _.each(this.getRequiredOptions(), function(opt){\n                    if(!options[opt]){\n                        throw new Error('missing required option for image creator : ' + opt);\n                    }\n                });\n                this.options = options;\n                this.initCreator(options);\n\n                //init state after creator init\n                if(options.state){\n                    this.changeState(options.state);\n                }else{\n                    this.changeState('sleep');\n                }\n                \n                //communicate the widget readiness\n                if(_.isFunction(options.ready)){\n                    options.ready.call(this, this);\n                }\n                this.$container.trigger('ready.qti-widget', [this]);\n                \n            }else{\n                throw new Error('element is not a QTI Element');\n            }\n            return this;\n        },\n        getRequiredOptions : function(){\n            return [];\n        },\n        buildContainer : function(){\n            throw new Error('method buildContainer must be implemented');\n        },\n        build : function(element, $container, $form, options){\n            return this.clone().init(element, $container, $form, options);\n        },\n        clone : function(){\n            return _.clone(this);\n        },\n        initCreator : function(){\n            //prepare all common actions, event handlers and dom for every state of the widget\n        },\n        getCurrentState : function(){\n            return _.last(this.stateStack);\n        },\n        /**\n         * Very important method:\n         * It changes the state of the widget by checking the relation between\n         * the target and the current states.\n         *\n         * @param {string} stateName\n         * @returns {object} this\n         */\n        changeState : function(stateName){\n\n            var _this = this,\n                state,\n                superStateName,\n                currentState = this.getCurrentState();\n\n            if(this.registeredStates[stateName]){\n                state = new this.registeredStates[stateName];\n            }else{\n                throw new Error('unknown target state : ' + stateName);\n                return null;\n            }\n\n            if(currentState){\n\n                if(currentState.name === state.name){\n                    return this;\n                }else if(_.indexOf(state.superState, currentState.name) >= 0){\n\n                    //initialize super states in reverse order:\n                    for(var i = _.indexOf(state.superState, currentState.name) - 1; i >= 0; i--){\n                        superStateName = state.superState[i];\n                        _pushState(this, superStateName);\n                    }\n\n                }else if(_.indexOf(currentState.superState, state.name) >= 0){\n\n                    //just exit as much state as needed to get to it:\n                    for(var i = 0; i <= _.indexOf(currentState.superState, state.name); i++){\n                        _popState(_this);\n                    }\n\n                    return this;\n\n                }else{\n\n                    //first, exit the current state\n                    _popState(_this);\n\n                    //then, exit super states in order:\n                    var exitedStates = _.difference(currentState.superState, state.superState);\n                    _.each(exitedStates, function(){\n                        _popState(_this);\n                    });\n\n                    //finally, init super states in reverse order:\n                    var enteredStates = _.difference(state.superState, currentState.superState);\n                    _.eachRight(enteredStates, function(superStateName){\n                        _pushState(_this, superStateName);\n                    });\n                }\n\n            }else{\n                _.eachRight(state.superState, function(superStateName){\n                    _pushState(_this, superStateName);\n                });\n            }\n\n            _pushState(this, stateName);\n            return this;\n        },\n        registerState : function(name, State){\n            if(name && State){\n                this.registeredStates[name] = State;\n            }else{\n                throw new Error('missing required arguments in state registration');\n            }\n        },\n        registerStates : function(states){\n            var _this = this;\n            _.forIn(states, function(State, name){\n                _this.registerState(name, State);\n            });\n        },\n        afterStateInit : function(callback, ns){\n            var evtName = 'afterStateInit.qti-widget.' + this.serial + (ns ? '.' + ns : '');\n            $(document).on(evtName, callback);\n        },\n        beforeStateInit : function(callback, ns){\n            var evtName = 'beforeStateInit.qti-widget.' + this.serial + (ns ? '.' + ns : '');\n            $(document).on(evtName, callback);\n        },\n        afterStateExit : function(callback, ns){\n            var evtName = 'afterStateExit.qti-widget.' + this.serial + (ns ? '.' + ns : '');\n            $(document).on(evtName, callback);\n        },\n        beforeStateExit : function(callback, ns){\n            var evtName = 'beforeStateExit.qti-widget.' + this.serial + (ns ? '.' + ns : '');\n            $(document).on(evtName, callback);\n        },\n        offEvents : function(ns){\n            var evtName = '.qti-widget.' + this.serial + (ns ? '.' + ns : '');\n            $(document).off(evtName);\n        },\n        destroy : function(){\n\n            //to call exit method and clean up listeners\n            this.changeState('sleep');\n\n            //remove editable widgets\n            this.$container.find('[data-edit]').remove();\n            $('[data-widget-component=' + this.serial + ']').remove();\n\n            //clean old referenced event\n            this.offEvents();\n        },\n        rebuild : function(options){\n\n            options = options || {};\n\n            var element = this.element;\n            var postRenderOpts = {};\n            if(_.isFunction(options.ready)){\n                postRenderOpts.ready = options.ready;\n            }\n\n            var $container = null;\n            if(options.context && options.context.length){\n                //if the context option is provided, the function will fetch the widget container that in this context\n                //mandatory for detached of duplicated DOM element (e.g. ckEditor)\n                $container = options.context.find('.widget-box[data-serial=' + element.serial + ']');\n            }else{\n                $container = this.$container;\n            }\n\n            //once required data ref has been set, destroy it:\n            this.destroy();\n\n            //we assume that the element still has its renderer set, check renderer:\n            var renderer = element.getRenderer();\n\n            if(renderer && renderer.isRenderer){\n                if(renderer.name === 'creatorRenderer'){\n                    element.render($container);\n                    return element.postRender(postRenderOpts);\n                }else{\n                    throw new Error('The renderer is no longer the creatorRenderer');\n                }\n            }else{\n                throw new Error('No renderer found to rebuild the widget');\n            }\n\n            return null;\n        },\n\n        refresh : function(){\n\n            var currentState = this.getCurrentState().name;\n\n            this.rebuild({\n                ready:function(widget){\n                    widget.changeState(currentState);\n                }\n            });\n        },\n\n        //assign an event listener that lives with the state\n        on : function(qtiElementEventName, callback, live){\n\n            var _this = this,\n                eventNames = qtiElementEventName.replace(/\\s+/g, ' ').split(' '),\n                $document = $(document);\n\n            _.each(eventNames, function(eventName){\n\n                var eventNameToken = [eventName, 'qti-widget', _this.serial];\n\n                if(!live){\n                    eventNameToken.push(_this.getCurrentState().name);\n                }\n\n                //bind each individual event listener to the document\n                $document.on(eventNameToken.join('.'), function(e, data){\n                    callback.call(_this, data);\n                });\n\n            });\n\n            return this;//for chaining\n        },\n        /**\n         * Get / Set the validation state\n         * @param {String} [what] - key to identify the validation\n         * @param {Boolean} [valid] - false to invalidate\n         * @param {String} [why] - message\n         */\n        isValid : function(what, valid, why){\n\n            var element = this.element;\n\n            if(what === undefined){\n                //get\n                return invalidator.isValid(element);\n            }else if(valid){\n                invalidator.valid(element, what);\n            }else{\n                invalidator.invalid(element, what, why, this.getCurrentState().name);\n            }\n        }\n    };\n\n    return Widget;\n});\n\n","define('taoQtiItem/qtiCreator/editor/widgetToolbar',[\n    'jquery',\n    'i18n'\n], function($, __){\n    'use strict';\n\n\n    var defaultConfig = [\n        [\n            {\n                title : 'Question',\n                'class' : 'question-trigger',\n                status : 'off', // on | disabled | off => default\n                fn : function(e){\n                    var target = arguments[1],\n                        toolbar = arguments[2],\n                        responseButton = toolbar.find('.answer-trigger a'),\n                        answerEditors = target.find('[data-edit=\"answer\"]'),\n                        questionEditors = target.find('[data-edit=\"question\"]');\n\n                    responseButton.removeClass('tlb-text-button-on').addClass('tlb-text-button-off');\n                    questionEditors.show();\n                    answerEditors.hide();\n                    target.data('mode', 'question');\n                }\n            },\n            {\n                title : 'Answer',\n                'class' : 'answer-trigger',\n                fn : function(e){\n                    var target = arguments[1],\n                        toolbar = arguments[2],\n                        contentButton = toolbar.find('.question-trigger a'),\n                        answerEditors = target.find('[data-edit=\"answer\"]'),\n                        questionEditors = target.find('[data-edit=\"question\"]');\n\n                    contentButton.removeClass('tlb-text-button-on').addClass('tlb-text-button-off');\n                    answerEditors.show();\n                    questionEditors.hide();\n                    target.data('mode', 'answer');\n                    target.find('[contenteditable]').attr('contenteditable', false);\n                    $(document).trigger('widgetBlur');\n                    //$('.cke.cke_reset_all').remove();\n                    //also remove ck and unbind\n                }\n            }\n        ],\n        'spacer', // |  ' '\n//    [\n//      {\n//        icon: 'edit',\n//        title: 'Edit',\n//        fn: function () {\n//          var widget = $(this).parents('.widget'),\n//            id = widget.attr('id') || randId();\n//\n//          widget.attr('contentEditable', true);\n//          widget.attr('id', id);\n//\n//          ckeditor.inline(id);\n//          //ckFocusManager.focus();\n//          console.log(widget);\n//        }\n//      }\n//    ],\n//    [\n//      {\n//        icon: 'move',\n//        title: 'Move',\n//        fn: function () {\n//          console.log('Move');\n//        }\n//      },\n//      'separator', // | '-'\n//      {\n//        icon: 'resize-grid',\n//        title: 'Resize',\n//        fn: function () {\n//          console.log('Resize');\n//        }\n//      }\n//   ],\n        [\n            {\n                icon : 'bin',\n                title : 'Delete',\n                fn : function(e){\n                    // arguments[1] is the box the toolbar belongs to\n                    // arguments[2] is the toolbar itself\n                    var target = arguments[1],\n                        toolbar = arguments[2],\n                        msg = $('<span>', {text : __('You have deleted an element.') + ' '}),\n                    undo = $('<a>', {text : __('Undo'), href : '#'}),\n                    icon = $('<span>', { 'class' : 'icon-info'}),\n                    closer = $('<span>', {title : 'Remove Message', 'class' : 'icon-close close-trigger'}),\n                    feedback = $('<div>', { 'class' : 'feedback-info'}).hide();\n\n                    closer.on('click', function(){\n                        feedback.fadeOut(function(){\n                            feedback.remove();\n                            target.remove();\n                            toolbar.remove();\n                        });\n                    });\n\n                    undo.on('click', function(e){\n                        e.preventDefault();\n                        feedback.remove();\n                        target.removeClass('deleted').fadeIn();\n                    });\n\n                    feedback.append(icon);\n                    feedback.append(msg);\n                    feedback.append(undo);\n                    feedback.append(closer);\n                    target.before(feedback);\n\n                    toolbar.hide();\n                    target.hide().addClass('deleted');\n                    feedback.fadeIn(function(){\n                        setTimeout(function(){\n                            closer.trigger('click');\n                        }, 6500)\n                    });\n                }\n            }\n        ]\n    ];\n\n\n\n    /**\n     * build breaks, separators etc.\n     * @param type\n     * @returns {*|HTMLElement}\n     */\n    var structure = function(type){\n        // makes config more similar to ckeditor\n        switch(type){\n            case '/':\n                type = 'break';\n                break;\n            case '-':\n                type = 'separator'\n                break;\n            case ' ':\n                type = 'spacer'\n                break;\n        }\n        return $('<span>', { 'class' : 'tlb-' + type});\n    };\n\n\n    var bar = function(items, target, toolbar){\n        var bar = $('<div>', {'class' : 'tlb-bar'}),\n        group,\n            // does first element have an icon? if not the items are buttons\n            isTextButton = !items[0].icon,\n            l = items.length,\n            i;\n\n\n        bar.append(structure('start'));\n\n        if(isTextButton){\n            for(i = 0; i < l; i++){\n                if($.type(items[i]) === 'string'){\n                    bar.append(structure(items[i]));\n                }\n                else{\n                    items[i].target = target;\n                    items[i].toolbar = toolbar;\n                    bar.append(button(items[i], isTextButton));\n                }\n            }\n        }\n        else{\n            group = $('<div>', {'class' : 'tlb-group'});\n            bar.append(group);\n            for(i = 0; i < l; i++){\n                if($.type(items[i]) === 'string'){\n                    group.append(structure(items[i]));\n                }\n                else{\n                    items[i].target = target;\n                    items[i].toolbar = toolbar;\n                    group.append(button(items[i], isTextButton));\n                }\n            }\n        }\n\n        bar.append(structure('end'));\n        return bar;\n    };\n\n    /**\n     * build a single button\n     *\n     * @param config\n     * @param isTextButton bool\n     * @returns {*|HTMLElement}\n     */\n    var button = function(config, isTextButton){\n        var a,\n            span,\n            button,\n            icon,\n            text,\n            // re-assigning and deleting serves to\n            // allow any attribute in the config\n            status = config.status || 'off',\n            fn = config.fn || function(){\n        },\n            target = config.target || $(),\n            toolbar = config.toolbar || $();\n\n        delete(config.status);\n        delete(config.fn);\n        delete(config.target);\n        delete(config.toolbar);\n\n        if(!isTextButton){\n\n            // handle common misconfiguration with 'icon-' prefix\n            icon = 'icon-' + (config.icon.replace('icon-', ''));\n            delete(config.icon);\n\n            config['class'] = config['class'] ? config['class'] + ' tlb-button-' + status : 'tlb-button-' + status;\n\n            button = $('<a>', config);\n            span = $('<span>', {'class' : icon});\n            button.append(span);\n        }\n        else{\n            text = __(config.title);\n            delete(config.title);\n\n            config['class'] = config['class'] ? config['class'] + ' tlb-text-button-box' : 'tlb-text-button-box';\n\n            button = $('<span>', config);\n            a = $('<a>', {'class' : 'tlb-text-button-' + status});\n            span = $('<span>', {'class' : 'tlb-text', text : text});\n            button.append(a);\n            a.append(span);\n        }\n\n        button.on('click.toolbar', function(e){\n            // disabled buttons do nothing\n            if(button.hasClass('tlb-text-button-disabled') || button.hasClass('tlb-button-disabled')){\n                return false;\n            }\n            if(isTextButton){\n                button.find('a').toggleClass('tlb-text-button-off').toggleClass('tlb-text-button-on');\n            }\n            else{\n                button.toggleClass('tlb-button-off').toggleClass('tlb-button-on');\n            }\n            fn.apply(this, [e, target, toolbar]);\n        });\n\n        return button;\n    };\n\n\n    /**\n     * merge configurations\n     *\n     * @param config\n     * @param extendDefaultConfig\n     * @returns {*}\n     */\n    var handleConfig = function(config, extendDefaultConfig){\n        // config = []\n        if($.isArray(config) && !config.length){\n            config = false;\n        }\n\n        // config is now either a proper array or false or undefined\n        // 1. false or undefined - use the default\n        if(!config){\n            config = defaultConfig;\n        }\n        // 2. proper array - should the default be extended or not?\n        else if(extendDefaultConfig){\n            config = $.extend(defaultConfig, config);\n        }\n\n        return config;\n    };\n\n    /**\n     * Configuration and resulting toolbar structure\n     *\n     * tlb            // implicit\n     *   top          // implicit\n     *\n     *     ****** config starts here *****\n     *\n     *     box        // = parent element []\n     *       bar      // = [] | string 'break' or '/' | string 'spacer' or ' '\n     *         { icon, title, fn [, status, anyAttribute] } | { title, fn [, status, anyAttribute] } | string 'separator' or '-'\n     *       /bar     // implicit\n     *       bar | break\n     *     /box       // implicit\n     *\n     *     ****** config ends here *****\n     *\n     *   /top         // implicit\n     * /tlb           // implicit\n     *\n     * bar configuration:\n     * []                    creates for each element one of the following\n     *   { icon, title, fn [, status] } creates a square button with a text icon\n     *   { title, fn [, status] }       creates a button with text\n     *     icon:   can be with or without prefix e.g. 'icon-move' === 'move'\n     *     title:  title attribute or text when icon is not set\n     *     fn:     on click handler\n     *     status: optional 'off'|'on'|'disabled', default is 'off',\n     *     anyAttribute: any HTML attribute, 'class' will be appended to the default button class\n     *   Note: { icon, title, fn [, status] } and { icon, title [, status] } cannot be mixed within one group!\n     *   'separator' or '-'    creates a vertical line\n     *\n     * 'break' or '/'          creates a new line\n     * 'spacer' or ' '         creates a horizontal distance in the size of a square button\n     *\n     * @param config\n     * @param target\n     */\n    var buildToolbar = function(config, target, tlbWrapper){\n\n        // 1st level container\n        var tlb = $('<div>', {'class' : 'tlb'}),\n        // 2nd level container\n        top = $('<div>', {'class' : 'tlb-top'}),\n        // 3rd level container\n        box = $('<div>', {'class' : 'tlb-box'}),\n        i,\n            ic = config.length;\n\n        top.append(box);\n        tlb.append(top);\n\n        // box level\n        for(i = 0; i < ic; i++){\n            if($.type(config[i]) === 'string'){\n                box.append(structure(config[i]));\n            }\n            else{\n                box.append(bar(config[i], target, tlbWrapper));\n            }\n        }\n        tlb.data('edit', 'toolbar');\n        return tlb;\n    };\n\n\n\n    return (function(){\n\n        /**\n         * Add a tool bar to another element\n         *\n         * @param buttonConfig\n         * @param barConfig\n         * @returns {boolean}\n         */\n        var attach = function(buttonConfig, barConfig){\n\n            var defaultBarConfig = {\n                    offsetTop : -2,\n                    title : '',\n                    extendDefaultConfig : false,\n                    target : $()\n                },\n                toolbar,\n                target = $(barConfig.target),\n                title,\n                top,\n                tlbWrapper = target.prop('tlb') || $('<div>', {'class' : 'tlb-wrapper'});\n\n            if(!target.prop('tlb')){\n\n                buttonConfig = handleConfig(buttonConfig, barConfig.extendDefaultConfig);\n                barConfig = $.extend(defaultBarConfig, (barConfig || {}));\n\n\n                toolbar = buildToolbar(buttonConfig, target, tlbWrapper);\n\n                if(barConfig.title){\n                    title = $('<span>', {text : barConfig.title, 'class' : 'tlb-title', title : barConfig.title});\n                    tlbWrapper.append(title);\n                }\n\n                tlbWrapper.append(toolbar);\n\n                target.prop('tlb', tlbWrapper);\n\n                target.append(tlbWrapper);\n\n                // note: css parameters cannot be passed as an object\n                // since the DOM element must have its position\n                // before the size can be calculated\n                tlbWrapper.css('position', 'absolute');\n                tlbWrapper.css('display', 'none');\n                tlbWrapper.css('width', '100%');\n\n                top = defaultBarConfig.offsetTop - tlbWrapper.height();\n                tlbWrapper.css('top', top);\n            }\n\n            tlbWrapper.fadeIn();\n//\n//      $(document).on('click', function(e){\n//        if(!target.is(e.target)\n//          && !tlbWrapper.is(e.target)\n//          && target.has(e.target).length === 0\n//          && tlbWrapper.has(e.target).length === 0\n//          && !$(e.target).hasClass('.cke')) {\n//          target.find('[data-edit]').hide();\n//          tlbWrapper.hide();\n//          $(document).trigger('widgetBlur');\n//        }\n//      });\n\n            return tlbWrapper;\n        };\n\n        return {\n            attach : attach\n        };\n\n    }());\n\n});\n\n\n","define('taoQtiItem/qtiCreator/widgets/static/Widget',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/Widget',\n    'taoQtiItem/qtiCreator/editor/widgetToolbar'\n], function($, Widget, toolbar){\n\n    var StaticWidget = Widget.clone();\n\n    StaticWidget.initCreator = function(){\n\n        Widget.initCreator.call(this);\n\n        this.createToolbar();\n    };\n\n    StaticWidget.buildContainer = function(){\n        var $wrap = $('<div>', {'data-serial' : this.element.serial, 'class' : 'widget-box'});\n        this.$original.wrap($wrap);\n        this.$container = this.$original.parent();\n    };\n\n    StaticWidget.createToolbar = function(){\n\n        return this;\n    };\n\n    StaticWidget.createOkButton = function(){\n\n        var _this = this;\n\n        //@todo: use handlebars tpl instead?\n        this.$container.append($('<button>', {\n            'class' : 'btn-info small',\n            'type' : 'button',\n            'text' : 'OK',\n            'data-edit' : 'active'\n        }).css({\n            margin : '5px 10px',\n            display : 'none'\n        }).on('click.qti-widget', function(e){\n            e.stopPropagation();\n            _this.changeState('sleep');\n        }));\n    };\n\n    return StaticWidget;\n});\n","define('taoQtiItem/qtiCreator/widgets/states/factory',['jquery', 'lodash'], function($, _){\n\n    var _isValidStateDefinition = function(state){\n\n        if(!_.isFunction(state)){\n            return false;\n        }\n\n        if(!state.prototype.name || !state.prototype.superState){\n            return false;\n        }\n\n        if(!_.isFunction(state.prototype.init) || !_.isFunction(state.prototype.exit)){\n            return false;\n        }\n\n        return true;\n    };\n\n\n    var _create = function(name, superStates, init, exit){\n\n        var State = function(widget){\n            this.widget = widget;\n        };\n\n        State.prototype.name = name;\n\n        State.prototype.superState = superStates || [];\n\n        if(init && exit){\n            State.prototype.init = function(){\n\n                var $container = this.widget.$container;\n\n                if($container.data('edit') === name){\n                    $container.show();\n                }\n\n                var $editableWidgets = $container.find('[data-edit=\"' + name + '\"]').filter(function(){\n                    var $parentWidget = $(this).closest('.widget-box');\n                    if($parentWidget.length && $parentWidget[0] === $container[0]){\n                        return true;\n                    }\n                    return false;\n                });\n                $editableWidgets.show();\n\n                this.widget.$container.addClass('edit-' + name);\n                $(document).trigger('beforeStateInit.qti-widget', [this.widget.element, this]);\n                init.call(this);\n                $(document).trigger('afterStateInit.qti-widget', [this.widget.element, this]);\n            };\n            State.init = init;//store reference for future usage\n\n            State.prototype.exit = function(){\n                if(this.widget.$container.data('edit') === name){\n                    this.widget.$container.hide();\n                }\n                this.widget.$container.find('[data-edit=\"' + name + '\"]').hide();\n                this.widget.$container.removeClass('edit-' + name);\n\n                $(document).trigger('beforeStateExit.qti-widget', [this.widget.element, this]);\n\n                //remove any qti element change event attached during this state lifetime\n                $(document).off(['.qti-widget', name, this.widget.serial].join('.'));\n\n                exit.call(this);\n                $(document).trigger('afterStateExit.qti-widget', [this.widget.element, this]);\n            };\n            State.exit = exit;//store reference for future usage\n        }\n\n        return State;\n    };\n\n    return {\n        /**\n         * Create qti widget state from scratch or by using an existing state as model\n         * When creating a state from scratch, the name, the init() and exit() callback are required.\n         * The optional superStates (array) is optional and is useful only when you need to define a hierarchy between the new state\n         * abd the ones in the superStates array.\n         * When the widget state is changed in this newly created state, the init()\n         *\n         * accepts the following arguments:\n         * (string) stateName, (array) superStates, (function) init, (function) exit\n         * (string) stateName, (function) init, (function) exit\n         * (function) State, (function) init, (function) exit\n         * @returns {State}\n         */\n        create : function(){\n\n            var State, name, superStates, init, exit;\n\n            if(_.isString(arguments[0])){\n                name = arguments[0];\n                if(_.isArray(arguments[1])){\n                    superStates = arguments[1];\n                    if(_.isFunction(arguments[2]) && _.isFunction(arguments[3])){\n                        init = arguments[2];\n                        exit = arguments[3];\n                        State = _create(name, superStates, init, exit);\n                    }else{\n                        throw new Error('the third and fourth arguments are expected to be functions: init() & exit()');\n                    }\n                }else{\n                    superStates = [];\n                    if(_.isFunction(arguments[1]) && _.isFunction(arguments[2])){\n                        init = arguments[1];\n                        exit = arguments[2];\n                        State = _create(name, superStates, init, exit);\n                    }else{\n                        throw new Error('the second and third arguments are expected to be functions: init() & exit()');\n                    }\n                }\n            }else if(_isValidStateDefinition(arguments[0])){\n                name = arguments[0].prototype.name;\n                superStates = arguments[0].prototype.superState;\n                if(_.isFunction(arguments[1]) && _.isFunction(arguments[2])){\n                    init = arguments[1];\n                    exit = arguments[2];\n                    State = _create(name, superStates, init, exit);\n                }else{\n                    throw new Error('the second and third arguments are expected to be functions: init() & exit()');\n                }\n            }else{\n                throw new Error('invalid first argument : expected the state name (string) or a State (function)');\n            }\n\n            return State;\n        },\n        extend : function(State, init, exit){\n\n            var Clone = null, initFn, exitFn;\n\n            if(_isValidStateDefinition(State)){\n\n                if(_.isFunction(init)){\n                    initFn = function(){\n                        State.init.call(this);\n                        init.call(this);\n                    };\n                }\n                if(_.isFunction(exit)){\n                    exitFn = function(){\n                        exit.call(this);\n                        State.exit.call(this);\n                    };\n                }\n\n                Clone = _create(State.prototype.name, State.prototype.superState, initFn, exitFn);\n                _.forIn(State.prototype, function(prop, name){\n                    if(_.isFunction(prop)){\n                        if((initFn && name === 'init') || (exitFn && name === 'exit')){\n                            return true;\n                        }\n                        Clone.prototype[name] = prop;\n                        Clone[name] = prop;\n                    }\n                });\n            }else{\n                throw new Error('invalid state to be cloned');\n            }\n\n            return Clone;\n        },\n        createBundle : function(arg0, arg1, arg2){\n\n            var stateBundle = {},\n                newStates = [],\n                excluded = [];\n\n            if(arguments.length >= 2){\n                stateBundle = _.clone(arguments[0]);\n                newStates = arguments[1];\n                excluded = arguments[2] || excluded;\n            }else{\n                newStates = arguments[0];\n            }\n\n            _.each(newStates, function(state){\n\n                if(_isValidStateDefinition(state)){\n                    stateBundle[state.prototype.name] = state;\n                }\n            });\n\n            _.each(excluded, function(state){\n                delete stateBundle[state];\n            });\n\n            return stateBundle;\n        },\n        throwMissingRequiredImplementationError : function(functionName){\n            throw new Error('Missing required implementation of the function ' + functionName + '()');\n        }\n    };\n});\n\n\n\n","define('taoQtiItem/qtiCreator/widgets/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory'], function(stateFactory){\n    \n    return stateFactory.create('sleep', function(){\n        \n        var widget = this.widget,\n            $container = this.widget.$container;\n        \n        //add listener to display proper hover style\n        $container.on('mouseenter.sleep', function(e){\n            $container.addClass('hover');\n            $container.parent().trigger('mouseleave');//note : don't trigger it with namespace otherwise, choice.on(mouseleave.choice) will not be triggered\n        }).on('mouseleave.sleep', function(){\n            $container.removeClass('hover');\n            $container.parent().trigger('mouseenter');//note : same as mouseenter.sleep\n        });\n        \n        if(!widget.isValid()){\n            widget.changeState('invalid');\n        }\n        \n    }, function(){\n\n        this.widget.$container.removeClass('hover').off('.sleep');\n\n    });\n});\n","define('taoQtiItem/qtiCreator/widgets/static/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/states/Sleep'], function(stateFactory, SleepState){\n    \n    var StaticStateSleep = stateFactory.extend(SleepState, function(){\n        \n        var _widget = this.widget;\n        \n        _widget.$container.on('click.qti-widget.sleep', function(e){\n            e.stopPropagation();\n            _widget.changeState('active');\n        });\n        \n    }, function(){\n        \n        var _widget = this.widget;\n        \n        //remove hover outline box display\n        _widget.$container.off('.sleep');\n    });\n    \n    return StaticStateSleep;\n});\n","define('taoQtiItem/qtiCreator/widgets/helpers/content',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/helper/creatorRenderer',\n    'taoQtiItem/qtiCreator/model/helper/container',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content'\n], function($, _, creatorRenderer, containerHelper, gridContentHelper){\n\n    var contentHelper = {};\n    \n    contentHelper.createElements = function(container, $container, data, callback){\n\n        var $dummy = $('<div>').html(data);\n\n        containerHelper.createElements(container, gridContentHelper.getContent($dummy), function(newElts){\n\n            creatorRenderer.get().load(function(){\n\n                for(var serial in newElts){\n\n                    var elt = newElts[serial],\n                        $placeholder = $container.find('.widget-box[data-new][data-qti-class=' + elt.qtiClass + ']'),\n                        $widget,\n                        widget;\n                        \n                    elt.setRenderer(this);\n                    elt.render($placeholder);\n\n                    //render widget\n                    widget = elt.postRender();\n                    $widget = widget.$original;\n\n                    //inform height modification\n                    $widget.trigger('contentChange.gridEdit');\n\n                    if(_.isFunction(callback)){\n                        callback(widget);\n                    }\n                    \n                }\n\n            }, this.getUsedClasses());\n        });\n\n    };\n    \n    contentHelper.changeInnerWidgetState = function _changeInnerWidgetState(outerWidget, state){\n        \n         var selector = [];\n        _.each(['img', 'math', 'object'], function(qtiClass){\n            selector.push('[data-html-editable] .widget-'+qtiClass); \n        });\n        \n        outerWidget.$container.find(selector.join(',')).each(function(){\n            var innerWidget = $(this).data('widget');\n            if(innerWidget){\n                innerWidget.changeState(state);\n            }\n        });\n    };\n    \n    return contentHelper;\n});\n","define('taoQtiItem/qtiCreator/widgets/states/Active',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/helpers/content'\n], function($, stateFactory, contentHelper){\n\n    return stateFactory.create('active', function(){\n\n        var _widget = this.widget,\n            container = _widget.$container[0],\n            item = this.widget.element.getRelatedItem();\n\n        //move to sleep state by clicking anywhere outside the interaction \n        $('#item-editor-panel').on('mousedown.active', function(e){\n            if(container !== e.target && !$.contains(container, e.target)){\n                _widget.changeState('sleep');\n            }\n        }).on('beforesave.qti-creator.active', function(){\n            _widget.changeState('sleep');\n        }).on('styleedit.active', function(){\n            _widget.changeState('sleep');\n        });\n\n        if(item && item.data('widget')){\n            //in item editing context:\n            item.data('widget').$container.on('resizestart.gridEdit.active beforedragoverstart.gridEdit.active', function(){\n                _widget.changeState('sleep');\n            });\n        }\n\n    }, function(){\n        \n        contentHelper.changeInnerWidgetState(this.widget, 'sleep');\n        \n        this.widget.$container.off('.active');\n        $('#item-editor-panel').off('.active');\n        \n        var item = this.widget.element.getRelatedItem();\n        if(item && item.data('widget')){\n            item.data('widget').$container.off('.active');\n        }\n        \n    });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/states/Active',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Active'\n], function($, stateFactory, Active){\n\n    return stateFactory.extend(Active, function(){\n\n        var _widget = this.widget,\n            $container = _widget.$container;\n\n        _widget.beforeStateInit(function(e, element, state){\n\n            var serial = element.getSerial();\n            if((state.name === 'active' && serial !== _widget.serial) || state.name === 'choice'){\n\n                if(_widget.element.qtiClass === 'rubricBlock'){\n                    //exclude\n                    var composingElts = _widget.element.getComposingElements();\n                    if(!composingElts[element.serial]){\n                        _widget.changeState('sleep');\n                    }\n                }else{\n                    //call sleep whenever other widget is active\n                    _widget.changeState('sleep');\n                }\n\n            }\n\n        }, 'otherActive');\n\n        $container.on('mouseenter.active', function(e){\n            e.stopPropagation();\n            $container.parent().trigger('mouseleave.sleep');\n        }).on('mouseleave.active', function(e){\n            e.stopPropagation();\n            $container.parent().trigger('mouseenter.sleep');\n        }).on('click.active', function(e){\n            e.stopPropagation();\n        });\n\n    }, function(){\n\n        this.widget.$container.off('.active');\n        $('#item-editor-panel').off('.active');\n\n        this.widget.offEvents('otherActive');\n    });\n\n});\n\n","define('taoQtiItem/qtiCreator/widgets/states/Inactive',['taoQtiItem/qtiCreator/widgets/states/factory'], function(stateFactory){\n\n    return stateFactory.create('inactive', function(){\n\n    }, function(){\n        \n    });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/notifications/deletingInfoBox', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"You have deleted an element\", options) : helperMissing.call(depth0, \"__\", \"You have deleted an element\", options)))\n    + \".\\n    \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"You have deleted\", options) : helperMissing.call(depth0, \"__\", \"You have deleted\", options)))\n    + \" \";\n  if (helper = helpers.count) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.count); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"elements\", options) : helperMissing.call(depth0, \"__\", \"elements\", options)))\n    + \".\\n    \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"feedback-info popup\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"icon-info\\\"></span>\\n    \";\n  stack1 = (helper = helpers.equal || (depth0 && depth0.equal),options={hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data},helper ? helper.call(depth0, (depth0 && depth0.count), 1, options) : helperMissing.call(depth0, \"equal\", (depth0 && depth0.count), 1, options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <a class=\\\"undo\\\" href=\\\"#\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"undo\", options) : helperMissing.call(depth0, \"__\", \"undo\", options)))\n    + \"</a>\\n    <span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove Message\", options) : helperMissing.call(depth0, \"__\", \"Remove Message\", options)))\n    + \"\\\" class=\\\"icon-close close-trigger\\\"></span>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/helpers/deletingState',['lodash', 'jquery', 'tpl!taoQtiItem/qtiCreator/tpl/notifications/deletingInfoBox'], function(_, $, deletingInfoTpl){\n\n    var _timeout = 10000;\n    \n    var _bindEvents = function($messageBox){\n\n        var timeout = setTimeout(function(){\n            _confirmDeletion($messageBox, 1000);\n        }, _timeout);\n\n        $('body').on('mousedown.deleting keydown.deleting', function(e){\n            //confirm deleting whenever user interact with another object\n            if(e.target !== $messageBox[0] && !$.contains($messageBox[0], e.target)){\n                _confirmDeletion($messageBox, 400);\n            }\n        });\n        \n        $messageBox.find('a.undo').on('click', function(e){\n            e.preventDefault();\n            $messageBox.trigger('undo.deleting');\n            clearTimeout(timeout);\n            $messageBox.remove();\n        });\n\n        $messageBox.find('.close-trigger').on('click', function(e){\n            e.preventDefault();\n            _confirmDeletion($messageBox, 0);\n        });\n    };\n\n    var _confirmDeletion = function($messageBox, fadeDelay){\n        \n        $messageBox.trigger('confirm.deleting');\n        $messageBox.fadeOut(fadeDelay, function(){\n            $(this).remove();\n        });\n    };\n    \n    var deletingHelper = {\n        createInfoBox : function(widgets){\n\n            var $messageBox = $(deletingInfoTpl({\n                serial : 'widgets',\n                count : widgets.length\n            }));\n\n            $('body').append($messageBox);\n\n            $messageBox.css({\n                'display' : 'block',\n                'position' : 'fixed',\n                'top' : '50px',\n                'left' : '50%',\n                'margin-left' : '-200px',\n                'width' : '400px',\n                zIndex : 999999\n            });\n            \n            _bindEvents($messageBox);\n            \n            _.each(widgets, function(w){\n                w.on('beforeStateInit', function(){\n                    _confirmDeletion($messageBox, 400);\n                });\n            });\n        \n            return $messageBox;\n        }\n    };\n\n    return deletingHelper;\n});\n","define('taoQtiItem/qtiCreator/helper/gridUnits',['lodash'], function(_){\n    \"use strict\";\n    /**\n     * Argument cols format: \n     * [{elt:elementRef, units:6, min:4}]\n     * \n     * Return format:\n     * {last:6, middle:4, distributed:[{elt:elementRef, units:5}]}\n     * \n     * @param {array} cols \n     * @param {int} min \n     * @param {int} max \n     * @returns {object}\n     */\n    function distributeUnits(cols, min, max){\n\n        max = max || 12;\n        var totalUnits = 0, size = 0, _cols = {}, ret = {}, minimized = [], decimals = [];\n\n        for(var i in cols){\n            _cols[i] = _.clone(cols[i]);\n            totalUnits += cols[i].units;\n            size++;\n        }\n\n        var avg = totalUnits / size;\n        _cols[size + 1] = {\n            'elt' : 'middle',\n            'units' : avg,\n            'min' : min\n        };\n\n        if(totalUnits + Math.round(avg) > max){\n\n            var refactoredTotalUnits = 0;\n            //need to squeeze the new col between existing ones:\n            //refactored\n            for(var i in _cols){\n\n                var col = _cols[i];\n                var refactoredUnits = col.units * max / (max + avg);//calculate the average, basis for the new inserted element's units\n                decimals[i] = Math.round((refactoredUnits % 1) * 100);//get its decimals for later usage\n\n                col.refactoredUnits = Math.round(refactoredUnits);\n                if(col.min && col.refactoredUnits < col.min){//a col cannot be smaller than its min units\n                    col.refactoredUnits = col.min;\n                    minimized[i] = true;//marked it as not changeable\n                }\n                refactoredTotalUnits += col.refactoredUnits;\n\n            }\n\n            if(refactoredTotalUnits > max){\n                //try ceil new units values:\n                for(var i; i < size + 1; i++){\n                    var col = _cols[i];\n                    if(col.decimal > 50 && col.refactoredUnits - 1 > col.min){\n                        col.refactoredUnits--;\n                        refactoredTotalUnits--;\n                    }\n                    if(refactoredTotalUnits === max){\n                        break;//target achieved\n                    }\n                }\n            }\n\n            var middleUnitValue = _cols[size + 1].refactoredUnits;\n            var lastUnitValue = (refactoredTotalUnits > max) ? max : middleUnitValue;\n            delete _cols[size + 1];\n\n            ret = {\n                last : lastUnitValue, //new col takes the remaining space\n                middle : middleUnitValue,\n                cols : _cols,\n                refactoredTotalUnits : refactoredTotalUnits\n            };\n        }else{\n\n            //there is \"room\" for the new element to fill the whole row:\n            var last = max - totalUnits;\n            ret = {\n                last : last,\n                middle : last,\n                cols : {}//no need to resize cols\n            };\n        }\n\n        return ret;\n    }\n\n    /**\n     * Rebistributs the cols proportionally to fill out the \"max\" width\n     * \n     * @param {array} cols\n     * @param {integer} max\n     * @returns {object}\n     */\n    function redistributeUnits(cols, max){\n\n        max = max || 12;//default to max\n\n        var totalUnits = 0,\n            _cols = [],\n            totalRefactoredUnits = 0,\n            negative = [],\n            positive = [],\n            ret = [];\n\n        _.each(cols, function(col){\n            _cols.push(col);\n            totalUnits += col.units;\n        });\n\n        if(totalUnits > max){\n            throw 'the total number of units exceed the maximum of ' + max;\n        }\n\n        _.each(_cols, function(col){\n\n            var refactoredUnits = col.units * max / totalUnits;\n            var rounded = Math.round(refactoredUnits);\n            totalRefactoredUnits += rounded;\n\n            col.refactoredUnits = rounded;\n            \n            if(rounded > refactoredUnits){\n                positive.push(col);\n            }else{\n                negative.push(col);\n            }\n            \n        });\n        \n        positive = _.sortBy(positive, 'refactoredUnits');\n        negative = _.sortBy(negative, 'refactoredUnits');\n        \n        if(totalRefactoredUnits > max){\n            //too much !\n            \n            //@todo : start with the hightest refactored\n            _.eachRight(positive, function(col){\n                col.refactoredUnits --;\n                totalRefactoredUnits--;\n                if(totalRefactoredUnits === max){\n                    return false;\n                }\n            });\n            \n        }else if(totalRefactoredUnits < max){\n            \n            //@todo : start with the lowest refactored\n            _.each(negative, function(col){\n                col.refactoredUnits ++;\n                totalRefactoredUnits++;\n                if(totalRefactoredUnits === max){\n                    return false;\n                }\n            });\n            \n        }\n        \n        _.each(negative, function(col){\n            ret.push(col);\n        });\n        _.each(positive, function(col){\n            ret.push(col);\n        });\n\n        return _cols;\n    }\n    \n\n    return {\n        distribute : function(cols, min, max){\n            return distributeUnits(cols, min, max);\n        },\n        redistribute : function(cols, max){\n            return redistributeUnits(cols, max);\n        }\n\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/states/Deleting',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/helpers/deletingState',\n    'taoQtiItem/qtiCreator/helper/gridUnits',\n    'taoQtiItem/qtiCreator/editor/gridEditor/helper',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content'\n], function(_, $, stateFactory, deletingHelper, gridUnits, gridHelper, contentHelper){\n\n    var DeletingState = stateFactory.create('deleting', function(){\n\n        var element = this.widget.element;\n\n        //array to store new col untis\n        this.refactoredUnits = [];\n        this.updateBody = false;\n\n        //reference to the dom element(s) to be remove on delete\n        this.$elementToRemove = this.getElementToRemove();\n        \n        this.hideWidget();\n\n        this.showMessage(element);\n\n        element.data('deleting', true);\n\n        //trigger resizing\n        if(this.updateBody){\n            \n            //store reference to the item and its container:\n            this.item = element.getRelatedItem();\n            this.$item = this.item.data('widget').$container.find('.qti-itemBody');\n\n            //call for resize action\n            this.$item.trigger('resize.qti-widget');\n        }\n\n    }, function(){\n\n        this.showWidget();\n        this.widget.element.data('deleting', false);\n        $('body').off('.deleting');\n\n        if(this.updateBody){\n            this.$item.trigger('resize.qti-widget');\n        }\n    });\n\n    /**\n     * @todo move widget specific code to their respective location\n     * \n     * @returns {jQuery} container\n     */\n    DeletingState.prototype.getElementToRemove = function(){\n\n        var $container = this.widget.$container;\n\n        //if is a choice widget:\n        if($container.hasClass('qti-choice')){\n\n            if($container.prop('tagName') === 'TH'){\n\n                //matchInteraction:\n                if($container.parent().parent().prop('tagName') === 'THEAD'){\n\n                    //hide col\n                    var $tbody = $container.closest('table.matrix').children('tbody');\n                    var $tds = $tbody.children('tr').find('td:last');\n                    return $container.add($tds);\n\n                }else if($container.parent().parent().prop('tagName') === 'TBODY'){\n\n                    //hide row\n                    return $container.parent();\n                }\n            }else{\n                return $container;\n            }\n\n        }\n\n        /**\n         * inline widget\n         */\n        if($container.hasClass('widget-inline')){\n            return $container.add(this.widget.$original);\n        }\n        \n        /**\n         * block widget\n         */\n        var $col = $container.parent();\n        \n        //check sub-column condition\n        var $subCol = $container.parent('.colrow');\n        if($subCol.length){\n            \n            this.updateBody = true;\n            \n            var $colMulti = $subCol.parent();\n            if($colMulti.find('.colrow').length === 1){\n                //this is the only sub-column remaining, hide the entire col\n                $col = $colMulti;\n            }else{\n                //hide the whole sub-column only :\n                return $subCol;\n            }\n        }\n        \n        //check if we should hide the col only or the whole row\n        var $row = $col.parent('.grid-row');\n        if($row.length){\n            this.updateBody = true;\n            if($row.children().length === 1){\n                //if it is the only col in the row, hide the entire row\n                return $row;\n            }else{\n                //else, hide the current one ...\n                return $col;\n            }\n        }else if($container.hasClass('grid-row')){\n            //rubric block:\n            this.updateBody = true;\n            return $container;\n        } \n                \n        //other block widgets:\n        if($container.hasClass('widget-block')){\n            return $container;\n        }\n    };\n\n    DeletingState.prototype.hideWidget = function(){\n\n        var $elt = this.$elementToRemove;\n\n        if($elt.length){\n            $elt.hide();\n            if(_isCol($elt)){\n                //it is a column : redistribute the units of the columdn to the others\n                this.refactoredUnits = _redistributeUnits($elt);\n            }\n        }\n    };\n\n    var _isCol = function($col){\n        var attrClass = $col.attr('class');\n        return (attrClass && /col-([\\d]+)/.test(attrClass));\n    };\n\n    var _redistributeUnits = function($col){\n\n        var usedUnits = $col.data('units');\n        var $otherCols = $col.siblings();\n        var cols = [];\n\n        $otherCols.each(function(){\n\n            var $col = $(this),\n                units = $col.data('units');\n\n            cols.push({\n                elt : $col,\n                units : units\n            });\n\n            usedUnits += units;\n        });\n\n        cols = gridUnits.redistribute(cols);\n\n        _.each(cols, function(col){\n            col.elt.removeClass('col-' + col.units).addClass('col-' + col.refactoredUnits);\n            gridHelper.setUnitsFromClass(col.elt);\n        });\n\n        //store results in the element for future ref?\n        $col.data('redistributedUnits', cols);\n\n        return cols;\n    };\n\n    DeletingState.prototype.showWidget = function(){\n\n        var $elt = this.$elementToRemove;\n        if($elt.length && $.contains(document, $elt[0])){\n\n            $elt.show();\n\n            if(_isCol($elt)){\n                //restore the other units:\n                _.each(this.refactoredUnits, function(col){\n                    col.elt.removeClass('col-' + col.refactoredUnits).addClass('col-' + col.units);\n                    gridHelper.setUnitsFromClass(col.elt);\n                });\n            }\n        }\n    };\n\n    DeletingState.prototype.showMessage = function(){\n\n        var _this = this,\n            _widget = this.widget,\n            $messageBox = deletingHelper.createInfoBox([_widget]);\n\n        $messageBox.on('confirm.deleting', function(){\n\n            _this.deleteElement();\n\n        }).on('undo.deleting', function(){\n\n            try{\n                _widget.changeState('question');\n            }catch(e){\n                _widget.changeState('active');\n            }\n        });\n\n        this.messageBox = $messageBox;\n    };\n\n    DeletingState.prototype.deleteElement = function(){\n\n        this.refactoredUnits = [];\n\n        this.$elementToRemove.remove();//remove html from the dom\n        this.widget.destroy();//remove what remains of the widget (almost nothing), call this after element remove\n        this.widget.element.remove();//remove from model\n\n        if(this.updateBody){\n            //need to update item body\n            this.item.body(contentHelper.getContent(this.$item));\n        }\n\n    };\n\n    return DeletingState;\n});\n","define('taoQtiItem/qtiCreator/widgets/static/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/static/states/Active',\n    'taoQtiItem/qtiCreator/widgets/states/Inactive',\n    'taoQtiItem/qtiCreator/widgets/states/Deleting'\n], function(factory){\n    return factory.createBundle(arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/static/text/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/static/states/Sleep'], function(stateFactory, SleepState){\n    \n    var TextBlockStateSleep = stateFactory.extend(SleepState, function(){}, function(){});\n    \n    return TextBlockStateSleep;\n});\n","define('taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',[\n    'lodash',\n    'i18n',\n    'jquery',\n    'ckeditor',\n    'ui/ckeditor/ckConfigurator',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/widgets/helpers/content',\n    'taoQtiItem/qtiCreator/widgets/helpers/deletingState'\n], function(_, __, $, CKEditor, ckConfigurator, Element, contentHelper, deletingHelper){\n    \"use strict\";\n    //prevent auto inline editor creation:\n    CKEditor.disableAutoInline = true;\n\n    var _defaults = {\n        placeholder : __('some text ...'),\n        shieldInnerContent : true,\n        passthroughInnerContent : false,\n        hideTriggerOnBlur : false\n    };\n\n    /**\n     * Find the ck launcher (the trigger that toggle visibility of the editor) in the editor's container\n     *\n     * @param {JQuery} $editableContainer\n     */\n    function getTrigger($editableContainer){\n        var $toolbar = $editableContainer.data('editor-toolbar');\n        if($toolbar && $toolbar.length){\n            return $toolbar.find('[data-role=\"cke-launcher\"]');\n        }else{\n            return $editableContainer.find('[data-role=\"cke-launcher\"]');\n        }\n    }\n\n    /**\n     * @param {JQuery} $editable - the element to be transformed into an editor\n     * @param {JQuery} $editableContainer - the container of the editor\n     * @param {Object} [options]\n     * @param {String} [options.placeholder] - the place holder text\n     * @param {Boolean} [options.shieldInnerContent] - define if the inner widget content should be protected or not\n     * @param {Boolean} [options.passthroughInnerContent] - define if the inner widget content should be accessible directly or not\n     * @param {Boolean} [options.hideTriggerOnBlur] - define if the ckeditor trigger should be hidden when the editor is blurred\n     */\n    function _buildEditor($editable, $editableContainer, options){\n\n        var toolbarType, $trigger;\n\n        options = _.defaults(options, _defaults);\n\n        if(!$editable instanceof $ || !$editable.length){\n            throw 'invalid jquery element for $editable';\n        }\n        if(!$editableContainer instanceof $ || !$editableContainer.length){\n            throw 'invalid jquery element for $editableContainer';\n        }\n\n        $trigger = getTrigger($editableContainer);\n        $editable.attr('placeholder', options.placeholder);\n\n        var ckConfig = {\n            autoParagraph : false,\n            floatSpaceDockedOffsetY : 10,\n            taoQtiItem : {\n                insert : function(){\n                    if(options.data && options.data.container && options.data.widget){\n                        contentHelper.createElements(options.data.container, $editable, _htmlEncode(this.getData()), function(createdWidget){\n                            _activateInnerWidget(options.data.widget, createdWidget);\n                        });\n                    }\n                }\n            },\n            floatSpace : {\n                debug : true,\n                initialHide : true,\n                centerElement : function(){\n                    //cke initialize the config too early.. so need to provide a callback to initialize it...\n                    return getTrigger($editableContainer)[0];\n                },\n                on : {\n                    ready : function(floatSpaceApi){\n\n                        // works around tiny bug in tao floating space\n                        // nose must be in .cke_toolbox rather than .cke\n                        // otherwise z-indexing will fail\n                        var nose = $(this).find('.cke_nose'),\n                            oldParent = nose.parent(),\n                            newParent = $(this).find('.cke_toolbox');\n                        if(oldParent.is('.cke')){\n                            newParent.append(nose);\n                        }\n\n                        floatSpaceApi.hide();\n                        //@todo namespace this event: .editor.qti-widget or stuff...\n                        $trigger.on('click', function(){\n                            if($trigger.hasClass('active')){\n                                $trigger.removeClass('active');\n                                floatSpaceApi.hide();\n                            }else{\n                                $trigger.addClass('active');\n                                floatSpaceApi.show();\n                            }\n                        });\n\n                    },\n                    changeMode : function(oldYMode, newYMode){\n                        var element = this,\n                            $element = $(element),\n                            $nose = $element.find('.cke_nose');\n\n                        var xModeIsReady = function(domElem){\n                            var dfd = new $.Deferred(),\n                                counter = 0,\n                                check = setInterval(function(){\n                                    var style = domElem.getAttribute('style');\n                                    if(counter > 5 || style.indexOf('left') > -1 || style.indexOf('right') > -1){\n                                        dfd.resolve();\n                                        clearInterval(check);\n                                    }\n                                    counter++;\n                                }, 1000);\n                            return dfd.promise();\n                        };\n\n                        if(oldYMode !== newYMode){\n                            $nose.removeClass('float-space-' + oldYMode).addClass('float-space-' + newYMode);\n                        }\n\n                        $.when(xModeIsReady(element)).done(function(){\n                            if(!!element.style.left && !element.style.right){\n                                $nose.removeClass('float-space-right').addClass('float-space-left');\n                            }else{\n                                $nose.removeClass('float-space-left').addClass('float-space-right');\n                            }\n                        });\n                    }\n                }\n            },\n            on : {\n                instanceReady : function(e){\n\n                    var widgets = {},\n                        editor = e.editor;\n\n                    /**\n                     * changed callback\n                     * @param {Object} editor - ckeditor instance\n                     */\n                    function changed(editor){\n\n                        _detectWidgetDeletion($editable, widgets, editor);\n\n                        //callback:\n                        if(_.isFunction(options.change)){\n                            options.change.call(editor, _htmlEncode(editor.getData()));\n                        }\n\n                    }\n\n                    /**\n                     * Markup change callback\n                     */\n                    function markupChanged(){\n\n                        //callbacks:\n                        if(_.isFunction(options.markupChange)){\n                            options.markupChange.call($editable);\n                        }\n                        if(_.isFunction(options.change)){\n                            options.change.call(editor, _htmlEncode(editor.getData()));\n                        }\n\n                    }\n\n                    //fix ck editor combo box display issue\n                    $('#cke_' + e.editor.name + ' .cke_combopanel').hide();\n\n                    //store it in editable elt data attr\n                    $editable.data('editor', editor);\n                    $editable.data('editor-options', options);\n\n                    $editable.on('change', function(){\n                        changed(editor);\n                    });\n\n                    editor.on('change', function(){\n                        markupChanged(editor);\n                    });\n\n                    if(options.data && options.data.container){\n\n                        //store in data-qti-container attribute the editor instance as soon as it is ready\n                        $editable.data('qti-container', options.data.container);\n\n                        //init editable\n                        widgets = _rebuildWidgets(options.data.container, $editable, {\n                            restoreState : true\n                        });\n\n                        if(options.shieldInnerContent){\n                            _shieldInnerContent($editable, options.data.widget);\n                        }else if(options.passthroughInnerContent){\n                            _passthroughInnerContent($editable);\n                        }\n                    }\n\n                    _focus(editor);\n\n                    $editable.trigger('editorready', [editor]);\n\n                    $('.qti-item').trigger('toolbarchange');\n\n                },\n                focus : function(e){\n\n                    //show trigger\n                    $trigger.show();\n\n                    //callback:\n                    if(_.isFunction(options.focus)){\n                        options.focus.call(this, _htmlEncode(this.getData()));\n                    }\n\n                    $('.qti-item').trigger('toolbarchange');\n\n\n                },\n                blur : function(e){\n                    return false;\n                    if(options.hideTriggerOnBlur){\n                        $trigger.hide();\n                    }\n                    $('.qti-item').trigger('toolbarchange');\n\n                },\n                configLoaded : function(e){\n                    //@todo : do we really have to wait here to initialize the config?\n                    var toolbarType = '';\n                    if(options.toolbar && _.isArray(options.toolbar)){\n                        ckConfig.toolbar = options.toolbar;\n                    }else{\n                        toolbarType = getTooltypeFromContainer($editableContainer);\n                    }\n                    e.editor.config = ckConfigurator.getConfig(e.editor, toolbarType, ckConfig);\n                },\n                afterPaste : function(e){\n                    //@todo : we may add some processing on the editor after paste\n                }\n            }\n        };\n        \n        return CKEditor.inline($editable[0], ckConfig);\n    }\n    \n    /**\n     * Assess\n     * @param {type} $editableContainer\n     * @returns {String}\n     */\n    function getTooltypeFromContainer($editableContainer){\n        \n        var toolbarType = 'qtiFlow';\n        // build parameter for toolbar\n        if($editableContainer.hasClass('widget-blockInteraction') || $editableContainer.hasClass('widget-textBlock') || $editableContainer.hasClass('widget-rubricBlock')){\n            toolbarType = 'qtiBlock';\n        }else if($editableContainer.hasClass('qti-prompt-container') || $editableContainer.hasClass('widget-hottext')){\n            toolbarType = 'qtiInline';\n        }\n        return toolbarType;\n    }\n    \n    /**\n     * Find an inner element by its data attribute name\n     * @param {JQuery} $container\n     * @param {String} dataAttribute\n     */\n    function _find($container, dataAttribute){\n\n        var $collection;\n\n        if($container.data(dataAttribute)){\n            $collection = $container;\n        }else{\n            $collection = $container.find('[data-' + dataAttribute + '=true]');\n        }\n        return $collection;\n    }\n\n    /**\n     * Rebuild all innerwidgets located inside a container\n     *\n     * @param {Object} container\n     * @param {JQuery} $container\n     * @param {Object} options\n     */\n    function _rebuildWidgets(container, $container, options){\n\n        options = options || {};\n\n        var widgets = {};\n\n        //re-init all widgets:\n        _.each(_.values(container.elements), function(elt){\n\n            var widget = elt.data('widget'),\n                currentState = widget.getCurrentState().name;\n\n            widgets[elt.serial] = widget.rebuild({\n                context : $container,\n                ready : function(widget){\n                    if(options.restoreState){\n                        //restore current state\n                        widget.changeState(currentState);\n                    }\n                }\n            });\n        });\n\n        $container.trigger('widgetCreated', [widgets, container]);\n\n        return widgets;\n    }\n\n    /**\n     * Find the widget container by its serial\n     *\n     * @param {JQuery} $container\n     * @param {String} serial\n     */\n    function _findWidgetContainer($container, serial){\n        return $container.find('.widget-box[data-serial=' + serial + ']');\n    }\n\n    /**\n     * Detect if an inner widget has been removed\n     *\n     * @param {JQuery} $container\n     * @param {Array} widgets\n     * @param {Object} editor\n     * @returns {undefined}\n     */\n    function _detectWidgetDeletion($container, widgets, editor){\n\n        var deleted = [];\n\n        _.each(widgets, function(w){\n\n            if(!w.element.data('removed')){\n                var $widget = _findWidgetContainer($container, w.serial);\n                if(!$widget.length){\n                    deleted.push(w);\n                }\n            }\n\n        });\n\n        if(deleted.length){\n\n            var $messageBox = deletingHelper.createInfoBox(deleted);\n            $messageBox.on('confirm.deleting', function(){\n\n                _.each(deleted, function(w){\n                    w.element.remove();\n                    w.destroy();\n                });\n            }).on('undo.deleting', function(){\n\n                editor.undoManager.undo();\n            });\n\n        }\n    }\n\n    /**\n     * @param {JQuery} $widget - the widget to be protected\n     * @returns {JQuery} The added layer (shield)\n     */\n    function addShield($widget){\n        var $shield = $('<button>', {\n            'class' : 'html-editable-shield'\n        });\n\n        $widget.attr('contenteditable', false);\n        $widget.append($shield);\n        return $shield;\n    }\n\n    /**\n     * Protect the inner widgets of a container\n     *\n     * @param {JQuery} $container\n     * @param {Object} containerWidget\n     * @returns {undefined}\n     */\n    function _shieldInnerContent($container, containerWidget){\n\n        $container.find('.widget-box').each(function(){\n\n            addShield($(this)).on('click', function(e){\n\n                //click on shield:\n                //1. this.widget.changeState('sleep');\n                //2. clicked widget.changeState('active');\n\n                e.stopPropagation();\n\n                _activateInnerWidget(containerWidget, innerWidget);\n\n            });\n\n        });\n\n    }\n\n    /**\n     * Allow the inner widgets to be selected\n     *\n     * @param {JQuery} $container\n     * @returns {undefined}\n     */\n    function _passthroughInnerContent($container){\n\n        $container.find('.widget-box').each(function(){\n            //just add the shield for visual consistency\n            addShield($(this));\n        });\n\n    }\n\n    /**\n     * Activate the inner widget\n     *\n     * @param {Object} containerWidget\n     * @param {Object} innerWidget\n     * @returns {undefined}\n     */\n    function _activateInnerWidget(containerWidget, innerWidget){\n\n        if(containerWidget && containerWidget.element && containerWidget.element.qtiClass){\n\n            var listenToWidgetCreation = function(){\n\n                containerWidget.$container.off('widgetCreated').one('widgetCreated', function(e, widgets){\n                    var targetWidget = widgets[innerWidget.serial];\n                    if(targetWidget){\n                        //@todo : fix this race condition\n\n                        _.delay(function(){\n\n                            if(Element.isA(innerWidget.element, 'interaction')){\n\n                                targetWidget.changeState('question');\n\n                            }else{\n\n                                targetWidget.changeState('active');\n                            }\n\n                        }, 100);\n                    }\n                });\n\n            };\n\n            if(Element.isA(containerWidget.element, '_container')){\n\n                listenToWidgetCreation();\n                containerWidget.changeState('sleep');\n\n            }else if(Element.isA(containerWidget.element, 'choice')){\n\n                listenToWidgetCreation();\n                containerWidget.changeState('question');\n\n            }else if(Element.isA(innerWidget.element, 'choice')){\n\n                innerWidget.changeState('choice');\n\n            }else{\n\n                innerWidget.changeState('active');\n            }\n\n        }else{\n\n            innerWidget.changeState('active');\n        }\n    }\n\n    /**\n     * Special encoding of ouput html generated from ie8 : moved to xmlRenderer\n     */\n    var _htmlEncode = function(encodedStr){\n        return encodedStr;\n    };\n\n    /**\n     * Focus the editor and set the cursor to the end\n     *\n     * @param {Object} editor - the ckeditor instance\n     * @returns {undefined}\n     */\n    function _focus(editor){\n\n        editor.focus();\n        var range = editor.createRange();\n        range.moveToElementEditablePosition(editor.editable(), true);\n        editor.getSelection().selectRanges([range]);\n    }\n\n    var editorFactory = {\n        /**\n         * Check if all data-html-editable has an editor\n         *\n         * @param {type} $container\n         * @returns {undefined}\n         */\n        hasEditor : function($container){\n\n            var hasEditor = false;\n\n            _find($container, 'html-editable').each(function(){\n                hasEditor = !!$(this).data('editor');\n                return hasEditor; //continue if true, break if false\n            });\n\n            return hasEditor;\n        },\n        /**\n         * Instanciate the editor\n         *\n         * @param {JQuery} $container\n         * @param {Object} [editorOptions]\n         * @param {String} [editorOptions.placeholder] - the place holder text\n         * @param {Boolean} [editorOptions.shieldInnerContent] - define if the inner widget content should be protected or not\n         * @param {Boolean} [editorOptions.passthroughInnerContent] - define if the inner widget content should be accessible directly or not\n         * @param {Boolean} [editorOptions.hideTriggerOnBlur] - define if the ckeditor trigger should be hidden when the editor is blurred\n         * @returns {undefined}\n         */\n        buildEditor : function($container, editorOptions){\n\n            _find($container, 'html-editable-container').each(function(){\n\n                var editor,\n                    $editableContainer = $(this),\n                    $editable = $editableContainer.find('[data-html-editable]');\n\n                //need to make the element html editable to enable ck inline editing:\n                $editable.attr('contenteditable', true);\n\n                //build it\n                editor = _buildEditor($editable, $editableContainer, editorOptions);\n            });\n\n        },\n        /**\n         * Destroy the editor\n         *\n         * @param {JQuery} $container\n         * @returns {undefined}\n         */\n        destroyEditor : function($container){\n\n            _find($container, 'html-editable-container').each(function(){\n\n                var $editableContainer = $(this),\n                    $editable = $editableContainer.find('[data-html-editable]'),\n                    $trigger = getTrigger($editableContainer);\n\n                $trigger\n                    .off()\n                    .removeClass('active')\n                    .hide();\n\n                $editable.removeAttr('contenteditable');\n                if($editable.data('editor')){\n\n                    var editor = $editable.data('editor'),\n                        options = $editable.data('editor-options');\n\n                    //before destroying, ensure that data is stored\n                    if(_.isFunction(options.change)){\n                        options.change.call(editor, _htmlEncode(editor.getData()));\n                    }\n\n                    editor.focusManager.blur(true);\n                    editor.destroy();\n\n                    $editable.removeData('editor').removeData('editor-options');\n                    if($editable.data('qti-container')){\n                        _rebuildWidgets($editable.data('qti-container'), $editable);\n                    }\n                }\n            });\n        },\n        /**\n         * Get the editor content\n         *\n         * @param {JQuery} $editable\n         */\n        getData : function($editable){\n            var editor = $editable.data('editor');\n            if(editor){\n                return _htmlEncode(editor.getData());\n            }else{\n                throw 'no editor attached to the DOM element';\n            }\n        },\n        /**\n         * Focus all the editors found in the given container\n         *\n         * @param {JQuery} $editable\n         * @returns {undefined}\n         */\n        focus : function($editable){\n            _find($editable, 'html-editable').each(function(){\n                var editor = $(this).data('editor');\n                if(editor){\n                    _focus(editor);\n                }\n            });\n        }\n    };\n\n    return editorFactory;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/static/text', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <em>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"no configuration property needed\", options) : helperMissing.call(depth0, \"__\", \"no configuration property needed\", options)))\n    + \"</em>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/text/states/Active',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Active',\n    'taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/static/text'\n], function(stateFactory, Active, htmlEditor, content, formTpl){\n\n    var TextActive = stateFactory.extend(Active, function(){\n\n        this.buildEditor();\n        this.initForm();\n\n    }, function(){\n\n        this.destroyEditor();\n        this.widget.$form.empty();\n    });\n\n    TextActive.prototype.buildEditor = function(){\n\n        var widget = this.widget,\n            $editableContainer = widget.$container,\n            container = widget.element;\n\n        $editableContainer.attr('data-html-editable-container', true);\n\n        if(!htmlEditor.hasEditor($editableContainer)){\n\n            htmlEditor.buildEditor($editableContainer, {\n                change : content.getChangeCallback(container),\n                blur : function(){\n                    widget.changeState('sleep');\n                },\n                data : {\n                    widget : widget,\n                    container : container\n                }\n            });\n        }\n    };\n\n    TextActive.prototype.destroyEditor = function(){\n        //search and destroy the editor\n        htmlEditor.destroyEditor(this.widget.$container);\n    };\n\n    TextActive.prototype.initForm = function(){\n        this.widget.$form.html(formTpl());\n    };\n\n    return TextActive;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/text/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/text/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/static/text/states/Active'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/textBlock', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"mini-tlb\\\" data-edit=\\\"\";\n  if (helper = helpers.state) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.state); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <div class=\\\"rgt tlb-button\\\" title=\\\"Delete\\\" data-role=\\\"delete\\\">\\n        <span class=\\\"icon-bin\\\"></span>\\n    </div>\\n    <div class=\\\"rgt tlb-button\\\" data-role=\\\"cke-launcher\\\" title=\\\"Formatting options\\\">\\n        <span class=\\\"icon-font\\\"></span>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/text/Widget',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/static/Widget',\n    'taoQtiItem/qtiCreator/widgets/static/text/states/states',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/textBlock'\n], function($, Widget, states, toolbarTpl){\n\n    var TextWidget = Widget.clone();\n\n    TextWidget.initCreator = function(){\n\n        Widget.initCreator.call(this);\n\n        this.registerStates(states);\n\n    };\n\n    TextWidget.buildContainer = function(){\n\n        var $wrap = $('<div>', {'data-serial' : this.element.serial, 'data-qti-class' : '_container', 'class' : 'widget-box widget-block widget-textBlock'})\n            .append($('<div>', {'data-html-editable' : true}));\n\n        this.$original.wrapInner($wrap);\n\n        this.$container = this.$original.children('.widget-box');\n    };\n\n    TextWidget.createToolbar = function(){\n\n        var _this = this,\n            $tlb = $(toolbarTpl({\n            serial : this.serial,\n            state : 'active'\n        }));\n\n        this.$container.append($tlb);\n\n        $tlb.find('[data-role=\"delete\"]').on('click.widget-box', function(e){\n            e.stopPropagation();//to prevent direct deleting;\n            _this.changeState('deleting');\n        });\n\n        return this;\n    };\n    \n    return TextWidget;\n});\n","define('taoQtiItem/qtiCreator/editor/blockAdder/blockAdder',[\n    'jquery',\n    'lodash',\n    'tpl!taoQtiItem/qtiCreator/editor/blockAdder/tpl/addColumnRow',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/helper/creatorRenderer',\n    'taoQtiItem/qtiCreator/model/helper/container',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'taoQtiItem/qtiCreator/editor/elementSelector/selector',\n    'taoQtiItem/qtiCreator/widgets/static/text/Widget'\n], function($, _, adderTpl, Element, creatorRenderer, containerHelper, contentHelper, elementSelector, TextWidget){\n    \n    'use strict';\n    \n    var _ns = '.block-adder';\n    var _wrap = '<div class=\"colrow\"></div>';\n    var _placeholder = '<div class=\"placeholder\">';\n    \n    /**\n     * Init the block adder on the item editor panel\n     * \n     * @param {Object} item - standard qti js object\n     * @param {JQuery} $editorPanel - the container the selector popup will be located in\n     * @param {Array} interactions - the array of authorable interactions\n     */\n    function create(item, $editorPanel, interactions){\n\n        var selector, widget;\n        var $itemEditorPanel = $('#item-editor-panel');\n        \n        /**\n         * Get the qti item body dom\n         * \n         * @returns {JQuery}\n         */\n        function _getItemBody(){\n            return $editorPanel.find('.qti-itemBody');\n        }\n\n        /**\n         * Init insertion relative to a widget container\n         * \n         * @param {JQuery} $widget\n         */\n        function _initInsertion($widget){\n\n            var $wrap = $(_wrap);\n            var $colRow = $widget.parent('.colrow');\n\n            //trigger event to restore all currently active widget back to sleep state\n            $itemEditorPanel.trigger('beforesave.qti-creator.active');\n\n            if(!$colRow.length){\n                $widget.wrap(_wrap);\n                $colRow = $widget.parent('.colrow');\n            }\n            $colRow.after($wrap);\n            \n            //create a new selector instance\n            selector = elementSelector.create($wrap, $editorPanel, interactions);\n\n            $editorPanel.off('.element-selector').on('selected.element-selector', function(e, qtiClass){\n\n                var $placeholder = $(_placeholder);\n\n                //remove old widget if applicable:\n                if(widget){\n                    //from model\n                    widget.element.remove();\n                    widget = null;\n                    //from dom\n                    $wrap.find('.widget-box').remove();\n                }\n\n                $wrap.addClass('tmp').prepend($placeholder);\n                _insertElement(qtiClass, $placeholder);\n                selector.reposition();\n\n            }).on('done.element-selector', function(){\n                _done($wrap);\n            }).on('cancel.element-selector', function(){\n                _cancel($wrap);\n            });\n\n            //when clicking outside of the selector popup, consider it done\n            $itemEditorPanel.on('click' + _ns + ' mousedown' + _ns, function(e){\n                var popup = selector.getPopup()[0];\n                if(popup !== e.target && !$.contains(popup, e.target)){\n                    _done($wrap);\n                }\n            });\n\n            //select a default element type\n            selector.activateElement('_container');\n            selector.activatePanel('Text Block');\n\n            //set into the inserting state\n            _getItemBody().addClass('edit-inserting');\n        }\n        \n        /**\n         * End the current insertion state\n         * \n         * @returns {undefined}\n         */\n        function _endInsertion(){\n\n            //destroy selector\n            selector.destroy();\n            \n            //reset references\n            selector = null;\n            widget = null;\n            \n            $editorPanel.off('.element-selector');\n            _getItemBody().removeClass('edit-inserting');\n\n            //need to update item body\n            item.body(contentHelper.getContent(_getItemBody()));\n            \n            //unbind events\n            $itemEditorPanel.off(_ns);\n        }\n        \n        /**\n         * Function to define behaviour when the insertion is completed\n         * \n         * @param {JQuery} $wrap\n         * @returns {undefined}\n         */\n        function _done($wrap){\n\n            //remove tmp class\n            $wrap.removeClass('tmp');\n\n            //append button\n            _appendButton(widget.$container);\n\n            //activate the new widget:\n            _.defer(function(){\n                if(widget.element.is('interaction')){\n                    widget.changeState('question');\n                }else{\n                    widget.changeState('active');\n                }\n                _endInsertion();\n            });\n            \n        }\n        \n        /**\n         * Function defining the behaviour when the insertion has been aborted\n         * \n         * @param {JQuery} $wrap\n         * @returns {undefined}\n         */\n        function _cancel($wrap){\n\n            //destroy interaction + colRow\n            widget.element.remove();\n            $wrap.remove();\n\n            _endInsertion();\n        }\n\n        $editorPanel.find('.widget-block, .widget-blockInteraction').each(function(){\n            _appendButton($(this));\n        });\n\n        //bind add event\n        $editorPanel.on('mousedown', '.add-block-element .circle', function(e){\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            var $widget = $(this).parents('.widget-box');\n            _initInsertion($widget);\n\n        }).on('ready.qti-widget', function(e, _widget){\n\n            var qtiElement = _widget.element;\n\n            if(qtiElement.is('blockInteraction') || qtiElement.is('_container') || qtiElement.is('customInteraction')){\n\n                _appendButton(_widget.$container);\n\n                if(selector && _widget.$container.parent('.colrow.tmp').length){\n                    \n                    //after update when we are in the selecting mode:\n                    if(qtiElement.is('customInteraction')){\n                        //pci rendering is asynchornous:\n                        qtiElement.onPciReady(function(){\n                            selector.reposition();\n                        });\n                    }\n                    selector.reposition();\n                    \n                    //store the reference to the newly created widget\n                    widget = _widget;\n                }\n            }\n\n        });\n\n    }\n    \n    /**\n     * Append the \"plus\" button into a widget\n     * \n     * @param {JQuery} $widget\n     * @returns {undefined}\n     */\n    function _appendButton($widget){\n\n        //only append button to no-tmp widget and only add it once:\n        if(!$widget.children('.add-block-element').length &&\n            !$widget.parent('.colrow.tmp').length){\n\n            var $adder = $(adderTpl());\n            $widget.append($adder);\n            $adder.on('click mouseenter mouseleave', function(e){\n                e.stopPropagation();\n                //consider it outside of the widget element\n                $(this).parent().trigger('mouseleave');\n            });\n        }\n    }\n    \n    /**\n     * Create a new qti element in place of the give $placehoder\n     * \n     * @param {String} qtiClass\n     * @param {JQuery} $placeholder\n     */\n    function _insertElement(qtiClass, $placeholder){\n\n        //a new qti element has been added: update the model + render\n        $placeholder.removeAttr('id');//prevent it from being deleted\n\n        if(qtiClass === 'rubricBlock'){\n            //qti strange exception: a rubricBlock must be the first child of itemBody, nothing else...\n            //so in this specific case, consider the whole row as the rubricBlock\n            //by the way, in our grid system, rubricBlock can only have a width of col-12\n            $placeholder = $placeholder.parent('.col-12').parent('.grid-row');\n        }\n\n        $placeholder.addClass('widget-box');//required for it to be considered as a widget during container serialization\n        $placeholder.attr({\n            'data-new' : true,\n            'data-qti-class' : qtiClass\n        });//add data attribute to get the dom ready to be replaced by rendering\n\n        var $widget = $placeholder.parent().closest('.widget-box, .qti-item');\n        var $editable = $placeholder.closest('[data-html-editable], .qti-itemBody');\n        var widget = $widget.data('widget');\n        var element = widget.element;\n        var container = Element.isA(element, '_container') ? element : element.getBody();\n\n        if(!element || !$editable.length){\n            throw new Error('cannot create new element');\n        }\n\n        containerHelper.createElements(container, contentHelper.getContent($editable), function(newElts){\n\n            var creator = creatorRenderer.get();\n            creator.load(function(){\n\n                for(var serial in newElts){\n\n                    var elt = newElts[serial],\n                        $widget,\n                        widget,\n                        $colParent = $placeholder.parent();\n\n                    elt.setRenderer(this);\n\n                    if(Element.isA(elt, '_container')){\n                        //the text widget is \"inner-wrapped\" so need to build a temporary container:\n                        $placeholder.replaceWith('<div class=\"text-block\"></div>');\n                        var $textBlock = $colParent.find('.text-block');\n                        $textBlock.html(elt.render());\n\n                        //build the widget\n                        widget = TextWidget.build(elt, $textBlock, creator.getOption('textOptionForm'), {\n                            ready : function(){\n                                //remove the temorary container\n                                this.$container.unwrap();\n                            }\n                        });\n                        $widget = widget.$container;\n\n                    }else{\n                        elt.render($placeholder);\n                        widget = elt.postRender();\n                        if(Element.isA(elt, 'blockInteraction')){\n                            $widget = widget.$container;\n                        }else{\n                            //leave the container in place\n                            $widget = widget.$original;\n                        }\n                    }\n\n                    //inform height modification\n                    $widget.trigger('contentChange.gridEdit');\n                    $widget.trigger('resize.gridEdit');\n\n                }\n            }, this.getUsedClasses());\n        });\n    }\n\n    return {\n        create : create\n    };\n});\n","define('taoQtiItem/controller/creator/main',[\n    'jquery',\n    'lodash',\n    'module',\n    'async',\n    'layout/loading-bar',\n    'layout/section',\n    'taoQtiItem/qtiCreator/model/helper/event',\n    'taoQtiItem/qtiCreator/helper/panel',\n    'taoQtiItem/qtiCreator/helper/itemLoader',\n    'taoQtiItem/qtiCreator/helper/creatorRenderer',\n    'taoQtiItem/qtiCreator/helper/commonRenderer', //for the preview\n    'taoQtiItem/qtiCreator/helper/qtiElements',\n    // css editor related\n    'taoQtiItem/qtiCreator/editor/editor',\n    'taoQtiItem/qtiCreator/editor/interactionsToolbar',\n    'taoQtiItem/qtiCreator/editor/customInteractionRegistry',\n    'taoQtiItem/qtiCreator/editor/infoControlRegistry',\n    'taoQtiItem/qtiCreator/editor/blockAdder/blockAdder'\n], function(\n    $,\n    _,\n    module,\n    async,\n    loadingBar,\n    section,\n    event,\n    panel,\n    loader,\n    creatorRenderer,\n    commonRenderer,\n    qtiElements,\n    editor,\n    interactionsToolbar,\n    ciRegistry,\n    icRegistry,\n    blockAdder\n    ){\n\n    loadingBar.start();\n    \n    function _getAuthoringElements(interactionModels){\n        \n        var toolbarInteractions = qtiElements.getAvailableAuthoringElements();\n        \n        _.each(interactionModels, function(interactionModel){\n            var data = ciRegistry.getAuthoringData(interactionModel.getTypeIdentifier());\n            if(data.tags && data.tags[0] === interactionsToolbar.getCustomInteractionTag()){\n                toolbarInteractions[data.qtiClass] = data;\n            }else{\n                throw 'invalid authoring data for custom interaction';\n            }\n        });\n        \n        return toolbarInteractions;\n    }\n    \n    \n    function _initializeInteractionsToolbar($toolbar, interactionModels){\n\n        //create toolbar:\n        interactionsToolbar.create($toolbar, _getAuthoringElements(interactionModels));\n\n        //init accordions:\n        panel.initSidebarAccordion($toolbar);\n        panel.closeSections($toolbar.find('section'));\n        panel.openSections($toolbar.find('#sidebar-left-section-common-interactions'), false);\n\n        //init special subgroup\n        panel.toggleInlineInteractionGroup();\n\n    }\n    \n    function _initializeElementAdder(item, $itemPanel, interactionModels){\n        \n        var authoringElements = _getAuthoringElements(interactionModels);\n        \n        blockAdder.create(item, $itemPanel, authoringElements);\n    }\n\n    function _initializeHooks(uiHooks, configProperties){\n\n        require(_.values(uiHooks), function(){\n\n            _.each(arguments, function(hook){\n                hook.init(configProperties);\n            });\n        });\n    };\n\n    return {\n        /**\n         * \n         * @param {object} config (baseUrl, uri, lang)\n         */\n        start : function(config){\n\n            //first all, start loading bar\n            loadingBar.start();\n            //init config\n            config = config || module.config();\n            //reinitialize the renderer:\n            creatorRenderer.get(true, config);\n\n\n            var configProperties = config.properties;\n\n            //pass reference to useful dom element\n            var $doc = $(document),\n                $editorScope = $('#item-editor-scope'),\n                $itemContainer = $('#item-editor-scroll-inner'),\n                $propertySidebar = $('#item-editor-item-widget-bar');\n\n            configProperties.dom = {\n                getEditorScope : function(){\n                    return $editorScope;\n                },\n                getMenuLeft : function(){\n                    return $editorScope.find('.item-editor-menu.lft');\n                },\n                getMenuRight : function(){\n                    return $editorScope.find('.item-editor-menu.rgt');\n                },\n                getInteractionToolbar : function(){\n                    return $editorScope.find('#item-editor-interaction-bar');\n                },\n                getItemPanel : function(){\n                    return $itemContainer;\n                },\n                getItemPropertyPanel : function(){\n                    return $editorScope.find('#sidebar-right-item-properties');\n                },\n                getModalContainer : function(){\n                    return $editorScope.find('#modal-container');\n                }\n            };\n\n            //back button\n            $('#authoringBack').on('click', function(e){\n                e.preventDefault();\n\n                //Capitalized History means polyfilled by History.js\n                if(window.History){\n                    window.History.back();\n                }\n            });\n\n            //initialize hooks\n            _initializeHooks(config.uiHooks, configProperties);\n\n            async.parallel([\n                //register custom interacitons\n                function(callback){\n                    ciRegistry.register(config.interactions);\n                    ciRegistry.loadAll(function(hooks){\n                        callback(null, hooks);\n                    });\n                },\n                //register info controls\n                function(callback){\n                    icRegistry.register(config.infoControls);\n                    icRegistry.loadAll(function(hooks){\n                        callback(null, hooks);\n                    });\n                },\n                //load item\n                function(callback){\n                    loader.loadItem({uri : configProperties.uri}, function(item){\n\n                        //configure commonRenderer for the preview\n                        commonRenderer.setOption('baseUrl', configProperties.baseUrl);\n                        commonRenderer.setContext(configProperties.dom.getItemPanel());\n\n                        //set reference to item object\n                        $editorScope.data('item', item);\n\n                        //fires event itemloaded\n                        $doc.trigger('itemloaded.qticreator', [item]);\n\n                        //set useful data :\n                        item.data('uri', configProperties.uri);\n\n                        callback(null, item);\n\n                    });\n                }\n            ], function(err, res){\n\n                //get results from parallelized ajax calls:\n                var interactionHooks = res[0],\n                    infoControlHooks = res[1],\n                    item = res[2];\n\n                //init interaction sidebar\n                _initializeInteractionsToolbar(configProperties.dom.getInteractionToolbar(), interactionHooks);\n                if(config.properties['multi-column']){\n                    _initializeElementAdder(item, configProperties.dom.getItemPanel(), interactionHooks);\n                }\n\n                //load creator renderer\n                creatorRenderer\n                    .get()\n                    .setOptions(configProperties)\n                    .load(function(){\n\n                        //set renderer\n                        item.setRenderer(this);\n\n                        //render item (body only) into the \"drop-area\"\n                        configProperties.dom.getItemPanel().append(item.render());\n\n                        //\"post-render it\" to initialize the widget\n                        var widget = item.postRender(_.clone(configProperties));\n\n                        editor.initGui(widget, configProperties);\n                        panel.initSidebarAccordion($propertySidebar);\n                        panel.initFormVisibilityListener();\n\n                        //hide loading bar when completed\n                        loadingBar.stop();\n\n                        //destroy by leaving the section\n                        section.on('hide', function(hiddenSection){\n                            if(hiddenSection.id === 'authoring'){\n\n                                //remove global events\n                                $(window).off('.qti-widget');\n                                $doc.off('.qti-widget').off('.qti-creator');\n                            }\n                        });\n\n                        //set reference to item widget object\n                        $editorScope.data('widget', item);\n\n                        //fires event itemloaded\n                        $doc.trigger('widgetloaded.qticreator', [widget]);\n\n                        //init event listeners:\n                        event.initElementToWidgetListeners();\n\n                    }, item.getUsedClasses());\n\n            });\n\n        }\n    };\n});\n\n","define('taoQtiItem/qtiCreator/editor/MathEditor',['lodash', 'jquery', 'mathJax'], function(_, $, MathJax){\n    \"use strict\";\n    var MathEditor = function MathEditor(config){\n\n        config = config || {};\n\n        this.mathML = config.mathML || '';\n        this.tex = config.tex || '';\n        this.display = config.display || 'inline';\n\n        //computed, system variables:\n        this.processing = false;\n        this.$target = config.target || $();\n\n        if(config.buffer && config.buffer instanceof $ && config.buffer.length){\n            this.$buffer = config.buffer;\n        }else{\n            throw 'missing required element in config \"buffer\"';\n        }\n    };\n\n    MathEditor.prototype.setMathML = function(mathMLstr){\n\n        this.mathML = _stripMathTags(mathMLstr);\n\n        return this;//for chaining purpose\n    };\n\n    MathEditor.prototype.setTex = function(texStr){\n\n        this.tex = texStr;\n\n        //need to run renderFromTex\n\n        return this;//for chaining purpose\n    };\n\n    var _processArguments = function(mathEditor, args){\n\n\n        var ret = {\n            target : null,\n            callback : null\n        };\n\n        _.each(args, function(arg){\n            if(_.isFunction(arg)){\n                ret.callback = arg;\n            }else if(arg instanceof $){\n                ret.target = arg;\n            }\n        });\n\n        if(!ret.target){\n            if(mathEditor.$target){\n                ret.target = mathEditor.$target;\n            }else{\n                throw 'no target defined for rendering';\n            }\n        }\n\n        return ret;\n    };\n\n    MathEditor.prototype.renderFromMathML = function(){\n\n        var args = _processArguments(this, arguments);\n\n        if(typeof(MathJax) !== 'undefined'){\n\n            if(this.processing){\n                return;\n            }\n            var jaxQueue = MathJax.Hub.queue;\n            var mathStr = _wrapMathTags(this.mathML, (this.display === 'block'));\n            this.$buffer.html(mathStr);\n\n            var _this = this;\n            jaxQueue.Push(\n                [\"Typeset\", MathJax.Hub, this.$buffer[0]],\n                function(){\n                    _this.processing = false;\n\n                    args.target.html(_this.$buffer.html());\n                    _this.$buffer.empty();\n                }\n            );\n\n            if(args.callback){\n                jaxQueue.Push(args.callback);\n            }\n        }\n\n    };\n\n    MathEditor.prototype.renderFromTex = function(){\n\n        var args = _processArguments(this, arguments);\n\n        if(typeof(MathJax) !== 'undefined'){\n\n            var _this = this;\n            var jaxQueue = MathJax.Hub.queue;\n            if(this.display === 'block'){\n                _this.$buffer.html('\\\\[\\\\displaystyle{' + _this.tex + '}\\\\]');\n            }else{\n                _this.$buffer.html('\\\\(\\\\displaystyle{' + _this.tex + '}\\\\)');\n            }\n\n            //render preview:\n            jaxQueue.Push(\n                //programmatically typeset the buffer\n                    [\"Typeset\", MathJax.Hub, _this.$buffer[0]],\n                    function(){\n\n                        //replace the target element\n                        args.target.html(_this.$buffer.html());\n\n                        //store mathjax \"tex\", for tex for later mathML conversion\n                        var texJax = _getJaxByElement(_this.$buffer);\n\n                        //empty buffer;\n                        _this.$buffer.empty();\n\n                        //sync MathML\n                        _this.texToMathML(texJax, function(mathML){\n                            _this.setMathML(_stripMathTags(mathML));\n                        });\n                    }\n                );\n\n                if(args.callback){\n                    jaxQueue.Push(args.callback);\n                }\n            }\n\n        };\n\n        var _stripMathTags = function(mathMLstr){\n\n            mathMLstr = mathMLstr.replace(/<(\\/)?math[^>]*>/g, '');\n            mathMLstr = mathMLstr.replace(/^\\s*[\\r\\n]/gm, '');//remove first blank line\n            mathMLstr = mathMLstr.replace(/\\s*[\\r\\n]$/gm, '');//last blank line\n\n            return mathMLstr;\n        };\n\n        var _getJaxByElement = function($element){\n\n            if($element instanceof $ && $element.length){\n                var $script = $element.find('script');\n                if($script.length && $script[0].MathJax && $script[0].MathJax.elementJax){\n                    return $script[0].MathJax.elementJax;\n                }\n            }\n        };\n\n        var _wrapMathTags = function(mathMLstr, displayBlock){\n\n            if(!mathMLstr.match(/<math[^>]*>/)){\n                var display = displayBlock ? ' display=\"block\"' : '';\n                mathMLstr = '<math' + display + '>' + mathMLstr;//always show preview in block mode\n            }\n            if(!mathMLstr.match(/<\\/math[^>]*>/)){\n                mathMLstr += '</math>';\n            }\n\n            return mathMLstr;\n        };\n\n        MathEditor.prototype.texToMathML = function(texJax, callback){\n\n            var _this = this;\n            var mathML = '';\n\n            try{\n                mathML = texJax.root.toMathML('');\n            }catch(err){\n                if(!err.restart){\n                    throw err;\n                }\n                return MathJax.Callback.After(function(){\n                    _this.texToMathML(texJax, callback);\n                }, err.restart);\n            }\n\n            MathJax.Callback(callback)(mathML);\n        };\n\n        return MathEditor;\n    });\n","define('taoQtiItem/qtiCreator/editor/ckEditor/ckProtector',[\n    'jquery',\n    'i18n'\n], function($, __){\n    'use strict';\n\n    /**\n     * Protect / unprotect an element to avoid edition by CK EDITOR\n     *\n     * @returns {{protect: protect, init: init, unprotect: unprotect}}\n     */\n    var ckeProtector = (function() {\n\n        var selector = '.widget-box';\n\n        /**\n         * Observe changes to content editable elements\n         *\n         * @param context\n         */\n        var observeContentChanges = function($context) {\n\n            var contextDomNode = $context[0];\n\n            var MutationObserver = (window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver);\n\n            // IE 10\n            if (!MutationObserver) {\n                contextDomNode.addEventListener('DOMCharacterDataModified', function() {\n                    $context.trigger('contentchange.protector');\n                }, false);\n            }\n            // all recent browser apart from IE 10\n            else {\n                var observer = new MutationObserver(function(mutations) {\n                    mutations.forEach(function() {\n                        $context.trigger('contentchange.protector');\n                    })\n                });\n                observer.observe(contextDomNode, {\n                    subtree: true,\n                    characterData: true\n                });\n            }\n\n        };\n\n        /**\n         * Retrieve selector from the outside\n         *\n         * @returns {string}\n         */\n        var getSelector = function() {\n            return selector;\n        };\n\n        /**\n         * Protect elements from being edited by CKeditor.\n         * Global selector can be overridden by any function\n         *\n         * @param context optional\n         * @param selectorParam optional\n         */\n        var protect = function(context, selectorParam) {\n            if(selectorParam) {\n                selector = selectorParam;\n            }\n            context.find(selector).each(function() {\n                var widget = $(this),\n                    iWidth = widget.outerWidth(),\n                    iHeight = widget.outerHeight(),\n                    cover = $('<button class=\"cke-cover-up\">'),\n                    wrapper,\n                    // cke copies the widget to a kind of shadow dom, hence this trickery\n                    getProtectedWidgetBySerial = function(serial) {\n                        $('[data-serial=\"' + serial + '\"]').each(function() {\n                            var widget = $(this);\n                            if(widget.parent().hasClass('cke-qti-wrapper')) {\n                                return false;\n                            }\n                        });\n                        return widget.length ? widget : $();\n                    },\n                    positionCover = function(cover) {\n                        var wrapper = getProtectedWidgetBySerial(cover.prop('serial')).parent('.cke-qti-wrapper'),\n                            iOffset = wrapper.offset();\n                        cover.css({\n                            left: iOffset.left,\n                            top: iOffset.top\n                        })\n                    };\n\n                if(widget.parent('.cke-qti-wrapper').length) {\n                    return false;\n                }\n\n                // avoid empty elements since they would be killed by CKE\n                // &#8203; means zero-width-space\n                widget.find('*').each(function() {\n                    if(!this.innerHTML) {\n                        this.innerHTML = '&#8203;'\n                    }\n                });\n\n                widget.wrap($('<span class=\"cke-qti-wrapper\" />'));\n\n                wrapper = widget.parent();\n\n                cover.css({\n                    width: iWidth,\n                    height: iHeight\n                });\n                $('body').append(cover);\n\n                wrapper.css({\n                    width: iWidth,\n                    height: iHeight\n                });\n                wrapper.attr('contenteditable', false);\n                wrapper.prop('cover', cover);\n\n                cover.prop('serial', widget.data('serial'));\n\n                positionCover(cover);\n\n                cover.attr('title', __('Click to display interaction widget'));\n\n                cover.on('click', function() {\n                    var widget = getProtectedWidgetBySerial($(this).prop('serial'));\n                    //unprotect(widget);\n                    $(document).trigger('removeprotection.ckprotector', { context: context, widget: widget });\n                });\n\n                observeContentChanges(context);\n\n                context.on('contentchange.protector', function() {\n                    positionCover(cover);\n                });\n            });\n        };\n\n        /**\n         * Protect protection\n         * Global selector can be overridden by any function\n         *\n         * @param protectedArea optional\n         */\n        var unprotect = function(widget) {\n            widget.each(function() {\n                var widget = $(this),\n                    wrapper = widget.parent('.cke-qti-wrapper');\n                if(wrapper.length) {\n                    wrapper.prop('cover').remove();\n                    widget.unwrap();\n                }\n            });\n        };\n\n        return {\n            protect: protect,\n            unprotect: unprotect,\n            getSelector: getSelector\n        };\n    }());\n    return ckeProtector;\n});\n\n\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/editor/colorPicker/tpl/popup', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div class=\\\"color-picker-container sidebar-popup\\\">\\n    <div class=\\\"sidebar-popup-title\\\">\\n        <h3 style=\\\"font-size:13px;margin:0\\\"></h3>\\n        <a class=\\\"closer\\\" href=\\\"#\\\"></a>\\n    </div>\\n    <div class=\\\"sidebar-popup-content\\\">\\n        <div class=\\\"color-picker\\\"></div>\\n        <input class=\\\"color-picker-input\\\" type=\\\"text\\\" value=\\\"#000000\\\">\\n    </div>\\n</div>\\n\";\n  });\n});\n\n","define('taoQtiItem/qtiCreator/editor/colorPicker/colorPicker',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/helper/popup',\n    'tpl!taoQtiItem/qtiCreator/editor/colorPicker/tpl/popup',\n    'lib/farbtastic/farbtastic'\n], function($, _, __, popup, popupTpl){\n\n    'use strict';\n\n    var _defaults = {\n        title : __('Color Picker'),\n        offsetTop : -40\n    };\n\n    /**\n     * Create and attach a color picker to a JQuery container\n     * \n     * @param {Object} $colorTrigger - a JQuery container\n     * @param {Object} config\n     * @param {Integer} [config.offsetTop = -40] - the offset top relative to the trigger\n     * @param {String|Function} [config.title = 'Color Picker'] - defines the title of the color picker\n     * @returns {undefined}\n     */\n    function create($colorTrigger, config){\n\n        config = _.defaults(config || {}, _defaults);\n\n        var color, $input = $colorTrigger.siblings('input');\n\n        //set color recorded in the hidden input to the color trigger\n        if(config.color){\n            color = config.color;\n            $input.val(color);\n        }else{\n            color = $input.val();\n        }\n\n        $colorTrigger.css('background-color', color);\n\n        var $popup = $(popupTpl());\n        $colorTrigger.data('color-picker', $popup);\n        $('#item-editor-wrapper').append($popup);\n        \n        // basic popup functionality\n        popup.init($colorTrigger, {popup : $popup});\n        \n\n        // after popup opens\n        $colorTrigger.on('open.popup', function(e, params){\n\n            var $trigger = $(this),\n                $container = $trigger.parents('.sidebar-popup'),\n                title,\n                // this is the input of the color picker\n                color = $input.val();\n\n            var $colorPicker = params.popup.find('.color-picker'),\n                $colorPickerInput = params.popup.find('.color-picker-input');\n\n            params.popup.css({right : $(window).width() - $container.offset().left + 2, top : $trigger.offset().top + config.offsetTop - $('#item-editor-wrapper').offset().top});\n            if(_.isFunction(config.title)){\n                title = config.title.call(this);\n            }else if(_.isString(config.title)){\n                title = config.title;\n            }\n            params.popup.find('h3').text(title);\n\n            // Init the color picker\n            $colorPicker.farbtastic($colorPickerInput);\n\n            // Set the color to the currently set on the form init\n            $colorPickerInput.val(color).trigger('keyup');\n            config.color = color;\n\n            // Populate the input with the color on quitting the modal\n            params.popup.find('.closer').off('click').on('click', function(){\n                params.popup.hide();\n                $colorPicker.off('.farbtastic');\n            });\n\n            //listen to color change\n            $colorPicker.off('.farbtastic').on('colorchange.farbtastic', function(e, color){\n                $colorTrigger.css('background-color', color);\n                $input.val(color).trigger('change');\n            });\n\n        });\n\n        // after popup closes\n        $colorTrigger.on('close.popup', function(e, params){\n            params.popup.find('.color-picker').off('.farbtastic');\n        });\n\n    }\n\n    /**\n     * Destroy the color picker attached to a JQuery conttainer\n     * \n     * @param {Object} $colorTrigger - a JQuery container\n     * @returns {undefined}\n     */\n    function destroy($colorTrigger){\n        $colorTrigger.off('.color-picker');\n        $colorTrigger.removeAttr('data-color-picker');\n        var $popup = $colorTrigger.data('color-picker');\n        if($popup instanceof $){\n            $popup.remove();\n        }\n    }\n\n    return {\n        create : create,\n        destroy : destroy\n    };\n});\n","define('taoQtiItem/qtiCreator/model/Container',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/Container'\n], function(_, editable, Container) {\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        afterCreate: function() {\n            this.body('Lorem ipsum dolor sit amet, consectetur adipisicing ...');\n        }\n    });\n    return Container.extend(methods);\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/config',[],function(){\n    return {\n        name : 'xmlRenderer',\n        locations : {\n            '_container' : 'taoQtiItem/qtiXmlRenderer/renderers/Container',\n            'assessmentItem' : 'taoQtiItem/qtiXmlRenderer/renderers/Item',\n            'stylesheet' : 'taoQtiItem/qtiXmlRenderer/renderers/Stylesheet',\n            'responseDeclaration' : 'taoQtiItem/qtiXmlRenderer/renderers/ResponseDeclaration',\n            'outcomeDeclaration' : 'taoQtiItem/qtiXmlRenderer/renderers/OutcomeDeclaration',\n            'responseProcessing' : 'taoQtiItem/qtiXmlRenderer/renderers/ResponseProcessing',\n            '_simpleFeedbackRule' : 'taoQtiItem/qtiXmlRenderer/renderers/responses/SimpleFeedbackRule',\n            'math' : 'taoQtiItem/qtiXmlRenderer/renderers/Math',\n            'img' : 'taoQtiItem/qtiXmlRenderer/renderers/Img',\n            'object' : 'taoQtiItem/qtiXmlRenderer/renderers/Object',\n            'modalFeedback' : 'taoQtiItem/qtiXmlRenderer/renderers/feedbacks/ModalFeedback',\n            'rubricBlock' : 'taoQtiItem/qtiXmlRenderer/renderers/RubricBlock',\n            'associateInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/AssociateInteraction',\n            'choiceInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/ChoiceInteraction',\n            'extendedTextInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/ExtendedTextInteraction',\n            'gapMatchInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/GapMatchInteraction',\n            'graphicAssociateInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicAssociateInteraction',\n            'graphicGapMatchInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicGapMatchInteraction',\n            'graphicOrderInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicOrderInteraction',\n            'hotspotInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/HotspotInteraction',\n            'hottextInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/HottextInteraction',\n            'inlineChoiceInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/InlineChoiceInteraction',\n            'matchInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/MatchInteraction',\n            'mediaInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/MediaInteraction',\n            'orderInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/OrderInteraction',\n            'selectPointInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/SelectPointInteraction',\n            'sliderInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/SliderInteraction',\n            'textEntryInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/TextEntryInteraction',\n            'uploadInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/UploadInteraction',\n            'prompt' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/Prompt',\n            'associableHotspot' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/AssociableHotspot',\n            'gap' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/Gap',\n            'gapImg' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/GapImg',\n            'gapText' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/GapText',\n            'hotspotChoice' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/HotspotChoice',\n            'hottext' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/Hottext',\n            'inlineChoice' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/InlineChoice',\n            'simpleAssociableChoice' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleAssociableChoice',\n            'simpleChoice' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleChoice',\n            'customInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/PortableCustomInteraction',\n            'endAttemptInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/EndAttemptInteraction',\n            'infoControl' : 'taoQtiItem/qtiXmlRenderer/renderers/PortableInfoControl'\n        },\n        options : {\n            userRelativeUrl : true\n        }\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/Renderer',['taoQtiItem/qtiRunner/core/Renderer', 'taoQtiItem/qtiXmlRenderer/renderers/config'], function(Renderer, config){\n    return Renderer.build(config.locations, config.name, config.options);\n});\n","define('taoQtiItem/qtiCreator/helper/xmlRenderer',['taoQtiItem/qtiXmlRenderer/renderers/Renderer'], function(XmlRenderer){\n    \"use strict\";\n    var _xmlRenderer = new XmlRenderer({shuffleChoices : false}).load();\n\n    var _render = function(item){\n        var xml = '';\n        try{\n            xml = item.render(_xmlRenderer);\n        }catch(e){\n            console.log(e);\n        }\n        return xml;\n    };\n\n    return {\n        render : _render,\n        get : function(){\n            return _xmlRenderer;\n        }\n    };\n});\n","define('taoQtiItem/qtiCreator/helper/simpleParser',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiItem/helper/util',\n    'taoQtiItem/qtiItem/core/Loader'\n], function(_, $, util, Loader){\n    \"use strict\";\n    var _parsableElements = ['img', 'object'];\n    var _qtiClassNames = {\n        rubricblock : 'rubricBlock'\n    };\n\n    var _defaultOptions = {\n        ns : {\n            math : ''\n        },\n        loaded : null,\n        model : null\n    };\n\n    function _getElementSelector(qtiClass, ns){\n        return ns ? ns + \"\\\\:\" + qtiClass + ','+qtiClass : qtiClass;\n    }\n\n    function getQtiClassFromXmlDom($node){\n\n        var qtiClass = $node.prop('tagName').toLowerCase();\n\n        //remove ns : \n        qtiClass = qtiClass.replace(/.*:/, '');\n\n        return _qtiClassNames[qtiClass] ? _qtiClassNames[qtiClass] : qtiClass;\n    }\n\n    function buildElement($elt){\n\n        var qtiClass = getQtiClassFromXmlDom($elt);\n\n        var elt = {\n            qtiClass : qtiClass,\n            serial : util.buildSerial(qtiClass + '_'),\n            attributes : {}\n        };\n\n        $.each($elt[0].attributes, function(){\n            if(this.specified){\n                elt.attributes[this.name] = this.value;\n            }\n        });\n\n        return elt;\n    }\n\n    function buildMath($elt, options){\n\n        var elt = buildElement($elt);\n\n        //set annotations:\n        elt.annotations = {};\n        $elt.find(_getElementSelector('annotation', options.ns.math)).each(function(){\n            var $annotation = $(this);\n            var encoding = $annotation.attr('encoding');\n            if(encoding){\n                elt.annotations[encoding] = $annotation.html();\n            }\n            $annotation.remove();\n        });\n        \n        //set math xml\n        elt.mathML = $elt.html();\n        \n        //set ns: \n        elt.ns = {\n            name : 'm',\n            uri : 'http://www.w3.org/1998/Math/MathML'//@todo : remove hardcoding there\n        };\n\n        return elt;\n    }\n\n    function parseContainer($container, opts){\n\n        var options = _.merge(_.clone(_defaultOptions), opts || {});\n\n        var ret = {\n            serial : util.buildSerial('_container_'),\n            body : '',\n            elements : {}\n        };\n\n        _.each(_parsableElements, function(qtiClass){\n\n            $container.find(qtiClass).each(function(){\n\n                var $qtiElement = $(this);\n                var element = buildElement($qtiElement, opts);\n\n                ret.elements[element.serial] = element;\n                $qtiElement.replaceWith(_placeholder(element));\n\n            });\n\n        });\n        \n        $container.find(_getElementSelector('math', options.ns.math)).each(function(){\n\n            var $qtiElement = $(this);\n            var element = buildMath($qtiElement, opts);\n\n            ret.elements[element.serial] = element;\n            $qtiElement.replaceWith(_placeholder(element));\n\n        });\n\n        ret.body = $container.html();\n\n        return ret;\n    }\n\n    function _placeholder(element){\n        return '{{' + element.serial + '}}';\n    }\n\n    var parser = {\n        parse : function(xmlStr, options){\n\n            var $container = $(xmlStr);\n\n            var element = buildElement($container, options);\n\n            var data = parseContainer($container, options);\n\n            if(data.body !== undefined){\n                element.body = data;\n            }\n\n            if(_.isFunction(options.loaded) && options.model){\n                var loader = new Loader().setClassesLocation(options.model);\n                loader.loadElement(element, options.loaded);\n            }\n\n            return element;\n        }\n    };\n\n    return parser;\n});\n\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/htmlEditorTrigger', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"mini-tlb\\\" data-edit=\\\"\";\n  if (helper = helpers.state) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.state); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-role=\\\"cke-launcher-tlb\\\">\\n    <div class=\\\"rgt tlb-button\\\" data-role=\\\"cke-launcher\\\" title=\\\"Formatting options\\\">\\n        <span class=\\\"icon-font\\\"></span>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/editor/containerEditor',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiItem/core/Loader',\n    'taoQtiItem/qtiCreator/model/Container',\n    'taoQtiItem/qtiCreator/model/Item',\n    'taoQtiItem/qtiCreator/model/helper/event',\n    'taoQtiItem/qtiCreator/model/qtiClasses',\n    'taoQtiItem/qtiCreator/helper/xmlRenderer',\n    'taoQtiItem/qtiCreator/helper/simpleParser',\n    'taoQtiItem/qtiCreator/helper/creatorRenderer',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/htmlEditorTrigger'\n], function(_, $, Loader, Container, Item, event, qtiClasses, xmlRenderer, simpleParser, creatorRenderer, content, htmlEditor, toolbarTpl){\n    \"use strict\";\n    var _ns = 'containereditor';\n\n    var _defaults = {\n        change : _.noop,\n        markup : '',\n        markupSelector : ''\n    };\n\n    function parser($container){\n\n        //detect math ns :\n        var mathNs = 'm';//for 'http://www.w3.org/1998/Math/MathML'\n\n        //parse qti xml content to build a data object\n        var data = simpleParser.parse($container.clone(), {\n            ns : {\n                math : mathNs\n            }\n        });\n\n        if(data.body){\n            return data.body;\n        }else{\n            throw 'invalid content for qti container';\n        }\n    }\n    \n    /**\n     * Transform the given dom element into a rich-text editor\n     * \n     * @param {JQuery} $container - the container of the DOM element that is going to editable\n     * @param {Object} [options]\n     * @param {String} [options.markup] - the markup to be use as the initial editor content\n     * @param {String} [options.markupSelector] - the element in $xontainer that holds the html to be used as the initial editor content\n     * @param {Object} [options.related] - define the qti element object this editor is attached too. Very important to edit a picture or math element inside it because prevents leaving the editing state of the related element.\n     * @param {Function} [options.change] - the callback called when the editor content has been modified\n     * @param {Function} [options.hideTriggerOnBlur] - define if the trigger <A> should be hidden when the editor is blurred or not\n     * @param {Function} [options.placeholder] - the placeholder text of the container editor when\n     * @param {Function} [options.$toolbarLocation] - the location of the toolbar\n     * @param {Function} [options.toolbar] - the ck toolbar\n     * @returns {undefined}\n     */\n    function create($container, options){\n\n        options = _.defaults(options || {}, _defaults);\n        \n        //assign proper markup\n        if(options.markup){\n            var html = options.markup;\n            if(options.markupSelector){\n                var htmls = extractHtmlFromMarkup(html, options.markupSelector);\n                html = htmls[0] || '';\n            }\n            $container.html(html);\n        }\n        \n        var data = parser($container);\n        var loader = new Loader().setClassesLocation(qtiClasses);\n        loader.loadRequiredClasses(data, function(){\n\n            //create a new container object\n            var container = new Container();\n            \n            $container.data('container', container);\n\n            //need to attach a container to the item to enable innserElement.remove()\n            //@todo fix this\n            var item = new Item().setElement(container);\n            container.setRelatedItem(item);\n\n            //associate it to the interaction?\n            if(options.related){\n                var containerEditors = options.related.data('container-editors') || [];\n                containerEditors.push(container);\n                options.related.data('container-editors', containerEditors);\n            }\n\n            this.loadContainer(container, data);\n\n            //apply common renderer :\n            creatorRenderer.load(['img', 'object', 'math', '_container'], function(){\n                \n                container.setRenderer(this);\n                $container.html(container.render());\n                container.postRender();\n\n                buildContainer($container);\n                createToolbar($container, options.$toolbarLocation);\n                buildEditor($container, container, {\n                    hideTriggerOnBlur: !!options.hideTriggerOnBlur,\n                    placeholder : options.placeholder || undefined,\n                    toolbar : options.toolbar || undefined\n                });\n\n                $container.off('.' + _ns).on(event.getList(_ns + event.getNs() + event.getNsModel()).join(' '), _.throttle(function(e, data){\n                    var html = container.render(xmlRenderer.get());\n                    $container.trigger('containerchange.' + _ns, [html]);\n                    if(_.isFunction(options.change)){\n                        options.change(html);\n                    }\n                }, 600));\n                \n                $container.trigger('editorready.containereditor');\n            });\n\n        });\n\n    }\n\n    function buildContainer($container){\n\n        $container.wrapInner($('<div>', {'class' : 'container-editor', 'data-html-editable' : true}));\n    }\n\n    function createToolbar($container, $appendTo){\n\n        var $tlb = $(toolbarTpl({\n            serial : 'serial123456',\n            state : 'active'\n        }));\n        \n        if(!$appendTo || !$appendTo.length){\n            $appendTo = $container;\n        }\n        \n        $appendTo.append($tlb);\n        $tlb.show();\n        \n        $container.data('editor-toolbar', $tlb);\n        \n        return this;\n    }\n\n    function cleanup($container){\n\n        //remove the text toolbar\n        var $toolbar = $container.data('editor-toolbar');\n        if($toolbar){\n            $toolbar.remove();\n        }\n\n        var container = $container.data('container');\n        if(container){\n            $(document).off('.' + container.serial);\n            $container.html(container.render());\n        }\n\n        $container.removeData('container');\n\n    }\n    \n    /**\n     * create a fase widget that is required in html editor\n     * \n     * @param {JQuery} $editableContainer\n     * @param {Object} container\n     * @returns {Object} The fake widget object\n     */\n    function createFakeWidget($editableContainer, container){\n        \n        var widget = {\n            $container : $editableContainer,\n            element : container,\n            changeState : _.noop\n        };\n        //associate the widget to the container\n        container.data('widget', widget);\n        \n        return widget;\n    }\n\n    function buildEditor($editableContainer, container, options){\n\n        $editableContainer.attr('data-html-editable-container', true);\n\n        if(!htmlEditor.hasEditor($editableContainer)){\n\n            htmlEditor.buildEditor($editableContainer, _.defaults(options || {}, {\n                shieldInnerContent : false,\n                passthroughInnerContent : false,\n                change : content.getChangeCallback(container),\n                data : {\n                    widget : createFakeWidget($editableContainer, container),\n                    container : container\n                }\n            }));\n        }\n    }\n\n    function destroyEditor($editableContainer){\n        htmlEditor.destroyEditor($editableContainer);\n        $editableContainer.removeAttr('data-html-editable-container');\n    }\n\n    function destroy($container){\n        destroyEditor($container);\n        cleanup($container);\n    }\n    \n    function extractHtmlFromMarkup(markupStr, selector){\n        var $found = $('<div>').html(markupStr).find(selector);\n        var ret = [];\n        $found.each(function(){\n            ret.push($(this).html());\n        });\n        return ret;\n    }\n    \n    return {\n        create : create,\n        destroy : destroy\n    };\n});\n","define('taoQtiItem/qtiCreator/editor/gridEditor/arrow',['jquery', 'lodash'], function($, _){\n    \"use strict\";\n    var _eventName = 'arrowenter.gridEdit.gridDragDrop';\n\n    //build arrow for inter-column insertion:\n    var _buildArrows = function _buildArrows($col, options){\n\n        var defaults = {\n            insertZoneWidth : 20,\n            marginWidth : 0\n        };\n\n        options = _.extend(defaults, options);\n\n        //create inter-column insertion helper\n        var $insertRight = $('<div>', {'class' : 'grid-edit-insert-box'})\n            .css({\n                top : 0,\n                width: options.insertZoneWidth,\n                right : -(options.marginWidth + (options.insertZoneWidth - options.marginWidth) / 2),\n                height : $col.parent('.grid-row').height() - parseFloat($col.css('margin-bottom'))\n            })\n            .append($('<div>', {'class' : 'grid-edit-insert-square'}))\n            .append($('<div>', {'class' : 'grid-edit-insert-triangle'}))\n            .append($('<div>', {'class' : 'grid-edit-insert-line'}))\n            .on('mouseenter', '.grid-edit-insert-triangle, .grid-edit-insert-square', function(){\n                $col.trigger(_eventName, ['right']);\n                _removeArrows($col);\n            });\n\n        var $insertLeft = $insertRight\n            .clone()\n            .css({'left' : -(options.marginWidth + 5), 'right' : 'auto'})\n            .on('mouseenter', '.grid-edit-insert-triangle, .grid-edit-insert-square', function(){\n                $col.trigger(_eventName, ['left']);\n                _removeArrows($col);\n            });\n\n        $col.append($insertRight).append($insertLeft);\n\n        _arrowFall($insertRight, function(){\n            $col.trigger(_eventName, ['right']);\n            _removeArrows($col);\n        });\n\n        _arrowFall($insertLeft, function(){\n            $col.trigger(_eventName, ['left']);\n            _removeArrows($col);\n        });\n\n    };\n\n    //remove arrows:\n    var _removeArrows = function _removeArrows($col){\n        $col.find('.grid-edit-insert-box').remove();\n    };\n\n    //animate arrow fall:\n    var _arrowFall = function _arrowFall($insert, callback){\n\n        var interval = null;\n        $insert.on('mouseenter', function(e){\n\n            var relY = e.pageY - $(this).offset().top\n                - parseInt($(this).find('.grid-edit-insert-triangle').outerHeight())\n                - parseInt($(this).find('.grid-edit-insert-square').outerHeight());\n\n            var $arrow = $(this).find('.grid-edit-insert-triangle, .grid-edit-insert-square');\n\n            var t = 0;\n            interval = setInterval(function(){\n                var top = 0.5 * 9.81 * Math.pow(t, 2) / 100;\n                $arrow.css('top', top);\n\n                if(top > relY){\n                    clearInterval(interval);\n                    callback();\n                }\n\n                t++;\n            }, 10);\n        }).on('mouseleave', function(){\n            $(this).find('.grid-edit-insert-triangle, .grid-edit-insert-square').css('top', 0);\n            clearInterval(interval);\n        });\n    };\n\n    return {\n        create : _buildArrows\n    };\n});\n\n","define('taoQtiItem/qtiCreator/editor/targetFinder',[\n    'jquery',\n    'lodash',\n    'ui/ckeditor/dtdHandler',\n    'taoQtiItem/qtiCreator/helper/qtiElements'\n], function($, _, dtdHandler, qtiElements){\n    'use strict';\n\n    var _qtiHtmlEditableTypes = {\n        'itemBody' : '.widget-textBlock > [data-html-editable]',\n        'prompt' : '.qti-prompt[data-html-editable]',\n        'choice' : '.qti-choice [data-html-editable]'\n    };\n\n    /**\n     * Extends taoQtiItem/qtiCreator/editor/dtdHandler\n     * to retrieve a collection of jQuery elements within a given context\n     */\n    var targetFinder = (function($, _, dh){\n\n        /**\n         * Inherit functions from parent class\n         */\n        var inheritedFunctions = (function(){\n            var fns = {}, fn;\n            for(fn in dh){\n                if(!dh.hasOwnProperty(fn)){\n                    continue;\n                }\n                if(!(dh[fn] instanceof Function)){\n                    continue;\n                }\n                fns[fn] = dh[fn];\n            }\n            return fns;\n        }());\n\n        /**\n         * Find potential targets within a given context\n         *\n         * @param child\n         * @param context (string|DOM element|jQuery element), defaults to document.body\n         * @returns {*}\n         */\n        var getTargetsFor = function(qtiClass, context){\n\n            var child,\n                $qtiContainers,\n                $targets = $();\n\n            context = context || document.body;\n            context = $(context);\n\n            if(qtiElements.is(qtiClass, 'inlineInteraction')){\n\n                $qtiContainers = context.find(_qtiHtmlEditableTypes['itemBody']);\n                child = 'object';\n\n            }else{\n\n                $qtiContainers = context.find(_.values(_qtiHtmlEditableTypes).join(','));\n                $qtiContainers = context.find(_qtiHtmlEditableTypes['itemBody']);//beta limitation\n                switch(qtiClass){\n                    case 'math':\n                        child = 'object';\n                        break;\n                    case 'object.audio':\n                    case 'object.video':\n                        child = 'object';\n                        break;\n                    default:\n                        child = qtiClass;\n                }\n            }\n\n            var parents = dh.getParentsOf(child),\n                parentSelector = parents.join(',');\n\n            $qtiContainers.each(function(){\n\n                var $qtiContainer = $(this),\n                    $widget = $qtiContainer.closest('.widget-box');\n\n                if($qtiContainer.is(parentSelector)){\n                    $targets = $targets.add($qtiContainer);\n                }\n                $targets = $targets.add($qtiContainer.find(parentSelector).not(function(){\n                    var $closest = $(this).closest('.widget-box');\n                    return ($closest.length && $closest[0] !== $widget[0]);\n                }));\n            });\n\n            return $targets;\n        };\n\n        /**\n         * return both parent and own functions\n         */\n        return _.extend(inheritedFunctions, {\n            getTargetsFor : getTargetsFor\n        });\n\n    }($, _, dtdHandler));\n\n    return targetFinder;\n});\n\n\n","define('taoQtiItem/qtiCreator/editor/gridEditor/droppable',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/helper/gridUnits',\n    'taoQtiItem/qtiCreator/helper/qtiElements',\n    'taoQtiItem/qtiCreator/editor/gridEditor/helper',\n    'taoQtiItem/qtiCreator/editor/gridEditor/arrow',\n    'taoQtiItem/qtiCreator/editor/targetFinder'\n], function($, _, gridUnits, qtiElements, helper, arrow, targetFinder){\n    \"use strict\";\n    var droppableGridEditor = {};\n\n    droppableGridEditor.createDroppableBlocks = function createDroppableBlocks(qtiClass, $el, options){\n\n        options = options || {};\n\n        var minUnits = (typeof options.min === 'string') ? options.min : 0,\n            $colInitial = (options.initialPosition instanceof $) ? options.initialPosition : null,\n            ns = options.namespace ? '.' + options.namespace : '',\n            data = options.data || {};\n\n        var $placeholder = $('<div>', {'id' : 'qti-block-element-placeholder', 'class' : 'qti-droppable-block-hover'}),\n        marginWidth = parseFloat($el.find('[class^=\"col-\"]:last, [class*=\" col-\"]:last').css('margin-left')),\n            isEmpty = ($el.children('.grid-row').length === 0);\n\n        //add dropping class (used to fix col-*:first margin issue);\n        $el.addClass('dropping');\n\n        //prepare tmp rows and cols\n        if(isEmpty){\n\n            $el.append(_getNewRow().append(_getNewCol().addClass('col-12')));\n\n        }else{\n\n            $el.find('.grid-row').each(function(){\n\n                var $row = $(this), cols = [];\n\n                //build tmp new cols:\n                var maxHeight = 0;\n                var $cols = $row.children(':not(.new-col)').each(function(){\n                    $(this).before(_getNewCol().attr('data-index', $(this).index() / 2));\n                    maxHeight = Math.max($(this).height(), maxHeight);\n                    cols.push({\n                        'elt' : $(this),\n                        'units' : parseInt($(this).attr('data-units'))\n                    });\n                });\n                $cols.last().after(_getNewCol().attr('data-index', 'last'));\n                $cols.height(maxHeight);\n\n                $row.data('distributed-units', gridUnits.distribute(cols, minUnits, 12));\n\n                //build tmp new rows:\n                $row.before(_getNewRow().append(_getNewCol()));\n\n            }).last().after(_getNewRow().append(_getNewCol()));\n        }\n\n        //append the dropping element placeholder:\n        var _appendPlaceholder = function($col){\n\n            if($col.length){\n\n                $placeholder\n                    .data('dropped', true)\n                    .show()\n                    .parent().removeClass('col-12')\n                    .parent().removeData('active');\n\n                $col.append($placeholder);\n\n            }else{\n                //insertion failed\n            }\n        };\n\n        //restore the dropping element placeholder back to its default location:\n        var _resetPlaceholder = function(){\n\n            $placeholder.parent().parent().removeData('active');\n\n            $placeholder\n                .removeData('dropped')\n                .hide();\n\n            $el.append($placeholder);\n        };\n\n        //function to be called for inter-column insertions:\n        var _insertBetween = function($col, location){\n\n            if(location === 'left' || location === 'right'){\n                _restoreTmpCol($el);\n                var $row = $col.parent().attr('data-active', true);\n\n                //store temporary the original classes before columns are resized\n                $row.children(':not(.new-col)').each(function(){\n                    $(this).attr('data-original-class', $(this).attr('class'));\n                });\n\n                var distributedUnits = $row.data('distributed-units');\n                var $newCol = (location === 'left') ? $col.prev() : $col.next();\n                _appendPlaceholder($newCol);\n\n                if(distributedUnits.refactoredTotalUnits > 12){\n                    //need to create a new row\n                    var newUnit = ($newCol.is(':last-child') && distributedUnits.last) ? distributedUnits.last : distributedUnits.middle;\n                    $newCol.attr('class', 'new-col col-' + newUnit);\n\n                    var cumulatedUnits = 0,\n                        index = $newCol.data('index');\n\n                    var _appendToNextRow = function _appendToNextRow($row, $newCol){\n                        $row.next().attr('data-active', true).append($newCol);\n                    };\n\n                    if(index === 'last'){\n                        _appendToNextRow($row, $newCol);\n                    }else{\n                        for(var i in distributedUnits.cols){\n\n                            if(i == index){//note: no strict comparison here\n                                if(cumulatedUnits + newUnit > 12){\n                                    _appendToNextRow($row, $newCol)\n                                }\n                                cumulatedUnits += newUnit;\n                            }\n\n                            var col = distributedUnits.cols[i];\n                            if(cumulatedUnits + col.refactoredUnits > 12){\n                                _appendToNextRow($row, col.elt);\n                            }\n                            col.elt.attr('class', 'col-' + col.refactoredUnits);\n                            cumulatedUnits += col.refactoredUnits;\n                        }\n                    }\n\n                }else{\n                    if($newCol.is(':last-child') && distributedUnits.last){\n                        $newCol.attr('class', 'new-col col-' + distributedUnits.last);\n                    }else{\n                        $newCol.attr('class', 'new-col col-' + distributedUnits.middle);\n                    }\n                    _.each(distributedUnits.cols, function(col){\n                        col.elt.attr('class', 'col-' + col.refactoredUnits);\n                    });\n                }\n\n                var h = _resetColsHeight($col);\n                $placeholder.css('height', '100%').parent().height(h);//causes issue on new-col sizes!\n            }\n        };\n\n        //recalculate the cols height according to new layout\n        var _resetColsHeight = function($col, self){\n\n            var maxHeight = 0;\n            if(self === undefined){\n                self = true;\n            }\n\n            $placeholder.css('height', 'auto').parent().removeAttr('style');//remove added height, to reset the height to auto\n\n            var $cols = $col.siblings('[class^=\"col-\"]:not(.new-col), [class*=\" col-\"]:not(.new-col)').andSelf();\n            $cols.removeAttr('style');//remove added height, to reset the height to auto\n            $cols.each(function(){\n                maxHeight = Math.max($(this).height(), maxHeight);\n            });\n\n            $cols.height(maxHeight);\n            if(!self){\n                $col.removeAttr('style');\n            }\n            return maxHeight;\n        };\n\n        _resetPlaceholder();\n\n        //manage initial positioning, useful in the \"move\" context\n        if($colInitial && $colInitial.length){\n\n            var $prev = $colInitial.prevAll('[class^=\"col-\"], [class*=\" col-\"]').first();\n            var $next = $colInitial.nextAll('[class^=\"col-\"], [class*=\" col-\"]').first();\n            if($prev.length){\n                _insertBetween($prev, 'right');\n            }else if($next.length){\n                _insertBetween($next, 'left');\n            }else{\n                //replace it self...\n            }\n        }\n\n        //bind all event handlers:\n        $el.on('mouseover.gridEdit.gridDragDrop', function(){\n\n            var $previousCol = $placeholder.parent('.new-col');\n            _restoreTmpCol($el);//restore tmp columns before reevaluating the heights\n            _resetColsHeight($previousCol, false);//recalculate the height of the previously located row\n\n            var $newCol = $el.find('.new-col:last').css('background', '1px solid red');\n            _appendPlaceholder($newCol);\n            $newCol.addClass('col-12');\n\n        }).on('mouseover.gridEdit.gridDragDrop', '.grid-row', function(e){\n\n            e.stopPropagation();\n\n        }).on('mouseenter.gridEdit.gridDragDrop', '[class^=\"col-\"]:not(.new-col), [class*=\" col-\"]:not(.new-col)', function(e){\n\n            var $col = $(this), $previousCol = $placeholder.parent('.new-col');\n\n            _resetPlaceholder();//remove the placeholder from the previous location\n            _restoreTmpCol($el);//restore tmp columns before reevaluating the heights\n\n            _resetColsHeight($previousCol, false);//recalculate the height of the previously located row\n            _resetColsHeight($col);//recalculate the height for the current row\n\n            arrow.create($col, {marginWidth : marginWidth});\n\n        }).on('arrowenter.gridEdit.gridDragDrop', '[class^=\"col-\"]:not(.new-col), [class*=\" col-\"]:not(.new-col)', function(e, position){\n\n            _insertBetween($(this), position);\n\n        }).on('mousemove.gridEdit.gridDragDrop', '[class^=\"col-\"]:not(.new-col), [class*=\" col-\"]:not(.new-col)', _.throttle(function(e){\n\n            //insert element above or below the col's row:\n            var $col = $(this),\n                h = $col.height(),\n                relY = e.pageY - $col.offset().top;\n\n            //insert on top or bottom:\n            var $newRow = (relY < h / 2) ? $col.parent().prev() : $col.parent().next();\n            if(!$newRow.find('#qti-block-element-placeholder').length){//append row only not already included\n                var $newCol = $newRow.attr('data-active', true).children('.new-col').addClass('col-12');\n                if($newCol.length){\n                    _appendPlaceholder($newCol);\n                }else{\n                    console.log('insert form col failure ', $col, $newRow);\n                }\n            }\n\n        }, 100)).on('mouseleave.gridEdit.gridDragDrop', '[class^=\"col-\"], [class*=\" col-\"]', function(e){\n\n            //destroy inter-column insertion helper\n            e.stopPropagation();\n            $(this).find('.grid-edit-insert-box').remove();\n\n        }).on('mouseleave.gridEdit.gridDragDrop', function(){\n\n            //restore dom when the mouse leaves the drop area \"$el\":\n            $placeholder.hide();\n            _resetPlaceholder();\n            _restoreTmpCol($el);\n\n        });\n\n        //listen to the end of the dragging\n        //on element drop (mouseout in the drop area $el)\n        $el.one('dragoverstop.gridEdit', function(){\n\n            $el.off('.gridEdit.gridDragDrop');\n\n            var $selectedCol = $placeholder.parent('.new-col'),\n                dropped = !!$selectedCol.length;\n\n            if(dropped){//has been properly dropped:\n\n                //make the placeholder permanent\n                $placeholder.removeAttr('id').removeClass('qti-droppable-block-hover');\n\n                //make the dropped col permanent\n                $selectedCol\n                    .data('qti-class', qtiClass)\n                    .removeClass('new-col')\n                    .removeAttr('data-index');\n\n                helper.setUnitsFromClass($selectedCol);\n\n                //make the dropped row permanent\n                $selectedCol.parent('.grid-row-new').removeClass('grid-row-new');\n\n                //manage the temp grid-new-row:\n                $el.find('.grid-row[data-active=true]').each(function(){\n\n                    var $row = $(this);\n\n                    $row.removeClass('grid-row-new');\n\n                    //make the modified  col-n class permanent and update data attribute \"data-units\"\n                    $row.children(':not(.new-col)').removeAttr('data-original-class').each(function(){\n                        helper.setUnitsFromClass($(this));\n                    });\n                });\n            }\n\n            _destroyDroppableBlocks($el);\n\n            if(dropped && $placeholder.data('dropped')){\n                //trigger dropped event\n                $el.trigger('dropped.gridEdit' + ns, [qtiClass, $placeholder, data]);\n            }\n\n        });\n\n    };\n\n    var _mapQtiToHtml = function _mapQtiToHtml(qtiClass){\n\n        if(qtiElements.is(qtiClass, 'inlineInteraction')){\n            return 'object';//an inlineInteraction is a flow, like xhtml \"object\" elements\n        }else{\n            switch(qtiClass){\n                case 'math':\n                    return 'div';\n                case 'object.audio':\n                case 'object.video':\n                    return 'object';\n            }\n        }\n\n        //else return the html itself : a qti img is an img:\n        return qtiClass;\n    };\n\n    var _pulseTimer = null;\n    var _pulse = function($el){\n\n        if(_pulseTimer){\n            clearInterval(_pulseTimer);\n        }\n        var intervalDuration = 1000;\n\n        setInterval(function(){\n\n            $el.animate({\n                opacity : 0.1\n            }, intervalDuration * 0.5, function(){\n                $el.animate({\n                    opacity : 0.9\n                }, intervalDuration * 0.5);\n            });\n\n        }, intervalDuration);\n\n    };\n\n    droppableGridEditor.createDroppableInlines = function createDroppableInlines(qtiClass, $el, options){\n\n        var ns = options.namespace ? '.' + options.namespace : '',\n            data = options.data || {},\n            $targets = targetFinder.getTargetsFor(qtiClass, $el),\n            dropped = false;\n\n        $targets.addClass('drop-target');\n\n        $targets.contents().each(function(){\n            //a text node\n            if(this.nodeType === 3 && !this.nodeValue.match(/^\\s+$/)){\n                $(this).replaceWith($.map(this.nodeValue.split(/(\\S+)/), function(w){\n                    return w.match(/^\\s*$/) ? document.createTextNode(w) : $('<span>', {'text' : w, 'class' : 'qti-word-wrap'}).get();\n                }));\n            }\n        });\n\n        var $placeholder = $('<span>', {'id' : 'qti-inline-element-placeholder', 'data-inline' : true});\n        $placeholder.append($('<span>', {'class' : 'cursor-h'})).append($('<span>', {'class' : 'cursor-v'}));\n        _pulse($placeholder);\n        var _resetPlaceholder = function($el){\n            $placeholder.detach();\n            dropped = false;\n        };\n        _resetPlaceholder($el);\n\n        var _showPlaceholder = function(){\n            dropped = true;\n            return $placeholder;\n        };\n\n        $el.on('mousemove.gridEdit.gridDragDrop', 'span.qti-word-wrap', function(e){\n\n            var w = $(this).width(),\n                parentOffset = $(this).offset(),\n                relX = e.pageX - parentOffset.left;\n\n            $placeholder;\n            if(relX < w / 2){\n                $(this).before(_showPlaceholder());\n            }else{\n                $(this).after(_showPlaceholder());\n            }\n\n        }).on('mouseover.gridEdit.gridDragDrop', function(e){\n            \n            e.stopPropagation();\n            var $target = $(e.target);\n            \n            if($target.hasClass('drop-target') && !$target.find($placeholder).length){\n                \n                //make first insertion easier\n                $target.append(_showPlaceholder());\n                \n            }else if($target[0] !== $placeholder[0]\n                && !$target.hasClass('qti-word-wrap')\n                && !$target.children('.qti-word-wrap').length){\n\n                _resetPlaceholder($el);\n            }\n        });\n\n        //listen to the end of the dragging \n        $el.one('dragoverstop.gridEdit', function(){\n            \n            //make placeholder permanent\n            if(dropped){\n                $placeholder.removeAttr('id').removeAttr('class');\n            }\n\n            //destroy droppable\n            _destroyDroppableInlines($el);\n\n            //call callback function:\n            if(dropped){\n                $el.trigger('dropped.gridEdit' + ns, [qtiClass, $placeholder, data]);\n            }else{\n                //clean up :\n                $placeholder.remove();\n                $placeholder = null;\n            }\n        });\n    };\n\n    droppableGridEditor.destroyDroppables = function destroyDroppables($el){\n\n        _destroyDroppableInlines($el);\n        _destroyDroppableBlocks($el);\n    };\n\n    var _destroyDroppableInlines = function($el){\n\n        $el.off('.gridEdit.gridDragDrop');\n\n        $el.find('span.qti-word-wrap').replaceWith(function(){\n            return $(this).text();\n        });\n        \n        $el.find('.drop-target').removeClass('drop-target');\n    };\n\n    var _destroyDroppableBlocks = function($el){\n\n        $el.removeClass('dropping').off('.gridEdit.gridDragDrop');\n\n        $el.find('[class^=\"col-\"], [class*=\" col-\"]').removeAttr('style');\n\n        _restoreTmpCol($el);\n\n        var _toBeRemoved = [\n            '#qti-block-element-placeholder',\n            '.new-col',\n            '.grid-row-new',\n            '.grid-edit-insert-box'\n        ];\n\n        $el.find(_toBeRemoved.join(',')).remove();\n\n    };\n\n    var _getNewRow = function _getNewRow(){\n        return $('<div>', {'class' : 'grid-row grid-row-new', 'data-units' : 0});\n    };\n\n    var _getNewCol = function _getNewCol(){\n        return $('<div>', {'class' : 'new-col'});\n    };\n\n    var _restoreTmpCol = function _restoreTmpCol($el){\n        $el.find('.grid-row').each(function(){\n            var $row = $(this);\n            $row.children('.new-col').attr('class', 'new-col').removeAttr('style');//reset all column\n\n            //restore location of overflown cols\n            if($row.hasClass('grid-row-new')){\n                var $children = $row.children();\n                if($children.length > 1){\n                    $row.prev().append($children);\n                    $row.append($children.first());\n                }\n            }\n\n            //restore original classes\n            $row.children(':not(.new-col)').each(function(){\n                var $col = $(this), originalClasses = $col.attr('data-original-class');\n                if(originalClasses){\n                    $col.attr('class', originalClasses).removeAttr('data-original-class');\n                }\n            });\n            $row.removeAttr('data-active');\n        });\n    };\n\n    return droppableGridEditor;\n});\n\n","define('taoQtiItem/qtiCreator/editor/gridEditor/draggable',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/helper/qtiElements',\n    'taoQtiItem/qtiCreator/editor/gridEditor/droppable',\n    'jqueryui'\n], function($, _, QtiElements, droppable){\n    \"use strict\";\n    var _insertableDefaultsOptions = {\n        helper : function(){\n            return $(this).clone();\n        }\n    };\n\n    var createInsertable = function createInsertable($el, $to, opts){\n\n        var options = _.defaults(opts, _insertableDefaultsOptions);\n\n        createDraggable($el, $to, {\n            helper : options.helper,\n            namespace : 'insertable'\n        });\n    };\n\n    var createDraggable = function createDraggable($el, $to, opts){\n\n        var options = _.defaults(opts, {\n            distance : 1,\n            helper : 'original'\n        });\n\n        $el.draggable({\n            distance : parseInt(options.distance),\n            helper : options.helper,\n           // appendTo : $('#item-editor-panel'), // @TODO needs to be set to $to => very important ! to enable movable correct positioning\n            // this will create the issue that elements dragged from the sidebar will be UNDER the sidebar\n            // so far no solution found (before scroll-new scroll bar r.XXX)\n            appendTo : $(document.body), // @TODO needs to be set to $to => very important ! to enable movable correct positioning\n                                         // this will create the issue that elements dragged from the sidebar will be UNDER the sidebar\n                                         // so far no solution found\n            opacity : 1,\n            scroll : false,\n            cursor : 'crosshair',\n            cursorAt : {left : -5, bottom : -5},\n            create : function(){\n                $(this).addClass('grid-draggable');\n            },\n            start : function(e, ui){\n                \n                $to.trigger('beforedragoverstart.gridEdit');\n\n                if(typeof(options.start) === 'function'){\n                    options.start.call(this, e, ui);\n                }\n\n                $(this).removeClass('grid-draggable-active');\n\n                //define the type of draggable block/inline?\n                var qtiClass = $(this).data('qti-class');\n                if(QtiElements.isInline(qtiClass)){\n                    droppable.createDroppableInlines(qtiClass, $to, options);\n                }else if(QtiElements.isBlock(qtiClass)){\n                    droppable.createDroppableBlocks(qtiClass, $to, options);\n                }else{\n                    throw 'undefined qti class';\n                }\n\n                $to.trigger('dragoverstart.gridEdit');\n            },\n            stop : function(e, ui){\n                \n                //restore dom:\n                $('body').css('cursor', 'auto');\n                \n                //no longer needed\n                ui.helper.remove();\n                \n                //fire \"stop\" events\n                \n                if(typeof(options.stop) === 'function'){\n                    options.stop.call(this, e, ui);\n                }\n\n                $to.trigger('dragoverstop.gridEdit');\n            }\n        });\n\n        $el.on('mousedown.gridDraggable.gridEdit', function(){\n            $(this).addClass('grid-draggable-active');\n        }).on('mouseup.gridDraggable.gridEdit', function(){\n            $(this).removeClass('grid-draggable-active');\n        });\n    };\n\n    var createMovable = function createMovable($el, $to){\n\n        var $parent = $el.parent('[class^=\"col-\"], [class*=\" col-\"]');\n        createDraggable($el, $to, {\n            distance : 5,\n            initialPosition : $el.parent(),\n            namespace : 'movable',\n            start : function(e, ui){\n\n                $el.hide();\n\n                $parent.data({\n                    'initial-position' : true,\n                    'initial-class' : $parent.attr('class')\n                }).attr('class', 'new-col');\n            },\n            helper : function(){\n\n                return $(this).clone()\n                    .addClass('grid-draggable-helper')\n                    .css({\n                    height : $(this).height(),\n                    width : $(this).width()\n                });\n            },\n            stop : function(e, ui){\n\n                //restore initial position if given:\n                if(!$el.data('grid-element-dropped')){\n                    $parent.attr('class', $parent.data('initial-class'));\n                }\n\n                //re-init the dropped value:\n                $el.data('grid-element-dropped', false);\n//                $el.removeData('grid-element-dropped');\n\n                //show it\n                $el.show();\n\n            },\n            data : {\n                widget : $el.data('widget')\n            }\n        });\n\n    };\n\n    var _destroyDraggables = function _destroyDraggables($el){\n        $el.draggable('destroy');\n        $el.removeClass('grid-draggable');\n        $el.off('.gridDraggable');\n    };\n\n    return {\n        createInsertable : function($el, $to, opts){\n            createInsertable($el, $to, opts);\n        },\n        createMovable : function($el, $to, opts){\n            createMovable($el, $to, opts);\n        },\n        destroy : _destroyDraggables\n    };\n});\n\n","define('taoQtiItem/qtiCreator/editor/jquery.gridEditor',[\n    'jquery',\n    'taoQtiItem/qtiCreator/editor/gridEditor/helper',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'taoQtiItem/qtiCreator/editor/gridEditor/draggable',\n    'taoQtiItem/qtiCreator/editor/gridEditor/resizable'\n], function($, helper, contentHelper, draggable, resizable) {\n\n    'use strict';\n\n    $.fn.gridEditor = function(options) {\n\n        var opts = {};\n        var method = '';\n        var args = [];\n        var ret = undefined;\n        if (typeof options === 'object') {\n            opts = $.extend({}, $.fn.gridEditor.defaults, options);\n        } else if (options === undefined) {\n            opts = $.extend({}, $.fn.gridEditor.defaults);//use default\n        } else if (typeof options === 'string') {\n            if (typeof methods[options] === 'function') {\n                method = options;\n                args = Array.prototype.slice.call(arguments, 1);\n            }\n        }\n\n        this.each(function() {\n            var $this = $(this);\n            if (method) {\n                if (isCreated($this)) {\n                    ret = methods[method].apply($(this), args);\n                } else {\n                    $.error('call of method of gridEditor while it has not been initialized');\n                }\n            } else if (!isCreated($this) && typeof opts === 'object') {\n                create($this, opts);\n            }\n        });\n\n        if (ret === undefined) {\n            return this;\n        } else {\n            return ret;\n        }\n    };\n\n    $.fn.gridEditor.defaults = {\n        'elementClass': 'itemBody'\n    };\n\n    var methods = {\n        addInsertables: function($elts, options) {\n            var $grid = $(this);\n            $elts.each(function() {\n                draggable.createInsertable($(this), $grid, options);\n            });\n        },\n        createMovables: function($elts) {\n            var $grid = $(this);\n            $elts.each(function() {\n                draggable.createMovable($(this), $grid);\n            });\n        },\n        destroy: function() {\n            destroy($(this));\n        },\n        getContent: function() {\n            return getContent($(this));\n        },\n        setContent: function(content) {\n            if (content) {\n                setContent($(this), content);\n            }\n        },\n        resizable: function() {\n            resizable.create($(this));\n        }\n    };\n\n    function isCreated($elt) {\n        return (typeof $elt.data('qti-grid-options') === 'object');\n    }\n\n    function create($elt, options) {\n\n        $elt.data('qti-grid-options', options);\n\n        //initialize grid count\n        $elt.find('.grid-row').each(function() {\n            var totalUnits = 0;\n            $(this).children('[class*=\" col-\"], [class^=\"col-\"]').each(function() {\n                totalUnits += helper.setUnitsFromClass($(this));\n            });\n//            $(this).attr('data-units', parseInt(totalUnits));//useless??\n        });\n    }\n\n    function destroy($elt) {\n        contentHelper.destroyGridWidgets($elt);\n    }\n\n    function getContent($el) {\n        return contentHelper.getContent($el);\n    }\n\n});\n","define('taoQtiItem/qtiCreator/editor/simpleContentEditableElement',['jquery', 'lodash'], function($, _){\n    \"use strict\";\n    function create($container, selector, callback){\n\n        function _init($elt){\n            $elt.attr('contenteditable', true).addClass('simple-editable');\n        }\n\n        _init($container.find(selector));\n\n        $container.on('mouseenter.simpleeditable', selector, _.throttle(function(){\n\n            var $elt = $(this);\n            if(!$elt.attr('contenteditable')){\n                //incase the element does not exists on init()\n                _init($elt);\n            }\n\n        }, 200)).on('keyup.simpleeditable', selector, _.throttle(function(e){\n\n            callback($(this).text());\n\n        }, 200)).on('keydown.simpleeditable', selector, function(e){\n\n            if(e.which === 13){\n                e.preventDefault();\n                $(this).blur();\n            }\n        });\n\n    }\n\n    function destroy($container){\n\n        $container.find('.simple-editable')\n            .removeClass('simple-editable')\n            .removeAttr('contenteditable');\n\n        $container.off('.simpleeditable');\n    }\n\n    return {\n        create : create,\n        destroy : destroy\n    };\n\n});\n\n","define('taoQtiItem/qtiCreator/helper/adaptSize',[\n    'jquery'\n], function($){\n    'use strict';\n\n    function ucfirst(str){\n        return str.charAt(0).toUpperCase() + str.substr(1);\n    }\n\n    var adaptSize = (function(){\n\n        var height = function(elements){\n            _resize(elements, {height : 0});\n        };\n\n        var width = function(elements){\n            _resize(elements, {width : 0});\n        };\n\n        var both = function(elements){\n            _resize(elements, {height : 0, width : 0});\n        };\n\n        var _resize = function(elements, dimensions){\n\n            var dimension;\n\n            if(!(elements instanceof $)){\n                elements = $(elements);\n            }\n\n            // This whole function is based on calculating the largest height/width.\n            // Therefor the elements need to have style: height/width to be removed\n            // since otherwise we could never track when something is actually getting smaller than before.\n            elements.each(function(){\n                var element = $(this);\n                for(dimension in dimensions){\n                    element[dimension]('auto');\n                }\n            });\n\n            elements.each(function(){\n                var element = $(this);\n                for(dimension in dimensions){\n                    dimensions[dimension] = Math.max(dimensions[dimension], element['outer' + ucfirst(dimension)]());\n                }\n            });\n\n            elements.css(dimensions);\n        };\n\n        return {\n            width : width,\n            height : height,\n            both : both\n        };\n\n    })();\n\n    return adaptSize;\n});\n\n","define('taoQtiItem/qtiCreator/helper/devTools',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiCreator/helper/xmlRenderer',\n    'taoQtiItem/qtiCreator/model/helper/event'\n], function(_, $, xmlRenderer, event) {\n    \"use strict\";\n    var tools = {};\n\n    tools.listenStateChange = function() {\n\n        $(document).on('afterStateInit.qti-widget', function(e, element, state) {\n            console.log('->state : ' + state.name + ' : ' + element.serial);\n        }).on('afterStateExit.qti-widget', function(e, element, state) {\n            console.log('<-state : ' + state.name + ' : ' + element.serial);\n        });\n    };\n    \n    tools.getStates = function(item){\n        \n        var states = {},\n            elements = item.getComposingElements();\n        \n        _.each(elements, function(element){\n           var widget = element.data('widget');\n           if(widget){\n               states[element.getSerial()] = widget.getCurrentState().name;\n           }\n        });\n        \n        return states;\n    };\n    \n    tools.liveXmlPreview = function(item, $destination) {\n\n        //render qti xml:\n        $(document).on(event.getList().join(' '), _.throttle(function(){\n            \n            var rawXml = xmlRenderer.render(item);\n            \n            _printXml(rawXml, $destination);\n            \n        }, 200));\n\n    };\n\n    var _formatXml = function(xml) {\n        return vkbeautify.xml(xml, '\\t');\n    };\n\n    var _printXml = function(rawXml, $destination) {\n\n        var $code = $(),\n                xml = _formatXml(rawXml);\n\n        xml = xml\n                .replace(/&/g, \"&amp;\")\n                .replace(/</g, \"&lt;\")\n                .replace(/>/g, \"&gt;\")\n                .replace(/\"/g, \"&quot;\")\n                .replace(/'/g, \"&#039;\");\n\n        if ($destination.hasClass('language-markup')) {\n            $code = $destination;\n        } else {\n            $code = $destination.find('code.language-markup');\n            if (!$code.length) {\n                $code = $('<code>', {'class': 'language-markup'});\n                $destination.addClass('line-numbers').html($code);\n            }\n        }\n\n        if ($code.length) {\n            $code.html(xml);\n            Prism.highlightElement($code[0]);\n        }\n    };\n\n    return tools;\n});\n","define('taoQtiItem/qtiCreator/helper/dummyElement',[\n    'jquery',\n    'lodash'\n], function ($, _) {\n    'use strict';\n\n    var dummyElement = (function () {\n\n        var types = {\n            maths: {\n                icon: 'maths',\n                css: {\n                    width : 40,\n                    height : 22\n                }\n            },\n            image: {\n                icon: 'image',\n                css: {\n                    width : 50,\n                    height : 35\n                }\n            },\n            video: {\n                icon: 'video',\n                css: {\n                    width : 200,\n                    height : 150\n                }\n            },\n            media: {\n                icon: 'media',\n                css: {\n                    width : 150,\n                    height : 100\n                }\n            }\n        };\n\n        /**\n         * create dummy element\n         *\n         * Examples:\n         *\n         * 1. Generic placeholder\n         * dummyElement.get();\n         * -> <span class=\"dummy-element\" style=\"width:80px; height: 22px\"></span>\n         *\n         * 2. Pre-defined placeholder\n         * dummyElement.get('math|image|video|...')\n         * -> <span style=\"width: 150px; height: 100px; font-size: 80px; padding-top: 9px;\" class=\"dummy-element\">\n         *       <span class=\"icon-image\"></span>\n         *    </span>\n         *\n         * 3. Freestyle\n         * works almost like $('<element>'), except that 'element' and 'css' (both optionally) are part of an object\n         * dummyElement.get({ element: 'div', class: 'foo bar', css: { color: 'red'}})\n         * -> <div class=\"dummy-element foo bar\" style=\"color: red; width:80px; height: 22px\">\n         *       <span class=\"icon-image\"></span>\n         *    </div>\n         *\n         *\n         * @param arg {} | string\n         * @returns {*|HTMLElement}\n         */\n        var get = function (arg) {\n            var options = {\n                element: 'span',\n                'class': 'dummy-element',\n                css: {\n                    width : 80,\n                    height : 22\n                }\n            },\n            element,\n            $element,\n            $icon,\n            css,\n            finalOptions;\n\n            if(arg) {\n                if($.isPlainObject(arg)) {\n                    // class names must be added to 'dummy-element'\n                    if(arg.class) {\n                        options.class += ' ' + arg.class;\n                        delete(arg.class);\n                    }\n                    // 'deep' required to copy CSS correctly\n                    options = $.extend(true, {}, options, arg);\n                }\n                else if (types[arg]) {\n                    options = $.extend({}, options, types[arg]);\n                }\n            }\n\n            // icon\n            $icon = options.icon ? $('<span>', { class: 'icon-' + options.icon.replace('icon-', '') }) : false;\n\n            element = '<' + options.element + '>';\n\n            css = _.cloneDeep(options.css);\n\n            // adapt font size to container size\n            css['font-size'] = css.height && !css['font-size']\n                ? (css.height * .8)\n                : 14;\n\n            css['line-height'] = css['font-size'].toString() + 'px';\n\n            if(css['height'] > 30) {\n                css['padding-top'] = ((css['height'] - css['font-size']) / 2) * .9;\n            }\n\n            // don't scale background-picture on large elements\n            if(css.height && css.height > 100) {\n                css['background-size'] = 'auto';\n            }\n\n            finalOptions = _.cloneDeep(options);\n            delete(finalOptions.icon);\n            delete(finalOptions.element);\n            delete(finalOptions.css);\n\n            $element = $(element, finalOptions).css(css);\n\n            if($icon) {\n                $element.append($icon);\n            }\n            return $element;\n        };\n\n        return {\n            get: get\n        }\n\n    }());\n    return dummyElement;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/helper/uploadMime',[\n    'i18n'\n], function(__){\n    \"use strict\";\n    /**\n     * @TODO these mime types are not up-to-date, in particular the MS ones\n     * refer to http://filext.com/faq/office_mime_types.php\n     * @type {{getMimeTypes: getMimeTypes}}\n     */\n    var uploadMime = {\n        getMimeTypes : function() {\n            return [\n                { \"mime\" : \"application/zip\", \"label\" : __(\"ZIP archive\") },\n                { \"mime\" : \"text/plain\", \"label\" : __(\"Plain text\") },\n                { \"mime\" : \"application/pdf\", \"label\" : __(\"PDF file\") },\n                { \"mime\" : \"image/jpeg\", \"label\" : __(\"JPEG image\") },\n                { \"mime\" : \"image/png\", \"label\" : __(\"PNG image\") },\n                { \"mime\" : \"image/gif\", \"label\" : __(\"GIF image\") },\n                { \"mime\" : \"image/svg+xml\", \"label\" : __(\"SVG image\") },\n                { \"mime\" : \"application/ogg\", \"label\" : __(\"MPEG audio\") },\n                { \"mime\" : \"audio/x-ms-wma\", \"label\" : __(\"Windows Media audio\") },\n                { \"mime\" : \"audio/x-wav\", \"label\" : __(\"WAV audio\") },\n                { \"mime\" : \"video/mpeg\", \"label\" : __(\"MPEG video\") },\n                { \"mime\" : \"video/mp4\", \"label\" : __(\"MP4 video\") },\n                { \"mime\" : \"video/quicktime\", \"label\" : __(\"Quicktime video\") },\n                { \"mime\" : \"video/x-ms-wmv\", \"label\" : __(\"Windows Media video\") },\n                { \"mime\" : \"video/x-flv\", \"label\" : __(\"Flash video\") },\n                { \"mime\" : \"text/csv\", \"label\" : __(\"CSV file\") },\n                { \"mime\" : \"application/msword\", \"label\" : __(\"Microsoft Word\") },\n                { \"mime\" : \"application/vnd.ms-excel\", \"label\" : __(\"Microsoft Excel\") },\n                { \"mime\" : \"application/vnd.ms-powerpoint\", \"label\" : __(\"Microsoft Powerpoint\") }\n            ]\n        }\n    };\n\n    return uploadMime;\n});\n","define('taoQtiItem/qtiItem/core/Img',[\n    'taoQtiItem/qtiItem/core/Element',\n    'lodash',\n    'taoQtiItem/qtiItem/helper/rendererConfig'\n], function(Element, _, rendererConfig){\n\n    var Img = Element.extend({\n        qtiClass : 'img',\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {};\n\n            defaultData.attributes = {\n                src : renderer.getAbsoluteUrl(this.attr('src'))\n            };\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        },\n        isEmpty : function(){\n            return (!this.attr('src'));\n        }\n    });\n\n    return Img;\n});\n\n","define('taoQtiItem/qtiCreator/model/Img',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/Img'\n], function(_, editable, Img){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                src : '',\n                alt : ''\n            };\n        },\n        afterCreate : function(){\n            this.data('responsive', true);\n        }\n    });\n    return Img.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/Math',['lodash', 'taoQtiItem/qtiItem/core/Element', 'taoQtiItem/qtiItem/helper/rendererConfig'], function(_, Element, rendererConfig){\n\n    var _stripMathTags = function(mathML, nsName){\n        var regex = new RegExp('<(\\/)?' + (nsName ? nsName + ':' : '') + 'math[^>]*>', 'g');\n        return mathML.replace(regex, '')\n            .replace(/^\\s*[\\r\\n]/gm, '')//remove first blank line\n            .replace(/\\s*[\\r\\n]$/gm, '');//last blank line\n    };\n\n    var _stripNamespace = function(mathML, nsName){\n        var regex = new RegExp('<(\\/)?' + (nsName ? nsName + ':' : ''), 'g');\n        return mathML.replace(regex, '<$1');\n    };\n\n    var Math = Element.extend({\n        qtiClass : 'math',\n        defaultNsName : 'm',\n        defaultNsUri : 'http://www.w3.org/1998/Math/MathML',\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n            this.ns = null;\n            this.mathML = '';\n            this.annotations = {};\n        },\n        getNamespace : function(){\n\n            if(this.ns && this.ns.name && this.ns.uri){\n                return _.clone(this.ns);\n            }else{\n\n                var relatedItem = this.getRelatedItem();\n                if(relatedItem){\n                    var namespaces = relatedItem.getNamespaces();\n                    for(var ns in namespaces){\n                        if(namespaces[ns].indexOf('MathML') > 0){\n                            return {\n                                name : ns,\n                                uri : namespaces[ns]\n                            };\n                        }\n                    }\n                    //if no ns found in the item, set the default one!\n                    relatedItem.namespaces[this.defaultNsName] = this.defaultNsUri;\n                    return {\n                        name : this.defaultNsName,\n                        uri : this.defaultNsUri\n                    };\n                }\n            }\n\n            return {};\n        },\n        setNamespace : function(name, uri){\n            this.ns = {\n                name : name,\n                uri : uri\n            };\n        },\n        setAnnotation : function(encoding, value){\n            this.annotations[encoding] = value;\n        },\n        getAnnotation : function(encoding){\n            return this.annotations[encoding];\n        },\n        removeAnnotation : function(encoding){\n            delete this.annotations[encoding];\n        },\n        setMathML : function(mathML){\n            var ns = this.getNamespace(),\n                nsName = (ns.name && ns.uri) ? ns.name : '';\n\n            mathML = _stripMathTags(mathML, nsName);\n            if(ns){\n                mathML = _stripNamespace(mathML, nsName)\n            }\n            this.mathML = mathML;\n        },\n        getMathML : function(){\n            return this.mathML;\n        },\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                tag = this.qtiClass,\n                raw = this.mathML,\n                body = raw,\n                ns = this.getNamespace(),\n                annotations = '';\n\n            for(var encoding in this.annotations){\n                annotations += '<annotation encoding=\"' + encoding + '\">' + this.annotations[encoding] + '</annotation>';\n            }\n\n            if(annotations){\n                if(raw.indexOf('</semantics>') > 0){\n                    raw = raw.replace('</semantics>', annotations + '</semantics>');\n                }else{\n                    raw = '<semantics>' + raw + annotations + '</semantics>';\n                }\n            }\n\n            if(ns && ns.name){\n                body = raw.replace(/<(\\/)?([^!])/g, '<$1' + ns.name + ':$2');\n                tag = ns.name + ':' + tag;\n            }\n\n            var defaultData = {\n                block : (this.attr('display') === 'block') ? true : false,\n                body : body,\n                raw : raw,\n                tag : tag,\n                ns : ns\n            };\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        },\n        isEmpty : function(){\n            return _isEmptyMathML(this.mathML) && (!this.annotations['latex'] || !this.annotations['latex'].trim());\n        }\n    });\n\n    var _isEmptyMathML = function(mathStr){\n\n        var hasContent = false;\n\n        if(mathStr && mathStr.trim()){\n            var $math = $(mathStr);\n            hasContent = !!$math.text();\n        }\n\n        return !hasContent;\n    }\n\n    return Math;\n});\n\n","define('taoQtiItem/qtiCreator/model/Math',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/Math'\n], function(_, editable, Math){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {};\n        },\n        afterCreate : function(){\n            this.getNamespace();\n        }\n    });\n    return Math.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/Object',[\n    'taoQtiItem/qtiItem/core/Element', \n    'lodash', \n    'taoQtiItem/qtiItem/helper/rendererConfig',\n    'taoQtiItem/qtiItem/helper/util'\n], function(Element, _, rendererConfig, util){\n\n    var QtiObject = Element.extend({\n        qtiClass : 'object',\n        getMediaType : function(){\n            var type = 'undefined';\n            var mimetype = this.attr('type');\n            if(mimetype){\n                if(mimetype.indexOf('video') === 0){\n                    type = 'video';\n                }else if(mimetype.indexOf('audio') === 0){\n                    type = 'audio';\n                }else if(mimetype.indexOf('image') === 0){\n                    type = 'image';\n                }else if(mimetype.indexOf('text/html') === 0){\n                    type = 'html';\n                }else{\n                    type = 'object';\n                }\n            }\n            return type;\n        },\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {};\n\n            switch(this.getMediaType()){\n                case 'video':\n                    defaultData.video = true;\n                    break;\n                case 'audio':\n                    defaultData.audio = true;\n                    break;\n                case 'html':\n                    defaultData.html = true;\n                    break;\n                case 'image':\n                default:\n                    defaultData.object = true;\n            }\n            \n            defaultData.attributes = {data : renderer.getAbsoluteUrl(this.attr('data'))};\n            defaultData.body = this._alt;\n            \n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        },\n        isEmpty : function(){\n            return (!this.attr('data'));\n        }\n    });\n\n    return QtiObject;\n});\n","define('taoQtiItem/qtiCreator/model/Object',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/Object'\n], function(_, editable, Object){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                data : '',\n                type : ''\n            };\n        }\n    });\n    return Object.extend(methods);\n});\n","define('taoQtiItem/qtiCreator/model/helper/portableElement',['lodash', 'jquery'], function(_, $){\n    \"use strict\";\n    \n    /**\n     * Add ns directory to a relative path (a relative path only)\n     * \n     * @param {String} typeIdentifier\n     * @param {String} file\n     * @returns {String}\n     */\n    function _addNsDir(typeIdentifier, file){\n        if(file.match(/^\\./)){\n            return typeIdentifier + '/' + file.replace(/^\\.\\//, '');\n        }else{\n            return file;\n        }\n    }\n    \n    /**\n     * Add namespace directory to a file or an array of file\n     * \n     * @param {String} typeIdentifier\n     * @param {String|Array} file - a file path or an array of file path\n     * @returns {String}\n     */\n    function addNamespaceDirectory(typeIdentifier, file){\n        if(_.isString(file)){\n            return _addNsDir(typeIdentifier, file);\n        }else if(_.isArray(file)){\n            return _.map(file, function(f){\n                return _addNsDir(typeIdentifier, f);\n            });\n        }\n    }\n\n    /**\n     * Get common methods to augment a portableElement implementation\n     * \n     * @param {object} registry\n     * @returns {object}\n     */\n    function getDefaultMethods(registry){\n\n        return {\n            getDefaultAttributes : function(){\n                return {};\n            },\n            getDefaultProperties : function(){\n\n                var creator = registry.getCreator(this.typeIdentifier);\n                if(_.isFunction(creator.getDefaultProperties)){\n                    return creator.getDefaultProperties(this);\n                }else{\n                    return {};\n                }\n            },\n            afterCreate : function(){\n\n                var typeId = this.typeIdentifier,\n                    creator = registry.getCreator(typeId),\n                    manifest = registry.getManifest(typeId),\n                    item = this.getRelatedItem();\n                \n                //add required resource\n                //@todo need afterCreate() to return a promise\n                var _this = this;\n                registry.addRequiredResources(typeId, item.data('uri'), function(res){\n                    if(res.success){\n                        $(document).trigger('resourceadded.qti-creator', [typeId, res.resources, _this]);\n                    }else{\n                        throw 'resource addition failed';\n                    }\n                });\n\n                //set default markup (for initial rendering)\n                creator.getMarkupTemplate();\n\n                //set pci props\n                this.properties = creator.getDefaultProperties();\n\n                //set hook entry point\n                this.entryPoint = addNamespaceDirectory(typeId, manifest.entryPoint);\n\n                //set libs\n                if(_.isArray(manifest.libraries)){\n                    this.libraries = addNamespaceDirectory(typeId, manifest.libraries);\n                }\n\n                if(_.isArray(manifest.css)){\n                    this.css = addNamespaceDirectory(typeId, manifest.css);\n                    _.each(this.css, function(css){\n                        if(!item.stylesheetExists(css)){\n                            item.createStyleSheet(css);\n                        }\n                    });\n                }\n                \n                //@todo fix this !\n                if(manifest.response){//for custom interaciton only\n                    //create response\n                    this.createResponse({\n                        baseType : manifest.response.baseType,\n                        cardinality : manifest.response.cardinality\n                    });\n                }else{\n                    //the attribute is mendatory for info control\n                    this.attr('title', manifest.label);\n                }\n\n                //set markup\n                this.markup = this.renderMarkup();\n\n                //set pci namespace to item\n                this.getNamespace();\n\n                //after create\n                if(_.isFunction(creator.afterCreate)){\n                    return creator.afterCreate(this);\n                }\n            },\n            renderMarkup : function(){\n\n                var creator = registry.getCreator(this.typeIdentifier),\n                    markupTpl = creator.getMarkupTemplate(),\n                    markupData = this.getDefaultMarkupTemplateData();\n\n                if(_.isFunction(creator.getMarkupData)){\n                    //extends the default data with the custom one\n                    markupData = creator.getMarkupData(this, markupData);\n                }\n\n                return markupTpl(markupData);\n            },\n            updateMarkup : function(){\n                this.markup = this.renderMarkup();\n            }\n        };\n    }\n\n    return {\n        getDefaultMethods : getDefaultMethods\n    };\n});\n\n","define('taoQtiItem/qtiItem/mixin/CustomElement',[\n    'taoQtiItem/qtiItem/mixin/Mixin',\n    'lodash'\n], function(Mixin, _){\n\n    var methods = {\n        prop : function(name, value){\n            if(name){\n                if(value !== undefined){\n                    this.properties[name] = value;\n                }else{\n                    if(typeof (name) === 'object'){\n                        for(var prop in name){\n                            this.prop(prop, name[prop]);\n                        }\n                    }else if(typeof (name) === 'string'){\n                        if(this.properties[name] === undefined){\n                            return undefined;\n                        }else{\n                            return this.properties[name];\n                        }\n                    }\n                }\n            }\n            return this;\n        },\n        removeProp : function(propNames){\n            var _this = this;\n            if(typeof (propNames) === 'string'){\n                propNames = [propNames];\n            }\n            _.each(propNames, function(propName){\n                delete _this.attributes[propName];\n            });\n            return this;\n        },\n        getNamespace : function(){\n\n            if(this.ns && this.ns.name && this.ns.uri){\n                return _.clone(this.ns);\n            }else{\n\n                var relatedItem = this.getRelatedItem();\n                if(relatedItem){\n                    var namespaces = relatedItem.getNamespaces();\n                    for(var ns in namespaces){\n                        if(namespaces[ns].indexOf(this.defaultNsUri) >= 0){\n                            return {\n                                name : ns,\n                                uri : namespaces[ns]\n                            };\n                        }\n                    }\n                    //if no ns found in the item, set the default one!\n                    relatedItem.namespaces[this.defaultNsName] = this.defaultNsUri;\n                    return {\n                        name : this.defaultNsName,\n                        uri : this.defaultNsUri\n                    };\n                }\n            }\n\n            return {};\n        },\n        setNamespace : function(name, uri){\n            this.ns = {\n                name : name,\n                uri : uri\n            };\n        },\n        getMarkupNamespace : function(){\n\n            if(this.markupNs && this.markupNs.name && this.markupNs.uri){\n                return _.clone(this.markupNs);\n            }else{\n                var relatedItem = this.getRelatedItem();\n                if(relatedItem){\n                    //set the default one:\n                    relatedItem.namespaces[this.defaultMarkupNsName] = this.defaultMarkupNsUri;\n                    return {\n                        name : this.defaultMarkupNsName,\n                        uri : this.defaultMarkupNsUri\n                    };\n                }\n            }\n\n            return {};\n        },\n        setMarkupNamespace : function(name, uri){\n            this.markupNs = {\n                name : name,\n                uri : uri\n            };\n        }\n    };\n\n    return {\n        augment : function(targetClass){\n            Mixin.augment(targetClass, methods);\n        },\n        methods : methods\n    };\n});\n\n","define('taoQtiItem/qtiItem/core/PortableInfoControl',[\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiItem/mixin/CustomElement',\n    'taoQtiItem/qtiItem/helper/rendererConfig',\n    'lodash'\n], function(Element, CustomElement, rendererConfig, _){\n    \n    var PortableInfoControl = Element.extend({\n        qtiClass : 'infoControl',\n        defaultNsName : 'pic',\n        defaultNsUri : 'http://www.imsglobal.org/xsd/portableInfoControl',\n        defaultMarkupNsName : 'html5',\n        defaultMarkupNsUri : 'html5',\n        init : function(serial, attributes){\n\n            this._super(serial, attributes);\n\n            this.typeIdentifier = '';\n            this.markup = '';\n            this.properties = {};\n            this.libraries = [];\n            this.entryPoint = '';\n            \n            //note : if the uri is defined, it will be set the uri in the xml on xml serialization,\n            //which may trigger xsd validation, which is troublesome for html5 (use xhtml5 maybe ?)\n            this.markupNs = {};\n        },\n        is : function(qtiClass){\n            return (qtiClass === 'infoControl') || this._super(qtiClass);\n        },\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {\n                    typeIdentifier : this.typeIdentifier,\n                    markup : this.markup,\n                    properties : this.properties,\n                    libraries : this.libraries,\n                    entryPoint : this.entryPoint,\n                    ns : {\n                        pic : this.getNamespace().name + ':'\n                    }\n                };\n                \n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        },\n        toArray : function(){\n            var arr = this._super();\n            arr.markup = this.markup;\n            arr.properties = this.properties;\n            return arr;\n        }\n    });\n    \n    //add portable element standard functions\n    CustomElement.augment(PortableInfoControl);\n    \n    return PortableInfoControl;\n});\n","define('taoQtiItem/qtiCreator/model/PortableInfoControl',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/helper/portableElement',\n    'taoQtiItem/qtiCreator/editor/infoControlRegistry',\n    'taoQtiItem/qtiItem/core/PortableInfoControl'\n], function(_, editable, portableElement, icRegistry, PortableInfoControl){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, portableElement.getDefaultMethods(icRegistry));\n    _.extend(methods, {\n        getDefaultMarkupTemplateData : function(){\n            return {};\n        }\n    });\n\n    return PortableInfoControl.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/RubricBlock',['taoQtiItem/qtiItem/core/Element', 'taoQtiItem/qtiItem/mixin/Container'], function(Element, Container){\n\n    var RubricBlock = Element.extend({\n        qtiClass : 'rubricBlock'\n    });\n    \n    Container.augment(RubricBlock);\n    \n    return RubricBlock;\n});\n","define('taoQtiItem/qtiCreator/model/RubricBlock',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/RubricBlock'\n], function(_, editable, RubricBlock){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'view' : ['candidate'],\n                'use' : ''\n            };\n        }\n    });\n    return RubricBlock.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/choices/Choice',['taoQtiItem/qtiItem/core/IdentifiedElement'], function(IdentifiedElement){\n\n    var Choice = IdentifiedElement.extend({\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n        },\n        is : function(qtiClass){\n            return (qtiClass === 'choice') || this._super(qtiClass);\n        },\n        getInteraction : function(){\n            var found, ret = null, item = this.getRelatedItem();\n            if(item){\n                found = item.find(this.serial);\n                if(found){\n                    ret = found.parent;\n                }\n            }\n            return ret;\n        }\n    });\n\n    return Choice;\n});\n","define('taoQtiItem/qtiItem/core/choices/Hotspot',['taoQtiItem/qtiItem/core/choices/Choice'], function(QtiChoice){\n    var QtiHotspot = QtiChoice.extend({});\n    return QtiHotspot;\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/choices/AssociableHotspot',['taoQtiItem/qtiItem/core/choices/Hotspot'], function(QtiHotspot){\n    var QtiAssociableHotspot = QtiHotspot.extend({\n        qtiClass : 'associableHotspot'\n    });\n    return QtiAssociableHotspot;\n});\n\n\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/model/choices/AssociableHotspot',[\n    'lodash', \n    'taoQtiItem/qtiCreator/model/mixin/editable', \n    'taoQtiItem/qtiItem/core/choices/AssociableHotspot'\n], function(_, editable, Choice){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        \n        /**\n         * Set the default values for the model\n         * @returns {Object} the default attributes \n         */ \n        getDefaultAttributes : function(){\n            return {\n               matchMax : 0,\n               matchMin : 0 \n            };\n        }\n    });\n    return Choice.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/choices/Gap',['taoQtiItem/qtiItem/core/choices/Choice'], function(QtiChoice){\n    var QtiGap = QtiChoice.extend({\n        qtiClass : 'gap'\n    });\n    return QtiGap;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/choices/Gap',[\n    'lodash', \n    'taoQtiItem/qtiCreator/model/mixin/editable', \n    'taoQtiItem/qtiItem/core/choices/Gap'\n], function(_, editable, Gap){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n               required : false\n            };\n        }\n    });\n    return Gap.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/choices/GapImg',['taoQtiItem/qtiItem/core/choices/Choice', 'taoQtiItem/qtiItem/core/Object'], function(QtiChoice, QtiObject){\n    var QtiGapImg = QtiChoice.extend({\n        qtiClass : 'gapImg',\n        //common methods to object containers (start)\n        initObject : function(object){\n            this.object = object || new QtiObject();\n        },\n        getObject : function(){\n            return this.object;\n        }\n        //common methods to object containers (end)\n    });\n    return QtiGapImg;\n});\n\n\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/model/choices/GapImg',[\n    'lodash', \n    'taoQtiItem/qtiCreator/model/mixin/editable', \n    'taoQtiItem/qtiItem/core/choices/GapImg'\n], function(_, editable, Choice){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        \n        /**\n         * Set the default values for the model\n         * @returns {Object} the default attributes \n         */ \n        getDefaultAttributes : function(){\n            return {\n                matchMin : 0,\n                matchMax : 0  \n            };\n        }\n    });\n    return Choice.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/choices/TextVariableChoice',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiItem/core/choices/Choice',\n    'taoQtiItem/qtiItem/helper/rendererConfig'\n], function($, _, QtiChoice, rendererConfig){\n\n    var QtiTextVariableChoice = QtiChoice.extend({\n        init : function(serial, attributes, text){\n            this._super(serial, attributes);\n            this.val(text || '');\n        },\n        is : function(qtiClass){\n            return (qtiClass === 'textVariableChoice') || this._super(qtiClass);\n        },\n        val : function(text){\n            if(typeof text === 'undefined'){\n                return this.text;\n            }else{\n                if(typeof text === 'string'){\n                    this.text = text;\n                    $(document).trigger('choiceTextChange', {\n                        choice: this,\n                        text: text\n                    });\n                }else{\n                    throw 'text must be a string';\n                }\n            }\n            return this;\n        },\n        render : function(){\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer||this.getRenderer(),\n                defaultData = {\n                    body : this.text\n                };\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        }\n    });\n\n    return QtiTextVariableChoice;\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/choices/GapText',['taoQtiItem/qtiItem/core/choices/TextVariableChoice'], function(QtiTextVariableChoice){\n    var QtiGapText = QtiTextVariableChoice.extend({\n        qtiClass : 'gapText'\n    });\n    return QtiGapText;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/choices/GapText',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/choices/GapText'\n], function(_, editable, Choice){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                fixed : false,\n                matchMax : 1,\n                matchMin : 0\n            };\n        }\n    });\n    return Choice.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/choices/HotspotChoice',['taoQtiItem/qtiItem/core/choices/Hotspot'], function(QtiHotspot){\n    var QtiHotspotChoice = QtiHotspot.extend({\n        qtiClass : 'hotspotChoice'\n    });\n    return QtiHotspotChoice;\n});\n\n\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/model/choices/HotspotChoice',[\n    'lodash', \n    'taoQtiItem/qtiCreator/model/mixin/editable', \n    'taoQtiItem/qtiItem/core/choices/HotspotChoice'\n], function(_, editable, Choice){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        \n        /**\n         * Set the default values for the model\n         * @returns {Object} the default attributes \n         */ \n        getDefaultAttributes : function(){\n            return {};\n        }\n    });\n    return Choice.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/mixin/ContainerInline',['taoQtiItem/qtiItem/mixin/Mixin', 'taoQtiItem/qtiItem/mixin/Container', 'lodash'], function(Mixin, Container, _){\n    \n    var methods = {};\n    _.extend(methods, Container.methods);\n    _.extend(methods, {\n        initContainer:function(body){\n            Container.methods.initContainer.call(this, body);\n            this.bdy.contentModel = 'inlineStatic';\n        }\n    });\n\n    return {\n        augment : function(targetClass){\n            Mixin.augment(targetClass, methods);\n        },\n        methods : methods\n    };\n});\n","define('taoQtiItem/qtiItem/core/choices/Hottext',['taoQtiItem/qtiItem/core/choices/Choice', 'taoQtiItem/qtiItem/mixin/ContainerInline'], function(Choice, Container){\n    \n    var Hottext = Choice.extend({\n        qtiClass : 'hottext'\n    });\n    \n    Container.augment(Hottext);\n    \n    return Hottext;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/choices/Hottext',[\n    'lodash', \n    'taoQtiItem/qtiCreator/model/mixin/editable', \n    'taoQtiItem/qtiItem/core/choices/Hottext'\n], function(_, editable, Choice){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n               fixed : false\n            };\n        }\n    });\n    return Choice.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/choices/InlineChoice',['taoQtiItem/qtiItem/core/choices/TextVariableChoice'], function(QtiTextVariableChoice){\n    var QtiInlineChoice = QtiTextVariableChoice.extend({\n        qtiClass : 'inlineChoice'\n    });\n    return QtiInlineChoice;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/choices/InlineChoice',['lodash', 'taoQtiItem/qtiCreator/model/mixin/editable', 'taoQtiItem/qtiItem/core/choices/InlineChoice'], function(_, editable, Choice){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'fixed' : false,\n                'showHide' : 'show'\n            };\n        }\n    });\n    return Choice.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/choices/ContainerChoice',['taoQtiItem/qtiItem/core/choices/Choice', 'taoQtiItem/qtiItem/mixin/Container'], function(Choice, Container){\n\n    var ContainerChoice = Choice.extend({\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n        },\n        is : function(qtiClass){\n            return (qtiClass === 'containerChoice') || this._super(qtiClass);\n        }\n    });\n    \n    Container.augment(ContainerChoice);\n    \n    return ContainerChoice;\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice',['taoQtiItem/qtiItem/core/choices/ContainerChoice'], function(QtiContainerChoice){\n\n    var QtiSimpleAssociableChoice = QtiContainerChoice.extend({\n        qtiClass : 'simpleAssociableChoice'\n    });\n    \n    return QtiSimpleAssociableChoice;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/choices/SimpleAssociableChoice',['lodash', 'taoQtiItem/qtiCreator/model/mixin/editable', 'taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice'], function(_, editable, Choice){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'fixed' : false,\n                'showHide' : 'show',\n                'matchMax' : 0,\n                'matchMin' : 0\n            };\n        }\n    });\n    return Choice.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/choices/SimpleChoice',['taoQtiItem/qtiItem/core/choices/ContainerChoice'], function(QtiContainerChoice){\n\n    var QtiSimpleChoice = QtiContainerChoice.extend({\n        qtiClass : 'simpleChoice'\n    });\n\n    return QtiSimpleChoice;\n\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/choices/SimpleChoice',['lodash', 'taoQtiItem/qtiCreator/model/mixin/editable', 'taoQtiItem/qtiItem/core/choices/SimpleChoice'], function(_, editable, Choice){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'fixed' : false,\n                'showHide' : 'show'\n            };\n        }\n    });\n    return Choice.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/helper/response',['lodash'], function(_){\n    \"use strict\";\n    return {\n        removeChoice : function(response, choice){\n\n            var escapedIdentifier = choice.id().replace(/([.-])/g, '\\\\$1'),\n                regex = new RegExp('([^a-z_\\-\\d\\.]*)(' + escapedIdentifier + ')([^a-z_\\-\\d\\.]*)');\n            \n            _.remove(response.correctResponse, function(entry){\n                return entry.match(regex);\n            });\n            \n            var mapEntries = {};\n            _.forIn(response.mapEntries, function(value, mapKey){\n                if(!mapKey.match(regex)){\n                    mapEntries[mapKey] = value;\n                }\n            });\n            response.mapEntries = mapEntries;\n\n        }\n    };\n});\n","define('taoQtiItem/qtiItem/core/variables/ResponseDeclaration',['taoQtiItem/qtiItem/core/variables/VariableDeclaration', 'lodash'], function(VariableDeclaration, _){\n\n    var ResponseDeclaration = VariableDeclaration.extend({\n        qtiClass : 'responseDeclaration',\n        init : function(serial, attributes){\n\n            this._super(serial, attributes);\n\n            //MATCH_CORRECT, MAP_RESPONSE, MAP_RESPONSE_POINT\n            this.template = '';//previously called 'howMatch'\n\n            //when template equals ont of the \"map\" one (MAP_RESPONSE, MAP_RESPONSE_POINT)\n            this.mappingAttributes = {};\n            this.mapEntries = {};\n\n            //correct response [0..*]\n            this.correctResponse = null;\n\n            //tao internal usage:\n            this.feedbackRules = {};\n        },\n        getFeedbackRules : function(){\n            return [];\n        },\n        getComposingElements : function(){\n            var elts = this._super();\n            elts = _.extend(elts, this.getFeedbackRules());\n            return elts;\n        },\n        toArray : function(){\n            var arr = this._super();\n            arr.howMatch = this.template;\n            arr.correctResponses = this.correctResponse;\n            arr.mapping = this.mapEntries;\n            arr.mappingAttributes = this.mappingAttributes;\n            return arr;\n        }\n    });\n\n    return ResponseDeclaration;\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/response/SimpleFeedbackRule',['taoQtiItem/qtiItem/core/Element'], function(Element){\n\n    var SimpleFeedbackRule = Element.extend({\n        qtiClass : '_simpleFeedbackRule',\n        serial : '',\n        relatedItem : null,\n        init : function(serial, feedbackOutcome, feedbackThen, feedbackElse){\n\n            this._super(serial, {});\n\n            this.condition = 'correct';\n            this.comparedOutcome = null;\n            this.comparedValue = 0.0;\n\n            this.feedbackOutcome = feedbackOutcome;\n            if(Element.isA(feedbackThen, 'feedback')){\n                this.feedbackThen = feedbackThen;\n            }else{\n                this.feedbackThen = null;\n            }\n            if(Element.isA(feedbackElse, 'feedback')){\n                this.feedbackElse = feedbackThen;\n            }else{\n                this.feedbackElse = null;\n            }\n\n        },\n        setCondition : function(comparedOutcome, condition, comparedValue){\n\n            if(Element.isA(comparedOutcome, 'variableDeclaration')){\n                switch(condition){\n                    case 'correct':\n                    case 'incorrect':\n                        if(Element.isA(comparedOutcome, 'responseDeclaration')){\n                            this.comparedOutcome = comparedOutcome;\n                            this.condition = condition;\n                        }else{\n                            throw 'invalid outcome type: must be a responseDeclaration';\n                        }\n                        break;\n                    case 'lt':\n                    case 'lte':\n                    case 'equal':\n                    case 'gte':\n                    case 'gt':\n                        if(comparedValue !== null && comparedValue !== undefined){\n                            this.comparedOutcome = comparedOutcome;\n                            this.condition = condition;\n                            this.comparedValue = comparedValue;\n                        }else{\n                            throw 'compared value must not be null';\n                        }\n                        break;\n                    default:\n                        throw 'unknown condition type : '.condition;\n                }\n            }else{\n                throw 'invalid outcome type: must be a variableDeclaration';\n            }\n\n            return this;\n        },\n        setFeedbackElse : function(feedback){\n            if(Element.isA(feedback, 'feedback')){\n                this.feedbackElse = feedback;\n            }\n        }\n    });\n\n    return SimpleFeedbackRule;\n});\n","define('taoQtiItem/qtiItem/helper/response',['lodash'], function(_){\n    \n   var _templateNames = {\n        'MATCH_CORRECT' : 'http://www.imsglobal.org/question/qti_v2p1/rptemplates/match_correct',\n        'MAP_RESPONSE' : 'http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response',\n        'MAP_RESPONSE_POINT' : 'http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response_point'\n    };\n    \n   return {\n       isUsingTemplate : function(response, tpl){\n            if(_.isString(tpl)){\n                if(tpl === response.template || _templateNames[tpl] === response.template){\n                    return true;\n                }\n            }\n            return false;\n        },\n        isValidTemplateName:function(tplName){\n            return !!this.getTemplateUriFromName(tplName);\n        },\n        getTemplateUriFromName:function(tplName){\n            if(_templateNames[tplName]){\n                return _templateNames[tplName];\n            }\n            return '';\n        },\n        getTemplateNameFromUri:function(tplUri){\n            var tplName = '';\n            _.forIn(_templateNames, function(uri, name){\n                if(uri === tplUri){\n                    tplName = name;\n                    return false;\n                }\n            });\n            return tplName;\n        }\n   };\n});\n","define('taoQtiItem/qtiCreator/model/variables/ResponseDeclaration',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiItem/core/variables/ResponseDeclaration',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/response/SimpleFeedbackRule',\n    'taoQtiItem/qtiItem/helper/response'\n], function($, _, Element, ResponseDeclaration, editable, SimpleFeedbackRule, responseHelper){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        setTemplate : function(template){\n            var templateUri = responseHelper.getTemplateUriFromName(template);\n            if(templateUri && this.template !== templateUri){\n                this.template = templateUri;\n                $(document).trigger('responseTemplateChange.qti-widget', {'element' : this, 'value' : template});\n            }\n            return this;\n        },\n        getTemplate : function(){\n            return this.template;\n        },\n        resetCorrect : function(){\n            this.correctResponse = null;\n            $(document).trigger('correctResponseChange.qti-widget', {'element' : this, 'value' : null});\n            return this;\n        },\n        setCorrect : function(value){\n            if(_.isString(value)){\n                value = [value];\n            }\n            this.correctResponse = value;\n            $(document).trigger('correctResponseChange.qti-widget', {'element' : this, 'value' : value});\n            return this;\n        },\n        getCorrect : function(){\n            return _.clone(this.correctResponse);\n        },\n        setMappingAttribute : function(name, value){\n            this.mappingAttributes[name] = value;\n            $(document).trigger('mappingAttributeChange.qti-widget', {'element' : this, 'key' : name, 'value' : value});\n        },\n        removeMappingAttribute : function(name){\n            delete this.mappingAttributes[name];\n            $(document).trigger('mappingAttributeChange.qti-widget', {'element' : this, 'key' : name, 'value' : null});\n        },\n        getMappingAttribute : function(name){\n            return this.mappingAttributes[name];\n        },\n        setMapEntry : function(mapKey, mappedValue, caseSensitive){\n\n            mappedValue = parseFloat(mappedValue);\n            caseSensitive = caseSensitive ? true : false;\n\n            if(!isNaN(mappedValue)){\n                if(this.attr('cardinality') === 'multiple' && this.attr('baseType') === 'pair'){\n                    //in this case, A-B is equivalent to B-A so need to check if any of those conbination already exists:\n\n                    var mapKeys = mapKey.split(' '),\n                        mapKeysReverse = mapKeys[1] + ' ' + mapKeys[0];\n\n                    if(this.mapEntries[mapKeysReverse]){\n                        this.mapEntries[mapKeysReverse] = mappedValue;\n                    }else{\n                        this.mapEntries[mapKey] = mappedValue;\n                    }\n                }else{\n                    this.mapEntries[mapKey] = mappedValue;\n                }\n\n                /**\n                 * @todo caseSensitive is always set to \"false\" currently, need to add an option for this\n                 * this.mapEntries[mapKey] = {\n                 'mappedValue' : mappedValue,\n                 'caseSensitive' : caseSensitive\n                 };\n                 */\n\n                $(document).trigger('mapEntryChange.qti-widget', {\n                    element : this,\n                    mapKey : mapKey,\n                    mappedValue : mappedValue,\n                    caseSensitive : caseSensitive\n                });\n            }else{\n                throw 'the mapped value is not a number';\n            }\n\n            return this;\n        },\n        removeMapEntry : function(mapKey, canBeEmpty){\n            //is there a opportunity mapKey to be empty string\n            if(typeof canBeEmpty == 'undefined'){\n                canBeEmpty = false;\n            }\n\n            if(mapKey || canBeEmpty){\n                if(this.attr('cardinality') === 'multiple' && this.attr('baseType') === 'pair'){\n                    //in this case, A-B is equivalent to B-A so need to check if any of those conbination already exists:\n                    var mapKeys = mapKey.split(' '),\n                        mapKeysReverse = mapKeys[1] + ' ' + mapKeys[0];\n\n                    delete this.mapEntries[mapKeysReverse];\n                }\n                delete this.mapEntries[mapKey];\n\n                $(document).trigger('mapEntryRemove.qti-widget', {element : this, mapKey : mapKey});\n            }\n\n            return this;\n        },\n        getMapEntries : function(){\n            return _.clone(this.mapEntries);\n        },\n        removeMapEntries : function(){\n            _(this.mapEntries).keys().forEach(this.removeMapEntry, this);\n        },\n        createFeedbackRule : function(){\n\n            var item = this.getRelatedItem();\n\n            var outcome = item.createOutcomeDeclaration({\n                identifier : 'FEEDBACK',\n                cardinality : 'single',\n                baseType : 'identifier'\n            });\n\n            var modalFeedback = item.createModalFeedback({\n                identifier : 'feedbackModal',\n                outcomeIdentifier : outcome.id()\n            });\n\n            var rule = new SimpleFeedbackRule('', outcome, modalFeedback);\n\n            rule.setCondition(this, 'correct');\n            this.feedbackRules[rule.getSerial()] = rule;\n\n            //set renderer\n            var renderer = this.getRenderer();\n            if(renderer){\n                rule.setRenderer(renderer);\n                modalFeedback.setRenderer(renderer);\n            }\n\n            //trigger creation event\n            $(document).trigger('feedbackRuleCreated.qti-widget', {element : this, rule : rule});\n\n            return rule;\n        },\n        getFeedbackRule : function(serial){\n            return this.feedbackRules[serial];\n        },\n        getFeedbackRules : function(){\n            return _.clone(this.feedbackRules);\n        },\n        setCondition : function(rule, condition, value){\n            rule.setCondition(this, condition, value);\n            $(document).trigger('feedbackRuleConditionChange.qti-widget', {element : this, rule : rule, condition : condition, value : value});\n        },\n        deleteFeedbackRule : function(rule){\n\n            var item = this.getRelatedItem(), ret;\n\n            item.remove('outcomes', rule.feedbackOutcome);\n            item.remove('modalFeedbacks', rule.feedbackThen);\n            item.remove('modalFeedbacks', rule.feedbackElse || '');//feedback \"else\" is optional\n\n            ret = this.remove('feedbackRules', rule);\n\n            $(document).trigger('feedbackRuleRemoved.qti-widget', {element : this, rule : rule});\n\n            return ret;\n        },\n        createFeedbackElse : function(rule){\n\n            var modalFeedback;\n\n            if(Element.isA(rule, '_simpleFeedbackRule')){\n\n                modalFeedback = this.getRelatedItem().createModalFeedback({\n                    identifier : 'feedbackModal',\n                    outcomeIdentifier : rule.feedbackOutcome.id()\n                });\n\n                rule.setFeedbackElse(modalFeedback);\n\n                //set renderer\n                var renderer = this.getRenderer();\n                if(renderer){\n                    modalFeedback.setRenderer(renderer);\n                }\n\n                $(document).trigger('feedbackRuleElseCreated.qti-widget', {element : this, rule : rule, modalFeedback : modalFeedback});\n            }\n\n            return modalFeedback;\n        },\n        deleteFeedbackElse : function(rule){\n\n            this.getRelatedItem().remove('modalFeedbacks', rule.feedbackElse);\n            rule.feedbackElse = null;\n\n            $(document).trigger('feedbackRuleElseRemoved.qti-widget', {element : this, rule : rule});\n        },\n        getDefaultAttributes : function(){\n            return {};\n        }\n    });\n\n    return ResponseDeclaration.extend(methods);\n});\n\n","define('taoQtiItem/qtiCreator/model/mixin/editableInteraction',[\n    'lodash',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/model/variables/ResponseDeclaration',\n    'taoQtiItem/qtiCreator/model/helper/event',\n    'taoQtiItem/qtiCreator/model/helper/response'\n], function(_, Element, ResponseDeclaration, event, responseHelper){\n    \"use strict\";\n    var methods = {\n        /**\n         * Remove a choice from the interaction\n         * \n         * @param {string|choice} choice\n         * @returns {object} this\n         */\n        removeChoice : function(choice){\n\n            var serial = '', c;\n            if(typeof(choice) === 'string'){\n                serial = choice;\n            }else if(Element.isA(choice, 'choice')){\n                serial = choice.getSerial();\n            }\n            if(this.choices[serial]){\n\n                //remove choice\n                c = this.choices[serial];\n                delete this.choices[serial];\n\n                //update the response\n                responseHelper.removeChoice(this.getResponseDeclaration(), c);\n\n                //trigger event\n                event.deleted(c, this);\n            }\n            return this;\n        },\n        createResponse : function(attrs, template){\n\n            var response = new ResponseDeclaration();\n            if(attrs){\n                response.attr(attrs);\n            }\n\n            //we assume in the context of edition, every element is created from the api so alwayd bound to an item:\n            this.getRelatedItem().addResponseDeclaration(response);\n\n            //assign responseIdentifier only after attaching it to the item to generate a unique id\n            response.buildIdentifier('RESPONSE', false);\n            response.setTemplate(template || 'MATCH_CORRECT');\n            this.attr('responseIdentifier', response.id());\n    \n            //se the default value for the score default value\n            response.mappingAttributes.defaultValue = 0;\n\n            //set renderer\n            var renderer = this.getRenderer();\n            if(renderer){\n                response.setRenderer(renderer);\n            }\n\n            return response;\n        },\n        /**\n         * To be called before deleting the interaction\n         */\n        deleteResponse : function(){\n\n            var response = this.getResponseDeclaration();\n            if(response){\n                this.getRelatedItem().deleteResponseDeclaration(response);\n            }\n            this.removeAttr('responseIdentifier');\n            return this;\n        },\n        beforeRemove : function(){\n            \n            var serial = this.serial,\n                interactions = this.getRelatedItem().getInteractions();\n            \n            //delete its reponse\n            this.deleteResponse();\n            \n            //when there is only one interaction remaining, its reponseIdentifier must be RESPONSE to be able to use one of the standard rp\n            if(_.size(interactions) === 2){\n                _.each(interactions, function(interaction){\n                    \n                    //find the other interaction, which will be the last remaining one\n                    if(interaction.serial !== serial && interaction.qtiClass !== 'endAttemptInteraction'){\n                        \n                        var response = interaction.getResponseDeclaration();\n                        interaction.attr('responseIdentifier', 'RESPONSE');\n                        response.id('RESPONSE');\n                    }\n                });\n            }\n        }\n    };\n\n    return methods;\n});\n\n","define('taoQtiItem/qtiItem/core/interactions/Interaction',[\n    'taoQtiItem/qtiItem/core/Element', \n    'lodash', \n    'taoQtiItem/qtiItem/helper/rendererConfig',\n    'taoQtiItem/qtiItem/helper/util'\n], function(Element, _, rendererConfig, util){\n\n    var QtiInteraction = Element.extend({\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n            this.choices = {};\n        },\n        is : function(qtiClass){\n            return (qtiClass === 'interaction') || this._super(qtiClass);\n        },\n        addChoice : function(choice){\n            choice.setRelatedItem(this.getRelatedItem() || null);\n            this.choices[choice.getSerial()] = choice;\n            return this;\n        },\n        getChoices : function(){\n            var choices = {};\n            for(var i in this.choices){//prevent passing the whole array by ref\n                choices[i] = this.choices[i];\n            }\n            return choices;\n        },\n        getChoice : function(serial){\n            var ret = null;\n            if(this.choices[serial]){\n                ret = this.choices[serial];\n            }\n            return ret;\n        },\n        getChoiceByIdentifier : function(identifier){\n            for(var i in this.choices){\n                if(this.choices[i].id() === identifier){\n                    return this.choices[i];\n                }\n            }\n            return null;\n        },\n        getComposingElements : function(){\n            var elts = this._super();\n            //recursive to choices:\n            for(var serial in this.choices){\n                if(Element.isA(this.choices[serial], 'choice')){\n                    elts[serial] = this.choices[serial];\n                    elts = _.extend(elts, this.choices[serial].getComposingElements());\n                }\n            }\n            return elts;\n        },\n        find : function(serial){\n            var found = this._super(serial);\n            if(!found){\n                found = util.findInCollection(this, 'choices', serial);\n            }\n            return found;\n        },\n        getResponseDeclaration : function(){\n            var response = null;\n            var responseId = this.attr('responseIdentifier');\n            if(responseId){\n                var item = this.getRelatedItem();\n                if(item){\n                    response = item.getResponseDeclaration(responseId);\n                }else{\n                    throw 'cannot get response of an interaction out of its item context';\n                }\n            }\n            return response;\n        },\n        /**\n         * Render the interaction to the view.\n         * The optional argument \"subClass\" allows distinguishing customInteraction: e.g. customInteraction.matrix, customInteraction.likertScale ...\n         */\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {\n                    '_type' : this.qtiClass.replace(/([A-Z])/g, function($1){\n                        return \"_\" + $1.toLowerCase();\n                    }),\n                    'choices' : [],\n                    'choiceShuffle' : true\n                };\n\n            if(!renderer){\n                throw 'no renderer found for the interaction ' + this.qtiClass;\n            }\n            \n            var choices = (this.attr('shuffle') && renderer.shuffleChoices) ? renderer.getShuffledChoices(this) : this.getChoices();\n            var interactionData = {'interaction' : {'serial' : this.serial, 'attributes' : this.attributes}};\n            var _this = this;\n            _.each(choices, function(choice){\n                if(Element.isA(choice, 'choice')){\n                    try{\n                        var renderedChoice = choice.render(_.clone(interactionData, true), null, choice.qtiClass + '.' + _this.qtiClass, renderer); //use interaction type as choice subclass\n                        defaultData.choices.push(renderedChoice);\n                    }catch(e){\n                        //leave choices empty in case of error\n                    }\n                }\n            });\n            \n            var tplName = args.subclass ? this.qtiClass + '.' + args.subclass : this.qtiClass;\n            \n            return this._super(_.merge(defaultData, args.data), args.placeholder, tplName, renderer);\n        },\n        postRender : function(data, altClassName, renderer){\n\n            renderer = renderer || this.getRenderer();\n\n            var choices = this.getChoices();\n            for(var i in choices){\n                var c = choices[i];\n                if(Element.isA(c, 'choice')){\n                    c.postRender({}, c.qtiClass + '.' + this.qtiClass, renderer);\n                }\n            }\n            return this._super(data, altClassName, renderer);\n        },\n        setResponse : function(values){\n            var ret = null;\n            var renderer = this.getRenderer();\n            if(renderer){\n                ret = renderer.setResponse(this, values);\n            }else{\n                throw 'no renderer found for the interaction ' + this.qtiClass;\n            }\n            return ret;\n        },\n        getResponse : function(){\n            var ret = null;\n            var renderer = this.getRenderer();\n            if(renderer){\n                ret = renderer.getResponse(this);\n            }else{\n                throw 'no renderer found for the interaction ' + this.qtiClass;\n            }\n            return ret;\n        },\n        resetResponse : function(){\n            var ret = null;\n            var renderer = this.getRenderer();\n            if(renderer){\n                ret = renderer.resetResponse(this);\n            }else{\n                throw 'no renderer found for the interaction ' + this.qtiClass;\n            }\n            return ret;\n        },\n\n        /**\n         * Retrieve the state of the interaction. \n         * The state is provided by the interaction's renderer.\n         * \n         * @returns {Object} the interaction's state\n         * @throws {Error} if no renderer is found \n         */\n        getState : function(){\n            var ret = null;\n            var renderer = this.getRenderer();\n            if(renderer){\n                if(_.isFunction(renderer.getState)){\n                    ret = renderer.getState(this);\n                }\n            }else{\n                throw 'no renderer found for the interaction ' + this.qtiClass;\n            }\n            return ret;\n        },\n\n        /**\n         * Retrieve the state of the interaction. \n         * The state will be given to the interaction's renderer.\n         * \n         * @param {Object} state - the interaction's state\n         * @throws {Error} if no renderer is found \n         */\n        setState : function(state){\n            var renderer = this.getRenderer();\n            if(renderer){\n                if(_.isFunction(renderer.setState)){\n                    renderer.setState(this, state);\n                }\n            }else{\n                throw 'no renderer found for the interaction ' + this.qtiClass;\n            }\n        },\n\n        /**\n         * Clean up an interaction rendering.\n         * Ask the renderer to run destroy if exists.\n         * \n         * @throws {Error} if no renderer is found \n         */\n        clear : function(){\n            var renderer = this.getRenderer();\n            if(renderer){\n                if(_.isFunction(renderer.destroy)){\n                    renderer.destroy(this);\n                }\n            }else{\n                throw 'no renderer found for the interaction ' + this.qtiClass;\n            }\n        },\n\n        toArray : function(){\n            var arr = this._super();\n            arr.choices = {};\n            for(var serial in this.choices){\n                if(Element.isA(this.choices[serial], 'choice')){\n                    arr.choices[serial] = this.choices[serial].toArray();\n                }\n            }\n            return arr;\n        }\n    });\n    return QtiInteraction;\n});\n\n","define('taoQtiItem/qtiItem/core/interactions/Prompt',['taoQtiItem/qtiItem/core/Element', 'taoQtiItem/qtiItem/mixin/ContainerInline'], function(Element, Container){\n    var Prompt = Element.extend({qtiClass : 'prompt'});\n    Container.augment(Prompt);\n    return Prompt;\n});\n","define('taoQtiItem/qtiItem/core/interactions/BlockInteraction',[\n    'taoQtiItem/qtiItem/core/interactions/Interaction',\n    'taoQtiItem/qtiItem/core/interactions/Prompt', \n    'lodash',\n    'taoQtiItem/qtiItem/helper/rendererConfig'\n], function(Interaction, Prompt, _, rendererConfig){\n\n    var BlockInteraction = Interaction.extend({\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n            this.prompt = new Prompt('');\n        },\n        is : function(qtiClass){\n            return (qtiClass === 'blockInteraction') || this._super(qtiClass);\n        },\n        getComposingElements : function(){\n            var elts = this._super();\n            elts = _.extend(elts, this.prompt.getComposingElements());\n            elts[this.prompt.getSerial()] = this.prompt;\n            return elts;\n        },\n        find : function(serial){\n            return this._super(serial) || this.prompt.find(serial);\n        },\n        render : function(){\n            \n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {\n                    'prompt' : this.prompt.render(renderer)\n                };\n            \n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        },\n        postRender : function(data, altClassName, renderer){\n            renderer = renderer || this.getRenderer();\n            this.prompt.postRender({}, '', renderer);\n            return this._super(data, altClassName, renderer);\n        },\n        toArray : function(){\n            var arr = this._super();\n            arr.prompt = this.prompt.toArray();\n            return arr;\n        }\n    });\n    return BlockInteraction;\n});\n\n\n","define('taoQtiItem/qtiItem/core/interactions/AssociateInteraction',['taoQtiItem/qtiItem/core/interactions/BlockInteraction'], function(BlockInteraction){\n    var AssociateInteraction = BlockInteraction.extend({\n        qtiClass : 'associateInteraction'\n    });\n    return AssociateInteraction;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/AssociateInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/AssociateInteraction',\n    'taoQtiItem/qtiCreator/model/choices/SimpleAssociableChoice'\n], function($, _, editable, editableInteraction, Interaction, Choice){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'shuffle' : false,\n                'maxAssociations' : 0,\n                'minAssociations' : 0\n            };\n        },\n        afterCreate : function(){\n            this.createChoice();\n            this.createChoice();\n            this.createResponse({\n                baseType:'pair',\n                cardinality:'multiple'\n            });\n        },\n        createChoice : function(){\n            var choice = new Choice();\n\n            this.addChoice(choice);\n\n            var rank = _.size(this.getChoices());\n\n            choice\n                .body('choice' + ' #' + rank)\n                .buildIdentifier('choice');\n\n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n\n            $(document).trigger('choiceCreated.qti-widget', {'choice' : choice, 'interaction' : this});\n\n            return choice;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/ChoiceInteraction',['taoQtiItem/qtiItem/core/interactions/BlockInteraction'], function(BlockInteraction){\n    var ChoiceInteraction = BlockInteraction.extend({\n        qtiClass : 'choiceInteraction'\n    });\n    return ChoiceInteraction;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/ChoiceInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/ChoiceInteraction',\n    'taoQtiItem/qtiCreator/model/choices/SimpleChoice'\n], function($, _, editable, editableInteraction, Interaction, Choice){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'shuffle' : false,\n                'maxChoices' : 0,\n                'minChoices' : 0,\n                'orientation' : 'vertical'\n            };\n        },\n        afterCreate : function(){\n            this.createChoice();\n            this.createChoice();\n            this.createChoice();\n            this.createResponse({\n                baseType:'identifier',\n                cardinality:'multiple'\n            });\n        },\n        createChoice : function(){\n            var choice = new Choice();\n\n            this.addChoice(choice);\n\n            var rank = _.size(this.getChoices());\n\n            choice\n                .body('choice' + ' #' + rank)\n                .buildIdentifier('choice');\n\n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n\n            $(document).trigger('choiceCreated.qti-widget', {'choice' : choice, 'interaction' : this});\n\n            return choice;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/InlineInteraction',['taoQtiItem/qtiItem/core/interactions/Interaction'], function(Interaction){\n    return Interaction.extend({});\n});\n\n\n","define('taoQtiItem/qtiItem/core/interactions/EndAttemptInteraction',['taoQtiItem/qtiItem/core/interactions/InlineInteraction'], function(InlineInteraction){\n    return InlineInteraction.extend({\n        'qtiClass' : 'endAttemptInteraction'\n    });\n});\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/EndAttemptInteraction',[\r\n    'lodash',\r\n    'taoQtiItem/qtiCreator/model/mixin/editable',\r\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\r\n    'taoQtiItem/qtiItem/core/interactions/EndAttemptInteraction',\r\n    'i18n'\r\n], function(_, editable, editableInteraction, Interaction, __){\r\n    \"use strict\";\r\n    var methods = {};\r\n    _.extend(methods, editable);\r\n    _.extend(methods, editableInteraction);\r\n    _.extend(methods, {\r\n        getDefaultAttributes : function(){\r\n            return {\r\n                title : __('End Attempt')\r\n            };\r\n        },\r\n        afterCreate : function(){\r\n            this.createResponse({\r\n                baseType:'boolean',\r\n                cardinality:'single'\r\n            });\r\n        },\r\n        createChoice : function(){\r\n            throw new Error('end attempt interaction has no choice');\r\n        }\r\n    });\r\n    return Interaction.extend(methods);\r\n});\n","define('taoQtiItem/qtiItem/core/interactions/ExtendedTextInteraction',['taoQtiItem/qtiItem/core/interactions/BlockInteraction', 'lodash', 'taoQtiItem/qtiItem/helper/rendererConfig'], function(BlockInteraction, _, rendererConfig){\n    \n    var ExtendedTextInteraction = BlockInteraction.extend({\n        qtiClass : 'extendedTextInteraction',\n        render : function(){\n            \n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {\n                    'multiple' : false,\n                    'maxStringLoop' : []\n                },\n                response = this.getResponseDeclaration();\n        \n            if(this.attr('maxStrings') && (response.attr('cardinality') === 'multiple' || response.attr('cardinality') === 'ordered')){\n                defaultData.multiple = true;\n                for(var i = 0; i < this.attr('maxStrings'); i++){\n                    defaultData.maxStringLoop.push(i + '');//need to convert to string. The tpl engine fails otherwise\n                }\n            }\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        }\n    });\n    \n    return ExtendedTextInteraction;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/ExtendedTextInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/ExtendedTextInteraction'\n], function(_, editable, editableInteraction, Interaction){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                format: 'plain'\n            };\n        },\n        afterCreate : function(){\n            this.createResponse({\n                baseType: 'string',\n                cardinality: 'single'\n            });\n        },\n        createChoice : function(){\n            throw \"extendedTextInteraction does not have any choices\";\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/ContainerInteraction',['taoQtiItem/qtiItem/core/interactions/BlockInteraction', 'taoQtiItem/qtiItem/mixin/Container'], function(BlockInteraction, Container){\n    var ContainerInteraction = BlockInteraction.extend({});\n    Container.augment(ContainerInteraction);\n    return ContainerInteraction;\n});\n","define('taoQtiItem/qtiItem/core/interactions/GapMatchInteraction',['taoQtiItem/qtiItem/core/interactions/ContainerInteraction'], function(ContainerInteraction){\n    var GapMatchInteraction = ContainerInteraction.extend({\n        qtiClass : 'gapMatchInteraction',\n        getGaps : function(){\n            return this.getBody().getElements('gap');\n        }\n    });\n    return GapMatchInteraction;\n});\n\n","define('taoQtiItem/qtiCreator/model/interactions/GapMatchInteraction',[\n    'lodash',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/GapMatchInteraction',\n    'taoQtiItem/qtiCreator/model/choices/GapText',\n    'taoQtiItem/qtiCreator/model/helper/event',\n    'taoQtiItem/qtiCreator/model/helper/response'\n], function(_, Element, editable, editableInteraction, Interaction, Choice, event, responseHelper){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                shuffle : false\n            };\n        },\n        afterCreate : function(){\n            this.body('<p>Lorem ipsum dolor sit amet, consectetur adipisicing ...</p>');\n            this.createChoice();//gapMatchInteraction requires at least one gapMatch to be valid http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10307\n            this.createResponse({\n                baseType : 'directedPair',\n                cardinality : 'multiple'\n            });\n        },\n        createChoice : function(text){\n        \n            var choice = new Choice();\n\n            this.addChoice(choice);\n\n            choice\n                .val(text || 'choice #' + _.size(this.getChoices()))\n                .buildIdentifier('choice');\n\n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n            \n            event.choiceCreated(choice, this);\n\n            return choice;\n        },\n        createGap : function(attr, body){\n\n            var choice = new Choice('', attr);\n\n            this.addChoice(choice);\n            choice.buildIdentifier('gap');\n            choice.body(body);\n\n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n\n            event.choiceCreated(choice, this);\n\n            return choice;\n        },\n        removeChoice : function(element){\n            var serial = '', c;\n            \n            if(typeof(element) === 'string'){\n                serial = element;\n            }else if(Element.isA(element, 'gap')){\n                serial = element.serial;\n            }else if(Element.isA(element, 'gapText')){\n                serial = element.serial;\n            }\n            \n            if(c = this.getBody().getElement(serial)){\n                //remove choice\n                this.getBody().removeElement(c);\n                \n                //update the response\n                responseHelper.removeChoice(this.getResponseDeclaration(), c);\n                \n                //trigger event\n                event.deleted(c, this);\n            }else if(c = this.getChoice(serial)){\n                //remove choice\n                delete this.choices[serial];\n                \n                //update the response\n                responseHelper.removeChoice(this.getResponseDeclaration(), c);\n                \n                //trigger event\n                event.deleted(c, this);\n            }\n            \n            return this;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/ObjectInteraction',['taoQtiItem/qtiItem/core/interactions/BlockInteraction', 'taoQtiItem/qtiItem/core/Object'], function(QtiBlockInteraction, QtiObject){\n    var QtiObjectInteraction = QtiBlockInteraction.extend({\n        //common methods to object containers (start)\n        initObject : function(object){\n            this.object = object || new QtiObject();\n        },\n        getObject : function(){\n            return this.object;\n        }\n        //common methods to object containers (end)\n    });\n    \n    return QtiObjectInteraction;\n});\n\n\n","define('taoQtiItem/qtiItem/core/interactions/GraphicInteraction',['taoQtiItem/qtiItem/core/interactions/ObjectInteraction', 'lodash', 'taoQtiItem/qtiItem/helper/rendererConfig'], function(QtiObjectInteraction, _, rendererConfig){\n    var QtiGraphicInteraction = QtiObjectInteraction.extend({\n        render : function(){\n            \n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {\n                    'backgroundImage' : this.object.getAttributes(),\n                    'object' : this.object.render(renderer)\n                };\n                \n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        }\n    });\n\n    return QtiGraphicInteraction;\n});\n\n\n","define('taoQtiItem/qtiItem/core/interactions/GraphicAssociateInteraction',['taoQtiItem/qtiItem/core/interactions/GraphicInteraction'], function(GraphicInteraction){\n    var GraphicAssociateInteraction = GraphicInteraction.extend({\n        qtiClass : 'graphicAssociateInteraction'\n    });\n    return GraphicAssociateInteraction;\n});\n\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/model/interactions/GraphicAssociateInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/GraphicAssociateInteraction',\n    'taoQtiItem/qtiCreator/model/choices/AssociableHotspot'\n], function($, _, editable, editableInteraction, Interaction, AssociableHotspot){\n    'use strict';\n\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        \n        /**\n         * Set the default values for the model\n         * @returns {Object} the default attributes \n         */ \n        getDefaultAttributes : function(){\n            return {\n                'maxAssociations' : 0,\n                'minAssociations' : 0\n            };\n        },\n\n        /**\n         * Once the interaction model is created, \n         * we set the responsivness and create a default response \n         */ \n        afterCreate : function(){\n            var relatedItem = this.getRelatedItem();\n            var isResponsive = relatedItem.data('responsive');\n\n            if(isResponsive === true){\n                this.addClass('responsive');\n            }\n            this.createResponse({\n                baseType:'pair',\n                cardinality:'multiple'\n            });\n        },\n\n\n        /**\n         * Create a choice for the interaction\n         * @param {Object} attr - the choice attributes\n         * @returns {Object} the created choice\n         */\n        createChoice : function(attr){\n            var choice = new AssociableHotspot('', attr);\n\n            this.addChoice(choice);\n            choice.buildIdentifier('associablehotspot');\n            \n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n            \n            $(document).trigger('choiceCreated.qti-widget', {'choice' : choice, 'interaction' : this});\n           \n            return choice;\n        }\n    });\n\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/GraphicGapMatchInteraction',['taoQtiItem/qtiItem/core/interactions/GraphicInteraction', 'taoQtiItem/qtiItem/core/Element', 'lodash', 'taoQtiItem/qtiItem/helper/rendererConfig'], function(GraphicInteraction, Element, _, rendererConfig){\n\n    var GraphicGapMatchInteraction = GraphicInteraction.extend({\n        qtiClass : 'graphicGapMatchInteraction',\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n            this.gapImgs = {};\n        },\n        addGapImg : function(gapImg){\n            if(Element.isA(gapImg, 'gapImg')){\n                gapImg.setRelatedItem(this.getRelatedItem() || null);\n                this.gapImgs[gapImg.getSerial()] = gapImg;\n            }\n        },\n        removeGapImg : function(gapImg){\n            var serial = '';\n            if(typeof(gapImg) === 'string'){\n                serial = gapImg;\n            }else if(Element.isA(gapImg, 'gapImg')){\n                serial = gapImg.getSerial();\n            }\n            delete this.gapImgs[serial];\n            return this;\n        },\n        getGapImgs : function(){\n            return _.clone(this.gapImgs);\n        },\n        getGapImg : function(serial){\n            return this.gapImgs[serial];\n        },\n        getComposingElements : function(){\n            var elts = this._super();\n            //recursive to choices:\n            for(var serial in this.gapImgs){\n                elts[serial] = this.gapImgs[serial];\n                elts = _.extend(elts, this.gapImgs[serial].getComposingElements());\n            }\n            return elts;\n        },\n        find : function(serial){\n            var found = this._super(serial);\n            if(!found){\n                if(this.gapImgs[serial]){\n                    found = {'parent' : this, 'element' : this.gapImgs[serial]};\n                }\n            }\n            return found;\n        },\n        render : function(){\n            \n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {\n                    'gapImgs' : []\n                };\n\n            //note: no choice shuffling option available for graphic gap match\n            var gapImgs = this.getGapImgs();\n            for(var serial in gapImgs){\n                if(Element.isA(gapImgs[serial], 'choice')){\n                    defaultData.gapImgs.push(gapImgs[serial].render({}, null, '', renderer));\n                }\n            }\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        },\n        toArray : function(){\n            var arr = this._super();\n            arr.gapImgs = {};\n            var gapImgs = this.getGapImgs();\n            for(var serial in gapImgs){\n                arr.gapImgs[serial] = gapImgs[serial].toArray();\n            }\n            return arr;\n        }\n    });\n\n    return GraphicGapMatchInteraction;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/model/interactions/GraphicGapMatchInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/GraphicGapMatchInteraction',\n    'taoQtiItem/qtiCreator/model/choices/GapImg',\n    'taoQtiItem/qtiCreator/model/choices/AssociableHotspot'\n], function($, _, editable, editableInteraction, Interaction, GapImg, AssociableHotspot){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        \n\n        /**\n         * Once the interaction model is created, \n         * we set the responsivness and create a default response \n         */ \n        afterCreate : function(){\n            var relatedItem = this.getRelatedItem();\n            var isResponsive = relatedItem.data('responsive');\n\n            if(isResponsive === true){\n                this.addClass('responsive');\n            }\n            \n            this.createResponse({\n                baseType : 'directedPair',\n                cardinality : 'multiple'\n            });\n        },\n\n        /**\n         * Create a new gap image\n         * @param {Object} object - the qti object\n         * @param {String} object.data - the image url\n         * @param {String|Number} object.width - the image width\n         * @param {String|Number} object.height - the image height\n         * @param {String} object.type - the image mime type\n         * @param {String} [label] - the object label (ie. alt)\n         */\n        createGapImg : function(object, label){\n            var gapImg = new GapImg();\n            gapImg.object.attributes = object; \n            if(label){\n                gapImg.attr('objectLabel', label); \n            }\n            if(!this.gapImgs){\n                this.gapImgs = [];\n            }\n            this.addGapImg(gapImg);\n            gapImg.buildIdentifier('gapimg');\n\n            if(this.getRenderer()){\n                gapImg.setRenderer(this.getRenderer());\n            }\n\n            $(document).trigger('choiceCreated.qti-widget', {'choice' : gapImg, 'interaction' : this});\n\n            return gapImg;\n        },\n\n        /**\n         * Create a choice for the interaction\n         * @param {Object} attr - the choice attributes\n         * @returns {Object} the created choice\n         */\n        createChoice : function(attr){\n            var choice = new AssociableHotspot('', attr);\n\n            this.addChoice(choice);\n            choice.buildIdentifier('associablehotspot');\n            \n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n            \n            $(document).trigger('choiceCreated.qti-widget', {'choice' : choice, 'interaction' : this});\n           \n            return choice;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/GraphicOrderInteraction',['taoQtiItem/qtiItem/core/interactions/GraphicInteraction'], function(GraphicInteraction){\n    var GraphicOrderInteraction = GraphicInteraction.extend({\n        qtiClass : 'graphicOrderInteraction'\n    });\n    return GraphicOrderInteraction;\n});\n\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/model/interactions/GraphicOrderInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/GraphicOrderInteraction',\n    'taoQtiItem/qtiCreator/model/choices/HotspotChoice'\n], function($, _, editable, editableInteraction, Interaction, Choice){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n\n        /**\n         * Set the default values for the model\n         * @returns {Object} the default attributes \n         */ \n        getDefaultAttributes : function(){\n            return {};\n        },\n\n        /**\n         * Once the interaction model is created, \n         * we set the responsivness and create a default response \n         */ \n        afterCreate : function(){\n            var relatedItem = this.getRelatedItem();\n            var isResponsive = relatedItem.data('responsive');\n\n            if(isResponsive === true){\n                this.addClass('responsive');\n            }\n            this.createResponse({\n                baseType:'identifier',\n                cardinality:'ordered'\n            });\n        },\n\n        /**\n         * Create a choice for the interaction\n         * @param {Object} attr - the choice attributes\n         * @returns {Object} the created choice\n         */\n        createChoice : function(attr){\n            var choice = new Choice('', attr);\n\n            this.addChoice(choice);\n            choice.buildIdentifier('hotspot');\n            \n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n            \n            $(document).trigger('choiceCreated.qti-widget', {'choice' : choice, 'interaction' : this});\n           \n            return choice;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/HotspotInteraction',['taoQtiItem/qtiItem/core/interactions/GraphicInteraction'], function(GraphicInteraction){\n    var HotspotInteraction = GraphicInteraction.extend({\n        qtiClass : 'hotspotInteraction'\n    });\n    return HotspotInteraction;\n});\n\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/model/interactions/HotspotInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/HotspotInteraction',\n    'taoQtiItem/qtiCreator/model/choices/HotspotChoice'\n], function($, _, editable, editableInteraction, Interaction, Choice){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        \n        /**\n         * Set the default values for the model\n         * @returns {Object} the default attributes \n         */ \n        getDefaultAttributes : function(){\n            return {\n                'maxChoices' : 0,\n                'minChoices' : 0\n            };\n        },\n\n        /**\n         * Once the interaction model is created, \n         * we set the responsivness and create a default response \n         */ \n        afterCreate : function(){\n            var relatedItem = this.getRelatedItem();\n            var isResponsive = relatedItem.data('responsive');\n\n            if(isResponsive === true){\n                this.addClass('responsive');\n            }\n            this.createResponse({\n                baseType:'identifier',\n                cardinality:'single'\n            });\n        },\n\n        /**\n         * Create a choice for the interaction\n         * @param {Object} attr - the choice attributes\n         * @returns {Object} the created choice\n         */\n        createChoice : function(attr){\n            var choice = new Choice('', attr);\n\n            this.addChoice(choice);\n            choice.buildIdentifier('hotspot');\n            \n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n            \n            $(document).trigger('choiceCreated.qti-widget', {'choice' : choice, 'interaction' : this});\n           \n            return choice;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/HottextInteraction',['taoQtiItem/qtiItem/core/interactions/ContainerInteraction', 'taoQtiItem/qtiItem/core/Element'], function(ContainerInteraction, Element){\n    var HottextInteraction = ContainerInteraction.extend({\n        qtiClass : 'hottextInteraction',\n        getChoices : function(){\n            return this.getBody().getElements('hottext');\n        },\n        getChoice : function(serial){\n            var element = this.getBody().getElement(serial);\n            return Element.isA(element, 'choice') ? element : null;\n        }\n    });\n    return HottextInteraction;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/HottextInteraction',[\n    'lodash',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/HottextInteraction',\n    'taoQtiItem/qtiCreator/model/choices/Hottext',\n    'taoQtiItem/qtiCreator/model/helper/event',\n    'taoQtiItem/qtiCreator/model/helper/response'\n], function(_, Element, editable, editableInteraction, Interaction, Choice,event, responseHelper){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                maxChoices : 0,\n                minChoices : 0\n            };\n        },\n        afterCreate : function(){\n            this.body('<p>Lorem ipsum dolor sit amet, consectetur adipisicing ...</p>');\n            this.createResponse({\n                baseType : 'identifier',\n                cardinality : 'multiple'\n            });\n        },\n        createChoice : function(attr, body){\n\n            var choice = new Choice('', attr);\n\n            this.addChoice(choice);\n            choice.buildIdentifier('hottext');\n            choice.body(body);\n                \n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n            \n            event.choiceCreated(choice, this);\n\n            return choice;\n        },\n        removeChoice : function(hottext){\n        \n            var serial = '', c;\n            \n            if(typeof(hottext) === 'string'){\n                serial = hottext;\n            }else if(Element.isA(hottext, 'hottext')){\n                serial = hottext.getSerial();\n            }\n            \n            c = this.getBody().getElement(serial);\n            if(c){\n                //remove choice\n                this.getBody().removeElement(c);\n                \n                //update the response\n                responseHelper.removeChoice(this.getResponseDeclaration(), c);\n                \n                //trigger event\n                event.deleted(c, this);\n            }\n            \n            return this;\n        }\n    });\n    \n    return Interaction.extend(methods);\n});\n\n","define('taoQtiItem/qtiItem/core/interactions/InlineChoiceInteraction',['taoQtiItem/qtiItem/core/interactions/InlineInteraction'], function(InlineInteraction){\n    var InlineChoiceInteraction = InlineInteraction.extend({\n        'qtiClass' : 'inlineChoiceInteraction'\n    });\n    return InlineChoiceInteraction;\n});\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/InlineChoiceInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/InlineChoiceInteraction',\n    'taoQtiItem/qtiCreator/model/choices/InlineChoice'\n], function($, _, editable, editableInteraction, Interaction, Choice){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'shuffle' : false,\n                'required' : false\n            };\n        },\n        afterCreate : function(){\n            this.createChoice();\n            this.createChoice();\n            this.createChoice();\n            this.createResponse({\n                baseType:'identifier',\n                cardinality:'single'\n            });\n        },\n        createChoice : function(){\n            var choice = new Choice();\n\n            this.addChoice(choice);\n\n            var rank = _.size(this.getChoices());\n\n            choice\n                .val('choice' + ' #' + rank)\n                .buildIdentifier('choice');\n\n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n\n            $(document).trigger('choiceCreated.qti-widget', {'choice' : choice, 'interaction' : this});\n\n            return choice;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/MatchInteraction',[\n    'taoQtiItem/qtiItem/core/interactions/BlockInteraction',\n    'taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice',\n    'lodash',\n    'taoQtiItem/qtiItem/helper/rendererConfig',\n    'taoQtiItem/qtiItem/helper/util'\n], function(BlockInteraction, SimpleAssociableChoice, _, rendererConfig, util){\n\n    var MatchInteraction = BlockInteraction.extend({\n        qtiClass : 'matchInteraction',\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n            this.choices = [{}, {}];\n        },\n        addChoice : function(choice, matchSet){\n            matchSet = parseInt(matchSet);\n            if(this.choices[matchSet]){\n                choice.setRelatedItem(this.getRelatedItem() || null);\n                this.choices[matchSet][choice.getSerial()] = choice;\n            }\n        },\n        getChoices : function(matchSet){\n            matchSet = parseInt(matchSet);\n            if(this.choices[matchSet]){\n                return _.clone(this.choices[matchSet]);\n            }else{\n                return _.clone(this.choices);\n            }\n        },\n        getChoice : function(serial){\n            return this.choices[0][serial] || this.choices[1][serial] || null;\n        },\n        getComposingElements : function(){\n\n            var elts = this._super();\n            //recursive to both match sets:\n            for(var i = 0; i < 2; i++){\n                var matchSet = this.getChoices(i);\n                for(var serial in matchSet){\n                    if(matchSet[serial] instanceof SimpleAssociableChoice){\n                        elts[serial] = matchSet[serial];\n                        elts = _.extend(elts, matchSet[serial].getComposingElements());\n                    }\n                }\n            }\n\n            return elts;\n        },\n        find : function(serial){\n            var found = this._super(serial);\n            if(!found){\n                found = util.findInCollection(this, ['choices.0', 'choices.1'], serial);\n            }\n            return found;\n        },\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                choices,\n                defaultData = {\n                'matchSet1' : [],\n                'matchSet2' : []\n            };\n\n            var interactionData = {'interaction' : {'serial' : this.serial, 'attributes' : this.attributes}};\n\n            if(!renderer){\n                throw 'no renderer found for the interaction ' + this.qtiClass;\n            }\n\n            if(this.attr('shuffle') && renderer.shuffleChoices){\n                choices = renderer.getShuffledChoices(this);\n            }else{\n                choices = this.getChoices();\n            }\n\n            for(var i = 0; i < 2; i++){\n                var matchSet = choices[i];\n                for(var serial in matchSet){\n                    if(matchSet[serial] instanceof SimpleAssociableChoice){\n                        defaultData['matchSet' + (i + 1)].push(matchSet[serial].render(_.clone(interactionData, true), null, 'simpleAssociableChoice.matchInteraction', renderer));\n                    }\n                }\n            }\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        },\n        postRender : function(data, altClassName, renderer){\n\n            renderer = renderer || this.getRenderer();\n\n            var choices = this.getChoices();\n\n            for(var i = 0; i < 2; i++){\n                _.forIn(choices[i], function(c){\n                    if(c instanceof SimpleAssociableChoice){\n                        c.postRender({}, 'simpleAssociableChoice.matchInteraction', renderer);\n                    }\n                });\n            }\n\n            return this._super(data, altClassName, renderer);\n        },\n        toArray : function(){\n            var arr = this._super();\n            arr.choices = {0 : {}, 1 : {}};\n            for(var i = 0; i < 2; i++){\n                var matchSet = this.getChoices(i);\n                for(var serial in matchSet){\n                    if(matchSet[serial] instanceof SimpleAssociableChoice){\n                        arr.choices[i][serial] = matchSet[serial].toArray();\n                    }\n                }\n            }\n            return arr;\n        }\n    });\n\n    return MatchInteraction;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/MatchInteraction',[\n    'lodash',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/MatchInteraction',\n    'taoQtiItem/qtiCreator/model/choices/SimpleAssociableChoice',\n    'taoQtiItem/qtiCreator/model/helper/event',\n    'taoQtiItem/qtiCreator/model/helper/response'\n], function(_, Element, editable, editableInteraction, Interaction, Choice, event, responseHelper){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'shuffle' : false,\n                'maxAssociations' : 0,\n                'minAssociations' : 0\n            };\n        },\n        afterCreate : function(){\n            this.createChoice(0);\n            this.createChoice(0);\n            this.createChoice(1);\n            this.createChoice(1);\n            this.createResponse({\n                baseType:'directedPair',\n                cardinality:'multiple'\n            });\n        },\n        createChoice : function(matchSet, attr){\n        \n            var choice = new Choice('', attr);\n            \n            this.addChoice(choice, matchSet);\n            \n            var rank = _.size(this.getChoices(matchSet));\n            \n            choice\n                .body('choice' + ' #' + rank)\n                .buildIdentifier('choice');\n            \n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n            \n            event.choiceCreated(choice, this);\n            \n            return choice;\n        },\n        removeChoice : function(choice){\n            \n            var serial = '', c;\n            \n            if(typeof(choice) === 'string'){\n                serial = choice;\n            }else if(Element.isA(choice, 'choice')){\n                serial = choice.getSerial();\n            }\n            \n            c = this.choices[0][serial] || this.choices[1][serial] || null;\n            \n            if(c){\n                \n                //remove choice\n                delete this.choices[0][serial];\n                delete this.choices[1][serial];\n                \n                //update the response\n                responseHelper.removeChoice(this.getResponseDeclaration(), c);\n                \n                //trigger event\n                event.deleted(c, this);\n            }\n            \n            return this;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/MediaInteraction',[\n    'lodash',\n    'taoQtiItem/qtiItem/core/interactions/ObjectInteraction',\n    'taoQtiItem/qtiItem/helper/rendererConfig'\n], function(_, ObjectInteraction, rendererConfig){\n    var MediaInteraction = ObjectInteraction.extend({\n        qtiClass : 'mediaInteraction',\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {\n                    'media' : this.object.render({}, null, '', renderer)\n                };\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n\n        }\n    });\n    return MediaInteraction;\n});\n\n","define('taoQtiItem/qtiCreator/model/interactions/MediaInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/MediaInteraction'\n], function(_, editable, editableInteraction, Interaction){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n\n            //var defAtt = interaction.getDefaultAttributes();\n            //_.extend(interaction.attributes, defAtt);\n            //delete interaction.attributes.media;\n            //_.extend(interaction.object.attributes, defAtt.media);\n            \n            return {\n                /*media: {\n                  //data: 'http://tao.localdomain/filemanager/views/data/media/echo-hereweare.mp4',\n                  data: '',\n                  type: 'video/mp4',\n                  width: 480,\n                  height: 270\n                },*/\n                autostart : false,\n                minPlays : 0,\n                maxPlays : 0,\n                loop : false\n            };\n        },\n        afterCreate : function(){\n            //function that will immediately be called after its creation in the item creator\n            //nothing special to do here ?\n            \n            this.createResponse({\n                baseType:'integer',\n                cardinality:'single'\n            });\n            \n        },\n        createChoice : function(){\n            throw 'mediaInteraction does not have any choices';\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/OrderInteraction',['taoQtiItem/qtiItem/core/interactions/BlockInteraction'], function(BlockInteraction){\n    var OrderInteraction = BlockInteraction.extend({\n        qtiClass : 'orderInteraction'\n    });\n    return OrderInteraction;\n});\n","define('taoQtiItem/qtiCreator/model/interactions/OrderInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/OrderInteraction',\n    'taoQtiItem/qtiCreator/model/choices/SimpleChoice'\n], function($, _, editable, editableInteraction, Interaction, Choice){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                shuffle : false,\n                orientation : 'vertical'\n            };\n        },\n        afterCreate : function(){\n            this.createChoice();\n            this.createChoice();\n            this.createChoice();\n            this.createResponse({\n                baseType:'identifier',\n                cardinality:'ordered'\n            });\n        },\n        createChoice : function(){\n            var choice = new Choice();\n\n            this.addChoice(choice);\n\n            var rank = _.size(this.getChoices());\n\n            choice\n                .body('choice' + ' #' + rank)\n                .buildIdentifier('choice');\n\n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n\n            $(document).trigger('choiceCreated.qti-widget', {'choice' : choice, 'interaction' : this});\n\n            return choice;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/CustomInteraction',[\n    'taoQtiItem/qtiItem/core/interactions/Interaction',\n    'lodash',\n    'taoQtiItem/qtiItem/helper/rendererConfig'\n], function(Interaction, _, rendererConfig){\n\n    var CustomInteraction = Interaction.extend({\n        qtiClass : 'customInteraction',\n        defaultNsName : 'pci',\n        defaultNsUri : 'http://www.imsglobal.org/xsd/portableCustomInteraction',\n        defaultMarkupNsName : 'html5',\n        defaultMarkupNsUri : 'html5',\n        init : function(serial, attributes){\n\n            this._super(serial, attributes);\n\n            this.typeIdentifier = '';\n            this.markup = '';\n            this.properties = {};\n            this.libraries = [];\n            this.entryPoint = '';\n\n            //note : if the uri is defined, it will be set the uri in the xml on xml serialization,\n            //which may trigger xsd validation, which is troublesome for html5 (use xhtml5 maybe ?)\n            this.markupNs = {};\n\n            this.pciReadyCallbacks = [];\n        },\n        is : function(qtiClass){\n            return (qtiClass === 'customInteraction') || this._super(qtiClass);\n        },\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {\n                    typeIdentifier : this.typeIdentifier,\n                    markup : this.markup,\n                    properties : this.properties,\n                    libraries : this.libraries,\n                    entryPoint : this.entryPoint,\n                    ns : {\n                        pci : this.getNamespace().name + ':'\n                    }\n                };\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        },\n        toArray : function(){\n            var arr = this._super();\n            arr.markup = this.markup;\n            arr.properties = this.properties;\n            return arr;\n        },\n        prop : function(name, value){\n            if(name){\n                if(value !== undefined){\n                    this.properties[name] = value;\n                }else{\n                    if(typeof (name) === 'object'){\n                        for(var prop in name){\n                            this.prop(prop, name[prop]);\n                        }\n                    }else if(typeof (name) === 'string'){\n                        if(this.properties[name] === undefined){\n                            return undefined;\n                        }else{\n                            return this.properties[name];\n                        }\n                    }\n                }\n            }\n            return this;\n        },\n        removeProp : function(propNames){\n            var _this = this;\n            if(typeof (propNames) === 'string'){\n                propNames = [propNames];\n            }\n            _.each(propNames, function(propName){\n                delete _this.properties[propName];\n            });\n            return this;\n        },\n        getProperties : function(){\n            return _.clone(this.properties);\n        },\n        getNamespace : function(){\n\n            if(this.ns && this.ns.name && this.ns.uri){\n                return _.clone(this.ns);\n            }else{\n\n                var relatedItem = this.getRelatedItem();\n                if(relatedItem){\n                    var namespaces = relatedItem.getNamespaces();\n                    for(var ns in namespaces){\n                        if(namespaces[ns].indexOf('portableCustomInteraction') > 0){\n                            return {\n                                name : ns,\n                                uri : namespaces[ns]\n                            };\n                        }\n                    }\n                    //if no ns found in the item, set the default one!\n                    relatedItem.namespaces[this.defaultNsName] = this.defaultNsUri;\n                    return {\n                        name : this.defaultNsName,\n                        uri : this.defaultNsUri\n                    };\n                }\n            }\n\n            return {};\n        },\n        setNamespace : function(name, uri){\n            this.ns = {\n                name : name,\n                uri : uri\n            };\n        },\n        getMarkupNamespace : function(){\n\n            if(this.markupNs && this.markupNs.name && this.markupNs.uri){\n                return _.clone(this.markupNs);\n            }else{\n                var relatedItem = this.getRelatedItem();\n                if(relatedItem){\n                    //set the default one:\n                    relatedItem.namespaces[this.defaultMarkupNsName] = this.defaultMarkupNsUri;\n                    return {\n                        name : this.defaultMarkupNsName,\n                        uri : this.defaultMarkupNsUri\n                    };\n                }\n            }\n\n            return {};\n        },\n        setMarkupNamespace : function(name, uri){\n            this.markupNs = {\n                name : name,\n                uri : uri\n            };\n        },\n        onPciReady : function(callback){\n\n            this.pciReadyCallbacks.push(callback);\n\n            if(this.data('pci')){\n                //if pci is already ready, call it immediately\n                this.triggerPciReady();\n            }\n        },\n        triggerPciReady : function(){\n\n            var _this = this,\n                pci = this.data('pci');\n\n            if(pci){\n                _.each(this.pciReadyCallbacks, function(fn){\n                    fn.call(_this, pci);\n                });\n                \n                //empty the stack of ready callbacks\n                this.pciReadyCallbacks = [];\n                \n                //mark the interaction as ready\n                this.data('pciReady', true);\n                \n            }else{\n                throw 'cannot trigger pci ready when no pci is actually attached to the interaction';\n            }\n\n        },\n        onPci : function(event, callback){\n            this.onPciReady(function(pci){\n                if(_.isFunction(pci.on)){\n                    pci.on(event, callback);\n                }else{\n                    throw 'the pci does not implement on() function';\n                }\n            });\n            return this;\n        },\n        offPci : function(event){\n            this.onPciReady(function(pci){\n                if(_.isFunction(pci.off)){\n                    pci.off(event);\n                }else{\n                    throw 'the pci does not implement off() function';\n                }\n            });\n            return this;\n        },\n        triggerPci : function(event, args){\n            this.onPciReady(function(pci){\n                if(_.isFunction(pci.off)){\n                    pci.trigger(event, args);\n                }else{\n                    throw 'the pci does not implement off() function';\n                }\n            });\n            return this;\n        }\n    });\n\n    return CustomInteraction;\n});\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/PortableCustomInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiCreator/model/helper/portableElement',\n    'taoQtiItem/qtiCreator/editor/customInteractionRegistry',\n    'taoQtiItem/qtiItem/core/interactions/CustomInteraction'\n], function(_, editable, editableInteraction, portableElement, ciRegistry, Interaction){\n    \"use strict\";\n    var _throwMissingImplementationError = function(pci, fnName){\n        throw fnName + ' not available for pci of type ' + pci.typeIdentifier;\n    };\n\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, portableElement.getDefaultMethods(ciRegistry));\n    _.extend(methods, {\n        createChoice : function(){\n\n            var creator = ciRegistry.getCreator(this.typeIdentifier);\n            if(_.isFunction(creator.createChoice)){\n                return creator.createChoice(this);\n            }else{\n                _throwMissingImplementationError(this, 'createChoice');\n            }\n        },\n        getDefaultMarkupTemplateData : function(){\n            return {\n                responseIdentifier : this.attr('responseIdentifier')\n            };\n        }\n    });\n\n    return Interaction.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/interactions/SelectPointInteraction',['taoQtiItem/qtiItem/core/interactions/GraphicInteraction'], function(GraphicInteraction){\n    var SelectPointInteraction = GraphicInteraction.extend({\n        qtiClass : 'selectPointInteraction'\n    });\n    return SelectPointInteraction;\n});\n\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/model/interactions/SelectPointInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/SelectPointInteraction'\n], function($, _, editable, editableInteraction, Interaction){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        \n        /**\n         * Set the default values for the model\n         * @returns {Object} the default attributes \n         */ \n        getDefaultAttributes : function(){\n            return {\n                'maxChoices' : 0,\n                'minChoices' : 0\n            };\n        },\n\n        /**\n         * Once the interaction model is created, \n         * we set the responsivness and create a default response \n         */ \n        afterCreate : function(){\n            var relatedItem = this.getRelatedItem();\n            var isResponsive = relatedItem.data('responsive');\n\n            if(isResponsive === true){\n                this.addClass('responsive');\n            }\n            this.createResponse({\n                baseType:'point',\n                cardinality:'multiple'\n            }, 'MAP_RESPONSE_POINT');\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/SliderInteraction',['taoQtiItem/qtiItem/core/interactions/BlockInteraction'], function(BlockInteraction){\n    var SliderInteraction = BlockInteraction.extend({\n        qtiClass : 'sliderInteraction'\n    });\n    return SliderInteraction;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/SliderInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/SliderInteraction'\n], function(_, editable, editableInteraction, Interaction){\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'lowerBound': 0.0,\n                'upperBound': 100.0,\n                'orientation': 'horizontal',\n                'reverse': false,\n                'step': 1,\n                'stepLabel': false\n            };\n        },\n        afterCreate : function(){\n            this.createResponse({\n                baseType: 'integer',\n                cardinality: 'single'\n            });\n        },\n        createChoice : function(){\n            throw \"sliderInteraction does not have any choices\";\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/TextEntryInteraction',['taoQtiItem/qtiItem/core/interactions/InlineInteraction'], function(InlineInteraction){\n    var TextEntryInteraction = InlineInteraction.extend({\n        'qtiClass' : 'textEntryInteraction'\n    });\n    return TextEntryInteraction;\n});\n","define('taoQtiItem/qtiCreator/model/interactions/TextEntryInteraction',[\r\n    'lodash',\r\n    'taoQtiItem/qtiCreator/model/mixin/editable',\r\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\r\n    'taoQtiItem/qtiItem/core/interactions/TextEntryInteraction'\r\n], function(_, editable, editableInteraction, Interaction){\r\n    \"use strict\";\r\n    var methods = {};\r\n    _.extend(methods, editable);\r\n    _.extend(methods, editableInteraction);\r\n    _.extend(methods, {\r\n        getDefaultAttributes : function(){\r\n            return {\r\n                base : 10,\r\n                placeholderText : ''\r\n            };\r\n        },\r\n        afterCreate : function(){\r\n            this.createResponse({\r\n                baseType:'string',\r\n                cardinality:'single'\r\n            });\r\n        },\r\n        createChoice : function(){\r\n            throw new Error('text entry interaction has no choice');\r\n        }\r\n    });\r\n    return Interaction.extend(methods);\r\n});\n","define('taoQtiItem/qtiItem/core/interactions/UploadInteraction',['taoQtiItem/qtiItem/core/interactions/BlockInteraction'], function(InlineInteraction){\n    var UploadInteraction = InlineInteraction.extend({\n        'qtiClass' : 'uploadInteraction'\n    });\n    return UploadInteraction;\n});\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/UploadInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/UploadInteraction'\n], function(_, editable, editableInteraction, Interaction) {\n    \"use strict\";\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes: function() {\n            // The QTI uploadInteraction has a unique\n            // attribute 'type', which can be empty.\n            return {\n                'type': ''\n            };\n        },\n        \n        afterCreate: function() {\n            // As per specs, a QTI uploadInteraction\n            // is always bound to a response variable\n            // with base-type file and single cardinality.\n            this.createResponse({\n                baseType:'file',\n                cardinality:'single'\n            });\n        },\n        \n        createChoice: function() {\n            throw 'uploadInteraction does not have any choices';\n        }\n    });\n    \n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/pciCreatorContext',['lodash'], function(_){\n    \n    \"use strict\";\n    \n    var _pciModels = {};\n    \n    /**\n     * Global object accessible by all PCIs\n     * \n     * @type Object\n     */\n    var pciCreatorContext = {\n        /**\n         * register a custom interaction (its runtime model) in global registery\n         * register a renderer\n         * \n         * @param {Object} pciModel\n         * @returns {undefined}\n         */\n        register : function(pciModel){\n            //@todo check pciModel validity\n            _pciModels[pciModel.getTypeIdentifier()] = pciModel;\n        },\n        /**\n         * Get a cloned object representing the PCI model\n         * \n         * @param {string} pciTypeIdentifier\n         * @returns {Object} clonedPciModel\n         */\n        createPciInstance : function(pciTypeIdentifier){\n            if(_pciModels[pciTypeIdentifier]){\n                return _.cloneDeep(_pciModels[pciTypeIdentifier]);\n            }\n        }\n    };\n\n    return pciCreatorContext;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/container', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, helper, options, functionType=\"function\", self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<div data-html-editable=\\\"true\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\n  stack1 = (helper = helpers.equal || (depth0 && depth0.equal),options={hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data},helper ? helper.call(depth0, (depth0 && depth0.contentModel), \"blockStatic\", options) : helperMissing.call(depth0, \"equal\", (depth0 && depth0.contentModel), \"blockStatic\", options));\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n});\n\n","define('taoQtiItem/qtiCreator/renderers/Container',['tpl!taoQtiItem/qtiCreator/tpl/container'], function(tpl){\n    return {\n        qtiClass : '_container',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/img', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"id=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"class=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"height=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"width=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  return buffer;\n  }\n\n  buffer += \"<img \\n    data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n    data-qti-class=\\\"img\\\" \\n    src=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.src)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \\n    alt=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.alt)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    />\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/Img',['tpl!taoQtiItem/qtiCommonRenderer/tpl/img', 'taoQtiItem/qtiCommonRenderer/helpers/container'], function(tpl, containerHelper){\n    return {\n        qtiClass : 'img',\n        template : tpl,\n        getContainer : containerHelper.get\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/img/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/static/states/Sleep'], function(stateFactory, SleepState){\n    \n    var ImgStateSleep = stateFactory.extend(SleepState, function(){}, function(){});\n    \n    return ImgStateSleep;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/static/img', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"src\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"File\", options) : helperMissing.call(depth0, \"__\", \"File\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The file path to the image.\", options) : helperMissing.call(depth0, \"__\", \"The file path to the image.\", options)))\n    + \"</div>\\n    <input type=\\\"text\\\" name=\\\"src\\\" value=\\\"\";\n  if (helper = helpers.src) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.src); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty; $fileExists(baseUrl=\";\n  if (helper = helpers.baseUrl) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.baseUrl); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")\\\"/>\\n    <button class=\\\"btn-info small block\\\" data-role=\\\"upload-trigger\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select image\", options) : helperMissing.call(depth0, \"__\", \"Select image\", options)))\n    + \"</button>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"alt\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Alt Text\", options) : helperMissing.call(depth0, \"__\", \"Alt Text\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The text to be displayed if the image is not available.\", options) : helperMissing.call(depth0, \"__\", \"The text to be displayed if the image is not available.\", options)))\n    + \"</div>\\n    <input type=\\\"text\\\" name=\\\"alt\\\" value=\\\"\";\n  if (helper = helpers.alt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.alt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty\\\" placeholder=\\\"e.g. House with a garden\\\"/>\\n</div>\\n\\n<div class=\\\"change-alt-modal-feedback modal\\\">\\n    <div class=\\\"modal-body clearfix\\\">\\n        <p>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Would you like to replace the alt text\", options) : helperMissing.call(depth0, \"__\", \"Would you like to replace the alt text\", options)))\n    + \"</p>\\n        <p class=\\\"alt-text\\\"></p>\\n\\n        <div class=\\\"rgt\\\">\\n            <button class=\\\"btn-regular small cancel\\\" type=\\\"button\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"No\", options) : helperMissing.call(depth0, \"__\", \"No\", options)))\n    + \"</button>\\n            <button class=\\\"btn-info small save\\\" type=\\\"button\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Yes\", options) : helperMissing.call(depth0, \"__\", \"Yes\", options)))\n    + \"</button>\\n        </div>\\n    </div>\\n</div>\\n\\n<div data-role=\\\"advanced\\\" style=\\\"display:none\\\">\\n    \\n    <hr/>\\n    \\n<!--    <div class=\\\"panel\\\">\\n        <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Size and position\", options) : helperMissing.call(depth0, \"__\", \"Size and position\", options)))\n    + \"</h3>\\n\\n        <p class=\\\"img-resizer-slider\\\"></p>\\n\\n        <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height\", options) : helperMissing.call(depth0, \"__\", \"Height\", options)))\n    + \"</label>\\n        <span id=\\\"item-editor-font-size-manual-input\\\" class=\\\"item-editor-unit-input-box\\\">\\n            <input type=\\\"text\\\" name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty;\\\"/>\\n            <span class=\\\"unit-indicator\\\">px</span>\\n        </span>\\n    </div>\\n    <div class=\\\"panel\\\">\\n\\n        <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width\", options) : helperMissing.call(depth0, \"__\", \"Width\", options)))\n    + \"</label>\\n        <span id=\\\"item-editor-font-size-manual-input\\\" class=\\\"item-editor-unit-input-box\\\">\\n            <input type=\\\"text\\\" name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty;\\\"/>\\n            <span class=\\\"unit-indicator\\\">px</span>\\n        </span>\\n    </div>\\n    <div class=\\\"panel\\\">\\n\\n        <label for=\\\"align\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Alignment\", options) : helperMissing.call(depth0, \"__\", \"Alignment\", options)))\n    + \"</label>\\n        <select name=\\\"align\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n            <option value=\\\"default\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"default\", options) : helperMissing.call(depth0, \"__\", \"default\", options)))\n    + \"</option>\\n            <option value=\\\"left\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"left\", options) : helperMissing.call(depth0, \"__\", \"left\", options)))\n    + \"</option>\\n            <option value=\\\"right\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"right\", options) : helperMissing.call(depth0, \"__\", \"right\", options)))\n    + \"</option>\\n        </select>\\n    </div>-->\\n    \\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Size and position\", options) : helperMissing.call(depth0, \"__\", \"Size and position\", options)))\n    + \"</h3>\\n    <div class=\\\"panel img-resizer\\\"></div>\\n    \\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/helpers/validators',[\n    'core/validator/validators',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiItem/core/Element'\n], function(validators, _, __, Element) {\n\n    var _qtiIdPattern = /^[_a-zA-Z]{1}[a-zA-Z0-9\\-._]{0,31}$/i;\n\n    var qtiValidators = [\n        {\n            name: 'qtiIdentifier',\n            message: __('invalid identifier'),\n            validate: function(value, callback) {\n                if (typeof callback === 'function') {\n                    callback(_qtiIdPattern.test(value));\n                }\n            }\n        },\n        //warning: simplistic implementation, allow only one unique identifier in the item no matter the element class/type\n        {\n            name: 'availableIdentifier',\n            message: __('this identifier is already in use'),\n            validate: function(value, callback, options) {\n                if (options.serial) {\n                    var element = Element.getElementBySerial(options.serial);\n                    if (element && typeof callback === 'function') {\n                        var ids = element.getRelatedItem().getUsedIdentifiers();\n                        var available = (!ids[value] || ids[value].serial === element.serial);\n                        callback(available);\n                    }\n                }else{\n                    throw 'missing required option \"serial\"';\n                }\n            }\n        }\n    ];\n\n    _.each(qtiValidators, function(rule) {\n        validators.register(rule.name, rule);\n    });\n\n    return validators;\n});\n\n\n","/* \r\n * The MIT License\r\n *\r\n * Copyright (c) 2012 James Allardice\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), \r\n * to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, \r\n * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n */\r\n\r\n// Defines the global Placeholders object along with various utility methods\r\n(function (global) {\r\n\r\n    \"use strict\";\r\n\r\n    // Cross-browser DOM event binding\r\n    function addEventListener(elem, event, fn) {\r\n        if (elem.addEventListener) {\r\n            return elem.addEventListener(event, fn, false);\r\n        }\r\n        if (elem.attachEvent) {\r\n            return elem.attachEvent(\"on\" + event, fn);\r\n        }\r\n    }\r\n\r\n    // Check whether an item is in an array (we don't use Array.prototype.indexOf so we don't clobber any existing polyfills - this is a really simple alternative)\r\n    function inArray(arr, item) {\r\n        var i, len;\r\n        for (i = 0, len = arr.length; i < len; i++) {\r\n            if (arr[i] === item) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // Move the caret to the index position specified. Assumes that the element has focus\r\n    function moveCaret(elem, index) {\r\n        var range;\r\n        if (elem.createTextRange) {\r\n            range = elem.createTextRange();\r\n            range.move(\"character\", index);\r\n            range.select();\r\n        } else if (elem.selectionStart) {\r\n            elem.focus();\r\n            elem.setSelectionRange(index, index);\r\n        }\r\n    }\r\n\r\n    // Attempt to change the type property of an input element\r\n    function changeType(elem, type) {\r\n        try {\r\n            elem.type = type;\r\n            return true;\r\n        } catch (e) {\r\n            // You can't change input type in IE8 and below\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // Expose public methods\r\n    global.Placeholders = {\r\n        Utils: {\r\n            addEventListener: addEventListener,\r\n            inArray: inArray,\r\n            moveCaret: moveCaret,\r\n            changeType: changeType\r\n        }\r\n    };\r\n\r\n}(this));\r\n\r\n(function (global) {\r\n\r\n    \"use strict\";\r\n\r\n    var validTypes = [\r\n            \"text\",\r\n            \"search\",\r\n            \"url\",\r\n            \"tel\",\r\n            \"email\",\r\n            \"password\",\r\n            \"number\",\r\n            \"textarea\"\r\n        ],\r\n\r\n        // The list of keycodes that are not allowed when the polyfill is configured to hide-on-input\r\n        badKeys = [\r\n\r\n            // The following keys all cause the caret to jump to the end of the input value\r\n            27, // Escape\r\n            33, // Page up\r\n            34, // Page down\r\n            35, // End\r\n            36, // Home\r\n\r\n            // Arrow keys allow you to move the caret manually, which should be prevented when the placeholder is visible\r\n            37, // Left\r\n            38, // Up\r\n            39, // Right\r\n            40, // Down\r\n\r\n            // The following keys allow you to modify the placeholder text by removing characters, which should be prevented when the placeholder is visible\r\n            8, // Backspace\r\n            46 // Delete\r\n        ],\r\n\r\n        // Styling variables\r\n        placeholderStyleColor = \"#ccc\",\r\n        placeholderClassName = \"placeholdersjs\",\r\n        classNameRegExp = new RegExp(\"(?:^|\\\\s)\" + placeholderClassName + \"(?!\\\\S)\"),\r\n\r\n        // These will hold references to all elements that can be affected. NodeList objects are live, so we only need to get those references once\r\n        inputs, textareas,\r\n\r\n        // The various data-* attributes used by the polyfill\r\n        ATTR_CURRENT_VAL = \"data-placeholder-value\",\r\n        ATTR_ACTIVE = \"data-placeholder-active\",\r\n        ATTR_INPUT_TYPE = \"data-placeholder-type\",\r\n        ATTR_FORM_HANDLED = \"data-placeholder-submit\",\r\n        ATTR_EVENTS_BOUND = \"data-placeholder-bound\",\r\n        ATTR_OPTION_FOCUS = \"data-placeholder-focus\",\r\n        ATTR_OPTION_LIVE = \"data-placeholder-live\",\r\n        ATTR_MAXLENGTH = \"data-placeholder-maxlength\",\r\n\r\n        // Various other variables used throughout the rest of the script\r\n        test = document.createElement(\"input\"),\r\n        head = document.getElementsByTagName(\"head\")[0],\r\n        root = document.documentElement,\r\n        Placeholders = global.Placeholders,\r\n        Utils = Placeholders.Utils,\r\n        hideOnInput, liveUpdates, keydownVal, styleElem, styleRules, placeholder, timer, form, elem, len, i;\r\n\r\n    // No-op (used in place of public methods when native support is detected)\r\n    function noop() {}\r\n\r\n    // Avoid IE9 activeElement of death when an iframe is used.\r\n    // More info:\r\n    // http://bugs.jquery.com/ticket/13393\r\n    // https://github.com/jquery/jquery/commit/85fc5878b3c6af73f42d61eedf73013e7faae408\r\n    function safeActiveElement() {\r\n        try {\r\n            return document.activeElement;\r\n        } catch (err) {}\r\n    }\r\n\r\n    // Hide the placeholder value on a single element. Returns true if the placeholder was hidden and false if it was not (because it wasn't visible in the first place)\r\n    function hidePlaceholder(elem, keydownValue) {\r\n        var type,\r\n            maxLength,\r\n            valueChanged = (!!keydownValue && elem.value !== keydownValue),\r\n            isPlaceholderValue = (elem.value === elem.getAttribute(ATTR_CURRENT_VAL));\r\n\r\n        if ((valueChanged || isPlaceholderValue) && elem.getAttribute(ATTR_ACTIVE) === \"true\") {\r\n            elem.removeAttribute(ATTR_ACTIVE);\r\n            elem.value = elem.value.replace(elem.getAttribute(ATTR_CURRENT_VAL), \"\");\r\n            elem.className = elem.className.replace(classNameRegExp, \"\");\r\n\r\n            // Restore the maxlength value\r\n            maxLength = elem.getAttribute(ATTR_MAXLENGTH);\r\n            if (parseInt(maxLength, 10) >= 0) { // Old FF returns -1 if attribute not set (see GH-56)\r\n                elem.setAttribute(\"maxLength\", maxLength);\r\n                elem.removeAttribute(ATTR_MAXLENGTH);\r\n            }\r\n\r\n            // If the polyfill has changed the type of the element we need to change it back\r\n            type = elem.getAttribute(ATTR_INPUT_TYPE);\r\n            if (type) {\r\n                elem.type = type;\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // Show the placeholder value on a single element. Returns true if the placeholder was shown and false if it was not (because it was already visible)\r\n    function showPlaceholder(elem) {\r\n        var type,\r\n            maxLength,\r\n            val = elem.getAttribute(ATTR_CURRENT_VAL);\r\n        if (elem.value === \"\" && val) {\r\n            elem.setAttribute(ATTR_ACTIVE, \"true\");\r\n            elem.value = val;\r\n            elem.className += \" \" + placeholderClassName;\r\n\r\n            // Store and remove the maxlength value\r\n            maxLength = elem.getAttribute(ATTR_MAXLENGTH);\r\n            if (!maxLength) {\r\n                elem.setAttribute(ATTR_MAXLENGTH, elem.maxLength);\r\n                elem.removeAttribute(\"maxLength\");\r\n            }\r\n\r\n            // If the type of element needs to change, change it (e.g. password inputs)\r\n            type = elem.getAttribute(ATTR_INPUT_TYPE);\r\n            if (type) {\r\n                elem.type = \"text\";\r\n            } else if (elem.type === \"password\") {\r\n                if (Utils.changeType(elem, \"text\")) {\r\n                    elem.setAttribute(ATTR_INPUT_TYPE, \"password\");\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    function handleElem(node, callback) {\r\n\r\n        var handleInputsLength, handleTextareasLength, handleInputs, handleTextareas, elem, len, i;\r\n\r\n        // Check if the passed in node is an input/textarea (in which case it can't have any affected descendants)\r\n        if (node && node.getAttribute(ATTR_CURRENT_VAL)) {\r\n            callback(node);\r\n        } else {\r\n\r\n            // If an element was passed in, get all affected descendants. Otherwise, get all affected elements in document\r\n            handleInputs = node ? node.getElementsByTagName(\"input\") : inputs;\r\n            handleTextareas = node ? node.getElementsByTagName(\"textarea\") : textareas;\r\n\r\n            handleInputsLength = handleInputs ? handleInputs.length : 0;\r\n            handleTextareasLength = handleTextareas ? handleTextareas.length : 0;\r\n\r\n            // Run the callback for each element\r\n            for (i = 0, len = handleInputsLength + handleTextareasLength; i < len; i++) {\r\n                elem = i < handleInputsLength ? handleInputs[i] : handleTextareas[i - handleInputsLength];\r\n                callback(elem);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Return all affected elements to their normal state (remove placeholder value if present)\r\n    function disablePlaceholders(node) {\r\n        handleElem(node, hidePlaceholder);\r\n    }\r\n\r\n    // Show the placeholder value on all appropriate elements\r\n    function enablePlaceholders(node) {\r\n        handleElem(node, showPlaceholder);\r\n    }\r\n\r\n    // Returns a function that is used as a focus event handler\r\n    function makeFocusHandler(elem) {\r\n        return function () {\r\n\r\n            // Only hide the placeholder value if the (default) hide-on-focus behaviour is enabled\r\n            if (hideOnInput && elem.value === elem.getAttribute(ATTR_CURRENT_VAL) && elem.getAttribute(ATTR_ACTIVE) === \"true\") {\r\n\r\n                // Move the caret to the start of the input (this mimics the behaviour of all browsers that do not hide the placeholder on focus)\r\n                Utils.moveCaret(elem, 0);\r\n\r\n            } else {\r\n\r\n                // Remove the placeholder\r\n                hidePlaceholder(elem);\r\n            }\r\n        };\r\n    }\r\n\r\n    // Returns a function that is used as a blur event handler\r\n    function makeBlurHandler(elem) {\r\n        return function () {\r\n            showPlaceholder(elem);\r\n        };\r\n    }\r\n\r\n    // Functions that are used as a event handlers when the hide-on-input behaviour has been activated - very basic implementation of the \"input\" event\r\n    function makeKeydownHandler(elem) {\r\n        return function (e) {\r\n            keydownVal = elem.value;\r\n\r\n            //Prevent the use of the arrow keys (try to keep the cursor before the placeholder)\r\n            if (elem.getAttribute(ATTR_ACTIVE) === \"true\") {\r\n                if (keydownVal === elem.getAttribute(ATTR_CURRENT_VAL) && Utils.inArray(badKeys, e.keyCode)) {\r\n                    if (e.preventDefault) {\r\n                        e.preventDefault();\r\n                    }\r\n                    return false;\r\n                }\r\n            }\r\n        };\r\n    }\r\n    function makeKeyupHandler(elem) {\r\n        return function () {\r\n            hidePlaceholder(elem, keydownVal);\r\n\r\n            // If the element is now empty we need to show the placeholder\r\n            if (elem.value === \"\") {\r\n                elem.blur();\r\n                Utils.moveCaret(elem, 0);\r\n            }\r\n        };\r\n    }\r\n    function makeClickHandler(elem) {\r\n        return function () {\r\n            if (elem === safeActiveElement() && elem.value === elem.getAttribute(ATTR_CURRENT_VAL) && elem.getAttribute(ATTR_ACTIVE) === \"true\") {\r\n                Utils.moveCaret(elem, 0);\r\n            }\r\n        };\r\n    }\r\n\r\n    // Returns a function that is used as a submit event handler on form elements that have children affected by this polyfill\r\n    function makeSubmitHandler(form) {\r\n        return function () {\r\n\r\n            // Turn off placeholders on all appropriate descendant elements\r\n            disablePlaceholders(form);\r\n        };\r\n    }\r\n\r\n    // Bind event handlers to an element that we need to affect with the polyfill\r\n    function newElement(elem) {\r\n\r\n        // If the element is part of a form, make sure the placeholder string is not submitted as a value\r\n        if (elem.form) {\r\n            form = elem.form;\r\n\r\n            // If the type of the property is a string then we have a \"form\" attribute and need to get the real form\r\n            if (typeof form === \"string\") {\r\n                form = document.getElementById(form);\r\n            }\r\n\r\n            // Set a flag on the form so we know it's been handled (forms can contain multiple inputs)\r\n            if (!form.getAttribute(ATTR_FORM_HANDLED)) {\r\n                Utils.addEventListener(form, \"submit\", makeSubmitHandler(form));\r\n                form.setAttribute(ATTR_FORM_HANDLED, \"true\");\r\n            }\r\n        }\r\n\r\n        // Bind event handlers to the element so we can hide/show the placeholder as appropriate\r\n        Utils.addEventListener(elem, \"focus\", makeFocusHandler(elem));\r\n        Utils.addEventListener(elem, \"blur\", makeBlurHandler(elem));\r\n\r\n        // If the placeholder should hide on input rather than on focus we need additional event handlers\r\n        if (hideOnInput) {\r\n            Utils.addEventListener(elem, \"keydown\", makeKeydownHandler(elem));\r\n            Utils.addEventListener(elem, \"keyup\", makeKeyupHandler(elem));\r\n            Utils.addEventListener(elem, \"click\", makeClickHandler(elem));\r\n        }\r\n\r\n        // Remember that we've bound event handlers to this element\r\n        elem.setAttribute(ATTR_EVENTS_BOUND, \"true\");\r\n        elem.setAttribute(ATTR_CURRENT_VAL, placeholder);\r\n\r\n        // If the element doesn't have a value and is not focussed, set it to the placeholder string\r\n        if (hideOnInput || elem !== safeActiveElement()) {\r\n            showPlaceholder(elem);\r\n        }\r\n    }\r\n\r\n    Placeholders.nativeSupport = test.placeholder !== void 0;\r\n\r\n    if (!Placeholders.nativeSupport) {\r\n\r\n        // Get references to all the input and textarea elements currently in the DOM (live NodeList objects to we only need to do this once)\r\n        inputs = document.getElementsByTagName(\"input\");\r\n        textareas = document.getElementsByTagName(\"textarea\");\r\n\r\n        // Get any settings declared as data-* attributes on the root element (currently the only options are whether to hide the placeholder on focus or input and whether to auto-update)\r\n        hideOnInput = root.getAttribute(ATTR_OPTION_FOCUS) === \"false\";\r\n        liveUpdates = root.getAttribute(ATTR_OPTION_LIVE) !== \"false\";\r\n\r\n        // Create style element for placeholder styles (instead of directly setting style properties on elements - allows for better flexibility alongside user-defined styles)\r\n        styleElem = document.createElement(\"style\");\r\n        styleElem.type = \"text/css\";\r\n\r\n        // Create style rules as text node\r\n        styleRules = document.createTextNode(\".\" + placeholderClassName + \" { color:\" + placeholderStyleColor + \"; }\");\r\n\r\n        // Append style rules to newly created stylesheet\r\n        if (styleElem.styleSheet) {\r\n            styleElem.styleSheet.cssText = styleRules.nodeValue;\r\n        } else {\r\n            styleElem.appendChild(styleRules);\r\n        }\r\n\r\n        // Prepend new style element to the head (before any existing stylesheets, so user-defined rules take precedence)\r\n        head.insertBefore(styleElem, head.firstChild);\r\n\r\n        // Set up the placeholders\r\n        for (i = 0, len = inputs.length + textareas.length; i < len; i++) {\r\n            elem = i < inputs.length ? inputs[i] : textareas[i - inputs.length];\r\n\r\n            // Get the value of the placeholder attribute, if any. IE10 emulating IE7 fails with getAttribute, hence the use of the attributes node\r\n            placeholder = elem.attributes.placeholder;\r\n            if (placeholder) {\r\n\r\n                // IE returns an empty object instead of undefined if the attribute is not present\r\n                placeholder = placeholder.nodeValue;\r\n\r\n                // Only apply the polyfill if this element is of a type that supports placeholders, and has a placeholder attribute with a non-empty value\r\n                if (placeholder && Utils.inArray(validTypes, elem.type)) {\r\n                    newElement(elem);\r\n                }\r\n            }\r\n        }\r\n\r\n        // If enabled, the polyfill will repeatedly check for changed/added elements and apply to those as well\r\n        timer = setInterval(function () {\r\n            for (i = 0, len = inputs.length + textareas.length; i < len; i++) {\r\n                elem = i < inputs.length ? inputs[i] : textareas[i - inputs.length];\r\n\r\n                // Only apply the polyfill if this element is of a type that supports placeholders, and has a placeholder attribute with a non-empty value\r\n                placeholder = elem.attributes.placeholder;\r\n                if (placeholder) {\r\n                    placeholder = placeholder.nodeValue;\r\n                    if (placeholder && Utils.inArray(validTypes, elem.type)) {\r\n\r\n                        // If the element hasn't had event handlers bound to it then add them\r\n                        if (!elem.getAttribute(ATTR_EVENTS_BOUND)) {\r\n                            newElement(elem);\r\n                        }\r\n\r\n                        // If the placeholder value has changed or not been initialised yet we need to update the display\r\n                        if (placeholder !== elem.getAttribute(ATTR_CURRENT_VAL) || (elem.type === \"password\" && !elem.getAttribute(ATTR_INPUT_TYPE))) {\r\n\r\n                            // Attempt to change the type of password inputs (fails in IE < 9)\r\n                            if (elem.type === \"password\" && !elem.getAttribute(ATTR_INPUT_TYPE) && Utils.changeType(elem, \"text\")) {\r\n                                elem.setAttribute(ATTR_INPUT_TYPE, \"password\");\r\n                            }\r\n\r\n                            // If the placeholder value has changed and the placeholder is currently on display we need to change it\r\n                            if (elem.value === elem.getAttribute(ATTR_CURRENT_VAL)) {\r\n                                elem.value = placeholder;\r\n                            }\r\n\r\n                            // Keep a reference to the current placeholder value in case it changes via another script\r\n                            elem.setAttribute(ATTR_CURRENT_VAL, placeholder);\r\n                        }\r\n                    }\r\n                } else if (elem.getAttribute(ATTR_ACTIVE)) {\r\n                    hidePlaceholder(elem);\r\n                    elem.removeAttribute(ATTR_CURRENT_VAL);\r\n                }\r\n            }\r\n\r\n            // If live updates are not enabled cancel the timer\r\n            if (!liveUpdates) {\r\n                clearInterval(timer);\r\n            }\r\n        }, 100);\r\n    }\r\n\r\n    Utils.addEventListener(global, \"beforeunload\", function () {\r\n        Placeholders.disable();\r\n    });\r\n\r\n    // Expose public methods\r\n    Placeholders.disable = Placeholders.nativeSupport ? noop : disablePlaceholders;\r\n    Placeholders.enable = Placeholders.nativeSupport ? noop : enablePlaceholders;\r\n\r\n}(this));\r\n\ndefine(\"polyfill/placeholders\", function(){});\n\n","define('taoQtiItem/qtiCreator/widgets/helpers/formElement',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiItem/core/Element',\n    'util/dom',\n    'ui/incrementer',\n    'ui/tooltipster',\n    'ui/selecter',\n    'ui/inplacer',\n    'ui/groupvalidator',\n    'taoQtiItem/qtiCreator/widgets/helpers/validators',\n    'polyfill/placeholders'\n], function($, _, __, Element, dom, spinner, tooltip, select2){\n    'use strict';\n\n    var formElement = {\n        initWidget : function($form){\n            spinner($form);\n            tooltip($form);\n            select2($form);\n        },\n        /**\n         * register attribute change callback functions when associated form elements has been modified\n         *\n         * @param {Object} $form - the jQuery form element\n         * @param {Object} element - a js qti element (see qtiCreator/model)\n         * @param {Object} attributes - key value attributeName:callback, e.g. {identifier:function(element, value, attrName){ element.attr(attrName, value); }}\n         * @param {Boolean} [options.validateOnInit = false] - define if the validation should be trigger immediately after the callbacks have been set\n         * @param {Boolean} [options.invalidate = false] - define if the validation set the valid/invalidate state to the widget of the element\n         */\n        setChangeCallbacks : function($form, element, attributes, options){\n\n            attributes = attributes || {};\n            options = _.defaults(options || {}, {\n                validateOnInit : false,\n                invalidate : false\n            });\n\n            var _callbackCall = function(name, value, $elt){\n                var cb = attributes[name];\n                if(_.isFunction(cb)){\n                    cb.call($elt[0], element, value, name);\n                }\n            };\n\n            var callback = {\n                simple : function(){\n\n                    var $elt = $(this),\n                        name = $elt.attr('name');\n\n                    if($elt.is(':checkbox')){\n                        _callbackCall(name, $elt.prop('checked'), $elt);\n                    }else{\n                        _callbackCall(name, $elt.val(), $elt);\n                    }\n\n                },\n                withValidation : function(e, valid, elt){\n\n                    if(e.namespace === 'group'){\n\n                        var $elt = $(elt),\n                            name = $elt.attr('name');\n\n                        _callbackCall(name, $elt.val(), $elt);\n                        if(options.invalidate){\n                            element.data('widget').isValid(name, valid);\n                        }\n                    }\n                }\n            };\n\n            $form.off('.databinding');\n            $form.on('change.databinding keyup.databinding', ':checkbox, :radio, select, :text:not([data-validate]), :hidden:not([data-validate])', callback.simple);\n            $form.on('keyup.databinding input.databinding propertychange.databinding', 'textarea', callback.simple);\n\n            $form.on('validated.group.databinding', callback.withValidation);\n\n            _.defer(function(){\n                $form.groupValidator({\n                    validateOnInit : options.validateOnInit,\n                    events : ['change', 'blur', {type : 'keyup', length : 0}],\n                    callback : _validationCallback\n                });\n            });\n\n        },\n        initTitle : function($form, element){\n\n            var $title = $form.hasClass('qti-title') ? $form : $form.find('.qti-title');\n\n            $title\n                .inplacer({\n                    target : $('#qti-title')\n                })\n                .attr('title', __('Edit modal feedback title'))\n                .on('change', function(){\n                    element.attr('title', $(this).text());\n                });\n        },\n        /**\n         * the simplest form of save callback used in setChangeCallbacks()\n         * @param {boolean} allowEmpty\n         */\n        getAttributeChangeCallback : function(allowEmpty){\n\n            return function(element, value, name){\n                if(!allowEmpty && value === ''){\n                    element.removeAttr(name);\n                }else{\n                    element.attr(name, value);\n                }\n            };\n        },\n        /**\n         * Create a coupled callbacks for min and max value change, when both are using the ui/incrementer widget.\n         * It is used to update constraints on one when modifying the other.\n         * \n         * @param {Object} $form - the JQuery object representing the form container\n         * @param {String} attributeNameMin\n         * @param {String} attributeNameMax\n         * @param {Object} options\n         * @returns {Object}\n         */\n        getMinMaxAttributeCallbacks : function($form, attributeNameMin, attributeNameMax, options){\n\n            var _defaults = {\n                allowNull : false,\n                updateCardinality : true,\n                attrMethodNames : {\n                    remove : 'removeAttr',\n                    set : 'attr'\n                },\n                callback : _.noop\n            },\n            $max = $form.find('input[name=' + attributeNameMax + ']'),\n                callbacks = {};\n\n            //prepare options object\n            options = _.defaults(options || {}, _defaults);\n\n            callbacks[attributeNameMin] = function(element, value, name){\n\n                var newOptions = {min : 0};\n\n                value = parseInt(value);\n                var isActualNumber = !isNaN(value);\n\n                if(!options.allowNull && (value === 0 || !isActualNumber)){\n\n                    //if a null attribute is not allowed, remove it !\n                    element[options.attrMethodNames.remove](name);\n\n                }else if(isActualNumber){\n\n                    //if the value is an actual number\n                    element[options.attrMethodNames.set](name, value);\n                    newOptions.min = value;\n\n                    var max = parseInt($max.val());\n                    if(max < value){\n                        $max.val(value);\n                    }\n                }\n                //set incrementer min value for maxChoices and trigger keyup event to launch validation\n                $max.incrementer('options', newOptions).keyup();\n\n                options.callback(element, value, name);\n            };\n\n            callbacks[attributeNameMax] = function(element, value, name){\n\n                value = parseInt(value) || 0;\n\n                if(element.is('interaction')){\n                    //update response\n                    _updateResponseDeclaration(element, value, options.updateCardinality);\n                }\n\n                if(!value && (element.is('orderInteraction') || element.is('graphicOrderInteraction'))){\n                    element[options.attrMethodNames.remove](name);//to be removed for order interactions\n                }else{\n                    element[options.attrMethodNames.set](name, value);//required\n                }\n\n                options.callback(element, value, name);\n            };\n\n            return callbacks;\n        }\n    };\n\n    var _updateResponseDeclaration = function(interaction, maxChoice, updateCardinality){\n\n        if(Element.isA(interaction, 'interaction')){\n            updateCardinality = (updateCardinality === undefined) ? true : !!updateCardinality;\n\n            var responseDeclaration = interaction.getResponseDeclaration();\n            if(updateCardinality){\n                responseDeclaration.attr('cardinality', (maxChoice === 1) ? 'single' : 'multiple');\n            }\n\n            if(maxChoice){\n                //always update the correct response then:\n                var correct = [];\n                _.each(responseDeclaration.getCorrect(), function(c){\n                    if(correct.length < maxChoice){\n                        correct.push(c);\n                    }else{\n                        return false;\n                    }\n                });\n                responseDeclaration.setCorrect(correct);\n            }\n\n        }else{\n            throw new Error('the first argument must be an interaction, the current element is ' + interaction.qtiClass);\n        }\n\n\n    };\n\n    var _validationCallback = function _validationCallback(valid, results){\n\n        var $input = $(this),\n            rule;\n\n        if(dom.contains($input)){\n\n            _createTooltip($input);\n\n            $input.tooltipster('hide');\n\n            if(!valid){\n\n                //invalid input!\n                rule = _.where(results, {type : 'failure'})[0];\n                if(rule && rule.data.message){\n                    $input.tooltipster('content', rule.data.message);\n                    if(!$('#mediaManager').children('.opened').length){\n                        //only show it when the filemanager is hidden\n                        $input.tooltipster('show');\n                    }\n                }\n\n            }\n\n        }\n\n\n\n    };\n\n    var _createTooltip = function($input){\n        if(!$input.hasClass('tooltipstered')){\n            $input.tooltipster({\n                theme : 'tao-error-tooltip',\n                content : '',\n                delay : 350,\n                trigger : 'custom'\n            });\n        }\n    };\n\n    return formElement;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/helpers/inline',[\n    'lodash',\n    'taoQtiItem/qtiCreator/helper/dummyElement',\n    'core/validator/validators'\n], function(_, dummyElement, validators){\n\n    var _qtiClassToDummies = {\n        math : 'maths',\n        img : 'image',\n        object : 'media'\n    };\n\n    //only valid for a state\n    inlineHelper = {\n        checkFileExists : function(widget, fileSrcAttrName, baseUrl){\n\n            var element = widget.element;\n\n            validators.validators.fileExists.validate(\n                element.attr(fileSrcAttrName),\n                function(fileExists){\n                    if(!fileExists){\n                        //clear value:\n                        element.attr(fileSrcAttrName, '');\n                        inlineHelper.togglePlaceholder(widget);\n                    }\n                },\n                {\n                    baseUrl : baseUrl || ''\n                });\n\n        },\n        togglePlaceholder : function(widget, opts){\n\n            var options = _.defaults(opts || {}, {\n                container : widget.$original,\n                type : widget.element.qtiClass\n            });\n\n            var $container = options.container;\n            var $placeholder = $container.siblings('.dummy-element');\n\n            if(widget.element.isEmpty()){\n\n                $container.hide();\n\n                var type = _qtiClassToDummies[options.type] || options.type;\n                if(!$placeholder.length){\n                    $placeholder = dummyElement.get(type);\n                    $container.after($placeholder);\n                }\n                $placeholder.show();\n\n            }else{\n\n                $container.show();\n                $placeholder.hide();\n            }\n\n            widget.$container.trigger('contentChange.qti-widget');\n        },\n        positionFloat : function(widget, position){\n\n            var $container = widget.$container,\n                elt = widget.element;\n\n            //remove class\n            $container.removeClass('rgt lft');\n\n            elt.removeClass('rgt');\n            elt.removeClass('lft');\n            switch(position){\n                case 'right':\n                    $container.addClass('rgt');\n                    elt.addClass('rgt');\n                    break;\n                case 'left':\n                    $container.addClass('lft');\n                    elt.addClass('lft');\n                    break;\n            }\n        }\n    };\n\n    return inlineHelper;\n});\n\n\n","define('taoQtiItem/qtiCreator/widgets/static/img/states/Active',[\n    'jquery',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Active',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/static/img',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline',\n    'taoQtiItem/qtiItem/helper/util',\n    'lodash',\n    'util/image',\n    'ui/mediasizer',\n    'ui/resourcemgr',\n    'nouislider'\n], function($, __, stateFactory, Active, formTpl, formElement, inlineHelper, itemUtil, _, imageUtil){\n\n    var ImgStateActive = stateFactory.extend(Active, function(){\n\n        this.initForm();\n\n    }, function(){\n\n        this.widget.$form.empty();\n    });\n\n    /**\n     * Extract a default label from a file/path name\n     * @param {String} fileName - the file/path\n     * @returns {String} a label\n     */\n    var _extractLabel = function extractLabel(fileName){\n        return fileName\n            .replace(/\\.[^.]+$/, '')\n            .replace(/^(.*)\\//, '')\n            .replace(/\\W/, ' ')\n            .substr(0, 255);\n    };\n\n    ImgStateActive.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $img = _widget.$original,\n            $form = _widget.$form,\n            img = _widget.element,\n            baseUrl = _widget.options.baseUrl,\n            responsive = true;\n\n        $form.html(formTpl({\n            baseUrl : baseUrl || '',\n            src : img.attr('src'),\n            alt : img.attr('alt'),\n            height : img.attr('height'),\n            width : img.attr('width'),\n            responsive : responsive\n        }));\n\n        //init slider and set align value before ...\n        _initAdvanced(_widget);\n        _initMediaSizer(_widget);\n        _initAlign(_widget);\n        _initUpload(_widget);\n\n        //... init standard ui widget\n        formElement.initWidget($form);\n\n        //init data change callbacks\n        formElement.setChangeCallbacks($form, img, {\n            src : _.throttle(function(img, value){\n\n                img.attr('src', value);\n\n                $img.attr('src', itemUtil.fullpath(value, baseUrl));\n                $img.trigger('contentChange.qti-widget').change();\n\n                inlineHelper.togglePlaceholder(_widget);\n\n                _initAdvanced(_widget);\n                _initMediaSizer(_widget);\n            }, 1000),\n            alt : function(img, value){\n                img.attr('alt', value);\n            },\n            longdesc : formElement.getAttributeChangeCallback(),\n            align : function(img, value){\n                inlineHelper.positionFloat(_widget, value);\n            }\n        });\n\n    };\n\n    var _initAlign = function(widget){\n\n        var align = 'default';\n\n        //init float positioning:\n        if(widget.element.hasClass('rgt')){\n            align = 'right';\n        }else if(widget.element.hasClass('lft')){\n            align = 'left';\n        }\n\n        inlineHelper.positionFloat(widget, align);\n        widget.$form.find('select[name=align]').val(align);\n    };\n\n\n    var _initMediaSizer = function(widget){\n\n        var img = widget.element,\n            $src = widget.$form.find('input[name=src]'),\n            $mediaResizer = widget.$form.find('.img-resizer'),\n            $mediaSpan = widget.$container;\n\n        if($src.val()){\n\n            //init data-responsive:\n            if(img.data('responsive') === undefined){\n                if(img.attr('width') && !/[0-9]+%/.test(img.attr('width'))){\n                    img.data('responsive', false);\n                }else{\n                    img.data('responsive', true);\n                }\n            }\n\n            //hack to fix the initial width issue:\n            if(img.data('responsive')){\n                $mediaSpan.css('width', img.attr('width'))\n                $mediaSpan.css('height', '')\n            }\n\n            //init media sizer\n            $mediaResizer.mediasizer({\n                responsive : (img.data('responsive') !== undefined) ? !!img.data('responsive') : true,\n                target : widget.$original,\n                applyToMedium : false\n            });\n\n            //bind modification events\n            $mediaResizer\n                .off('.mediasizer')\n                .on('responsiveswitch.mediasizer', function(e, responsive){\n\n                    img.data('responsive', responsive);\n\n                })\n                .on('sizechange.mediasizer', function(e, size){\n\n                \n                _(['width', 'height']).each(function(sizeAttr){\n                    if(size[sizeAttr] === '' || size[sizeAttr] === undefined || size[sizeAttr] === null){\n                        img.removeAttr(sizeAttr);\n                        $mediaSpan.css(sizeAttr, '')\n                    }else{\n                        img.attr(sizeAttr, size[sizeAttr]);\n                        $mediaSpan.css(sizeAttr, size[sizeAttr])\n                    }\n\n                    //trigger choice container size adaptation\n                    widget.$container.trigger('contentChange.qti-widget');\n                });\n\n            });\n        }\n\n    };\n\n    var _initAdvanced = function(widget){\n\n        var $form = widget.$form,\n            src = widget.element.attr('src');\n\n        if(src){\n            $form.find('[data-role=advanced]').show();\n        }else{\n            $form.find('[data-role=advanced]').hide();\n        }\n    };\n\n\n    var _initUpload = function(widget){\n\n        var $form = widget.$form,\n            options = widget.options,\n            img = widget.element,\n            $container = widget.$container,\n            $uploadTrigger = $form.find('[data-role=\"upload-trigger\"]'),\n            $src = $form.find('input[name=src]'),\n            $alt = $form.find('input[name=alt]');\n        if(options.mediaManager.mediaSources.length === 0){\n            mediaSources = ['local'];\n        }\n        else{\n            mediaSources = options.mediaManager.mediaSources;\n        }\n        var _openResourceMgr = function(){\n            $uploadTrigger.resourcemgr({\n                title : __('Please select an image file from the resource manager. You can add files from your computer with the button \"Add file(s)\".'),\n                appendContainer : options.mediaManager.appendContainer,\n                mediaSources : mediaSources,\n                browseUrl : options.mediaManager.browseUrl,\n                uploadUrl : options.mediaManager.uploadUrl,\n                deleteUrl : options.mediaManager.deleteUrl,\n                downloadUrl : options.mediaManager.downloadUrl,\n                fileExistsUrl : options.mediaManager.fileExistsUrl,\n                params : {\n                    uri : options.uri,\n                    lang : options.lang,\n                    filters : 'image/jpeg,image/png,image/gif'\n                },\n                pathParam : 'path',\n                select : function(e, files){\n                    \n                    var file, alt;\n                    \n                    if(files && files.length){\n                        \n                        file = files[0].file;\n                        alt = files[0].alt;\n\n                        imageUtil.getSize(options.baseUrl + file, function(size){\n\n                            if(size && size.width >= 0){\n                                \n                                var w = parseInt(size.width, 10),\n                                    maxW = $container.parents().innerWidth();\n                                    \n                                //always set the image size in % of the container size with a seurity margin of 5%\n                                if(w >= maxW * 0.95){\n                                    img.attr('width', '100%');\n                                }else{\n                                    w = parseInt(100*w/maxW);\n                                    img.attr('width', w+'%');\n                                }\n                                img.removeAttr('height');\n                            }\n\n                            if($.trim($alt.val()) === ''){\n                                if(alt === ''){\n                                    alt = _extractLabel(file);\n                                }\n                                img.attr('alt', alt);\n                                $alt.val(alt).trigger('change');\n                            }\n                            else{\n                                var confirmBox = $('.change-alt-modal-feedback'),\n                                    cancel = confirmBox.find('.cancel'),\n                                    save = confirmBox.find('.save'),\n                                    close = confirmBox.find('.modal-close');\n\n                                $('.alt-text',confirmBox).html('\"' + $alt.val() + '\"<br>with<br>\"' + alt+'\" ?');\n\n                                confirmBox.modal({ width: 500 });\n\n                                save.off('click')\n                                    .on('click', function () {\n                                        img.attr('alt', alt);\n                                        $alt.val(alt).trigger('change');\n                                        confirmBox.modal('close');\n                                    });\n\n                                cancel.off('click')\n                                    .on('click', function () {\n                                        confirmBox.modal('close');\n                                    });\n                            }\n\n                            _.defer(function(){\n                                $src.val(file).trigger('change');\n                            });\n                        });\n                    }\n                },\n                open : function(){\n                    //hide tooltip if displayed\n                    if($src.hasClass('tooltipstered')){\n                        $src.blur().tooltipster('hide');\n                    }\n                },\n                close : function(){\n                    //triggers validation : \n                    $src.blur();\n                }\n            });\n        };\n\n        $uploadTrigger.on('click', _openResourceMgr);\n\n        //if empty, open file manager immediately\n        if(!$src.val()){\n            _openResourceMgr();\n        }\n\n    };\n\n    return ImgStateActive;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/img/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/img/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/static/img/states/Active'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/static/helpers/widget',['jquery', 'lodash'], function($, _){\n\n    var helper = {\n        buildInlineContainer : function(widget){\n            \n            var float = '';\n            if(widget.element.hasClass('lft')){\n                float = ' lft';\n            }else if(widget.element.hasClass('rgt')){\n                float = ' rgt';\n            }\n            \n            var $wrap = $('<span>', {\n                'data-serial' : widget.element.serial,\n                'class' : 'widget-box widget-inline widget-'+widget.element.qtiClass+float,\n                'data-qti-class' : widget.element.qtiClass,\n                'contenteditable' : 'false'\n            });\n            widget.$container = widget.$original.wrap($wrap).parent();\n\n            var textNode = widget.$container[0].nextSibling;\n            if(textNode){\n                //@todo : make text cursor positioning after an inline widget easier\n                textNode.nodeValue = ' '+textNode.nodeValue;\n            }\n        },\n        buildBlockContainer : function(widget){\n            \n            //absolutely need a div here (not span), otherwise mathjax will break\n            var $wrap = $('<div>', {\n                'data-serial' : widget.element.serial,\n                'class' : 'widget-box widget-block widget-'+widget.element.qtiClass,\n                'data-qti-class' : widget.element.qtiClass\n            });\n            widget.$container = widget.$original.wrap($wrap).parent();\n        },\n        createToolbar : function(widget, toolbarTpl){\n        \n            if(_.isFunction(toolbarTpl)){\n\n                var $tlb = $(toolbarTpl({\n                    serial : widget.serial,\n                    state : 'active'\n                }));\n\n                widget.$container.append($tlb);\n\n                $tlb.find('[data-role=\"delete\"]').on('click.widget-box', function(e){\n                    e.stopPropagation();//to prevent direct deleting;\n                    widget.changeState('deleting');\n                });\n\n            }else{\n                throw 'the toolbarTpl must be a handlebars function';\n            }\n        }\n    };\n\n    return helper;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/media', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"mini-tlb\\\" data-edit=\\\"\";\n  if (helper = helpers.state) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.state); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"rgt tlb-button\\\" title=\\\"Delete\\\" data-role=\\\"delete\\\">\\n        <span class=\\\"icon-bin\\\"></span>\\n    </span>\\n</span>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/img/Widget',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/static/Widget',\n    'taoQtiItem/qtiCreator/widgets/static/img/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/media',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline',\n    'taoQtiItem/qtiItem/helper/util'\n], function($, Widget, states, helper, toolbarTpl, inlineHelper, itemUtil){\n\n    var ImgWidget = Widget.clone();\n\n    ImgWidget.initCreator = function(options){\n\n        var _this = this,\n            img = _this.element,\n            baseUrl = options.baseUrl;\n\n        this.registerStates(states);\n\n        Widget.initCreator.call(this);\n\n        inlineHelper.togglePlaceholder(this);\n\n        //check file exists:\n        inlineHelper.checkFileExists(this, 'src', options.baseUrl);\n        $('#item-editor-scope').on('filedelete.resourcemgr.' + this.element.serial, function(e, src){\n            if(itemUtil.fullpath(img.attr('src'), baseUrl) === itemUtil.fullpath(src, baseUrl)){\n                img.attr('src', '');\n                inlineHelper.togglePlaceholder(_this);\n            }\n        });\n    };\n\n    ImgWidget.destroy = function(){\n        $('#item-editor-scope').off('.' + this.element.serial);\n    };\n\n    ImgWidget.getRequiredOptions = function(){\n        return ['baseUrl', 'uri', 'lang', 'mediaManager'];\n    };\n\n    ImgWidget.buildContainer = function(){\n\n        helper.buildInlineContainer(this);\n\n        this.$container.css({\n            width: this.element.attr('width'),\n            height: this.element.attr('height')\n        });\n        this.$original[0].setAttribute('width', '100%');\n        this.$original[0].setAttribute('height', '100%');\n\n        return this;\n    };\n\n    ImgWidget.createToolbar = function(){\n\n        helper.createToolbar(this, toolbarTpl);\n\n        return this;\n    };\n\n    return ImgWidget;\n});\n\n","define('taoQtiItem/qtiCreator/renderers/Img',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/Img',\n    'taoQtiItem/qtiCreator/widgets/static/img/Widget'\n], function(_, Renderer, Widget){\n\n    var CreatorImg = _.clone(Renderer);\n\n    CreatorImg.render = function(img, options){\n        \n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        \n        return Widget.build(\n            img,\n            Renderer.getContainer(img),\n            this.getOption('bodyElementOptionForm'),\n            options\n        );\n    };\n\n    return CreatorImg;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/item', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \" attributes.id\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \" attributes.class\";\n  }\n\n  buffer += \"<div class=\\\"qti-item tao-scope runtime\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n    <div\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" class=\\\"qti-itemBody\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\\n    <div id=\\\"modalFeedbacks\\\"></div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/helpers/itemStylesheetHandler',[\n    'jquery',\n    'lodash'\n], function($, _){\n    'use strict';\n\n    var itemStylesheetHandler = (function(){\n\n        var informLoaded = _.throttle(function(){\n            $(document).trigger('customcssloaded.styleeditor');\n        }, 10, {leading : false});\n\n        var attach = function(stylesheets) {\n            var $head = $('head'), link;\n\n             $('body').addClass('tao-scope');\n\n             // relative links with cache buster\n            _(stylesheets).forEach(function(stylesheet){\n\n                var $link = $(stylesheet.render());\n                var href = $link.attr('href');\n                var sep  = href.indexOf('?') > -1 ? '&' : '?';\n\n\n\n                if(href.indexOf('/') === 0) {\n                    href = href.slice(1);\n                }\n                \n                href +=  sep + (new Date().getTime()).toString();\n\n                //we need to set the href after the link is appended to the head (for our dear IE)\n                $link.removeAttr('href')\n                     .appendTo($head)\n                     .attr('href', href);\n\n                //wait for the styles to applies\n                _.delay(informLoaded, 10);\n            });\n        };\n\n        return {\n            attach: attach\n        };\n\n    }());\n\n    return itemStylesheetHandler;\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/Item',[\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/item',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/itemStylesheetHandler'\n], function(tpl, containerHelper, itemStylesheetHandler) {\n    return {\n        qtiClass: 'assessmentItem',\n        template: tpl,\n        getContainer: containerHelper.get,\n        render: function(item) {\n            \n            //target blank for all <a>\n            containerHelper.targetBlank(containerHelper.get(item));\n            \n            //add stylesheets\n            itemStylesheetHandler.attach(item.stylesheets);\n        }\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/item', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Identifier\", options) : helperMissing.call(depth0, \"__\", \"Identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The principle identifier of the item. This identifier must have a corresponding entry in the item's metadata.\", options) : helperMissing.call(depth0, \"__\", \"The principle identifier of the item. This identifier must have a corresponding entry in the item's metadata.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. my-item_123456\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n    \\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"timeDependent\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.timeDependent), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Time dependent\", options) : helperMissing.call(depth0, \"__\", \"Time dependent\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Define whether the item should be time dependent on delivery.\", options) : helperMissing.call(depth0, \"__\", \"Define whether the item should be time dependent on delivery.\", options)))\n    + \"\\n    </span>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/item/states/Active',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Active',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/item',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement'\n], function(stateFactory, Active, formTpl, formElement){\n\n    var ItemStateActive = stateFactory.create(Active, function(){\n\n        this.initForm();\n\n    }, function(){\n\n    });\n\n    ItemStateActive.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            item = _widget.element,\n            $form = _widget.$form;\n\n        //build form:\n        $form.html(formTpl({\n            serial : item.getSerial(),\n            identifier : item.id(),\n            timeDependent : !!item.attr('timeDependent')\n        }));\n        \n        //init widget\n        formElement.initWidget($form);\n\n        //init data validation and binding\n        formElement.setChangeCallbacks($form, item, {\n            identifier : formElement.getAttributeChangeCallback(),\n            timeDependent : formElement.getAttributeChangeCallback()\n        });\n    };\n\n    return ItemStateActive;\n});\n","define('taoQtiItem/qtiCreator/widgets/item/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/item/states/Active'\n], function(factory){\n    return factory.createBundle(arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/item/Widget',[\n    'lodash',\n    'i18n',\n    'jquery',\n    'helpers',\n    'taoQtiItem/qtiCreator/widgets/Widget',\n    'taoQtiItem/qtiCreator/widgets/item/states/states',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/helper/creatorRenderer',\n    'taoQtiItem/qtiCreator/model/helper/container',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'taoQtiItem/qtiCreator/helper/xmlRenderer',\n    'taoQtiItem/qtiCreator/helper/devTools',\n    'taoQtiItem/qtiCreator/widgets/static/text/Widget',\n    'taoQtiItem/qtiCreator/editor/styleEditor/styleEditor',\n    'taoQtiItem/qtiCreator/editor/editor',\n    'tpl!taoQtiItem/qtiCreator/tpl/notifications/genericFeedbackPopup',\n    'taoQtiItem/qtiCreator/editor/jquery.gridEditor'\n], function(\n    _,\n    __,\n    $,\n    helpers,\n    Widget,\n    states,\n    Element,\n    creatorRenderer,\n    containerHelper,\n    contentHelper,\n    xmlRenderer,\n    devTools,\n    TextWidget,\n    styleEditor,\n    itemEditor,\n    genericFeedbackPopup\n    ){\n    \n    'use strict';\n    \n    var ItemWidget = Widget.clone();\n\n    ItemWidget.initCreator = function(config){\n\n        this.registerStates(states);\n\n        Widget.initCreator.call(this);\n\n        if(!config || !config.uri){\n            throw new Error('missing required config parameter uri in item widget initialization');\n        }\n\n        this.renderer = config.renderer;\n\n        this.itemUri = config.uri;\n\n        this.initUiComponents();\n\n        this.initTextWidgets(function(){\n\n            //when the text widgets are ready:\n            this.initGridEditor();\n\n            //active debugger\n            this.debug({\n                state : false,\n                xml : false\n            });\n        });\n    };\n\n    ItemWidget.buildContainer = function(){\n\n        this.$container = this.$original;\n    };\n\n    ItemWidget.save = function(){\n        return $.ajax({\n            url : helpers._url('saveItem', 'QtiCreator', 'taoQtiItem', {uri : this.itemUri}),\n            type : 'POST',\n            contentType : 'text/xml',\n            dataType : 'json',\n            data : xmlRenderer.render(this.element)\n        });\n    };\n\n    ItemWidget.initUiComponents = function(){\n\n        var _widget = this,\n            element = _widget.element,\n            $saveBtn = $('#save-trigger'),\n            $previewBtn = $('.preview-trigger');\n\n        //init save button:\n        $saveBtn.on('click', function(e){\n\n            var $saveButton = $(this);\n            \n            //trigger save event\n            $saveButton.trigger('beforesave.qti-creator');\n\n            if($saveButton.hasClass('disabled')){\n                e.preventDefault();\n                return;\n            }\n\n            $saveButton.addClass('active');\n            \n            //defer exceution of save function to give beforesave chance to be executed\n            _.defer(function(){\n\n                $.when(styleEditor.save(), _widget.save()).done(function(){\n\n                    var success = true, \n                        feedbackArgs = {\n                        message : __('Your item has been saved'),\n                        type : 'success'\n                    },\n                    i = arguments.length;\n\n                    $saveButton.removeClass('active');\n\n                    while(i--){\n                        if(arguments[i][1].toLowerCase() !== 'success'){\n                            feedbackArgs = {\n                                message : __('Failed to save item'),\n                                type : 'error'\n                            };\n                            success = false;\n                            break;\n                        }\n                    }\n                    \n                    $saveButton.trigger('aftersave.qti-creator', [success]);\n                    _createInfoBox(feedbackArgs);\n                });\n            });\n            \n        });\n\n        $previewBtn.on('click', function(){\n            itemEditor.initPreview(_widget);\n        });\n\n        //listen to invalid states:\n        _widget.on('metaChange', function(data){\n            if(data.element.getSerial() === element.getSerial() && data.key === 'invalid'){\n                var invalid = element.data('invalid');\n                if(_.size(invalid)){\n                    $saveBtn.addClass('disabled');\n                }else{\n                    $saveBtn.removeClass('disabled');\n                }\n            }\n        }, true);\n\n    };\n\n    ItemWidget.initGridEditor = function(){\n\n        var _this = this,\n            item = this.element,\n            $itemBody = this.$container.find('.qti-itemBody'),\n            $itemEditorPanel = $('#item-editor-panel');\n\n        $itemBody.gridEditor();\n        $itemBody.gridEditor('resizable');\n        $itemBody.gridEditor('addInsertables', $('.tool-list > [data-qti-class]:not(.disabled)'), {\n            helper : function(){\n                return $(this).find('.icon').clone().addClass('dragging');\n            }\n        });\n\n        $itemBody.on('beforedragoverstart.gridEdit', function(){\n\n            $itemEditorPanel.addClass('dragging');\n            $itemBody.removeClass('hoverable').addClass('inserting');\n\n        }).on('dragoverstop.gridEdit', function(){\n\n            $itemEditorPanel.removeClass('dragging');\n            $itemBody.addClass('hoverable').removeClass('inserting');\n\n        }).on('dropped.gridEdit.insertable', function(e, qtiClass, $placeholder){\n            \n            //a new qti element has been added: update the model + render\n            $placeholder.removeAttr('id');//prevent it from being deleted\n\n            if(qtiClass === 'rubricBlock'){\n                //qti strange exception: a rubricBlock must be the first child of itemBody, nothing else...\n                //so in this specific case, consider the whole row as the rubricBlock\n                //by the way, in our grid system, rubricBlock can only have a width of col-12\n                $placeholder = $placeholder.parent('.col-12').parent('.grid-row');\n            }\n\n            $placeholder.addClass('widget-box');//required for it to be considered as a widget during container serialization\n            $placeholder.attr({\n                'data-new' : true,\n                'data-qti-class' : qtiClass\n            });//add data attribute to get the dom ready to be replaced by rendering\n\n            var $widget = $placeholder.parent().closest('.widget-box, .qti-item');\n            var $editable = $placeholder.closest('[data-html-editable], .qti-itemBody');\n            var widget = $widget.data('widget');\n            var element = widget.element;\n            var container = Element.isA(element, '_container') ? element : element.getBody();\n\n            if(!element || !$editable.length){\n                throw new Error('cannot create new element');\n            }\n\n            containerHelper.createElements(container, contentHelper.getContent($editable), function(newElts){\n\n                creatorRenderer.get().load(function(){\n\n                    for(var serial in newElts){\n\n                        var elt = newElts[serial],\n                            $widget,\n                            widget,\n                            $colParent = $placeholder.parent();\n\n                        elt.setRenderer(this);\n\n                        if(Element.isA(elt, '_container')){\n                            $colParent.empty();//clear the col content, and leave an empty text field\n                            $colParent.html(elt.render());\n                            widget = _this.initTextWidget(elt, $colParent);\n                            $widget = widget.$container;\n                        }else{\n                            elt.render($placeholder);\n                            widget = elt.postRender();\n                            if(Element.isA(elt, 'blockInteraction')){\n                                $widget = widget.$container;\n                            }else{\n                                //leave the container in place\n                                $widget = widget.$original;\n                            }\n                        }\n\n                        //inform height modification\n                        $widget.trigger('contentChange.gridEdit');\n                        $widget.trigger('resize.gridEdit');\n\n                        //active it right away:\n                        if(Element.isA(elt, 'interaction')){\n                            widget.changeState('question');\n                        }else{\n                            widget.changeState('active');\n                        }\n\n                    }\n                }, this.getUsedClasses());\n            });\n\n        }).on('resizestop.gridEdit', function(){\n\n            item.body($itemBody.gridEditor('getContent'));\n\n        });\n\n    };\n\n    ItemWidget.initTextWidgets = function(callback){\n\n        var _this = this,\n            item = this.element,\n            $originalContainer = this.$container,\n            i = 1,\n            subContainers = [];\n\n        callback = callback || _.noop;\n\n        //temporarily tag col that need to be transformed into \n        $originalContainer.find('.qti-itemBody > .grid-row').each(function(){\n\n            var $row = $(this);\n\n            if(!$row.hasClass('widget-box')){//not a rubricBlock\n                $row.children().each(function(){\n\n                    var $col = $(this),\n                        isTextBlock = false;\n\n                    $col.contents().each(function(){\n                        if(this.nodeType === 3 && this.nodeValue && this.nodeValue.trim()){\n                            isTextBlock = true;\n                            return false;\n                        }\n                    });\n\n                    var $widget = $col.children();\n                    if($widget.length > 1 || !$widget.hasClass('widget-blockInteraction')){//not an immediate qti element\n                        if($widget.hasClass('colrow')){\n                            $widget.each(function(){\n                                var $subElement = $(this);\n                                var $subWidget = $subElement.children();\n                                if($subWidget.length > 1 || !$subWidget.hasClass('widget-blockInteraction')){\n                                    $subElement.attr('data-text-block-id', 'text-block-' + i);\n                                    i++;\n                                }\n                            });\n                        }else{\n                            isTextBlock = true;\n                        }\n                    }\n\n                    if(isTextBlock){\n                        $col.attr('data-text-block-id', 'text-block-' + i);\n                        i++;\n                    }\n                });\n            }\n        });\n        \n        //clone the container to create the new container model:\n        var $clonedContainer = $originalContainer.clone();\n        $clonedContainer.find('.qti-itemBody > .grid-row [data-text-block-id]').each(function(){\n\n            var $originalTextBlock = $(this),\n                textBlockId = $originalTextBlock.data('text-block-id'),\n                $subContainer = $originalTextBlock.clone(),\n                subContainerElements = contentHelper.serializeElements($subContainer),\n                subContainerBody = $subContainer.html();//get serialized body\n\n            $originalTextBlock.removeAttr('data-text-block-id').html('{{_container:new}}');\n\n            subContainers.push({\n                body : subContainerBody,\n                elements : subContainerElements,\n                $original : $originalContainer.find('[data-text-block-id=\"' + textBlockId + '\"]').removeAttr('data-text-block-id')\n            });\n        });\n\n        //create new container model with the created sub containers\n        contentHelper.serializeElements($clonedContainer);\n\n        var serializedItemBody = $clonedContainer.find('.qti-itemBody').html(),\n            itemBody = item.getBody();\n\n        if(subContainers.length){\n\n            containerHelper.createElements(itemBody, serializedItemBody, function(newElts){\n\n                if(_.size(newElts) !== subContainers.length){\n\n                    throw 'number of sub-containers mismatch';\n                }else{\n\n                    _.each(newElts, function(container){\n\n                        var containerData = subContainers.shift();//get data in order\n                        var containerElements = _detachElements(itemBody, containerData.elements);\n\n                        container.setElements(containerElements, containerData.body);\n\n                        _this.initTextWidget(container, containerData.$original);\n\n                    });\n\n                    _.defer(function(){\n                        callback.call(_this);\n                    });\n                }\n            });\n\n        }else{\n\n            callback.call(_this);\n        }\n\n    };\n\n    var _detachElements = function(container, elements){\n\n        var containerElements = {};\n        _.each(elements, function(elementSerial){\n            containerElements[elementSerial] = container.elements[elementSerial];\n            delete container.elements[elementSerial];\n        });\n        return containerElements;\n    };\n\n    ItemWidget.initTextWidget = function(container, $col){\n        return TextWidget.build(container, $col, this.renderer.getOption('textOptionForm'), {});\n    };\n\n    /**\n     * Enable debugging \n     * \n     * @param {Boolean} [options.state = false] - log state change in console\n     * @param {Boolean} [options.xml = false] - real-time qti xml display under the creator\n     */\n    ItemWidget.debug = function(options){\n\n        options = options || {};\n\n        if(options.state){\n            devTools.listenStateChange();\n        }\n\n        if(options.xml){\n            var $code = $('<code>', {'class' : 'language-markup'}),\n                $pre = $('<pre>', {'class' : 'line-numbers'}).append($code);\n\n            $('#item-editor-wrapper').append($pre);\n            devTools.liveXmlPreview(this.element, $code);\n        }\n\n    };\n\n\n    var _createInfoBox = function(data){\n        var $messageBox = $(genericFeedbackPopup(data)),\n            closeTrigger = $messageBox.find('.close-trigger');\n\n        $('body').append($messageBox);\n\n        closeTrigger.on('click', function(){\n            $messageBox.fadeOut(function(){\n                $(this).remove();\n            });\n        });\n\n        setTimeout(function(){\n            closeTrigger.trigger('click');\n        }, 2000);\n\n        return $messageBox;\n    };\n    \n    return ItemWidget;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/item', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"tao-scope qti-item item-editor-item clearfix\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n    <div id=\\\"modalFeedbacks\\\"></div>\\n    <div class=\\\"qti-itemBody item-editor-drop-area hoverable\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/renderers/Item',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/Item',\n    'taoQtiItem/qtiCreator/widgets/item/Widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/item'\n], function($, _, CommonRenderer, Widget, tpl){\n\n    var CreatorItem = _.clone(CommonRenderer);\n\n    var _normalizeItemBody = function _normalizeItemBody($itemBody) {\n\n        $itemBody.children().each(function(){\n            var $child = $(this);\n            //must be a grid-row for editing:\n            if(!$child.hasClass('grid-row') && !$child.hasClass('qti-infoControl')){\n                $child.wrap('<div class=\"grid-row\"><div class=\"col-12\"></div></div>');\n            }\n        });\n\n        return $itemBody;\n    };\n\n    CreatorItem.template = tpl;\n\n    CreatorItem.render = function(item, options){\n\n        var $itemContainer = CommonRenderer.getContainer(item);\n\n        _normalizeItemBody($itemContainer.find('.qti-itemBody'));\n\n        options = options || {};\n        options.state = 'active';//the item widget never sleeps ! <- this sounds very scary!\n        options.renderer = this;\n\n        return Widget.build(\n            item,\n            $itemContainer,\n            this.getOption('itemOptionForm'),\n            options\n        );\n    };\n\n    return CreatorItem;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/math', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n<span data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"math\\\">\\n    <math display = \\\"block\\\">\";\n  if (helper = helpers.raw) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.raw); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</math>\\n</span>\\n\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n<span data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"math\\\">\\n    <math>\";\n  if (helper = helpers.raw) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.raw); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</math>\\n</span>   \\n\";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.block), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/Math',['tpl!taoQtiItem/qtiCommonRenderer/tpl/math', 'taoQtiItem/qtiCommonRenderer/helpers/container', 'mathJax', 'lodash'], function(tpl, containerHelper, MathJax, _){\n    return {\n        qtiClass : 'math',\n        template : tpl,\n        getContainer : containerHelper.get,\n        render : function(math, data){\n            if(typeof(MathJax) !== 'undefined' && MathJax){\n                _.delay(function(){//defer execution fix some rendering issue in chrome\n                     MathJax.Hub.Queue([\"Typeset\", MathJax.Hub, containerHelper.get(math).parent()[0]]);\n                },60);\n            }\n        }\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/math/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/static/states/Sleep'], function(stateFactory, SleepState){\n    \n    var MathStateSleep = stateFactory.extend(SleepState, function(){}, function(){});\n    \n    return MathStateSleep;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/static/math', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"display\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Display\", options) : helperMissing.call(depth0, \"__\", \"Display\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"How the math expression should be displayed.\", options) : helperMissing.call(depth0, \"__\", \"How the math expression should be displayed.\", options)))\n    + \"</div>\\n\\n    <select name=\\\"display\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n        <option value=\\\"inline\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"inline\", options) : helperMissing.call(depth0, \"__\", \"inline\", options)))\n    + \"</option>\\n        <option value=\\\"block\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"block\", options) : helperMissing.call(depth0, \"__\", \"block\", options)))\n    + \"</option>\\n    </select>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"editMode\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Editing Mode\", options) : helperMissing.call(depth0, \"__\", \"Editing Mode\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"How the math expression should be edited\", options) : helperMissing.call(depth0, \"__\", \"How the math expression should be edited\", options)))\n    + \".</div>\\n\\n    <select name=\\\"editMode\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n        <option value=\\\"latex\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"LaTex\", options) : helperMissing.call(depth0, \"__\", \"LaTex\", options)))\n    + \"</option>\\n        <option value=\\\"mathml\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"MathML\", options) : helperMissing.call(depth0, \"__\", \"MathML\", options)))\n    + \"</option>\\n    </select>\\n\\n</div>\\n\\n<div class=\\\"panel\\\" data-role=\\\"latex\\\" style=\\\"display:none;\\\">\\n    <label for=\\\"sidebar-latex-field\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Latex\", options) : helperMissing.call(depth0, \"__\", \"Latex\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Edit math expression using LaTex type setting system, e.g. e^{i \\\\pi} = -1\", options) : helperMissing.call(depth0, \"__\", \"Edit math expression using LaTex type setting system, e.g. e^{i \\\\pi} = -1\", options)))\n    + \"</div>\\n\\n    <input id=\\\"sidebar-latex-field\\\" type=\\\"text\\\" name=\\\"latex\\\" value=\\\"\";\n  if (helper = helpers.latex) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.latex); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" placeholder=\\\"e.g. e^{i \\\\pi} = -1\\\"/>\\n    <a href=\\\"#\\\" data-context=\\\"latex\\\" class=\\\"sidebar-popup-trigger\\\" data-popup=\\\"~ .math-editor-container\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Display larger editor\", options) : helperMissing.call(depth0, \"__\", \"Display larger editor\", options)))\n    + \"</a>\\n\\n    <div class=\\\"sidebar-popup math-editor-container latex two-fifty\\\">\\n        <div class=\\\"sidebar-popup-title\\\">\\n            <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Latex\", options) : helperMissing.call(depth0, \"__\", \"Latex\", options)))\n    + \"</h3>\\n            <a class=\\\"closer\\\" href=\\\"#\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Close\", options) : helperMissing.call(depth0, \"__\", \"Close\", options)))\n    + \"\\\"></a>\\n        </div>\\n        <div class=\\\"sidebar-popup-content\\\">\\n            <input data-for=\\\"latex\\\"/>\\n        </div>\\n    </div>\\n</div>\\n\\n<div class=\\\"panel sidebar-popup-container-box\\\" data-role=\\\"mathml\\\" style=\\\"display:none;\\\">\\n    <label for=\\\"sidebar-mathml-field\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"MathML\", options) : helperMissing.call(depth0, \"__\", \"MathML\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Edit math expression using MathML\", options) : helperMissing.call(depth0, \"__\", \"Edit math expression using MathML\", options)))\n    + \"</div>\\n\\n    <textarea id=\\\"sidebar-mathml-field\\\" name=\\\"mathml\\\">\";\n  if (helper = helpers.mathml) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.mathml); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</textarea>\\n\\n    <div class=\\\"math-buffer\\\" style=\\\"visibility:hidden;\\\"></div>\\n    <a href=\\\"#\\\" data-context=\\\"mathml\\\" class=\\\"sidebar-popup-trigger\\\" data-popup=\\\"~ .math-editor-container\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Display larger editor\", options) : helperMissing.call(depth0, \"__\", \"Display larger editor\", options)))\n    + \"</a>\\n\\n    <div class=\\\"sidebar-popup math-editor-container mathml two-fifty\\\">\\n        <div class=\\\"sidebar-popup-title\\\">\\n            <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"MathML\", options) : helperMissing.call(depth0, \"__\", \"MathML\", options)))\n    + \"</h3>\\n            <a class=\\\"closer\\\" href=\\\"#\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Close\", options) : helperMissing.call(depth0, \"__\", \"Close\", options)))\n    + \"\\\"></a>\\n        </div>\\n        <div class=\\\"sidebar-popup-content\\\">\\n            <textarea data-for=\\\"mathml\\\"></textarea>\\n        </div>\\n    </div>\\n\\n</div>\\n\\n\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n<div class=\\\"panel\\\">\\n    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"MathJax is not installed.\", options) : helperMissing.call(depth0, \"__\", \"MathJax is not installed.\", options)))\n    + \"\\n</div>\\n\";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.mathjax), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/math/states/Active',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Active',\n    'taoQtiItem/qtiCreator/editor/MathEditor',\n    'taoQtiItem/qtiCreator/helper/popup',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/static/math',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline',\n    'lodash',\n    'i18n',\n    'mathJax'\n], function($, stateFactory, Active, MathEditor, popup, formTpl, formElement, inlineHelper, _, __, mathJax){\n\n    var _throttle = 300;\n    var MathActive = stateFactory.extend(Active, function(){\n\n        this.initForm();\n\n    }, function(){\n\n        this.widget.$form.empty();\n    });\n\n    MathActive.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            math = _widget.element,\n            mathML = math.mathML || '',\n            tex = math.getAnnotation('latex') || '',\n            display = math.attr('display') || 'inline',\n            editMode = 'latex';\n\n        if(!tex.trim() && mathML.trim()){\n            editMode = 'mathml';\n        }\n\n        $form.html(formTpl({\n            mathjax : !!mathJax,\n            editMode : editMode,\n            latex : tex,\n            mathml : mathML\n        }));\n\n        if(mathJax){\n\n            //init select boxes\n            $form.find('select[name=display]').val(display);\n            $form.find('select[name=editMode]').val(editMode);\n\n            $form.children('.panel[data-role=\"' + editMode + '\"]').show();\n            _toggleMode($form, editMode);\n\n            //... init standard ui widget\n            formElement.initWidget($form);\n\n            this.initFormChangeListener();\n\n        }\n\n    };\n\n    MathActive.prototype.initFormChangeListener = function(){\n\n        var _widget = this.widget,\n            $container = _widget.$container,\n            $form = _widget.$form,\n            math = _widget.element,\n            mathML = math.mathML,\n            tex = math.getAnnotation('latex'),\n            display = math.attr('display') || 'inline',\n            $fields = {\n                mathml : $form.find('textarea[name=mathml]'),\n                latex : $form.find('input[name=latex]')\n            },\n            $modeSelector = $form.find('select[name=editMode]');\n\n\n        $form.find('.sidebar-popup-trigger').each(function() {\n            var $trigger = $(this),\n                context = $trigger.data('context');\n\n            // basic popup functionality\n            popup.init($trigger);\n\n            // after popup opens\n            $trigger.on('open.popup', function(e, params) {\n                var $largeField = params.popup.find(':input[data-for=\"' + context + '\"]');\n\n                // copy value\n                $largeField.val($fields[context].val());\n\n                $largeField.on('keyup', function(){\n                    $fields[context].val($(this).val());\n                    $fields[context].trigger('keyup');\n                });\n                $largeField.attr('placeholder', $fields[context].attr('placeholder'));\n\n                // disable form\n                $fields[context].prop('disabled', true);\n                $modeSelector.prop('disabled', true);\n\n            });\n\n            // after popup closes\n            $trigger.on('close.popup', function(e, params) {\n                var $largeField = params.popup.find(':input[data-for=\"' + context + '\"]');\n\n                $fields[context].val($largeField.val());\n                $fields[context].prop('disabled', false);\n                $modeSelector.prop('disabled', false);\n\n            });\n        });\n\n\n        var mathEditor = new MathEditor({\n            tex : tex,\n            mathML : mathML,\n            display : display,\n            buffer : $form.find('.math-buffer'),\n            target : _widget.$original\n        });\n\n        //init data change callbacks\n        formElement.setChangeCallbacks($form, math, {\n            display : function(m, value){\n                if(value === 'block'){\n                    m.attr('display', 'block');\n                }else{\n                    m.removeAttr('display');\n                }\n                _widget.rebuild({\n                    ready : function(widget){\n                        widget.changeState('active');\n                    }\n                });\n            },\n            editMode : function(m, value){\n\n                _toggleMode($form, value);\n            },\n            latex : _.throttle(function(m, value){\n\n                mathEditor.setTex(value).renderFromTex(function(){\n\n                    //saveTex\n                    m.setAnnotation('latex', value);\n\n                    //update mathML\n                    $fields.mathml.html(mathEditor.mathML);\n                    m.setMathML(mathEditor.mathML);\n\n                    inlineHelper.togglePlaceholder(_widget);\n\n                    $container.change();\n                });\n\n            }, _throttle),\n            mathml : _.throttle(function(m, value){\n\n                mathEditor.setMathML(value).renderFromMathML(function(){\n\n                    //save mathML\n                    m.setMathML(value);\n\n                    //clear tex:\n                    $fields.latex.val('');\n                    m.removeAnnotation('latex');\n\n                    inlineHelper.togglePlaceholder(_widget);\n\n                    $container.change();\n                });\n\n            }, _throttle)\n        });\n    };\n\n    var _toggleMode = function($form, mode){\n\n        var $panels = {\n            mathml : $form.children('.panel[data-role=\"mathml\"]'),\n            latex : $form.children('.panel[data-role=\"latex\"]')\n        },\n        $fields = {\n            mathml : $form.find('textarea[name=mathml]'),\n            latex : $form.find('input[name=latex]')\n        },\n        $editMode = $form.find('select[name=editMode]');\n\n        //toggle form visibility\n        $panels.mathml.hide();\n        $panels.latex.hide();\n        if(mode === 'latex'){\n            $panels.latex.show();\n        }else if(mode === 'mathml'){\n            $panels.mathml.show();\n            if($fields.latex.val()){\n                //show a warning here, stating that the content in LaTeX will be removed\n                if(!$fields.mathml.hasClass('tooltipstered')){\n                    _createWarningTooltip($fields.mathml);\n                }\n                $fields.mathml.tooltipster('show');\n                $editMode.off('change.editMode').one('change.editMode', function(){\n                    $fields.mathml.tooltipster('hide');\n                });\n            }\n        }\n    };\n\n\n    var _createWarningTooltip = function($mathField){\n\n        var $content = $('<span>')\n            .html(__('Currently conversion from MathML to LaTeX is not available. Editing MathML here will have the LaTex code discarded.'));\n\n        $mathField.tooltipster({\n            theme : 'tao-warning-tooltip',\n            content : $content,\n            delay : 200,\n            trigger : 'custom'\n        });\n\n        $mathField.on('focus.mathwarning', function(){\n            $mathField.tooltipster('hide');\n        });\n\n        setTimeout(function(){\n            $mathField.tooltipster('hide');\n        }, 3000);\n    };\n\n    return MathActive;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/math/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/math/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/static/math/states/Active'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/static/math/Widget',[\n    'taoQtiItem/qtiCreator/widgets/static/Widget',\n    'taoQtiItem/qtiCreator/widgets/static/math/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/media',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline'\n], function(Widget, states, helper, toolbarTpl, inlineHelper) {\n\n    var MathWidget = Widget.clone();\n\n    MathWidget.initCreator = function() {\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n        \n        inlineHelper.togglePlaceholder(this);\n    };\n    \n    MathWidget.buildContainer = function(){\n        \n        if(this.element.attr('display') === 'block'){\n            helper.buildBlockContainer(this);\n        }else{\n            helper.buildInlineContainer(this);\n        }\n        \n        return this;\n    };\n    \n    MathWidget.createToolbar = function() {\n        \n         helper.createToolbar(this, toolbarTpl);\n\n        return this;\n    };\n\n    return MathWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/Math',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/Math',\n    'taoQtiItem/qtiCreator/widgets/static/math/Widget'\n], function(_, Renderer, Widget){\n\n    var CreatorMath = _.clone(Renderer);\n\n    CreatorMath.render = function(math, options){\n        \n        //initial rendering:\n        Renderer.render(math);\n        \n        return Widget.build(\n            math,\n            Renderer.getContainer(math),\n            this.getOption('bodyElementOptionForm'),\n            options\n        );\n    };\n\n    return CreatorMath;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/modalFeedback', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div id=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"modal qti-modalFeedback\\\">\\n    <h1 class=\\\"qti-title modal-title\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</h1>\\n    <div class=\\\"modal-body\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/ModalFeedback',[\n    'lodash',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/modalFeedback',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'ui/waitForMedia',\n    'ui/modal'\n], function(_, tpl, containerHelper){\n    'use strict';\n\n    var modalFeedbackRenderer = {\n        qtiClass : 'modalFeedback',\n        template : tpl,\n        getContainer : containerHelper.get,\n        minHeight : 200,\n        width : 600,\n        render : function(modalFeedback, data){\n\n            data = data || {};\n\n            var $modal = containerHelper.get(modalFeedback);\n\n            $modal.waitForMedia(function(){\n\n                //when we are sure that media is loaded:\n                $modal.on('opened.modal', function(){\n\n                    //set item body height\n                    var $itemBody = containerHelper.get(modalFeedback.getRelatedItem()).children('.qti-itemBody');\n                    var requiredHeight = $modal.outerHeight() + parseInt($modal.css('top'));\n                    if(requiredHeight > $itemBody.height()){\n                        $itemBody.height(requiredHeight);\n                    }\n\n                }).on('closed.modal', function(){\n                    if(_.isFunction(data.callback)){\n                        data.callback.call(this);\n                    }\n                }).modal({\n                    startClosed : false,\n                    minHeight : modalFeedbackRenderer.minHeight,\n                    width : modalFeedbackRenderer.width\n                });\n            });\n\n        }\n    };\n\n    return modalFeedbackRenderer;\n});\n","define('taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/states/Sleep'], function(stateFactory, SleepState){\n    \n    return stateFactory.create(SleepState, function(){}, function(){});\n    \n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/static/modalFeedback', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Identifier\", options) : helperMissing.call(depth0, \"__\", \"Identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the modal feedback. This identifier must not be used by any other modal feedback or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the modal feedback. This identifier must not be used by any other modal feedback or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. modal-feedback_1\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/Active',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Active',\n    'taoQtiItem/qtiCommonRenderer/renderers/ModalFeedback',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/static/modalFeedback',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'jquery',\n    'ui/modal'\n], function(stateFactory, Active, commonRenderer, formTpl, formElement, $){\n\n    /**\n     * handle z-indices of sidebar and ckeditor\n     */\n    var indices = (function(){\n\n        var selectors = {\n            sidebar : '#item-editor-item-widget-bar',\n            cke : '.cke',\n            ckeBase : '.cke_inner',\n            ckeNose : '.cke_nose',\n            ckeToolbar : '.cke_toolbar'\n        };\n\n        var raised = false,\n            selector,\n            elements = {};\n\n        return {\n            raise : function(baseIndex){\n\n                var $elem, index;\n\n                baseIndex = parseInt(baseIndex, 10);\n\n                for(selector in selectors){\n\n                    $elem = $(selectors[selector]);\n\n                    index = parseInt($elem.css('z-index'), 10);\n                    if(isNaN(index)){\n                        index = 100;\n                    }\n\n                    elements[selector] = {\n                        element : $elem,\n                        index : index\n                    };\n\n                    $elem.css('z-index', elements[selector].index + baseIndex);\n                }\n            },\n            reset : function(){\n                if(!raised){\n                    return;\n                }\n                for(selector in elements){\n                    elements[selector].element.css('z-index', elements[selector].index);\n                }\n            }\n        };\n    }());\n\n    var _ckeIsReady = function($editable){\n\n        var dfd = new $.Deferred(),\n            iteration = 0;\n\n        var poll = function(){\n\n            var editor = $editable.data('editor');\n\n            if(iteration > 20){\n                return;\n            }\n\n            if(editor){\n                dfd.resolve();\n            }else{\n                setTimeout(poll, 200);\n            }\n\n        };\n        poll();\n\n        return dfd.promise();\n    };\n\n    var ModalFeedbackStateActive = stateFactory.extend(Active, function(){\n\n        var _widget = this.widget,\n            $container = this.widget.$container,\n            $editable = $container.find('[data-html-editable]');\n\n        $container.modal({\n            startClosed : true,\n            width : commonRenderer.width\n        });\n        $container.modal('open');\n        $container.css('height', 'auto');\n\n        $.when(_ckeIsReady($editable)).then(function(){\n            indices.raise($container.css('z-index'));\n        });\n\n        $container.on('closed.modal', function(){\n            _widget.changeState('sleep');\n        });\n\n        this.widget.offEvents('otherActive');\n\n        //show option form\n        this.initForm();\n        this.widget.$form.show();\n\n    }, function(){\n\n        var $container = this.widget.$container;\n\n        $container.off('opened.modal').off('.active');\n        $container.modal('close');\n\n        // reset ck and sidebar\n        indices.reset();\n\n        //close ck tlb\n        $container.find('.tlb-button.active[data-role=cke-launcher]').click();\n\n        //destroy and hide it\n        this.widget.$form.empty().hide();\n    });\n\n    ModalFeedbackStateActive.prototype.initForm = function(){\n\n        var _widget = this.widget;\n\n        //build form:\n        _widget.$form.html(formTpl({\n            serial : _widget.element.getSerial(),\n            identifier : _widget.element.id()\n        }));\n\n        formElement.initWidget(_widget.$form);\n\n        //init data validation and binding\n        formElement.setChangeCallbacks(_widget.$form, _widget.element, {\n            identifier : function(fb, value){\n                fb.id(value);\n            }\n        });\n    };\n\n    return ModalFeedbackStateActive;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/Active'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/okButton', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<button class=\\\"btn-info small widget-ok\\\" data-edit=\\\"active\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"done\", options) : helperMissing.call(depth0, \"__\", \"done\", options)))\n    + \"</button>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/modalFeedback/Widget',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/static/Widget',\n    'taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/states',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/htmlEditorTrigger',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/okButton',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content'\n], function($, Widget, states, toolbarTpl, okButtonTpl, formElement, htmlEditor, contentHelper){\n\n    var ModalFeedbackWidget = Widget.clone();\n\n    ModalFeedbackWidget.initCreator = function(){\n\n        Widget.initCreator.call(this);\n\n        this.registerStates(states);\n\n        this.buildEditor();\n\n        this.createOkButton();\n    };\n\n    ModalFeedbackWidget.buildContainer = function(){\n\n        this.$container = this.$original.addClass('widget-box');\n    };\n\n    ModalFeedbackWidget.createToolbar = function(){\n\n        this.$container.find('.modal-body').append(toolbarTpl({\n            serial : this.serial,\n            state : 'active'\n        }));\n\n        return this;\n    };\n\n    ModalFeedbackWidget.buildEditor = function(){\n\n        var _this = this,\n            $editableContainer = _this.$container.find('.modal-body'),\n            element = _this.element,\n            container = element.getBody();\n\n        $editableContainer.attr('data-html-editable-container', true);\n\n        if(!htmlEditor.hasEditor($editableContainer)){\n            htmlEditor.buildEditor($editableContainer, {\n                change : contentHelper.getChangeCallback(container),\n                data : {\n                    container : container,\n                    widget : _this\n                }\n            });\n        }\n\n        formElement.initTitle(this.$original.find('.qti-title'), element);\n    };\n\n    ModalFeedbackWidget.createOkButton = function(){\n\n        var _this = this;\n\n        this.$container\n            .append($(okButtonTpl())\n            .on('click.qti-widget', function(e){\n                e.stopPropagation();\n                _this.changeState('sleep');\n            }));\n    };\n\n    return ModalFeedbackWidget;\n});\n\n","define('taoQtiItem/qtiCreator/renderers/ModalFeedback',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/ModalFeedback',\n    'taoQtiItem/qtiCreator/widgets/static/modalFeedback/Widget'\n], function(_, Renderer, Widget){\n\n    var ModalFeedback = _.clone(Renderer);\n\n    ModalFeedback.render = function(modalFeedback, options){\n        \n        options = options || {};\n\n        //make content editable\n        var widget = Widget.build(\n            modalFeedback,\n            Renderer.getContainer(modalFeedback),\n            this.getOption('modalFeedbackOptionForm'),\n            options\n        );\n                \n        return widget;\n    };\n\n    return ModalFeedback;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/object', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<video \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" src=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.data)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" type=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.type)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" controls=\\\"controls\\\" preload=\\\"none\\\"></video>\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"id=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"width=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"height=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<audio \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" src=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.data)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" type=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.type)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"></audio>\";\n  return buffer;\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<object \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" data=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.data)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" type=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.type)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height), {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.alt)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</object>\";\n  return buffer;\n  }\nfunction program11(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"height=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program13(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<iframe \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" src=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.data)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height), {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.alt)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</iframe>\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"qti-object-container\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" >\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.video), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.audio), {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.object), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.html), {hash:{},inverse:self.noop,fn:self.program(13, program13, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiDefaultRenderer/widgets/Object',['jquery' ,'class', 'mediaElement'], function($, Class, MediaElementPlayer){\n\n    var QtiObject = Class.extend({\n        init : function(obj, context){\n            \n            this.playCounter = 0;\n            this.mediaType = obj.getMediaType();\n\n            if(this.mediaType === 'video' || this.mediaType === 'audio'){\n\n                var _this = this;\n\n                this.playerOptions = {\n                    loop : false,\n                    maxPlays : 0,\n                    autostart : false,\n                    pauseOtherPlayers : false,\n                    features : ['playpause', 'current', 'duration', 'progress', 'volume'],\n                    pluginPath : MediaElementPlayer.pluginPath,\n                    audioWidth : 300\n                };\n\n                //set height and width if defined properly\n                var width = parseInt(obj.attr('width'));\n                if(width > 10){\n                    if(this.mediaType === 'video'){\n                        this.playerOptions.videoWidth = width;\n                    }else{\n                        this.playerOptions.audioWidth = width;\n                    }\n                }\n\n                var height = parseInt(obj.attr('height'));\n                if(height > 10){\n                    if(this.mediaType === 'video'){\n                        this.playerOptions.videoHeight = height;\n                    }else{\n                        this.playerOptions.audioHeight = height;\n                    }\n                }\n\n                this.id = obj.getSerial();\n                this.media = null;\n\n                if(context){\n                    \n                    this.pluginPath = context.pluginPath || '';\n                    if(this.pluginPath){\n                        this.playerOptions.pluginPath = this.pluginPath;\n                    }\n                    if(typeof(context.playerOptions) === 'object'){\n\n                        this.playerOptions = $.extend(this.playerOptions, context.playerOptions);\n\n                        //overwrite the success callback:\n                        var successCallback = (typeof(context.playerOptions.success) === 'function') ? context.playerOptions.success : function(){\n                        };\n\n                        this.playerOptions.success = function(mediaElement, domObject){\n\n                            setTimeout(function(){\n\n                                var controlMaxPlays = function(){\n                                    if(_this.playerOptions.maxPlays && _this.playCounter >= _this.playerOptions.maxPlays){\n                                        //completely stop playback:\n                                        _this.stop();\n                                    }\n                                };\n\n                                mediaElement.addEventListener('ended', function(e){\n                                    _this.playCounter++;\n                                    controlMaxPlays();\n                                }, false);\n\n                                mediaElement.addEventListener('play', controlMaxPlays);\n                                mediaElement.addEventListener('pause', function(){\n                                });\n\n\n                                if(_this.playerOptions.autostart){\n                                    mediaElement.play();\n\n                                    //ie8 hack:\n                                    setTimeout(function(){\n                                        $(domObject).parent('div.mejs-mediaelement').siblings('div.mejs-layers').find('div.mejs-overlay-button').click().mousedown();\n                                    }, 1000);\n                                }\n\n                                successCallback(mediaElement, domObject);\n\n                            }, 300);//timeout to fix youtube auto start issue\n\n                        };\n\n                    }\n                }\n\n            }\n\n        },\n        render : function(){\n            if(this.mediaType === 'video' || this.mediaType === 'audio'){\n                this.media = new MediaElementPlayer('#' + this.id, this.playerOptions);\n            }\n        },\n        playCount : function(count){\n            if(isNaN(count)){\n                return this.playCounter;\n            }else{\n                this.playCounter = count;\n            }\n        },\n        pause : function(){\n            this.media.pause();\n        },\n        stop : function(){\n            this.pause();\n            //change play button\n            $('#' + this.id).parent('div.mejs-mediaelement').siblings('div.mejs-layers').find('div.mejs-overlay-button').hide();\n        }\n    });\n    \n    return QtiObject;\n});\n","define('taoQtiItem/qtiCommonRenderer/renderers/Object',[\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/object',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiDefaultRenderer/widgets/Object'\n], function(tpl, containerHelper, DefaultRendererObject){\n    return {\n        qtiClass : 'object',\n        template : tpl,\n        getContainer : containerHelper.get,\n        render : function(obj){\n            var media = new DefaultRendererObject(obj);\n            media.render();\n        }\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/object/states/Sleep',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Sleep'\n], function(stateFactory, SleepState){\n    \n    var ObjectStateSleep = stateFactory.create(SleepState, function(){\n        \n    }, function(){\n        \n    });\n    \n    return ObjectStateSleep;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/static/object', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"src\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"File\", options) : helperMissing.call(depth0, \"__\", \"File\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The file path to the media.\", options) : helperMissing.call(depth0, \"__\", \"The file path to the media.\", options)))\n    + \"</div>\\n    <input type=\\\"text\\\" name=\\\"data\\\" value=\\\"\";\n  if (helper = helpers.data) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.data); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty; $fileExists(baseUrl=\";\n  if (helper = helpers.baseUrl) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.baseUrl); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")\\\"/>\\n    <button class=\\\"btn-info small block\\\" data-role=\\\"upload-trigger\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select media\", options) : helperMissing.call(depth0, \"__\", \"Select media\", options)))\n    + \"</button>\\n</div>\\n\\n<div data-role=\\\"advanced\\\" style=\\\"display:none\\\">\\n    <div class=\\\"panel\\\">\\n        <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Size and position\", options) : helperMissing.call(depth0, \"__\", \"Size and position\", options)))\n    + \"</h3>\\n\\n        <!--not available yet-->\\n        <!--    <label>\\n        <input name=\\\"responsive\\\" type=\\\"checkbox\\\" />\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Adapt to item size\", options) : helperMissing.call(depth0, \"__\", \"Adapt to item size\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n        Recommended.\\n        Define whether the image size should automatically adapt to item size.\\n        If this option is active, the image width and height will be a percentage of its text container.\\n    </span>-->\\n\\n        <p class=\\\"img-resizer-slider\\\"></p>\\n\\n        <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height (optional)\", options) : helperMissing.call(depth0, \"__\", \"Height (optional)\", options)))\n    + \"</label>\\n        <span id=\\\"item-editor-font-size-manual-input\\\" class=\\\"item-editor-unit-input-box\\\">\\n            <input type=\\\"text\\\" name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty;\\\"/>\\n            <span class=\\\"unit-indicator\\\">px</span>\\n        </span>\\n    </div>\\n    <div class=\\\"panel\\\">\\n\\n        <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width (optional)\", options) : helperMissing.call(depth0, \"__\", \"Width (optional)\", options)))\n    + \"</label>\\n        <span id=\\\"item-editor-font-size-manual-input\\\" class=\\\"item-editor-unit-input-box\\\">\\n            <input type=\\\"text\\\" name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty;\\\"/>\\n            <span class=\\\"unit-indicator\\\">px</span>\\n        </span>\\n    </div>\\n    <div class=\\\"panel\\\">\\n\\n        <label for=\\\"align\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Alignment (optional)\", options) : helperMissing.call(depth0, \"__\", \"Alignment (optional)\", options)))\n    + \"</label>\\n        <select name=\\\"align\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n            <option value=\\\"default\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"default\", options) : helperMissing.call(depth0, \"__\", \"default\", options)))\n    + \"</option>\\n            <option value=\\\"left\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"left\", options) : helperMissing.call(depth0, \"__\", \"left\", options)))\n    + \"</option>\\n            <option value=\\\"right\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"right\", options) : helperMissing.call(depth0, \"__\", \"right\", options)))\n    + \"</option>\\n        </select>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/object/states/Active',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Active',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/static/object',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline',\n    'lodash',\n    'util/image',\n    'helpers',\n    'ui/resourcemgr',\n    'nouislider'\n], function(stateFactory, Active, formTpl, formElement, inlineHelper, _, imageUtil, helpers){\n\n    var ObjectStateActive = stateFactory.extend(Active, function(){\n        \n        this.widget.changeState('sleep');\n        return;\n        \n        this.initForm();\n        \n    }, function(){\n\n        this.widget.$form.empty();\n    });\n\n    var _containClass = function(allClassStr, className){\n        var regex = new RegExp('(?:^|\\\\s)' + className + '(?:\\\\s|$)', '');\n        return allClassStr && regex.test(allClassStr);\n    };\n\n    /**\n     * Greatly throttled callback function\n     * \n     * @param {jQuery} $media\n     * @param {string} propertyName\n     * @returns {function}\n     */\n    var _getImgSizeChangeCallback = function($media, propertyName){\n\n        var _setAttr = _.debounce(function(media, value, name){\n            media.attr(name, value);\n        }, 1000);\n\n        return _.throttle(function(media, value, name){\n\n            if(value){\n                $media[propertyName](value);\n                _setAttr(media, value, name);\n            }else{\n                $media[propertyName]('auto');\n                media.removeAttr(propertyName);\n            }\n            $media.trigger('contentChange.qti-widget');\n\n        }, 100);\n\n    };\n\n    ObjectStateActive.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $media = _widget.$original,\n            $form = _widget.$form,\n            media = _widget.element,\n            baseUrl = _widget.options.baseUrl,\n            responsive = true;\n\n        $form.html(formTpl({\n            baseUrl : baseUrl || '',\n            data : media.attr('data'),\n            height : media.attr('height'),\n            width : media.attr('width'),\n            responsive : responsive\n        }));\n\n        //init slider and set align value before ...\n        _initAdvanced(_widget);\n        _initSlider(_widget);\n        _initAlign(_widget);\n        _initUpload(_widget);\n\n        //... init standard ui widget\n        formElement.initWidget($form);\n\n        //init data change callbacks\n        formElement.setChangeCallbacks($form, media, {\n            data : function(media, value){\n\n                media.attr('data', value);\n\n                if(!value.match(/^http/i)){\n                    value = baseUrl + '/' + value;\n                }\n                $media.attr('data', value);\n\n                inlineHelper.togglePlaceholder(_widget);\n                _initSlider(_widget);\n                _initAdvanced(_widget);\n            },\n            alt : formElement.getAttributeChangeCallback(),\n            longdesc : formElement.getAttributeChangeCallback(),\n            align : function(media, value){\n                inlineHelper.positionFloat(_widget, value);\n            },\n            height : _getImgSizeChangeCallback($media, 'height'),\n            width : _getImgSizeChangeCallback($media, 'width')\n        });\n    };\n\n    var _initAlign = function(widget){\n\n        var align = 'default';\n\n        //init float positioning:\n        if(widget.element.hasClass('rgt')){\n            align = 'right';\n        }else if(widget.element.hasClass('lft')){\n            align = 'left';\n        }\n\n        inlineHelper.positionFloat(widget, align);\n        widget.$form.find('select[name=align]').val(align);\n    };\n\n    var _initSlider = function(widget){\n\n        var $container = widget.$container,\n            $form = widget.$form,\n            $slider = $form.find('.media-resizer-slider'),\n            media = widget.element,\n            $media = $container.find('media'),\n            $height = $form.find('[name=height]'),\n            $width = $form.find('[name=width]'),\n            original = {\n            h : media.attr('height') || $media.height(),\n            w : media.attr('width') || $media.width()\n        };\n\n        $slider.noUiSlider({\n            range : {\n                min : 10,\n                max : 200\n            },\n            start : 100\n        }, $slider.hasClass('noUi-target'));\n\n        $slider.off('slide').on('slide', _.throttle(function(e, value){\n\n            var ratio = (value / 100),\n                w = parseInt(ratio * original.w),\n                h = parseInt(ratio * original.h);\n\n            $width.val(w).change();\n            $height.val(h).change();\n        }, 100));\n    };\n\n    var _initAdvanced = function(widget){\n\n        var $form = widget.$form,\n            data = widget.element.attr('data');\n\n        if(data){\n            $form.find('[data-role=advanced]').show();\n        }else{\n            $form.find('[data-role=advanced]').hide();\n        }\n    };\n\n\n    var _initUpload = function(widget){\n\n        var $form = widget.$form,\n            options = widget.options,\n            $uploadTrigger = $form.find('[data-role=\"upload-trigger\"]'),\n            $data = $form.find('input[name=data]'),\n            $width = $form.find('input[name=width]'),\n            $height = $form.find('input[name=height]');\n\n        $uploadTrigger.on('click', function(){\n            $uploadTrigger.resourcemgr({\n                appendContainer : options.mediaManager.appendContainer,\n                mediaSources : options.mediaManager.mediaSources,\n                browseUrl : options.mediaManager.browseUrl,\n                uploadUrl : options.mediaManager.uploadUrl,\n                deleteUrl : options.mediaManager.deleteUrl,\n                downloadUrl : options.mediaManager.downloadUrl,\n                fileExistsUrl : options.mediaManager.fileExistsUrl,\n                params : {\n                    uri : options.uri,\n                    lang : options.lang,\n                    filters : 'audio/ogg,audio/mpeg,video/mpeg,video/mp4,video/ogg,video/ogv,video/webm'\n                },\n                pathParam : 'path',\n                select : function(e, files){\n                    var i, l = files.length;\n                    for(i = 0; i < l; i++){\n                        console.log('file',files[i].file);\n                        imageUtil.getSize(options.baseUrl + files[i].file, function(size){\n                            if(size && size.width >= 0){\n                                $width.val(size.width).trigger('change');\n                                $height.val(size.height).trigger('change');\n                            }\n                            $data.val(files[i].file).trigger('change');\n                        });\n                        break;\n                    }\n                }\n            });\n        });\n\n    };\n\n    return ObjectStateActive;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/object/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/object/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/static/object/states/Active'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/notifications/widgetOverlay', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<span class=\\\"message\\\">\";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\";\n  return buffer;\n  }\n\n  buffer += \"<span class=\\\"overlay\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.message), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/object/Widget',[\n    'taoQtiItem/qtiCreator/widgets/static/Widget',\n    'taoQtiItem/qtiCreator/widgets/static/object/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/media',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline',\n    'tpl!taoQtiItem/qtiCreator/tpl/notifications/widgetOverlay',\n    'i18n'\n], function(Widget, states, helper, toolbarTpl, inlineHelper, overlayTpl, __) {\n\n    var ObjectWidget = Widget.clone();\n\n    ObjectWidget.initCreator = function() {\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n        \n        inlineHelper.togglePlaceholder(this);\n        \n        this.notAvailable();\n    };\n    \n    ObjectWidget.getRequiredOptions = function(){\n        return ['baseUrl', 'uri', 'lang', 'mediaManager'];\n    };\n    \n    ObjectWidget.buildContainer = function(){\n        \n        helper.buildBlockContainer(this);\n        \n        return this;\n    };\n    \n    ObjectWidget.createToolbar = function() {\n        \n         helper.createToolbar(this, toolbarTpl);\n\n        return this;\n    };\n    \n    ObjectWidget.notAvailable = function(){\n        \n        \n        this.$container.append(overlayTpl({\n            message : __('Editing this element is not supported currently.')\n        }));\n        this.$container.attr('contenteditable', false);\n         this.$container.css({cursor:'default'});\n        this.$container.on('click, mousedown', function(e){\n            e.stopPropagation();\n        });\n    };\n    \n    return ObjectWidget;\n});\n\n","define('taoQtiItem/qtiCreator/renderers/Object',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/Object',\n    'taoQtiItem/qtiCreator/widgets/static/object/Widget'\n], function(_, Renderer, Widget){\n\n    var CreatorObject = _.clone(Renderer);\n\n    CreatorObject.render = function(object, options){\n        \n        //initial rendering:\n        Renderer.render(object);\n        \n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        \n        return Widget.build(\n            object,\n            Renderer.getContainer(object),\n            this.getOption('bodyElementOptionForm'),\n            options\n        );\n    };\n\n    return CreatorObject;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/infoControl', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"qti-infoControl\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  if (helper = helpers.markup) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.markup); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/helpers/PortableElement',['context', 'lodash', 'jquery', 'taoQtiItem/qtiItem/helper/util'], function(context, _, $, util){\n\n    /**\n     * Get the location of the document, useful to define a baseUrl for the required context\n     * @returns {String}\n     */\n    function getDocumentBaseUrl(){\n        return window.location.protocol + '//' + window.location.host + window.location.pathname.replace(/([^\\/]*)$/, '');\n    }\n\n    /**\n     * Get root url of available vendor specific libraries \n     * \n     * @returns {object} - an \"associative\" array object\n     */\n    function getSharedLibrariesPaths(){\n        var requireConfig = window.require.s.contexts._.config;\n        return getAbsolutelyDefinedPaths(requireConfig.baseUrl, requireConfig.paths);\n    }\n\n    /**\n     * Get lists of required OAT delivery engine libs\n     * \n     * @returns {Object}\n     */\n    function getCommonLibraries(){\n        return {\n            css : context.root_url + 'tao/views/js/lib/require-css/css',\n            mathJax : [\n                context.root_url + 'taoQtiItem/views/js/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full',\n                context.root_url + 'taoQtiItem/views/js/MathJaxFallback'\n            ]\n        };\n    }\n\n    /**\n     * Replace all identified relative media urls by the absolute one\n     * \n     * @param {String} markupStr\n     * @param {Object} the renderer\n     * @returns {String}\n     */\n    function fixMarkupMediaSources(markupStr, renderer){\n\n        //load markup string into a div container\n        var $markup = $('<div>', {'class' : 'wrapper'}).html(markupStr);\n\n        //for each media source\n        $markup.find('img').each(function(){\n\n            var $img = $(this),\n                src = $img.attr('src'),\n                fullPath = renderer.getAbsoluteUrl(src);\n\n            $img.attr('src', fullPath);\n        });\n\n        return $markup.html();\n\n    }\n\n    /**\n     * Transform relative paths in the \"paths\" argument object into absolute ones\n     * \n     * @param {String} baseUrl\n     * @param {Object} paths\n     * @returns {Object}\n     */\n    function getAbsolutelyDefinedPaths(baseUrl, paths){\n        var ret = {};\n        _.forIn(paths, function(path, alias){\n            //take only namespaced module\n            if(alias.indexOf('/')>0){\n                ret[alias] = baseUrl+path;\n            }\n        });\n        return ret;\n    }\n\n    /**\n     * Get a local require js with typeIdentifier as specific context\n     * \n     * @param {String} typeIdentifier\n     * @param {String} baseUrl\n     * @param {Object} libs\n     * @returns {Function} - RequireJs instance\n     */\n    function getLocalRequire(typeIdentifier, baseUrl, libs, config){\n\n        config = config || {};\n\n        var runtimeLocation = config.runtimeLocation ? config.runtimeLocation : baseUrl + typeIdentifier;\n        var requireConfig = window.require.s.contexts._.config;\n\n        if(config.useExtensionAlias){\n            var urlTokens = baseUrl.split('/');\n            var extension = urlTokens[0];\n\n            var fullpath = requireConfig.baseUrl + requireConfig.paths[extension];\n\n            //update baseUrl:\n            baseUrl = baseUrl.replace(extension, fullpath);\n\n            if(config.runtimeLocation){\n                runtimeLocation = config.runtimeLocation.replace(extension, fullpath);\n            }\n        }\n\n        libs = libs || {};\n        libs = _.defaults(libs, getCommonLibraries());\n        libs = _.defaults(libs, getSharedLibrariesPaths());\n\n        //add local namespace\n        libs[typeIdentifier] = runtimeLocation;//allow overwrite by config (in test)\n\n        return window.require.config({\n            context : typeIdentifier, //use unique typeIdentifier as context name\n            baseUrl : baseUrl,\n            paths : libs,\n            shim : {\n                mathJax : {\n                    exports : \"MathJax\",\n                    init : function(){\n                        if(window.MathJax){\n                            MathJax.Hub.Config({showMathMenu : false, showMathMenuMSIE : false});//add mathJax config here for now before integrating the amd one\n                            MathJax.Hub.Startup.onload();\n                            return MathJax;\n                        }\n                    }\n                }\n            }\n        });\n    }\n\n    /**\n     * local require js caches\n     * \n     * @type Object\n     */\n    var _localRequires = {};\n\n    /**\n     * Get a cached local require js with typeIdentifier as specific context\n     * If it does not exsits, it creates one.\n     * Warning only the typeIdentifier and baseUrl will be used as key (not libs)\n     * This means that if you want to ensure that the baseUrl and libs are different,\n     * you may want to use getLocalRequire instead\n     * \n     * @param {String} typeIdentifier\n     * @param {String} baseUrl\n     * @param {Object} libs\n     * @returns {Function} - RequireJs instance\n     */\n    function getCachedLocalRequire(typeIdentifier, baseUrl, libs, config){\n\n        _localRequires[typeIdentifier] = _localRequires[typeIdentifier] || {};\n        if(!_localRequires[typeIdentifier][baseUrl]){\n            _localRequires[typeIdentifier][baseUrl] = getLocalRequire(typeIdentifier, baseUrl, libs, config);\n        }\n        return _localRequires[typeIdentifier][baseUrl];\n    }\n\n    return {\n        getSharedLibrariesPaths : getSharedLibrariesPaths,\n        getCommonLibraries : getCommonLibraries,\n        fixMarkupMediaSources : fixMarkupMediaSources,\n        getDocumentBaseUrl : getDocumentBaseUrl,\n        getLocalRequire : getLocalRequire,\n        getCachedLocalRequire : getCachedLocalRequire\n    };\n});\n","define('taoQtiItem/runtime/qtiInfoControlContext',[],function(){\n\n    //need a global reference to have picHooks shared in two different requirejs context (\"default\" and \"portableCustomInteraction\")\n    window._picHooks = window._picHooks || {};\n\n    /**\n     * Global object accessible by all PICs\n     *\n     * @type Object\n     */\n    var taoQtiInfoControlContext = {\n        /**\n         * register a info control (its runtime model) in global registery\n         * register a renderer\n         *\n         * @param {Object} picHook\n         * @returns {undefined}\n         */\n        register : function(picHook){\n            //@todo check picHook validity\n            window._picHooks[picHook.getTypeIdentifier()] = picHook;\n        },\n        /**\n         * notify when a info control is ready for test taker interaction\n         *\n         * @param {string} picInstance\n         * @fires custominteractionready\n         */\n        notifyReady : function(picInstance){\n            //@todo add pciInstance as event data and notify event to delivery engine\n        },\n        /**\n         * Get a cloned object representing the PIC model\n         *\n         * @param {string} typeIdentifier\n         * @returns {Object} clonedPciModel\n         */\n        createPciInstance : function(typeIdentifier){\n\n            if(window._picHooks[typeIdentifier]){\n\n                var instance = {},\n                    proto = window._picHooks[typeIdentifier];\n\n                for(var name in proto){\n                    if(typeof proto[name] === 'function'){\n                        //@todo : delegate function call for better performance ?\n                        instance[name] = proto[name];\n                    }else if(proto[name] !== null && typeof proto[name] === 'object'){\n                        //a plain object:\n                        instance[name] = proto[name].constructor();\n                    }else{\n                        //not an object (nor a function) : e.g. 0, 123, '123', null, undefined\n                        instance[name] = proto[name];\n                    }\n                }\n\n                return instance;\n\n            }else{\n                throw 'no portable info control hook found with the id ' + typeIdentifier;\n            }\n        }\n    };\n\n\n    return taoQtiInfoControlContext;\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/PortableInfoControl',[\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/infoControl',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/PortableElement',\n    'taoQtiItem/runtime/qtiInfoControlContext',\n    'taoQtiItem/qtiItem/helper/util',\n    'context'\n], function(tpl, containerHelper, PortableElement, qtiInfoControlContext, util, context){\n\n    /**\n     * Get the PIC instance associated to the infoControl object\n     * If none exists, create a new one based on the PIC typeIdentifier\n     * \n     * @param {Object} infoControl - the js object representing the infoControl\n     * @returns {Object} PIC instance\n     */\n    var _getPic = function(infoControl){\n\n        var typeIdentifier,\n            pic = infoControl.data('pic') || undefined;\n\n        if(!pic){\n\n            typeIdentifier = infoControl.typeIdentifier;\n            pic = qtiInfoControlContext.createPciInstance(typeIdentifier);\n\n            if(pic){\n\n                //binds the PIC instance to TAO infoControl object and vice versa\n                infoControl.data('pic', pic);\n                pic._taoInfoControl = infoControl;\n\n            }else{\n                throw 'no custom infoControl hook found for the type ' + typeIdentifier;\n            }\n        }\n\n        return pic;\n    };\n\n    /**\n     * Execute javascript codes to bring the infoControl to life.\n     * At this point, the html markup must already be ready in the document.\n     * \n     * It is done in 5 steps : \n     * 1. register required libs in the \"portableInfoControl\" context\n     * 2. require all required libs\n     * 3. create a pic instance based on the infoControl model\n     * 4. initialize the rendering \n     * 5. restore full state if applicable\n     * \n     * @param {Object} infoControl\n     */\n    var render = function(infoControl, options){\n\n        options = options || {};\n\n        var id = infoControl.attr('id'),\n            typeIdentifier = infoControl.typeIdentifier,\n            baseUrl = this.getOption('baseUrl') || PortableElement.getDocumentBaseUrl(), //require a base url !\n            config = infoControl.properties,\n            entryPoint = util.fullpath(infoControl.entryPoint, baseUrl),\n            $dom = containerHelper.get(infoControl).children(),\n            state = {}; //@todo pass state and response to renderer here:\n            \n        //create a new require context to load the libs: \n        var localRequire = PortableElement.getCachedLocalRequire(typeIdentifier, baseUrl, {\n            qtiInfoControlContext : context.root_url + 'taoQtiItem/views/js/runtime/qtiInfoControlContext'\n        });\n\n        localRequire([entryPoint], function(){\n\n            var pci = _getPic(infoControl);\n            if(pci && $dom.length){\n                //call pci initialize() to render the pci\n                pci.initialize(id, $dom[0], config);\n                //restore context (state + response)\n                pci.setSerializedState(state);\n            }\n\n        });\n    };\n    \n    /**\n     * Reverse operation performed by render()\n     * After this function is executed, only the inital naked markup remains \n     * Event listeners are removed and the state and the response are reset\n     * \n     * @param {Object} infoControl\n     */\n    var destroy = function(infoControl){\n\n        _getPic(infoControl).destroy();\n    };\n\n    /**\n     * Restore the state of the infoControl from the serializedState.\n     * \n     * @param {Object} infoControl\n     * @param {Object} serializedState - json format\n     */\n    var setSerializedState = function(infoControl, serializedState){\n\n        _getPic(infoControl).setSerializedState(serializedState);\n    };\n\n    /**\n     * Get the current state of the infoControl as a string.\n     * It enables saving the state for later usage.\n     * \n     * @param {Object} infoControl\n     * @returns {Object} json format\n     */\n    var getSerializedState = function(infoControl){\n\n        return _getPic(infoControl).getSerializedState();\n    };\n\n    return {\n        qtiClass : 'infoControl',\n        template : tpl,\n        getData : function(infoControl, data){\n            \n            //remove ns + fix media file path\n            var markup = data.markup;\n            markup = util.removeMarkupNamespaces(markup);\n            markup = PortableElement.fixMarkupMediaSources(markup, this);\n            data.markup = markup;\n            \n            return data;\n        },\n        render : render,\n        getContainer : containerHelper.get,\n        destroy : destroy,\n        getSerializedState : getSerializedState,\n        setSerializedState : setSerializedState\n    };\n});\n\n","define('taoQtiItem/qtiCreator/renderers/PortableInfoControl',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/PortableInfoControl',\n    'taoQtiItem/qtiCreator/editor/infoControlRegistry',\n    'taoQtiItem/qtiCreator/helper/commonRenderer'\n], function(_, Renderer, icRegistry, commonRenderer){\n\n    var CreatorPortableInfoControl = _.clone(Renderer);\n\n    CreatorPortableInfoControl.render = function(infoControl, options){\n\n        //initial rendering:\n        Renderer.render.call(commonRenderer.get(), infoControl, {baseUrl : icRegistry.getBaseUrl(infoControl.typeIdentifier)});\n\n        var pciCreator = icRegistry.getCreator(infoControl.typeIdentifier),\n            Widget = pciCreator.getWidget();\n\n        return Widget.build(\n            infoControl,\n            Renderer.getContainer(infoControl),\n            this.getOption('bodyElementOptionForm'),\n            options\n            );\n    };\n\n    return CreatorPortableInfoControl;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/rubricBlock', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"grid-row qti-rubricBlock\\\" data-use=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.use)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"rubricBlock\\\">\\n    <div class=\\\"col-12\\\">\\n        <div class=\\\"qti-rubricBlock-body\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/RubricBlock',['tpl!taoQtiItem/qtiCommonRenderer/tpl/rubricBlock', 'taoQtiItem/qtiCommonRenderer/helpers/container'], function(tpl, containerHelper){\n    return {\n        qtiClass : 'rubricBlock',\n        getContainer : containerHelper.get,\n        template : tpl\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/static/states/Sleep'], function(stateFactory, SleepState){\n    \n    var RubriBlockStateSleep = stateFactory.extend(SleepState, function(){}, function(){});\n    \n    return RubriBlockStateSleep;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/static/rubricBlock', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<!--currently only visible to the candidate-->\\n<div class=\\\"panel\\\">\\n    <label for=\\\"view\\\">Visible by</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"A rubric block identifies part of an assessmentItem's itemBody that represents instructions to one or more of the actors that view the item. Although rubric blocks are defined as simpleBlocks they must not contain interactions.\", options) : helperMissing.call(depth0, \"__\", \"A rubric block identifies part of an assessmentItem's itemBody that represents instructions to one or more of the actors that view the item. Although rubric blocks are defined as simpleBlocks they must not contain interactions.\", options)))\n    + \"\\n    </div>\\n    <select name=\\\"view\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n        <option value=\\\"author\\\">author</option>\\n        <option value=\\\"candidate\\\">candidate</option>\\n        <option value=\\\"proctor\\\">proctor</option>\\n        <option value=\\\"scorer\\\">scorer</option>\\n        <option value=\\\"testConstructor\\\">test constructor</option>\\n        <option value=\\\"tutor\\\">tutor</option>\\n    </select>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"use\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Description\", options) : helperMissing.call(depth0, \"__\", \"Description\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The purpose for which the rubric is intended to be used. As a reading passage for multiple items, or instructions for a particular section, for example.\", options) : helperMissing.call(depth0, \"__\", \"The purpose for which the rubric is intended to be used. As a reading passage for multiple items, or instructions for a particular section, for example.\", options)))\n    + \"</div>\\n    <input type=\\\"text\\\" name=\\\"use\\\" value=\\\"\";\n  if (helper = helpers.use) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.use); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/Active',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Active',\n    'taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/static/rubricBlock',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement'\n], function(stateFactory, Active, htmlEditor, content, formTpl, formElement){\n\n    var RubricBlockStateActive = stateFactory.extend(Active, function(){\n\n        this.buildEditor();\n        this.initForm();\n\n    }, function(){\n\n        this.destroyEditor();\n        this.widget.$form.empty();\n    });\n\n    RubricBlockStateActive.prototype.buildEditor = function(){\n\n        var widget = this.widget,\n            $editableContainer = widget.$container,\n            container = widget.element.getBody();\n\n        $editableContainer.attr('data-html-editable-container', true);\n\n        if(!htmlEditor.hasEditor($editableContainer)){\n\n            htmlEditor.buildEditor($editableContainer, {\n                change : content.getChangeCallback(container),\n                data : {\n                    widget : widget,\n                    container : container\n                }\n            });\n        }\n    };\n\n    RubricBlockStateActive.prototype.destroyEditor = function(){\n        //search and destroy the editor\n        htmlEditor.destroyEditor(this.widget.$container);\n    };\n\n    RubricBlockStateActive.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n\n        $form.html(formTpl({\n            view : interaction.attr('view'),\n            use : interaction.attr('use')\n        }));\n\n        formElement.initWidget($form);\n\n        //init data change callbacks\n        formElement.setChangeCallbacks($form, interaction, {\n            view : formElement.getAttributeChangeCallback(),\n            use : formElement.getAttributeChangeCallback()\n        });\n\n    };\n\n    return RubricBlockStateActive;\n});\n","define('taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/Active'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/static/rubricBlock/Widget',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/static/Widget',\n    'taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/states',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/textBlock'\n], function($, Widget, states, toolbarTpl) {\n\n    var RubricBlockWidget = Widget.clone();\n\n    RubricBlockWidget.buildContainer = function() {\n        this.$container = this.$original.addClass('widget-box widget-rubricBlock');\n    };\n\n    RubricBlockWidget.initCreator = function() {\n\n        this.registerStates(states);\n\n        Widget.initCreator.call(this);\n    };\n\n    RubricBlockWidget.createToolbar = function() {\n\n        var $tlb = $(toolbarTpl({\n                serial: this.serial,\n                state: 'active'\n            })),\n            _this = this;\n\n        this.$container.find('.qti-rubricBlock-body').append($tlb);\n\n        $tlb.find('[data-role=\"delete\"]').on('click.widget-box', function(e){\n            e.stopPropagation();//to prevent direct deleting;\n            _this.changeState('deleting');\n        });\n\n        return this;\n    };\n\n    return RubricBlockWidget;\n});\n\n","define('taoQtiItem/qtiCreator/renderers/RubricBlock',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/RubricBlock',\n    'taoQtiItem/qtiCreator/widgets/static/rubricBlock/Widget'\n], function(_, Renderer, Widget){\n\n    var CreatorRubricBlock = _.clone(Renderer);\n\n    CreatorRubricBlock.render = function(rubricBlock, options){\n        \n        return Widget.build(\n            rubricBlock,\n            Renderer.getContainer(rubricBlock),\n            this.getOption('bodyElementOptionForm'),\n            options\n        );\n    };\n\n    return CreatorRubricBlock;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/gap', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"qti-choice qti-gap\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\r\\n    <span data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"gapmatch-content\\\">&nbsp;</span>\\r\\n</span>\";\n  return buffer;\n  });\n});\n\n","/*  \n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n * \n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n * \n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n * \n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n * \n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/choices/Gap',[\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/gap', \n    'taoQtiItem/qtiCommonRenderer/helpers/container'\n], function(tpl, containerHelper){\n    'use strict';\n\n    return {\n        qtiClass : 'gap',\n        getContainer : containerHelper.get,\n        template : tpl\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/Widget',['taoQtiItem/qtiCreator/widgets/Widget'], function(Widget){\n\n    var ChoiceWidget = Widget.clone();\n\n    ChoiceWidget.buildContainer = function(){\n        this.$container = this.$original;\n    };\n\n    ChoiceWidget.initCreator = function(){\n\n        Widget.initCreator.call(this);\n\n        this.interaction = this.element.getInteraction();\n        if(!this.interaction){\n            throw new Error('cannot find related interaction');\n        }\n\n        this.listenToInteractionStates();\n    };\n\n    ChoiceWidget.listenToInteractionStates = function(){\n\n        var _this = this;\n\n        //follow interaction state change\n        this.beforeStateInit(function(e, element, state){\n            \n            if(element.is('interaction')\n                && element.getSerial() === _this.interaction.getSerial()\n                && state.name !== _this.getCurrentState().name){\n                \n                switch(state.name){\n                    case 'answer':\n                    case 'sleep':\n                    case 'question':\n                        _this.changeState(state.name);\n                        break;\n                    case 'delete':\n                        _this.changeState('sleep');\n                        break;\n                }\n\n            }\n        });\n        \n        this.beforeStateExit(function(e, element, state){\n            if(element.is('interaction')\n                && element.getSerial() === _this.interaction.getSerial()\n                && state.name === 'choice'){\n                \n                _this.changeState('question');\n            }\n            \n        });\n    };\n\n    return ChoiceWidget;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/states/Answer',['taoQtiItem/qtiCreator/widgets/states/factory'], function(stateFactory){\n    return stateFactory.create('answer', ['active'], function(){\n        throw new Error('state \"answer\" prototype init method must be implemented');\n    },function(){\n        throw new Error('state \"answer\" prototype exit method must be implemented');\n    });\n});\n","define('taoQtiItem/qtiCreator/widgets/states/Choice',['taoQtiItem/qtiCreator/widgets/states/factory'], function(stateFactory){\n    return stateFactory.create('choice', ['question', 'active'], function(){\n        throw new Error('state \"choice\" prototype init method must be implemented');\n    },function(){\n        throw new Error('state \"choice\" prototype exit method must be implemented');\n    });\n});\n","define('taoQtiItem/qtiCreator/widgets/states/Correct',['taoQtiItem/qtiCreator/widgets/states/factory'], function(stateFactory){\n    return stateFactory.create('correct', ['answer', 'active'], function(){\n        throw new Error('state \"correct\" prototype init method must be implemented');\n    },function(){\n        throw new Error('state \"correct\" prototype exit method must be implemented');\n    });\n});\n","define('taoQtiItem/qtiCreator/widgets/states/Map',['taoQtiItem/qtiCreator/widgets/states/factory'], function(stateFactory){\n    return stateFactory.create('map', ['answer', 'active'], function(){\n        throw new Error('state \"map\" prototype init method must be implemented');\n    },function(){\n        throw new Error('state \"map\" prototype exit method must be implemented');\n    });\n});\n","define('taoQtiItem/qtiCreator/widgets/states/Question',['taoQtiItem/qtiCreator/widgets/states/factory'], function(stateFactory){\n    return stateFactory.create('question', ['active'], function(){\n        throw new Error('state \"question\" prototype init method must be implemented');\n    },function(){\n        throw new Error('state \"question\" prototype exit method must be implemented');\n    });\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/notifications/invalidInfoBox', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<div class=\\\"feedback-error popup\\\" data-widget-component=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"icon-error\\\"></span>\\n    \";\n  stack1 = (helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"There is an incomplete element in your item : please click on it to complete it.\", options) : helperMissing.call(depth0, \"__\", \"There is an incomplete element in your item : please click on it to complete it.\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/states/Invalid',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'tpl!taoQtiItem/qtiCreator/tpl/notifications/invalidInfoBox'\n], function($, stateFactory, invalidInfoBoxTpl){\n\n    return stateFactory.create('invalid', ['sleep'], function(){\n\n        this.widget.$container.addClass('invalid');\n\n        this.$messageBox = $(invalidInfoBoxTpl({\n            serial : this.widget.serial\n        }));\n         $('body').append(this.$messageBox);\n\n    },function(){\n\n        this.widget.$container.removeClass('invalid');\n        this.$messageBox.remove();\n    });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Active',\n    'taoQtiItem/qtiCreator/widgets/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/states/Deleting',\n    'taoQtiItem/qtiCreator/widgets/states/Inactive',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCreator/widgets/states/Question',\n    'taoQtiItem/qtiCreator/widgets/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/states/Invalid'\n], function(factory){\n    return factory.createBundle(arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/states/Sleep'], function(stateFactory, Sleep){\n    \n    var ChoiceStateSleep = stateFactory.create(Sleep, function(){\n        \n    }, function(){\n        \n    });\n    \n    return ChoiceStateSleep;\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/states/Active',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/states/Active'], function(stateFactory, Active){\n    \n    var ChoiceStateActive = stateFactory.create(Active, function(){\n        \n    },function(){\n        \n    });\n\n    return ChoiceStateActive;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.content', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"display:none;\";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"icon-pin\";\n  }\n\nfunction program7(depth0,data) {\n  \n  \n  return \"icon-shuffle\";\n  }\n\n  buffer += \"<div class=\\\"mini-tlb\\\" data-edit=\\\"question\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <div class=\\\"rgt tlb-button\\\" title=\\\"Delete\\\" data-role=\\\"delete\\\">\\n        <span class=\\\"icon-bin\\\"></span>\\n    </div>\\n    <div class=\\\"rgt tlb-button\\\" data-role=\\\"shuffle-pin\\\" title=\\\"Shuffle/Pin\\\" style=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.interactionShuffle), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n        <span class=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.fixed), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"></span>\\n    </div>\\n    <div class=\\\"rgt tlb-button\\\" data-role=\\\"cke-launcher\\\" title=\\\"Formatting options\\\">\\n        <span class=\\\"icon-font\\\"></span>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/helpers/formElement',['jquery'], function($) {\n\n    var formElementHelper = {\n        initShufflePinToggle: function(widget) {\n\n            var $container = widget.$container,\n                choice = widget.element,\n                interaction = choice.getInteraction(),\n                $shuffleToggle = $container.find('[data-role=\"shuffle-pin\"]');\n\n            $shuffleToggle.off('mousedown').on('mousedown', function(e) {\n                e.stopPropagation();\n                var $icon = $(this).children();\n                if ($icon.length === 0) {\n                    $icon = $(this);\n                }\n                if ($icon.hasClass('icon-shuffle')) {\n                    $icon.removeClass('icon-shuffle').addClass('icon-pin');\n                    choice.attr('fixed', true);\n                } else {\n                    $icon.removeClass('icon-pin').addClass('icon-shuffle');\n                    choice.attr('fixed', false);\n                }\n            });\n\n            var _toggleVisibility = function(show) {\n                if (show) {\n                    $shuffleToggle.show();\n                } else {\n                    $shuffleToggle.hide();\n                }\n                $('.qti-item').trigger('toolbarchange', {\n                    callee: 'formElementHelper'\n                });\n            };\n\n            _toggleVisibility(interaction.attr('shuffle'));\n\n            //listen to interaction property change\n            widget.on('attributeChange', function(data) {\n                if (data.element.serial === interaction.serial && data.key === 'shuffle') {\n                    _toggleVisibility(data.value);\n                }\n            });\n        },\n        initDelete: function(widget) {\n\n            var $container = widget.$container;\n\n            $container.find('[data-role=\"delete\"]:not([data-html-editable] *)').on('mousedown', function(e) {\n                e.stopPropagation();\n                widget.changeState('deleting');\n            });\n        }\n    };\n\n    return formElementHelper;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Question',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.content',\n    'taoQtiItem/qtiCreator/widgets/choices/helpers/formElement'\n], function($, stateFactory, QuestionState, contentToolbarTpl, formElement){\n\n    var ChoiceStateQuestion = stateFactory.create(QuestionState, function(){\n\n        var _widget = this.widget;\n\n        //add some event listeners\n        _widget.$container.on('click.question', function(){\n            //show option form\n            _widget.changeState('choice');\n        }).on('mouseenter.question', function(){\n            //add listener to display proper hover style\n            $(this).addClass('hover');\n        }).on('mouseleave.question', function(){\n            $(this).removeClass('hover');\n        });\n\n        this.createToolbar().show();\n\n    }, function(){\n\n        //remove the question state toolbar properly\n        this.removeToolbar();\n\n        //!! very important, always unbind the event on exit!\n        this.widget.$container.off('.question');\n    });\n\n    ChoiceStateQuestion.prototype.createToolbar = function(){\n\n        var _widget = this.widget,\n            $container = _widget.$container,\n            choice = _widget.element,\n            interaction,\n            $toolbar = $container.find('.mini-tlb').not('[data-html-editable] *');\n\n        if(!$toolbar.length){\n\n            interaction = choice.getInteraction();\n\n            //add mini toolbars\n            $toolbar = $(contentToolbarTpl({\n                choiceSerial : choice.getSerial(),\n                interactionSerial : interaction.getSerial(),\n                fixed : choice.attr('fixed'),\n                interactionShuffle : interaction.attr('shuffle')\n            }));\n\n            $container.append($toolbar);\n\n            //set toolbar button behaviour:\n            formElement.initShufflePinToggle(_widget);\n            formElement.initDelete(_widget);\n        }\n\n        return $toolbar;\n    };\n\n    ChoiceStateQuestion.prototype.removeToolbar = function(){\n\n        this.widget.$container.find('.mini-tlb[data-edit=question]').remove()\n    };\n\n    return ChoiceStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Answer'\n], function(stateFactory, Answer){\n\n    var ChoiceStateAnswer = stateFactory.create(Answer, function(){\n        \n    }, function(){\n        \n    });\n        \n    return ChoiceStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/states',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Active',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Question',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Answer'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/states/Choice',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Choice',\n    'taoQtiItem/qtiItem/core/Element'\n], function(stateFactory, Choice, Element){\n\n    var ChoiceStateChoice = stateFactory.create(Choice, function(){\n\n        var _widget = this.widget;\n\n        //focus on the selected choice\n\n        //listener to other siblings choice mode\n        _widget.beforeStateInit(function(e, element, state){\n            \n            if(Element.isA(element, 'choice') && _widget.interaction.getChoice(element.serial)){//@todo hottext an\n                \n                if(state.name === 'choice' && element.serial !== _widget.serial){\n                    _widget.changeState('question');\n                }else if(state.name === 'active'){\n                    _widget.changeState('question');\n                }\n                \n            }else if(element.is('img') || element.is('math') || element.is('object')){\n                \n                if(state.name === 'active'){\n                    _widget.changeState('question');\n                }\n                \n            }\n        }, 'otherActive');\n\n        //add options form\n        this.initForm();\n        this.widget.$form.show();\n\n    }, function(){\n\n        //destroy and hide the form\n        this.widget.$form.empty().hide();\n        \n        this.widget.offEvents('otherActive');\n    });\n\n    ChoiceStateChoice.prototype.initForm = function(){\n        stateFactory.throwMissingRequiredImplementationError('initForm');\n    };\n\n    return ChoiceStateChoice;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/choices/gap', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Identifier\", options) : helperMissing.call(depth0, \"__\", \"Identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. my-choice_1\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"required\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.required), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"required\", options) : helperMissing.call(depth0, \"__\", \"required\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Define whether a choice must be selected by the candidate in order to form a valid response to the interaction.\", options) : helperMissing.call(depth0, \"__\", \"Define whether a choice must be selected by the candidate in order to form a valid response to the interaction.\", options)))\n    + \"\\n    </span>\\n</div>\\n\\n<h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Shape position\", options) : helperMissing.call(depth0, \"__\", \"Shape position\", options)))\n    + \"</h3>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"x\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Left\", options) : helperMissing.call(depth0, \"__\", \"Left\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"x\\\" value=\\\"\";\n  if (helper = helpers.x) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.x); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"y\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Top\", options) : helperMissing.call(depth0, \"__\", \"Top\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"y\\\" value=\\\"\";\n  if (helper = helpers.y) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.y); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width\", options) : helperMissing.call(depth0, \"__\", \"Width\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The shape width in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The shape width in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height\", options) : helperMissing.call(depth0, \"__\", \"Height\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The shape height in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The shape height in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/helpers/identifier',['lodash'], function(_){\n\n    var _updateChoiceIdentifierInResponse = function(response, oldId, newId){\n\n        \n        var escapedOldId = oldId.replace(/([.-])/g, '\\\\$1'),//escape spec characters allowed in the standard and that is meaningful in regex\n            regex = new RegExp('([^\\\\s]*\\\\s+|^)(' + escapedOldId + ')(\\\\s+[^\\\\s]*|$)');//prepare the regex to watch the oldId to be replaced\n\n        for(var i in response.correctResponse){\n            response.correctResponse[i] = response.correctResponse[i].replace(regex, '$1'+newId+'$3');\n        }\n\n        var mapEntries = {};\n        _.forIn(response.mapEntries, function(value, mapKey){\n            mapKey = mapKey.replace(regex, '$1'+newId+'$3');\n            mapEntries[mapKey] = value;\n        });\n        response.mapEntries = mapEntries;\n    };\n\n    var _updateChoiceIdentifier = _.throttle(function(choice, newId, response){\n\n        var oldId = choice.id();\n\n        if(oldId !== newId){\n            //need to update correct response and mapping values too !\n            _updateChoiceIdentifierInResponse(response, oldId, newId);\n\n            //finally, set the new identifier to the choice\n            choice.id(newId);\n\n            //update domi\n            var interaction = _get('interactionFromChoice', choice, function(){\n                return choice.getInteraction();\n            });\n                \n            //FIXME some choices may not have a renderer, so we catch the thrown exception silently\n            try{\n                choice.getContainer(null, choice.qtiClass+'.'+interaction.qtiClass).attr('data-identifier', choice.id());\n            } catch(ex){}\n\n        }\n    }, 500);\n\n\n    var _cache = [];\n\n    var _setCache = function(cache, element, value){\n        if(!_cache[cache]){\n            _cache[cache] = {};\n        }\n        _cache[cache][element.getSerial()] = value;\n    };\n\n    var _getCache = function(cache, element){\n        var serial = element.getSerial();\n        if(serial && _cache[cache] && _cache[cache][serial]){\n            return _cache[cache][serial];\n        }\n        return null;\n    };\n\n    var _get = function(cache, element, callback){\n        var ret = _getCache(cache, element);\n        if(!ret){\n            ret = callback.call(element);\n            _setCache(cache, element, ret);\n        }\n        return ret;\n    };\n\n    return {\n        updateChoiceIdentifier : function(choice, value){\n\n            var response = _get('responseFromChoice', choice, function(){\n                var interaction = _get('interactionFromChoice', choice, function(){\n                    return choice.getInteraction();\n                });\n                return interaction.getResponseDeclaration();\n            });\n\n            _updateChoiceIdentifier(choice, value, response);\n        },\n        updateResponseIdentifier : function(response, value){\n            throw 'to be implemented';\n        }\n    };\n\n});\n\n\n\n","define('taoQtiItem/qtiCreator/widgets/choices/gap/states/Choice',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Choice',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/gap',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/helpers/identifier',\n    'taoQtiItem/qtiItem/core/Element'\n], function(stateFactory, Choice, formTpl, formElement, identifierHelper, Element){\n\n    var GapStateChoice = stateFactory.extend(Choice, function(){\n        \n        var _widget = this.widget;\n        \n        //listener to changes of sibling choices' mode \n        _widget.beforeStateInit(function(e, element, state){\n            \n            if(Element.isA(element, 'gap') && _widget.interaction.getBody().getElement(element.serial)){\n                \n                if(state.name === 'choice' && element.serial !== _widget.serial){\n                    _widget.changeState('question');\n                }else if(state.name === 'active'){\n                    _widget.changeState('question');\n                }\n                \n            }\n        }, 'otherActive');\n        \n    }, function(){\n\n        //add remove the toolbar\n        this.widget.offEvents('otherActive');\n    });\n\n    GapStateChoice.prototype.initForm = function(){\n\n        var $form = this.widget.$form,\n            interaction = this.widget.element;\n\n        //build form:\n        $form.html(formTpl({\n            serial : interaction.getSerial(),\n            identifier : interaction.id(),\n            required : !!interaction.attr('required')\n        }));\n\n        formElement.initWidget($form);\n\n        //init data validation and binding\n        formElement.setChangeCallbacks($form, interaction, {\n            identifier : identifierHelper.updateChoiceIdentifier,\n            required : formElement.getAttributeChangeCallback()\n        });\n    };\n\n    return GapStateChoice;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/gap', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"mini-tlb\\\" data-edit=\\\"\";\n  if (helper = helpers.state) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.state); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"rgt tlb-button\\\" title=\\\"Delete\\\" data-role=\\\"delete\\\">\\n        <span class=\\\"icon-bin\\\"></span>\\n    </span>\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/gap/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Question',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/gap',\n    'taoQtiItem/qtiCreator/widgets/choices/helpers/formElement'\n], function($, stateFactory, QuestionState, gapTpl, formElement){\n\n    var GapStateQuestion = stateFactory.extend(QuestionState);\n\n    GapStateQuestion.prototype.createToolbar = function(){\n\n        var _widget = this.widget,\n            $container = _widget.$container,\n            gap = _widget.element,\n            $toolbar = $container.find('.mini-tlb').not('[data-html-editable] *');\n\n        if(!$toolbar.length){\n\n            //add mini toolbars\n            $toolbar = $(gapTpl({\n                serial : gap.getSerial(),\n                state : 'question'\n            }));\n\n            $container.append($toolbar);\n\n            formElement.initDelete(_widget);\n        }\n\n        return $toolbar;\n    };\n\n    return GapStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/gap/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/states',\n    'taoQtiItem/qtiCreator/widgets/choices/gap/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/choices/gap/states/Question'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/gap/Widget',[\n    'taoQtiItem/qtiCreator/widgets/choices/Widget',\n    'taoQtiItem/qtiCreator/widgets/choices/gap/states/states'\n], function(Widget, states){\n\n    var GapWidget = Widget.clone();\n\n    GapWidget.initCreator = function(){\n\n        Widget.initCreator.call(this);\n\n        this.registerStates(states);\n        \n    };\n    \n    GapWidget.buildContainer = function(){\n        this.$container = this.$original.addClass('widget-box');\n        this.$container.attr('contenteditable', false);\n    };\n    \n    return GapWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/choices/Gap',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/choices/Gap',\n    'taoQtiItem/qtiCreator/widgets/choices/gap/Widget'\n], function(_, Gap, GapWidget){\n    \n    var CreatorGap = _.clone(Gap);\n\n    CreatorGap.render = function(choice, options){\n        \n        return GapWidget.build(\n            choice,\n            Gap.getContainer(choice),\n            this.getOption('choiceOptionForm'),\n            options\n        );\n    };\n\n    return CreatorGap;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/choice', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<li class=\\\"qti-choice\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</li>\";\n  return buffer;\n  });\n});\n\n","/*  \n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n * \n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n * \n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n * \n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n * \n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/choices/GapText',[\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/choice', \n    'taoQtiItem/qtiCommonRenderer/helpers/container'\n], function(tpl, containerHelper){\n    'use strict';\n    \n    return {\n        qtiClass : 'gapText',\n        getContainer : containerHelper.get,\n        template : tpl\n    };\n}); \n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/choices/simpleAssociableChoice', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Identifier\", options) : helperMissing.call(depth0, \"__\", \"Identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. my-choice_1\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <h3 class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allowed number of uses\", options) : helperMissing.call(depth0, \"__\", \"Allowed number of uses\", options)))\n    + \"\\n    </h3>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices this choice may be associated with. If matchMax is 0 there is no restriction.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices this choice may be associated with. If matchMax is 0 there is no restriction.\", options)))\n    + \"\\n    </span>\\n\\n    <!--not supported yet-->\\n    <div style=\\\"display:none;\\\">\\n        <label for=\\\"matchMin\\\" class=\\\"spinner\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Min\", options) : helperMissing.call(depth0, \"__\", \"Min\", options)))\n    + \"</label>\\n        <input name=\\\"matchMin\\\" value=\\\"\";\n  if (helper = helpers.matchMin) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.matchMin); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"100\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div>\\n        <label for=\\\"matchMax\\\" class=\\\"spinner\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Max\", options) : helperMissing.call(depth0, \"__\", \"Max\", options)))\n    + \"</label>\\n        <input name=\\\"matchMax\\\" value=\\\"\";\n  if (helper = helpers.matchMax) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.matchMax); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"100\\\" type=\\\"text\\\" />\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/Choice',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Choice',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/simpleAssociableChoice',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/helpers/identifier',\n    'taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content'\n], function(stateFactory, Choice, formTpl, formElement, identifierHelper, htmlEditor, contentHelper){\n\n    var SimpleAssociableChoiceStateChoice = stateFactory.extend(Choice, function(){\n        \n        this.buildEditor();\n        \n    }, function(){\n        \n        this.destroyEditor();\n    });\n    \n    SimpleAssociableChoiceStateChoice.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            choice = _widget.element;\n\n        //build form:\n        $form.html(formTpl({\n            serial : choice.getSerial(),\n            identifier : choice.id(),\n            matchMin : choice.attr('matchMin'),\n            matchMax : choice.attr('matchMax')\n        }));\n\n        formElement.initWidget($form);\n\n        //init data validation and binding\n        var callbacks = formElement.getMinMaxAttributeCallbacks(this.widget.$form, 'matchMin', 'matchMax');\n        callbacks.identifier = identifierHelper.updateChoiceIdentifier;\n        formElement.setChangeCallbacks($form, choice, callbacks);\n    };\n    \n    SimpleAssociableChoiceStateChoice.prototype.buildEditor = function(){\n        \n        var _widget = this.widget,\n            container = _widget.element.getBody(),\n            $editableContainer = _widget.$container;\n\n        //@todo set them in the tpl\n        $editableContainer.attr('data-html-editable-container', true);\n\n        if(!htmlEditor.hasEditor($editableContainer)){\n            \n            htmlEditor.buildEditor($editableContainer, {\n                change : contentHelper.getChangeCallback(container),\n                data : {\n                    container : container,\n                    widget : _widget\n                }\n            });\n        }\n    };\n\n    SimpleAssociableChoiceStateChoice.prototype.destroyEditor = function(){\n        \n        //search and destroy the editor\n        htmlEditor.destroyEditor(this.widget.$container);\n    };\n    \n    return SimpleAssociableChoiceStateChoice;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/gapText/states/Choice',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/Choice',\n    'taoQtiItem/qtiItem/core/Element',\n    'lodash'\n], function($, stateFactory, Choice, SimpleAssociableChoice, Element, _){\n\n    var GapTextStateChoice = stateFactory.extend(Choice, function(){\n\n        var _widget = this.widget;\n\n        //listener to other siblings choice mode\n        _widget.beforeStateInit(function(e, element, state){\n\n            if(Element.isA(element, 'choice') && _widget.interaction.getBody().getElement(element.serial)){//@todo hottext an\n\n                if(state.name === 'choice' && element.serial !== _widget.serial){\n                    _widget.changeState('question');\n                }\n\n            }\n\n        }, 'otherActive');\n\n        this.buildEditor();\n\n    }, function(){\n\n        this.destroyEditor();\n\n        this.widget.offEvents('otherActive');\n    });\n\n    GapTextStateChoice.prototype.initForm = function(){\n        SimpleAssociableChoice.prototype.initForm.call(this);\n    };\n\n    GapTextStateChoice.prototype.buildEditor = function(){\n\n        var _widget = this.widget,\n            $editableContainer = _widget.$container,\n            $tlb = $editableContainer.find('.mini-tlb'),\n            $editable;\n\n        $tlb.detach();\n\n        $editableContainer.wrapInner($('<div>', {'class' : 'inner-wrapper'}));\n        $editableContainer.append($tlb);\n        $editable = $editableContainer.find('.inner-wrapper');\n\n        $editable.attr('contentEditable', true);\n\n        //focus then reset content to have the cursor at the end:\n        _focus($editable);\n\n        $editable.on('keyup.qti-widget', _.throttle(function(){\n\n            //update model\n            _widget.element.val($(this).text());\n\n        }, 200)).on('keypress.qti-widget', function(e){\n\n            if(e.which === 13){\n                e.preventDefault();\n                $(this).blur();\n                _widget.changeState('question');\n            }\n\n        });\n    };\n\n    GapTextStateChoice.prototype.destroyEditor = function(){\n\n        var $container = this.widget.$container;\n\n        $container.find('td').removeAttr('contentEditable');\n        $container.children('td:first').off('keyup.qti-widget');\n    };\n\n    var _focus = function($el){\n\n        var range, sel, el = $el[0];\n\n        el.focus();\n        if(window.getSelection !== undefined && document.createRange !== undefined){\n\n            range = document.createRange();\n            range.selectNodeContents(el);\n            range.collapse(false);\n\n            sel = window.getSelection();\n            sel.removeAllRanges();\n            sel.addRange(range);\n\n        }else if(document.body.createTextRange !== undefined){\n\n            range = document.body.createTextRange();\n            range.moveToElementText(el);\n            range.collapse(false);\n            range.select();\n        }\n\n    };\n    return GapTextStateChoice;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/gapText/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/states',\n    'taoQtiItem/qtiCreator/widgets/choices/gapText/states/Choice'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/gapText/Widget',[\n    'taoQtiItem/qtiCreator/widgets/choices/Widget',\n    'taoQtiItem/qtiCreator/widgets/choices/gapText/states/states'\n], function(Widget, states){\n\n    var GapTextWidget = Widget.clone();\n\n    GapTextWidget.initCreator = function(){\n\n        Widget.initCreator.call(this);\n\n        this.registerStates(states);\n        \n    };\n\n    return GapTextWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/choices/GapText',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/choices/GapText',\n    'taoQtiItem/qtiCreator/widgets/choices/gapText/Widget'\n], function(_, GapText, GapTextWidget){\n    \n    var CreatorGapText = _.clone(GapText);\n\n    CreatorGapText.render = function(choice, options){\n        \n        return GapTextWidget.build(\n            choice,\n            GapText.getContainer(choice),\n            this.getOption('choiceOptionForm'),\n            options\n        );\n    };\n\n    return CreatorGapText;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/hottext', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"qti-choice qti-hottext hottext\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\r\\n    <label class=\\\"hottext-checkmark\\\">\\r\\n        <input type=\\\"checkbox\\\" value=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\r\\n        <span class=\\\"icon-checkbox small\\\"></span>\\r\\n    </label>\\r\\n    <span class=\\\"hottext-content\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</span>\\r\\n</span>\";\n  return buffer;\n  });\n});\n\n","/*  \n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n * \n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n * \n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n * \n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n * \n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/choices/Hottext',[\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/hottext', \n    'taoQtiItem/qtiCommonRenderer/helpers/container'\n], function(tpl, containerHelper){\n    'use strict';\n    \n    return {\n        qtiClass : 'hottext',\n        getContainer : containerHelper.get,\n        template : tpl\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/choices/choice', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Identifier\", options) : helperMissing.call(depth0, \"__\", \"Identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. my-choice_1\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/simpleChoice/states/Choice',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Choice',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/choice',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/helpers/identifier',\n    'taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content'\n], function(stateFactory, Choice, formTpl, formElement, identifierHelper, htmlEditor, contentHelper){\n\n    var SimpleChoiceStateChoice = stateFactory.extend(Choice, function(){\n        \n        this.buildEditor();\n        \n    }, function(){\n        \n        this.destroyEditor();\n    });\n\n    SimpleChoiceStateChoice.prototype.initForm = function(){\n\n        var _widget = this.widget;\n\n        //build form:\n        _widget.$form.html(formTpl({\n            serial : _widget.element.getSerial(),\n            identifier : _widget.element.id()\n        }));\n\n        formElement.initWidget(_widget.$form);\n\n        //init data validation and binding\n        formElement.setChangeCallbacks(_widget.$form, _widget.element, {\n            identifier : identifierHelper.updateChoiceIdentifier\n        });\n    };\n    \n    SimpleChoiceStateChoice.prototype.buildEditor = function(){\n\n        var _widget = this.widget,\n            container = _widget.element.getBody(),\n            $editableContainer = _widget.$container;\n\n        //@todo set them in the tpl\n        $editableContainer.attr('data-html-editable-container', true);\n\n        if(!htmlEditor.hasEditor($editableContainer)){\n            \n            htmlEditor.buildEditor($editableContainer, {\n                change : contentHelper.getChangeCallback(container),\n                data : {\n                    container : container,\n                    widget : _widget\n                }\n            });\n        }\n    };\n\n    SimpleChoiceStateChoice.prototype.destroyEditor = function(){\n        \n        //search and destroy the editor\n        htmlEditor.destroyEditor(this.widget.$container);\n    };\n\n    return SimpleChoiceStateChoice;\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/hottext/states/Choice',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleChoice/states/Choice'\n], function(stateFactory, Choice, SimpleChoice){\n\n    var HottextStateChoice = stateFactory.extend(Choice);\n\n    HottextStateChoice.prototype.initForm = function(){\n        SimpleChoice.prototype.initForm.call(this);\n    };\n\n    return HottextStateChoice;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/hottext', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"mini-tlb\\\" data-edit=\\\"\";\n  if (helper = helpers.state) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.state); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"tlb-button\\\" title=\\\"Restore\\\" data-role=\\\"restore\\\">\\n        <span class=\\\"icon-undo\\\"></span>\\n    </span>\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/hottext/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Question',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/hottext',\n    'taoQtiItem/qtiCreator/widgets/choices/helpers/formElement'\n], function($, stateFactory, QuestionState, gapTpl, formElement){\n\n    var HottextStateQuestion = stateFactory.extend(QuestionState);\n\n    HottextStateQuestion.prototype.createToolbar = function(){\n\n        var _widget = this.widget,\n            $container = _widget.$container,\n            hottext = _widget.element,\n            $toolbar = $container.find('.mini-tlb').not('[data-html-editable] *');\n\n        if(!$toolbar.length){\n\n            //add mini toolbars\n            $toolbar = $(gapTpl({\n                serial : hottext.getSerial(),\n                state : 'question'\n            }));\n\n            $container.append($toolbar);\n\n            //init delete:\n            $toolbar.find('[data-role=restore]').on('mousedown.question', function(){\n                $container.replaceWith(hottext.body());\n                _widget.destroy();\n                hottext.remove();\n            });\n        }\n\n        return $toolbar;\n    };\n\n    return HottextStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/hottext/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/states',\n    'taoQtiItem/qtiCreator/widgets/choices/hottext/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/choices/hottext/states/Question'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/hottext/Widget',[\n    'taoQtiItem/qtiCreator/widgets/choices/Widget',\n    'taoQtiItem/qtiCreator/widgets/choices/hottext/states/states'\n], function(Widget, states){\n\n    var HottextWidget = Widget.clone();\n\n    HottextWidget.initCreator = function(){\n\n        Widget.initCreator.call(this);\n\n        this.registerStates(states);\n        \n    };\n    \n    HottextWidget.buildContainer = function(){\n        this.$container = this.$original.addClass('widget-box');\n        this.$container.attr('contenteditable', false);\n        this.$original.find('.hottext-checkmark > input').prop('disabled', 'disabled');\n    };\n    \n    return HottextWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/choices/Hottext',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/choices/Hottext',\n    'taoQtiItem/qtiCreator/widgets/choices/hottext/Widget'\n], function(_, Hottext, HottextWidget){\n    \n    var CreatorHottext = _.clone(Hottext);\n\n    CreatorHottext.render = function(choice, options){\n        \n        return HottextWidget.build(\n            choice,\n            Hottext.getContainer(choice),\n            this.getOption('choiceOptionForm'),\n            options\n        );\n    };\n\n    return CreatorHottext;\n});\n","//not used;\ndefine(\"taoQtiItem/qtiCreator/renderers/choices/InlineChoice\", function(){});\n\n","/*  \n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n * \n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n * \n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n * \n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n * \n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.AssociateInteraction',[\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/choice', \n    'taoQtiItem/qtiCommonRenderer/helpers/container'\n], function(tpl, containerHelper){\n    'use strict';\n    \n    return {\n        qtiClass : 'simpleAssociableChoice.associateInteraction',\n        getContainer : containerHelper.get,\n        template : tpl\n    };\n});\n\n"," define('taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Question',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.content',\n    'taoQtiItem/qtiCreator/widgets/choices/helpers/formElement'\n], function($, stateFactory, QuestionState, contentToolbarTpl, formElement){\n\n    var SimpleAssociableChoiceStateQuestion = stateFactory.extend(QuestionState, function(){\n\n    }, function(){\n\n    });\n\n    SimpleAssociableChoiceStateQuestion.prototype.createToolbar = function(){\n\n        var _widget = this.widget,\n            $container = _widget.$container,\n            choice = _widget.element,\n            interaction,\n            $toolbar = $container.find('.mini-tlb').not('[data-html-editable] *');\n\n        if(!$toolbar.length){\n\n            interaction = choice.getInteraction();\n\n            //add mini toolbars\n            $toolbar = $(contentToolbarTpl({\n                choiceSerial : choice.getSerial(),\n                interactionSerial : interaction.getSerial(),\n                fixed : choice.attr('fixed'),\n                interactionShuffle : interaction.attr('shuffle')\n            }));\n\n            $container.children('.inner-wrapper').append($toolbar);\n\n            //set toolbar button behaviour:\n            formElement.initShufflePinToggle(_widget);\n            formElement.initDelete(_widget);\n        }\n\n        return $toolbar;\n    };\n\n    return SimpleAssociableChoiceStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/states',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/Question',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/Choice'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/Widget',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/choices/Widget',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/states'\n], function($, Widget, states){\n\n    var SimpleAssociableChoiceWidget = Widget.clone();\n\n    SimpleAssociableChoiceWidget.initCreator = function(){\n\n        this.registerStates(states);\n\n        Widget.initCreator.call(this);\n\n        //matchInteraction:\n        //need to wrap the container + tlb around a div because in mathInteraction, tlb cannot be position absolutely in <th>\n        this.$container.wrapInner($('<div>', {'class' : 'inner-wrapper'}));\n\n        //prevent checkbox from being selectable\n        this.$container.closest('table.matrix').find('input[type=checkbox]:enabled').prop('disabled', 'disabled');\n    };\n\n    return SimpleAssociableChoiceWidget;\n});\n\n","define('taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.AssociateInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.AssociateInteraction',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/Widget'\n], function(_, SimpleAssociableChoice, SimpleChoiceWidget){\n    \n    var CreatorSimpleChoice = _.clone(SimpleAssociableChoice);\n\n    CreatorSimpleChoice.render = function(choice, options){\n        \n        return SimpleChoiceWidget.build(\n            choice,\n            SimpleAssociableChoice.getContainer(choice),\n            this.getOption('choiceOptionForm'),\n            options\n        );\n    };\n\n    return CreatorSimpleChoice;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/simpleAssociableChoice.matchInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<th class=\\\"qti-choice qti-associableChoice qti-simpleAssociableChoice\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</th>\";\n  return buffer;\n  });\n});\n\n","/*  \n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n * \n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n * \n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n * \n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n * \n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction',[\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/simpleAssociableChoice.matchInteraction', \n    'taoQtiItem/qtiCommonRenderer/helpers/container'\n], function(tpl, containerHelper){\n    'use strict';\n    return {\n        qtiClass : 'simpleAssociableChoice.matchInteraction',\n        getContainer : containerHelper.get,\n        template : tpl\n    };\n});\n\n","define('taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.MatchInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/Widget'\n], function(_, SimpleAssociableChoice, SimpleAssociableChoiceWidget){\n    \n    var CreatorSimpleAssociableChoice = _.clone(SimpleAssociableChoice);\n\n    CreatorSimpleAssociableChoice.render = function(choice, options){\n        \n        return SimpleAssociableChoiceWidget.build(\n            choice,\n            SimpleAssociableChoice.getContainer(choice),\n            this.getOption('choiceOptionForm'),\n            options\n        );\n    };\n\n    return CreatorSimpleAssociableChoice;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/simpleChoice.choiceInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n            <input type=\\\"radio\\\" name=\\\"response-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.interaction)),stack1 == null || stack1 === false ? stack1 : stack1.serial)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" value=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n            <span class=\\\"icon-radio\\\"></span>\\n            \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n            <input type=\\\"checkbox\\\" name=\\\"response-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.interaction)),stack1 == null || stack1 === false ? stack1 : stack1.serial)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" value=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n            <span class=\\\"icon-checkbox\\\"></span>\\n            \";\n  return buffer;\n  }\n\n  buffer += \"<li class=\\\"qti-choice qti-simpleChoice\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <div class=\\\"pseudo-label-box\\\">\\n        <label class=\\\"real-label\\\">\\n            \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.unique), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </label>\\n        <div class=\\\"label-box\\\">\\n            <div class=\\\"label-content clear\\\" contenteditable=\\\"false\\\">\\n                \";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n            </div>\\n        </div>\\n    </div>\\n</li>\\n\";\n  return buffer;\n  });\n});\n\n","/*  \n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n * \n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n * \n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n * \n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n * \n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.ChoiceInteraction',[\n   'tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/simpleChoice.choiceInteraction', \n   'taoQtiItem/qtiCommonRenderer/helpers/container'\n], function(tpl, containerHelper){\n    'use strict';\n\n    return {\n        qtiClass : 'simpleChoice.choiceInteraction',\n        getContainer : containerHelper.get,\n        getData:function(choice, data){\n            data.unique = (parseInt(data.interaction.attributes.maxChoices) === 1);\n            return data;\n        },\n        template : tpl\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/simpleChoice/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/states',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleChoice/states/Choice'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/simpleChoice/Widget',[\n    'taoQtiItem/qtiCreator/widgets/choices/Widget',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleChoice/states/states'\n], function(Widget, states){\n\n    var SimpleChoiceWidget = Widget.clone();\n\n    SimpleChoiceWidget.initCreator = function(){\n\n        Widget.initCreator.call(this);\n\n        this.registerStates(states);\n\n        //choiceInteraction:\n        //prevent checkbox/radio from being selectable\n        var $realLabel = this.$container.find('.real-label');\n        $realLabel.children('input').attr('disabled', 'disabled');\n    };\n\n    return SimpleChoiceWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.ChoiceInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.ChoiceInteraction',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleChoice/Widget'\n], function(_, SimpleChoice, SimpleChoiceWidget){\n    \n    var CreatorSimpleChoice = _.clone(SimpleChoice);\n\n    CreatorSimpleChoice.render = function(choice, options){\n        \n        SimpleChoiceWidget.build(\n            choice,\n            SimpleChoice.getContainer(choice),\n            this.getOption('choiceOptionForm'),\n            options\n        );\n    };\n\n    return CreatorSimpleChoice;\n});\n","/*  \n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n * \n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n * \n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n * \n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n * \n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.OrderInteraction',[\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/choice', \n    'taoQtiItem/qtiCommonRenderer/helpers/container'\n], function(tpl, containerHelper){\n    'use strict';\n    \n    return {\n        qtiClass : 'simpleChoice.orderInteraction',\n        getContainer : containerHelper.get,\n        template : tpl\n    };\n});\n\n","define('taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.OrderInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.OrderInteraction',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleChoice/Widget'\n], function(_, SimpleChoice, SimpleChoiceWidget){\n    \n    var CreatorSimpleChoice = _.clone(SimpleChoice);\n\n    CreatorSimpleChoice.render = function(choice, options){\n        \n        return SimpleChoiceWidget.build(\n            choice,\n            SimpleChoice.getContainer(choice),\n            this.getOption('choiceOptionForm'),\n            options\n        );\n    };\n\n    return CreatorSimpleChoice;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/associateInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-associateInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"associateInteraction\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    <ul class=\\\"choice-area clearfix  none block-listing solid horizontal source\\\" data-eyecatcher=\\\">li\\\">\\n        \";\n  options={hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </ul>\\n    <ul class=\\\"result-area none target clearfix\\\">\\n    </ul>\\n    <div class=\\\"notification-container\\\"></div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/associateInteraction.pair', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"incomplete-pair\";\n  }\n\n  buffer += \"<li class=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.empty), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n    <div class=\\\"target lft\\\"></div>\\n    <div class=\\\"target rgt\\\"></div>\\n</li>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/instruction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div id=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"small feedback-info item-instruction\\\">\\n    <span class=\\\"icon-info icon\\\"></span><span class=\\\"instruction-message\\\">\";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/helpers/instructions/Instruction',[\n    'lodash',\n    'taoQtiItem/qtiItem/helper/util',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/instruction',\n], function(_, util, instructionTpl){\n\n    var _notificationLevels = ['info', 'warning', 'error', 'success'];\n\n    var Instruction = function(interaction, message, callback){\n        this.interaction = interaction;\n        this.defaultMessage = message || '';\n        this.currentMessage = '';\n        this.level = 'info';\n        this.serial = util.buildSerial('instruction_');\n        this.callback = callback;\n        this.$dom = null;\n        this.state = false;\n    };\n\n    Instruction.isValidLevel = function(level){\n        return (_.indexOf(_notificationLevels, level) >= 0);\n    };\n\n    Instruction.prototype.setState = function(state){\n        this.state = state;\n    };\n\n    Instruction.prototype.checkState = function(state){\n        return (this.state === state);\n    };\n\n    Instruction.prototype.getId = function(){\n        return this.serial;\n    };\n\n    Instruction.prototype.create = function($container){\n\n        $container.append(instructionTpl({\n            'message' : this.defaultMessage,\n            'serial' : this.serial\n        }));\n\n        this.$dom = $container.find('#' + this.serial);\n    };\n\n    Instruction.prototype.update = function(options){\n\n        var level = (options && options.level) ? options.level : '',\n            message = (options && options.message) ? options.message : '',\n            timeout = (options && options.timeout) ? options.timeout : 0,\n            start = (options && typeof(options.start) === 'function') ? options.start : null,\n            stop = (options && typeof(options.stop) === 'function') ? options.stop : null;\n\n        if(level && Instruction.isValidLevel(level)){\n            this.$dom.removeClass('feedback-' + this.level).addClass('feedback-' + level);\n            this.$dom.find('.icon').removeClass('icon-' + this.level).addClass('icon-' + level);\n            this.level = level;\n        }\n\n        if(message){\n            this.$dom.find('.instruction-message').html(message);\n            this.currentMessage = message;\n        }\n\n        if(timeout){\n            var _this = this;\n            if(start){\n                start.call(_this);\n            }\n            _this.timer = setTimeout(function(){\n                if(stop){\n                    stop.call(_this);\n                }\n                _this.timer = null;\n            }, timeout);\n        }\n\n    };\n\n    Instruction.prototype.setLevel = function(level, timeout){\n        var options = {\n            level : level\n        };\n        \n        if(timeout){\n            options.timeout = parseInt(timeout);\n            options.stop = function(){\n                this.setLevel('info');\n            };\n        }\n        \n        this.update(options);\n    };\n    \n    Instruction.prototype.getLevel = function() {\n        return this.level;\n    };\n\n    Instruction.prototype.setMessage = function(message, timeout){\n        this.update({message : message, timeout : timeout});\n    };\n\n    Instruction.prototype.reset = function(){\n        this.update({level : 'info', message : this.defaultMessage});\n        this.state = false;\n    };\n\n    Instruction.prototype.validate = function(data){\n        if(typeof(this.callback) === 'function'){\n            this.callback.call(this, data);\n        }\n    };\n\n    return Instruction;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/notification', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<div class=\\\"small feedback-\";\n  if (helper = helpers.level) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.level); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" item-notification\\\">\\n    <span class=\\\"icon-\";\n  if (helper = helpers.level) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.level); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></span><span class=\\\"feedback-message\\\">\";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n    <span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove Message\", options) : helperMissing.call(depth0, \"__\", \"Remove Message\", options)))\n    + \"\\\" class=\\\"icon-close close-trigger\\\"></span>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/Instruction',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/notification'\n], function(_, $, __, containerHelper, Instruction, notifTpl){\n    'use strict';\n\n    //stores the instructions\n    var _instructions = {};\n\n    /**\n     * The instruction manager helps you in managing instructions and\n     * constraints on a QTI Element, usually an interaction or a choice.\n     *\n     * @exports qtiCommonRenderer/helpers/Instructions/instructionManager\n     */\n    var instructionManager = {\n\n        /**\n         * Validate the instructions of an element\n         * @param {QtiElement} element - a QTI element like an interaction or a choice\n         * @param {Object} [data] - any data to give to the instructions\n         */\n        validateInstructions : function(element, data){\n            var serial = element.getSerial();\n            if(_instructions[serial]){\n                _.each(_instructions[serial], function(instruction){\n                    instruction.validate(data || {});\n                });\n            }\n        },\n\n        /**\n         * Add a new instructions to an element\n         * @param {QtiElement} element - a QTI element like an interaction or a choice\n         * @param {String} message - the message to give to display to the user when the instruction is validated\n         * @param {Function} validateCallback - how to validate the instruction\n         * @returns {Instruction} the created instruction\n         */\n        appendInstruction : function(element, message, validateCallback){\n            var serial = element.getSerial(),\n                instruction = new Instruction(element, message, validateCallback);\n\n            if(!_instructions[serial]){\n                _instructions[serial] = {};\n            }\n            _instructions[serial][instruction.getId()] = instruction;\n\n            instruction.create($('.instruction-container', containerHelper.get(element)));\n\n            return instruction;\n        },\n\n        /**\n         * Remove instructions from an element\n         * @param {QtiElement} element - a QTI element like an interaction or a choice\n         */\n        removeInstructions : function(element){\n            _instructions[element.getSerial()] = {};\n            containerHelper.get(element).find('.instruction-container').empty();\n        },\n\n        /**\n         * Reset the instructions states for an element (but keeps configuration)\n         * @param {Object} element - the qti object, ie. interaction, choice, etc.\n         */\n        resetInstructions : function(element){\n            var serial = element.getSerial();\n            if(_instructions[serial]){\n                _.each(_instructions[serial], function(instruction){\n                    instruction.reset();\n                });\n            }\n        },\n\n        /**\n         * Default instuction set with a min/max constraints.\n         * @param {Object} interaction\n         * @param {jQueryElement} $container\n         * @param {Object} options\n         * @param {Number} [options.min = 0] -\n         * @param {Number} [options.max = 0] -\n         * @param {Function} options.getResponse - a ref to a function that get the raw response (array) from the interaction in parameter\n         * @param {Function} [options.onError] - called by once an error occurs with validateInstruction data in parameters\n         */\n        minMaxChoiceInstructions : function(interaction, options){\n\n            var self = this,\n                min = options.min || 0,\n                max = options.max || 0,\n                getResponse = options.getResponse,\n                onError = options.onError || _.noop(),\n                choiceCount = options.choiceCount === false ? false : _.size(interaction.getChoices()),\n                minInstructionSet = false,\n                msg;\n\n            if(!_.isFunction(getResponse)){\n                throw \"invalid parameter getResponse\";\n            }\n\n            //if maxChoice = 0, inifinite choice possible\n            if(max > 0 && (choiceCount === false || max < choiceCount)){\n                if(max === min){\n                    minInstructionSet = true;\n                    msg = (max <= 1) ? __('You must select exactly %d choice', max) : __('You must select exactly %d choices', max);\n\n                    self.appendInstruction(interaction, msg, function(data){\n\n                        if(getResponse(interaction).length >= max){\n                            this.setLevel('success');\n                            if(this.checkState('fulfilled')){\n                                this.update({\n                                    level : 'warning',\n                                    message : __('Maximum choices reached'),\n                                    timeout : 2000,\n                                    start : function(){\n                                        onError(data);\n                                    },\n                                    stop : function(){\n                                        this.update({level : 'success', message : msg});\n                                    }\n                                });\n                            }\n                            this.setState('fulfilled');\n                        }else{\n                            this.reset();\n                        }\n                    });\n                }else if(max > min){\n                    msg = (max <= 1) ? __('You can select maximum %d choice', max) : __('You can select maximum %d choices', max);\n                    self.appendInstruction(interaction,  msg, function(data){\n\n                        if(getResponse(interaction).length >= max){\n\n                            this.setLevel('success');\n                            this.setMessage(__('Maximum choices reached'));\n                            if(this.checkState('fulfilled')){\n                                this.update({\n                                    level : 'warning',\n                                    timeout : 2000,\n                                    start : function(){\n                                        onError(data);\n                                    },\n                                    stop : function(){\n                                        this.setLevel('info');\n                                    }\n                                });\n                            }\n\n                            this.setState('fulfilled');\n                        }else{\n                            this.reset();\n                        }\n                    });\n                }\n            }\n\n            if(!minInstructionSet && min > 0 && (choiceCount === false || min < choiceCount)){\n                msg = (min <= 1) ? __('You must at least %d choice', min) : __('You must select at least %d choices', max);\n                self.appendInstruction(interaction, msg, function(){\n                    if(getResponse(interaction).length >= min){\n                        this.setLevel('success');\n                    }else{\n                        this.reset();\n                    }\n                });\n            }\n        },\n\n        /**\n         * Appends a instruction  notification message\n         * @deprecated in favor of instructions\n         * @param {QtiElement} element - a QTI element like an interaction or a choice\n         * @param {String} message - the message to give to display\n         * @param {String} [level = 'info'] - the notification level in info, success, error or warning\n         */\n        appendNotification : function(element, message, level){\n\n            level = level || 'info';\n\n            if(Instruction.isValidLevel(level)){\n\n                var $container = containerHelper.get(element);\n\n                $container.find('.notification-container').prepend(notifTpl({\n                    'level' : level,\n                    'message' : message\n                }));\n\n                var $notif = $container.find('.item-notification:first');\n                var _remove = function(){\n                    $notif.fadeOut();\n                };\n\n                $notif.find('.close-trigger').on('click', _remove);\n                setTimeout(_remove, 2000);\n\n                return $notif;\n            }\n        },\n\n        /**\n         * Removes all the displayed notifications\n         * @deprecated in favor of instructions\n         */\n        removeNotifications : function(element){\n            containerHelper.get(element).find('.item-notification').remove();\n        }\n    };\n    return instructionManager;\n});\n\n\n","define('taoQtiItem/qtiCommonRenderer/helpers/PciPrettyPrint',['lodash'], function(_){\n\n    var _formatters = {\n        boolean : function(value){\n            return value ? 'true' : 'false';\n        },\n        integer : function(value){\n            return value;\n        },\n        float : function(value){\n            return value;\n        },\n        string : function(value){\n            return (value === '') ? 'NULL' : ('\"' + value + '\"');\n        },\n        point : function(value){\n            return '[' + value[0] + ', ' + value[1] + ']';\n        },\n        pair : function(value){\n            return '[' + value[0] + ', ' + value[1] + ']';\n        },\n        directedPair : function(value){\n            return '[' + value[0] + ', ' + value[1] + ']';\n        },\n        duration : function(value){\n            return value;\n        },\n        file : function(value){\n            return 'binary data';\n        },\n        uri : function(value){\n            return value;\n        },\n        intOrIdentifier : function(value){\n            return value;\n        },\n        identifier : function(value){\n            return value;\n        }\n    }\n\n    var _prettyPrintBase = function(value, withType){\n\n        var print = '',\n            base = value.base;\n\n        withType = (typeof withType !== 'undefined') ? withType : true;\n\n        if(base){\n\n            _.forIn(_formatters, function(formatter, baseType){\n                if(base[baseType] !== undefined){\n\n                    print += (withType) ? '(' + baseType + ') ' : '';\n                    print += formatter(base[baseType]);\n\n                    return false;\n                }\n            });\n\n            return print;\n        }\n\n    };\n\n    var _prettyPrintList = function(value, withType){\n\n        var print = '',\n            list = value.list;\n\n        withType = (typeof withType !== 'undefined') ? withType : true;\n\n        if(list){\n\n            _.forIn(_formatters, function(formatter, baseType){\n                if(list[baseType] !== undefined){\n\n                    print += (withType) ? '(' + baseType + ') ' : '';\n\n                    print += '[';\n\n                    _.each(list[baseType], function(value){\n                        print += formatter(value) + ', ';\n                    });\n\n                    if(_.size(list[baseType])){\n                        print = print.substring(0, print.length - 2);\n                    }\n\n                    print += ']';\n\n                    return false;\n                }\n            });\n\n            return print;\n        }\n    };\n\n    return {\n        printBase : _prettyPrintBase,\n        printList : _prettyPrintList\n    }\n});\n","define('taoQtiItem/qtiCommonRenderer/helpers/PciResponse',['lodash', 'taoQtiItem/qtiCommonRenderer/helpers/PciPrettyPrint'], function(_, pciPrettyPrint){\n\n    var _qtiModelPciResponseCardinalities = {\n        single : 'base',\n        multiple : 'list',\n        ordered : 'list',\n        record : 'record'\n    };\n\n    return {\n\n        /**\n         * Parse a response variable formatted according to IMS PCI: http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n         *\n         * @see serialize\n         * @param {Object} response\n         * @param {Object} interaction\n         * @returns {Array}\n         */\n        unserialize : function(response, interaction){\n\n            var ret = [],\n                responseDeclaration = interaction.getResponseDeclaration(),\n                baseType = responseDeclaration.attr('baseType'),\n                cardinality = responseDeclaration.attr('cardinality'),\n                mappedCardinality;\n\n            if(_qtiModelPciResponseCardinalities[cardinality]){\n                mappedCardinality = _qtiModelPciResponseCardinalities[cardinality];\n                var responseValues = response[mappedCardinality];\n\n                if(responseValues === null){\n                    ret = [];\n                }else if(_.isObject(responseValues)){\n                    if(responseValues[baseType] !== undefined){\n                        ret = responseValues[baseType];\n                        ret = _.isArray(ret) ? ret : [ret];\n                    }else{\n                        throw 'invalid response baseType';\n                    }\n                }else{\n                    throw 'invalid response cardinality, expected '+cardinality+' ('+mappedCardinality+')';\n                }\n            }else{\n                throw 'unknown cardinality in the responseDeclaration of the interaction';\n            }\n\n            return ret;\n        },\n        /**\n         * Serialize the input response array into the format to be send to result server according to IMS PCI recommendation :\n         * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n         * With the only exception for empty response, which is represented by a javascript \"null\" value\n         *\n         * @see http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n         * @param {Array} responseValues\n         * @param {Object} interaction\n         * @returns {Object|null}\n         */\n        serialize : function(responseValues, interaction){\n\n            if(!_.isArray(responseValues)){\n                throw 'invalid argument : responseValues must be an Array';\n            }\n\n            var response = {},\n                responseDeclaration = interaction.getResponseDeclaration(),\n                baseType = responseDeclaration.attr('baseType'),\n                cardinality = responseDeclaration.attr('cardinality'),\n                mappedCardinality;\n\n            if(_qtiModelPciResponseCardinalities[cardinality]){\n                mappedCardinality = _qtiModelPciResponseCardinalities[cardinality];\n                if(mappedCardinality === 'base'){\n                    if(responseValues.length === 0){\n                        //return empty response:\n                        response.base = null;\n                    }else{\n                        response.base = {};\n                        response.base[baseType] = responseValues[0];\n                    }\n                }else{\n                    response[mappedCardinality] = {};\n                    response[mappedCardinality][baseType] = responseValues;\n                }\n            }else{\n                throw 'unknown cardinality in the responseDeclaration of the interaction';\n            }\n\n            return response;\n        },\n        isEmpty : function(response){\n            return (\n                response === null\n                || _.isEmpty(response)\n                || response.base === null\n                || _.isArray(response.list) && _.isEmpty(response.list)\n                || _.isArray(response.record) && _.isEmpty(response.record)\n            );\n        },\n\n        /**\n         * Print a PCI JSON response into a human-readable string.\n         *\n         * @param {Object} response A response in PCI JSON representation.\n         * @returns {String} A human-readable version of the PCI JSON representation.\n         */\n        prettyPrint: function(response) {\n            var print = '';\n\n            if (typeof response.base !== 'undefined') {\n                // -- BaseType.\n                print += pciPrettyPrint.printBase(response, true);\n            }\n            else if (typeof response.list !== 'undefined') {\n                // -- ListType\n                print += pciPrettyPrint.printList(response, true);\n            }\n            else if (typeof response.record !== 'undefined') {\n                // @todo pretty print of records.\n            }\n            else {\n                throw 'Not a valid PCI JSON Response';\n            }\n\n            return print;\n        }\n    };\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/AssociateInteraction',[\n    'lodash',\n    'i18n',\n    'jquery',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/associateInteraction',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/associateInteraction.pair',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'taoQtiItem/qtiCreator/helper/adaptSize'\n], function(_, __, $, tpl, pairTpl, containerHelper, instructionMgr, pciResponse, adaptSize){\n    'use strict';\n\n    var setChoice = function(interaction, $choice, $target){\n\n        var $container      = containerHelper.get(interaction);\n        var choiceSerial    = $choice.data('serial');\n        var usage           = $choice.data('usage') || 0;\n        var choice          = interaction.getChoice(choiceSerial);\n\n        if(!choiceSerial){\n            throw 'empty choice serial';\n        }\n\n        //to track number of times a choice is used in a pair\n        usage++;\n        $choice.data('usage', usage);\n\n        var _setChoice = function(){\n\n            $target\n                .data('serial', choiceSerial)\n                .html($choice.html())\n                .addClass('filled');\n\n            if(!interaction.responseMappingMode &&\n                choice.attr('matchMax') &&\n                usage >= choice.attr('matchMax')){\n\n                $choice.addClass('deactivated');\n            }\n        };\n\n        if($target.siblings('div').hasClass('filled')){\n\n            var $resultArea = $('.result-area', $container),\n                $pair = $target.parent(),\n                thisPairSerial = [$target.siblings('div').data('serial'), choiceSerial],\n                $otherRepeatedPair = $();\n\n            //check if it is not a repeating association!\n            $resultArea.children().not($pair).each(function(){\n                var $otherPair = $(this).children('.filled');\n                if($otherPair.length === 2){\n                    var otherPairSerial = [$($otherPair[0]).data('serial'), $($otherPair[1]).data('serial')];\n                    if(_.intersection(thisPairSerial, otherPairSerial).length === 2){\n                        $otherRepeatedPair = $otherPair;\n                        return false;\n                    }\n                }\n            });\n\n            if($otherRepeatedPair.length === 0){\n                //no repeated pair, so allow the choice to be set:\n                _setChoice();\n\n                //trigger pair made event\n                containerHelper.triggerResponseChangeEvent(interaction, {\n                    type : 'added',\n                    $pair : $pair,\n                    choices : thisPairSerial\n                });\n\n                instructionMgr.validateInstructions(interaction, {choice : $choice, target : $target});\n\n                if(interaction.responseMappingMode || parseInt(interaction.attr('maxAssociations')) === 0){\n\n                    $pair.removeClass('incomplete-pair');\n\n                    //append new pair option?\n                    if(!$resultArea.children('.incomplete-pair').length){\n                        $resultArea.append(pairTpl({empty : true}));\n                        $resultArea.children('.incomplete-pair').fadeIn(600, function(){\n                            $(this).show();\n                        });\n                    }\n                }\n            }else{\n                //repeating pair: show it:\n\n                //@todo add a notification message here in warning\n                $otherRepeatedPair.css('border', '1px solid orange');\n                $target.html(__('identical pair already exists')).css({\n                    color : 'orange',\n                    border : '1px solid orange'\n                });\n                setTimeout(function(){\n                    $otherRepeatedPair.removeAttr('style');\n                    $target.empty().css({color:\"\",border:\"\"});\n                }, 2000);\n            }\n\n        }else{\n            _setChoice();\n        }\n    };\n\n    var unsetChoice = function(interaction, $filledChoice, animate, triggerChange){\n\n        var $container      = containerHelper.get(interaction);\n        var choiceSerial    = $filledChoice.data('serial');\n        var $choice         = $container.find('.choice-area [data-serial=' + choiceSerial + ']');\n        var usage           = $choice.data('usage') || 0;\n        var $parent         = $filledChoice.parent();\n\n        //decrease the  use for this choice\n        usage--;\n\n        $choice\n            .data('usage', usage)\n            .removeClass('deactivated');\n\n\n        $filledChoice\n            .removeClass('filled')\n            .removeData('serial')\n            .empty();\n\n        if(!interaction.swapping){\n\n            if(triggerChange !== false){\n                //a pair with one single element is not valid, so consider the response to be modified:\n                containerHelper.triggerResponseChangeEvent(interaction, {\n                    type : 'removed',\n                    $pair : $filledChoice.parent()\n                });\n                instructionMgr.validateInstructions(interaction, {choice : $choice});\n            }\n            //completely empty pair:\n            if(!$choice.siblings('div').hasClass('filled') && (parseInt(interaction.attr('maxAssociations')) === 0 || interaction.responseMappingMode)){\n                //shall we remove it?\n                if(!$parent.hasClass('incomplete-pair')){\n                    if(animate){\n                        $parent.addClass('removing').fadeOut(500, function(){\n                            $(this).remove();\n                        });\n                    }else{\n                        $parent.remove();\n                    }\n                }\n            }\n        }\n    };\n\n    var getChoice = function(interaction, identifier){\n        var $container = containerHelper.get(interaction);\n\n        //warning: do not use selector data-identifier=identifier because data-identifier may change dynamically\n        var choice = interaction.getChoiceByIdentifier(identifier);\n        if(!choice){\n            throw new Error('cannot find a choice with the identifier : ' + identifier);\n        }\n        return $('.choice-area [data-serial=' + choice.getSerial() + ']', $container);\n    };\n\n    var renderEmptyPairs = function(interaction){\n\n        var $container = containerHelper.get(interaction);\n        var max = parseInt(interaction.attr('maxAssociations'));\n        var $resultArea = $('.result-area', $container);\n\n        if(interaction.responseMappingMode || max === 0){\n            $resultArea.append(pairTpl({empty : true}));\n            $resultArea.children('.incomplete-pair').show();\n        }else{\n            for(var i = 0; i < max; i++){\n                $resultArea.append(pairTpl());\n            }\n        }\n    };\n\n    var _adaptSize = function(interaction){\n        var $container = containerHelper.get(interaction);\n        _.delay(function(){\n            adaptSize.height($('.result-area .target, .choice-area .qti-choice', $container));\n        }, 500);//@todo : fix the image loading issues\n    };\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10291\n     *\n     * @param {object} interaction\n     */\n    var render = function(interaction){\n\n        renderEmptyPairs(interaction);\n\n        var $container = containerHelper.get(interaction);\n        var $choiceArea = $container.find('.choice-area'),\n            $resultArea = $container.find('.result-area'),\n            $activeChoice = null;\n\n\n        var _getChoice = function(serial){\n            return $choiceArea.find('[data-serial=' + serial + ']');\n        };\n\n        /**\n         * @todo Tried to store $resultArea.find[...] in a variable but this fails\n         * @param $choice\n         * @param $target\n         * @private\n         */\n        var _setChoice = function($choice, $target){\n            setChoice(interaction, $choice, $target);\n            _adaptSize(interaction);\n        };\n\n        var _resetSelection = function(){\n            if($activeChoice){\n                $resultArea.find('.remove-choice').remove();\n                $activeChoice.removeClass('active');\n                $container.find('.empty').removeClass('empty');\n                $activeChoice = null;\n            }\n        };\n\n        var _unsetChoice = function($choice){\n            unsetChoice(interaction, $choice, true);\n            _adaptSize(interaction);\n        };\n\n        var _isInsertionMode = function(){\n            return ($activeChoice && $activeChoice.data('identifier'));\n        };\n\n        var _isModeEditing = function(){\n            return ($activeChoice && !$activeChoice.data('identifier'));\n        };\n\n        $container.on('mousedown.commonRenderer', function(e){\n            _resetSelection();\n        });\n\n        $choiceArea.on('mousedown.commonRenderer', '>li', function(e){\n\n            e.stopPropagation();\n\n            if($(this).hasClass('deactivated')){\n                e.preventDefault();\n                return;\n            }\n\n            if(_isModeEditing()){\n                //swapping:\n                interaction.swapping = true;\n                _unsetChoice($activeChoice);\n                _setChoice($(this), $activeChoice);\n                _resetSelection();\n                interaction.swapping = false;\n            }else{\n\n                if($(this).hasClass('active')){\n                    _resetSelection();\n                }else{\n                    _resetSelection();\n\n                    //activate it:\n                    $activeChoice = $(this);\n                    $(this).addClass('active');\n                    $resultArea.find('>li>.target').addClass('empty');\n                }\n            }\n\n        });\n\n        $resultArea.on('mousedown.commonRenderer', '>li>div', function(e){\n            var $target,\n                choiceSerial,\n                targetSerial;\n\n            e.stopPropagation();\n\n            if(_isInsertionMode()){\n\n                $target = $(this);\n                choiceSerial = $activeChoice.data('serial');\n                targetSerial = $target.data('serial');\n\n                if(targetSerial !== choiceSerial){\n\n                    if($target.hasClass('filled')){\n                        interaction.swapping = true;//hack to prevent deleting empty pair in infinite association mode\n                    }\n\n                    //set choices:\n                    if(targetSerial){\n                        _unsetChoice($target);\n                    }\n\n                    _setChoice($activeChoice, $target);\n\n                    //always reset swapping mode after the choice is set\n                    interaction.swapping = false;\n                }\n\n                _resetSelection();\n\n            }else if(_isModeEditing()){\n\n                //editing mode:\n                $target = $(this);\n                choiceSerial = $activeChoice.data('serial');\n                targetSerial = $target.data('serial');\n\n                if(targetSerial !== choiceSerial){\n\n                    if($target.hasClass('filled') || $activeChoice.siblings('div')[0] === $target[0]){\n                        interaction.swapping = true;//hack to prevent deleting empty pair in infinite association mode\n                    }\n\n                    _unsetChoice($activeChoice);\n                    if(targetSerial){\n                        //swapping:\n                        _unsetChoice($target);\n                        _setChoice(_getChoice(targetSerial), $activeChoice);\n                    }\n                    _setChoice(_getChoice(choiceSerial), $target);\n\n                    //always reset swapping mode after the choice is set\n                    interaction.swapping = false;\n                }\n\n                _resetSelection();\n\n            }else if($(this).data('serial')){\n\n                //selecting a choice in editing mode:\n                var serial = $(this).data('serial');\n\n                $activeChoice = $(this);\n                $activeChoice.addClass('active');\n\n                $resultArea.find('>li>.target').filter(function(){\n                    return $(this).data('serial') !== serial;\n                }).addClass('empty');\n\n                $choiceArea.find('>li:not(.deactivated)').filter(function(){\n                    return $(this).data('serial') !== serial;\n                }).addClass('empty');\n\n                //append trash bin:\n                var $bin = $('<span>', {'class' : 'icon-undo remove-choice', 'title' : __('remove')});\n                $bin.on('mousedown', function(e){\n                    e.stopPropagation();\n                    _unsetChoice($activeChoice);\n                    _resetSelection();\n                });\n                $(this).append($bin);\n            }\n\n        });\n\n        if(!interaction.responseMappingMode){\n            _setInstructions(interaction);\n        }\n\n        _adaptSize(interaction);\n    };\n\n    var _setInstructions = function(interaction){\n\n        var min = parseInt(interaction.attr('minAssociations')),\n            max = parseInt(interaction.attr('maxAssociations'));\n\n        //infinite association:\n        if(min === 0){\n            if(max === 0){\n                instructionMgr.appendInstruction(interaction, __('You may make as many association pairs as you want.'));\n            }\n        }else{\n            if(max === 0){\n                instructionMgr.appendInstruction(interaction, __('The maximum number of association is unlimited.'));\n            }\n            //the max value is implicit since the appropriate number of empty pairs have already been created\n            var msg = __('You need to make') + ' ';\n            msg += (min > 1) ? __('at least') + ' ' + min + ' ' + __('association pairs') : __('one association pair');\n            instructionMgr.appendInstruction(interaction, msg, function(){\n                if(_getRawResponse(interaction).length >= min){\n                    this.setLevel('success');\n                }else{\n                    this.reset();\n                }\n            });\n        }\n    };\n\n    var resetResponse = function(interaction){\n        var $container = containerHelper.get(interaction);\n\n        //destroy selected choice:\n        $container.find('.result-area .active').mousedown();\n\n        $('.result-area>li>div', $container).each(function(){\n            unsetChoice(interaction, $(this), false, false);\n        });\n\n        containerHelper.triggerResponseChangeEvent(interaction);\n        instructionMgr.validateInstructions(interaction);\n    };\n\n    var _setPairs = function(interaction, pairs){\n\n        var $container = containerHelper.get(interaction);\n        var addedPairs = 0;\n        var $emptyPair = $('.result-area>li:first', $container);\n        if(pairs && interaction.getResponseDeclaration().attr('cardinality') === 'single' && pairs.length){\n            pairs = [pairs];\n        }\n        _.each(pairs, function(pair){\n            if($emptyPair.length){\n                var $divs = $emptyPair.children('div');\n                setChoice(interaction, getChoice(interaction, pair[0]), $($divs[0]));\n                setChoice(interaction, getChoice(interaction, pair[1]), $($divs[1]));\n                addedPairs++;\n                $emptyPair = $emptyPair.next('li');\n            }else{\n                //the number of pairs exceeds the maximum allowed pairs: break;\n                return false;\n            }\n        });\n\n        return addedPairs;\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10291\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n\n        _setPairs(interaction, pciResponse.unserialize(response, interaction));\n    };\n\n    var _getRawResponse = function(interaction){\n        var response = [];\n        var $container = containerHelper.get(interaction);\n        $('.result-area>li', $container).each(function(){\n            var pair = [];\n            $(this).find('div').each(function(){\n                var serial = $(this).data('serial');\n                if(serial){\n                    pair.push(interaction.getChoice(serial).id());\n                }\n            });\n            if(pair.length === 2){\n                response.push(pair);\n            }\n        });\n        return response;\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10291\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        return pciResponse.serialize(_getRawResponse(interaction), interaction);\n    };\n\n    /**\n     * Destroy the interaction by leaving the DOM exactly in the same state it was before loading the interaction.\n     * @param {Object} interaction - the interaction\n     */\n    var destroy = function(interaction){\n        var $container = containerHelper.get(interaction);\n\n        //remove event\n        $(document).off('.commonRenderer');\n        $container.find('.choice-area, .result-area').andSelf().off('.commonRenderer');\n\n        //remove instructions\n        instructionMgr.removeInstructions(interaction);\n\n        $('.result-area', $container).empty();\n\n        //remove all references to a cache container\n        containerHelper.reset(interaction);\n    };\n\n    /**\n     * Set the interaction state. It could be done anytime with any state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {Object} state - the interaction state\n     */\n    var setState  = function setState(interaction, state){\n        var $container;\n\n        if(_.isObject(state)){\n            if(state.response){\n                interaction.resetResponse();\n                interaction.setResponse(state.response);\n            }\n\n            //restore order of previously shuffled choices\n            if(_.isArray(state.order) && state.order.length === _.size(interaction.getChoices())){\n\n                $container = containerHelper.get(interaction);\n\n                $('.choice-area .qti-choice', $container)\n                    .sort(function(a, b){\n                        var aIndex = _.indexOf(state.order, $(a).data('identifier'));\n                        var bIndex = _.indexOf(state.order, $(b).data('identifier'));\n                        if(aIndex > bIndex) {\n                            return 1;\n                        }\n                        if(aIndex < bIndex) {\n                            return -1;\n                        }\n                        return 0;\n                    })\n                    .detach()\n                    .appendTo($('.choice-area', $container));\n            }\n        }\n    };\n\n    /**\n     * Get the interaction state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the interaction current state\n     */\n    var getState = function getState(interaction){\n        var $container;\n        var state =  {};\n        var response =  interaction.getResponse();\n\n        if(response){\n            state.response = response;\n        }\n\n        //we store also the choice order if shuffled\n        if(interaction.attr('shuffle') === true){\n            $container = containerHelper.get(interaction);\n\n            state.order = [];\n            $('.choice-area .qti-choice', $container).each(function(){\n               state.order.push($(this).data('identifier'));\n            });\n        }\n        return state;\n    };\n\n    /**\n     * Expose the common renderer for the associate interaction\n     * @exports qtiCommonRenderer/renderers/interactions/AssociateInteraction\n     */\n    return {\n        qtiClass : 'associateInteraction',\n        template : tpl,\n        render : render,\n        getContainer : containerHelper.get,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy,\n        setState: setState,\n        getState : getState,\n\n        renderEmptyPairs : renderEmptyPairs\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/grip', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"common-tlb\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"tlb-button\\\" title=\\\"move\\\" data-role=\\\"move\\\">\\n        <span class=\\\"icon-grip\\\"></span>\\n    </span>\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/helpers/movable',[\n    'jquery',\n    'taoQtiItem/qtiCreator/editor/gridEditor/draggable',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/grip'\n], function($, draggable, gripTpl){\n\n    var movable = {\n        create : function(widget){\n\n            var item = widget.element.getRelatedItem(),\n                $container = widget.$container,\n                $itemBody;\n\n            var $grip = $(gripTpl({\n                serial : widget.serial\n            }));\n\n            $container.append($grip);\n\n            $grip.on('mouseenter.qti-widget', function(){\n\n                if(!$itemBody || !$itemBody.length){\n                    $itemBody = item.data('widget').$container;\n                }\n\n                //create movable\n                //enable the new element to be movable\n                draggable.createMovable($container, $itemBody);\n\n            }).on('mouseleave.qti-widget', function(){\n                //destroy movable\n                draggable.destroy($container);\n            });\n        }\n    }\n    \n    return movable;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/interaction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n        <div class=\\\"state-switcher\\\">\\n            <span class=\\\"selected\\\" data-state=\\\"question\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Question\", options) : helperMissing.call(depth0, \"__\", \"Question\", options)))\n    + \"</span>\\n            <span class=\\\"separator\\\"> | </span>\\n            <span class=\\\"link\\\" data-state=\\\"answer\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Response\", options) : helperMissing.call(depth0, \"__\", \"Response\", options)))\n    + \"</span>\\n        </div>\\n        \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"tlb-wrapper\\\" style=\\\"\\\" data-edit=\\\"active\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"tlb-title\\\" title=\\\"\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n    <div class=\\\"tlb\\\">\\n        <div class=\\\"rgt tlb-button\\\" data-role=\\\"delete\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"delete\", options) : helperMissing.call(depth0, \"__\", \"delete\", options)))\n    + \"\\\">\\n            <span class=\\\"icon-bin\\\"></span>\\n        </div>\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.switcher), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/Widget',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/Widget',\n    'taoQtiItem/qtiCreator/widgets/helpers/movable',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/interaction',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/okButton'\n], function(_, $, Widget, movable, toolbarTpl, okButtonTpl){\n\n    /**\n     * \n     * Create a new widget definition from another prototype.\n     */\n    var InteractionWidget = Widget.clone();\n\n    /**\n     * Optional method to be implemented :\n     * Init the widget\n     * It should never be called directly in normal usage\n     * Here, it is overwriten to accomodate for a new argument \n     * that other widgets does not have: $responseForm\n     */\n    InteractionWidget.init = function(element, $container, $form, $responseForm, options){\n        Widget.init.call(this, element, $container, $form, options);\n        this.$responseForm = $responseForm;\n        return this;\n    };\n\n    /**\n     * Optional method to be implemented :\n     * Build the widget and return an instance ready to be used\n     * Here, it is overwritten to accomodate for a new argument\n     * that other widgets does not have: $responseForm\n     */\n    InteractionWidget.build = function(element, $container, $form, $responseForm, options){\n        return this.clone().init(element, $container, $form, $responseForm, options);\n    };\n\n    /**\n     * Required method to be implemented : \n     * define the states and common structure valid for all states\n     */\n    InteractionWidget.initCreator = function(){\n        \n        Widget.initCreator.call(this);\n        \n        this.createToolbar({});\n        this.createOkButton();\n        this.listenToChoiceStates();\n    };\n\n    /**\n     * Required method to be implemented : \n     * Define the contaieinr where everything is going on. \n     * It normally used this.$original as the start point : from there, you can wrap, innerWrap\n     */\n    InteractionWidget.buildContainer = function(){\n\n        var $wrap = $('<div>', {\n            'data-serial' : this.element.serial,\n            'class' : 'widget-box widget-blockInteraction clearfix',\n            'data-qti-class' : this.element.qtiClass\n        });\n        var $interactionContainer = this.$original.wrap($wrap);\n        this.$container = $interactionContainer.parent();\n\n        //@todo : implement movable interaction here:\n//        movable.create(this);\n\n        return this;\n    };\n\n    function _convertToTitle(str){\n        str = str.replace(/[A-Z]/g, function(match){\n            return ' ' + match.toUpperCase();\n        });\n        return str.charAt(0).toUpperCase() + str.substr(1);\n    }\n\n    /**\n     * Below here, optional ui component init functions\n     */\n\n    /**\n     * Create a toolbar\n     */\n    InteractionWidget.createToolbar = function(options){\n\n        options = _.defaults(options || {}, {\n            title : _convertToTitle(this.element.qtiClass)\n        });\n\n        var _this = this,\n            $toolbar;\n\n        $toolbar = $(toolbarTpl({\n            title : options.title,\n            serial : this.element.serial,\n            switcher : !!this.registeredStates.answer\n        }));\n\n        this.$container.append($toolbar);\n        $toolbar.hide();\n\n        $toolbar.find('[data-role=\"delete\"]').click(function(e){\n            e.stopPropagation();//prevent direct deleting\n            _this.changeState('deleting');\n        });\n\n        //if the answer state has been registered\n        if(this.registeredStates.answer){\n\n            //initialize the state switcher\n            $toolbar.on('click', '.link', function(){\n                var $link = $(this),\n                    state = $link.data('state');\n\n                $link.siblings('.selected').removeClass('selected').addClass('link');\n                $link.removeClass('link').addClass('selected');\n                _this.changeState(state);\n            });\n\n            //add stateChange event listener to auto toggle the question/answer trigger\n            this.beforeStateInit(function(e, element, state){\n                if(element.getSerial() === _this.serial){\n                    var $link = $toolbar.find('.link[data-state=\"' + state.name + '\"]');\n                    if($link.length){\n                        //a known active state:\n                        $link.siblings('.selected').removeClass('selected').addClass('link');\n                        $link.removeClass('link').addClass('selected');\n                    }\n                }\n            });\n        }\n\n        return this;\n\n    };\n\n    InteractionWidget.createOkButton = function(){\n\n        var _this = this,\n            $ok = $(okButtonTpl()).on('click.qti-widget', function(e){\n            e.stopPropagation();\n            _this.changeState('sleep');\n        });\n\n        this.$container.append($ok);\n    };\n\n    InteractionWidget.listenToChoiceStates = function(){\n\n        var _this = this;\n\n        this.afterStateInit(function(e, element, state){\n\n            var currentState = _this.getCurrentState();\n\n            if(element.is('choice')\n                && _this.element.getChoice(element.getSerial())\n                && currentState\n                && state.name !== currentState.name){\n\n                switch(state.name){\n                    case 'choice':\n                        _this.changeState(state.name);\n                        break;\n                }\n\n            }\n        });\n\n    };\n\n    return InteractionWidget;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/states/Sleep'], function(stateFactory, SleepState){\n    \n    var InteractionStateSleep = stateFactory.extend(SleepState, function(){\n        \n        var _widget = this.widget;\n        \n        _widget.$container.on('click.qti-widget.sleep', function(e){\n            e.stopPropagation();\n            //if active == false do this: (else nothing)\n            //show toolbar, prompt widget and choice widgets and property form\n\n            //init default mode: question\n            _widget.changeState('question');\n        });\n        \n    }, function(){\n        \n        var _widget = this.widget;\n        \n        //remove hover outline box display\n        _widget.$container.off('.sleep');\n    });\n    \n    return InteractionStateSleep;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/Active',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Active',\n    'lodash'\n], function(stateFactory, Active, _){\n\n    var _containsInModalFeedbackElts = function(response, searchSerial){\n\n        var found = false,\n            modalFeedbacks = [];\n\n        _.each(response.feedbackRules, function(rule){\n            if(rule.feedbackThen && rule.feedbackThen.qtiClass === 'modalFeedback'){\n                modalFeedbacks.push(rule.feedbackThen);\n            }\n            if(rule.feedbackElse && rule.feedbackElse.qtiClass === 'modalFeedback'){\n                modalFeedbacks.push(rule.feedbackElse);\n            }\n        });\n        _.each(modalFeedbacks, function(fb){\n            var elt = fb.getBody().getElement(searchSerial);\n            if(elt){\n                found = true;\n                return false;//break\n            }\n        });\n\n        return found;\n    };\n\n    var InteractionStateActive = stateFactory.extend(Active, function(){\n        \n        var _widget = this.widget,\n            $container = _widget.$container,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        $container.attr('contenteditable', false);\n\n        _widget.beforeStateInit(function(e, element, state){\n            \n            var serial = element.getSerial();\n            \n            if(element.qtiClass === 'modalFeedback'){\n                return false;\n            }\n            \n            if(state.name === 'active' && serial !== _widget.serial){\n                \n                //when it does not click on itself, check if the newly activated element is its own composing element:\n                var composingElts = interaction.getComposingElements();\n                var inModalFeedback = _containsInModalFeedbackElts(response, serial);\n                if(!composingElts[serial] && !inModalFeedback){\n                    _widget.changeState('sleep');\n                }\n            }\n        }, 'otherActive');\n\n        $container.on('mouseenter.active', function(e){\n            e.stopPropagation();\n            $container.parent().trigger('mouseleave.sleep');\n        }).on('mouseleave.active', function(e){\n            e.stopPropagation();\n            $container.parent().trigger('mouseenter.sleep');\n        }).on('click.active', function(e){\n            e.stopPropagation();\n        });\n\n    }, function(){\n\n        this.widget.offEvents('otherActive');\n    });\n\n    return InteractionStateActive;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/addChoice', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<li class=\\\"add-option\\\" data-edit=\\\"question\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-role=\\\"add-option\\\">\\n    <span class=\\\"icon-add\\\"></span>\\n    \";\n  if (helper = helpers.text) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.text); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n</li>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Question',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/addChoice',\n    'i18n'\n], function($, stateFactory, Question, addChoiceTpl, __){\n\n    var InteractionStateQuestion = stateFactory.create(Question, function(){\n\n        //show option form\n        this.initForm();\n        this.widget.$form.show();\n\n        //allow quick edit of internal element (toggle shuffle/fix, delete choices via minit-toolbar)\n\n        //init add choice button if needed\n        this.addNewChoiceButton(this.widget);\n\n        //switchable to choice(click), answer(toolbar), deleting(toolbar), sleep (OK button)\n\n        //init form:\n\n\n    }, function(){\n\n        //destroy and hide it\n        this.widget.$form.empty().hide();\n\n        //disable/destroy editor, hide mini-toolbar\n    });\n\n\n    InteractionStateQuestion.prototype.addNewChoiceButton = function(){\n\n        var widget = this.widget,\n            $choiceArea = widget.$container.find('.choice-area'),\n            interaction = widget.element;\n\n        //init add choice button if needed\n        if($choiceArea.length && !$choiceArea.children('.add-option').length){\n\n            $choiceArea.append(addChoiceTpl({\n                serial : this.serial,\n                text : __('Add choice')\n            }));\n\n            $choiceArea.children('.add-option').show().on('click.qti-widget', function(e){\n\n                e.stopPropagation();\n\n                //add a new choice\n                var choice = interaction.createChoice(),\n                    $newChoicePlaceholder = $('<li>'),\n                    qtiChoiceClassName = choice.qtiClass + '.' + interaction.qtiClass,\n                    tplData = {\n                    interaction : {\n                        serial : interaction.serial,\n                        attributes : interaction.attributes\n                    }\n                };\n\n                //append placeholder\n                $(this).before($newChoicePlaceholder);\n\n                //render the new choice\n                choice.render(tplData, $newChoicePlaceholder, qtiChoiceClassName);\n                choice.postRender({\n                    ready : function(widget){\n                        //transition state directly back to \"question\"\n                        widget.changeState('choice');\n                    }\n                }, qtiChoiceClassName);\n            });\n\n        }\n    };\n\n    InteractionStateQuestion.prototype.initForm = function(){\n        stateFactory.throwMissingRequiredImplementationError('initForm');\n    };\n\n    return InteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/Choice',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/helpers/content'\n], function($, stateFactory, Choice, contentHelper){\n\n    var InteractionStateChoice = stateFactory.create(Choice, function(){\n\n        var _widget = this.widget;\n\n        //move to question state by clicking everywhere in the interaction but outside of the choice\n        _widget.$container.on('click.choice', function(e){\n\n            if(!$(e.target).closest('.qti-choice').length){\n                _widget.changeState('question');\n            }\n        });\n\n        contentHelper.changeInnerWidgetState(this.widget, 'sleep');\n\n    }, function(){\n\n        this.widget.$container.off('.choice');\n    });\n\n    return InteractionStateChoice;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/response/responseForm', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n        <option value=\\\"\"\n    + escapeExpression(((stack1 = (data == null || data === false ? data : data.key)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"</option>\\n        \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n<hr/>\\n\\n<div class=\\\"panel\\\" data-editx=\\\"map\\\">\\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Score range\", options) : helperMissing.call(depth0, \"__\", \"Score range\", options)))\n    + \"\\n    </h3>\\n    <div>\\n        <label for=\\\"lowerBound\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"lowerBound\\\" value=\\\"\";\n  if (helper = helpers.lowerBound) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.lowerBound); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"score\\\" type=\\\"text\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\" />\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Minimal  score for this interaction.\", options) : helperMissing.call(depth0, \"__\", \"Minimal  score for this interaction.\", options)))\n    + \"</span>\\n    </div>\\n    <div>\\n        <label for=\\\"upperBound\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"upperBound\\\" value=\\\"\";\n  if (helper = helpers.upperBound) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.upperBound); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"score\\\" type=\\\"text\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\" />\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Maximal score for this interaction.\", options) : helperMissing.call(depth0, \"__\", \"Maximal score for this interaction.\", options)))\n    + \"</span>\\n    </div>\\n</div>\\n\\n<div class=\\\"panel\\\" data-editx=\\\"map\\\">\\n    <label for=\\\"defaultValue\\\" class=\\\"spinner\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Mapping default\", options) : helperMissing.call(depth0, \"__\", \"Mapping default\", options)))\n    + \"</label>\\n    <input name=\\\"defaultValue\\\" value=\\\"\";\n  if (helper = helpers.defaultValue) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.defaultValue); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"score\\\" type=\\\"text\\\" data-validate=\\\"$notEmpty; $numeric;\\\" data-validate-option=\\\"$lazy; $event(type=keyup)\\\" />\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The default value from the target set to be used when no explicit mapping for a source value is given.\", options) : helperMissing.call(depth0, \"__\", \"The default value from the target set to be used when no explicit mapping for a source value is given.\", options)))\n    + \"</span>\\n</div>\\n\\n<div class=\\\"panel\\\" data-editx=\\\"map\\\">\\n    <label>\\n        <input name=\\\"defineCorrect\\\" type=\\\"checkbox\\\" data-role=\\\"defineCorrect\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.defineCorrect), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" />\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Define correct response\", options) : helperMissing.call(depth0, \"__\", \"Define correct response\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Define the correct response.\", options) : helperMissing.call(depth0, \"__\", \"Define the correct response.\", options)))\n    + \"</span>\\n</div>\\n\";\n  return buffer;\n  }\nfunction program4(depth0,data) {\n  \n  \n  return \" checked=\\\"checked\\\"\";\n  }\n\nfunction program6(depth0,data) {\n  \n  \n  return \"\\n<hr/>\\n\\n<div class=\\\"panel feedbackRule-panel\\\"></div>\\n\";\n  }\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Response identifier\", options) : helperMissing.call(depth0, \"__\", \"Response identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the choice. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the choice. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. RESPONSE\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Response processing\", options) : helperMissing.call(depth0, \"__\", \"Response processing\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select the way the response of your interaction should be processed\", options) : helperMissing.call(depth0, \"__\", \"Select the way the response of your interaction should be processed\", options)))\n    + \"</div>\\n\\n    <select name=\\\"template\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.templates), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </select>\\n</div>\\n\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.editMapping), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.editFeedbacks), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiItem/core/Element',\n    'tooltipster'\n], function($, _, formElement, Element){\n\n    var _scoreTooltipContent = {\n        required : 'this is required',\n        invalid : 'the score format is not numeric'\n    };\n\n    var formElementHelper = {\n        init : function(widget){\n            formElement.initWidget(widget.$form);\n        },\n\n        /**\n         * Helps you to synchrnonize min/max widgets so the min isn't greater than the max, etc.\n         * @param {Object} widget - the interacion's widget (where widget.element is the interaction)\n         * @param {String} [attributeNameMin = minChoices] - the name of the min field and attribute\n         * @param {String} [attributeNameMax = maxChoices] - the name of the max field and attribute\n         * @param {Function} [getMax = _.size] - how to get the max value from the choices lists (in attributes)\n         */\n        syncMaxChoices : function(widget, attributeNameMin, attributeNameMax, getMax){\n\n            attributeNameMin = attributeNameMin || 'minChoices';\n            attributeNameMax = attributeNameMax || 'maxChoices';\n            getMax = getMax || _.size;\n            var $min = widget.$form.find('input[name=' + attributeNameMin + ']'),\n                $max = widget.$form.find('input[name=' + attributeNameMax + ']');\n\n            var _syncMaxChoices = function(){\n                var newOptions = {max : getMax(widget.element.getChoices())};\n                $min.incrementer('options', newOptions).keyup();\n                $max.incrementer('options', newOptions).keyup();\n            };\n\n            widget.on('choiceCreated', function(data){\n\n                if(data.interaction.serial === widget.element.serial){\n                    _syncMaxChoices();\n                }\n\n            }).on('deleted', function(data){\n\n                if(data.parent.serial === widget.element.serial &&\n                    Element.isA(data.element, 'choice')){\n\n                    _syncMaxChoices();\n                }\n            });\n\n        },\n\n        //set float (used for score)\n        setScore : function($scoreInput, options){\n\n            options = _.defaults(options || {}, {\n                required : false,\n                empty : function(){\n                },\n                set : function(){\n                },\n                key : function(){\n                    return $(this).attr('name');\n                },\n                tooltipContent : _scoreTooltipContent\n            });\n\n            if(!$scoreInput.hasClass('tooltipstered')){\n                $scoreInput.tooltipster({\n                    theme : 'tao-error-tooltip',\n                    content : options.tooltipContent.invalid,\n                    delay : 350,\n                    trigger : 'custom'\n                });\n            }\n\n            var value = $scoreInput.val(),\n                score = parseFloat(value),\n                key = options.key.call($scoreInput[0]);\n\n            if(value === ''){\n                if(options.required){\n                    //missing required score value!\n                    $scoreInput.tooltipster('content', options.tooltipContent.required);\n                    $scoreInput.tooltipster('show');\n                }else{\n                    $scoreInput.tooltipster('hide');\n                    options.empty(key);\n                }\n            }else if(!isNaN(score)){\n                //is a correct number\n                $scoreInput.tooltipster('hide');\n                options.set(key, score);\n            }else{\n                //invalid input!\n                $scoreInput.tooltipster('content', options.tooltipContent.invalid);\n                $scoreInput.tooltipster('show');\n            }\n\n        }\n        //set text (used for controlled pattern, especially id)\n    };\n\n    return formElementHelper;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/modalFeedback/rule', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n            <option value=\\\"\";\n  if (helper = helpers.name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \";\n  stack1 = (helper = helpers.equal || (depth0 && depth0.equal),options={hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data},helper ? helper.call(depth0, (depth0 && depth0.name), (depth1 && depth1.condition), options) : helperMissing.call(depth0, \"equal\", (depth0 && depth0.name), (depth1 && depth1.condition), options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n            \";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  \n  return \"selected=\\\"selected\\\"\";\n  }\n\nfunction program4(depth0,data) {\n  \n  \n  return \"style=\\\"display:none\\\"\";\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n    <a title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Add else feedback\", options) : helperMissing.call(depth0, \"__\", \"Add else feedback\", options)))\n    + \"\\\" href=\\\"#\\\" class=\\\"adder feedbackRule-add-else\\\">else</a>\\n    \";\n  return buffer;\n  }\n\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n     <div class=\\\"feedbackRule-then-else\\\">\\n            <span class=\\\"feedbackRule-desc i\\\">else</span>\\n            <button class=\\\"btn-info small\\\" type=\\\"button\\\" data-feedback=\\\"else\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Feedback\", options) : helperMissing.call(depth0, \"__\", \"Feedback\", options)))\n    + \"</button>\\n            <span class=\\\"feedbackRule-button-delete icon-bin\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Delete else statement\", options) : helperMissing.call(depth0, \"__\", \"Delete else statement\", options)))\n    + \"\\\" data-role=\\\"else\\\"></span>\\n        </div>\\n    \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"feedbackRule-container\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <div class=\\\"feedbackRule-rule-if\\\">\\n        <span class=\\\"feedbackRule-desc i\\\">if</span>\\n        <select class=\\\"feedbackRule-condition select2\\\" data-has-search=\\\"false\\\">\\n            \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.availableConditions), {hash:{},inverse:self.noop,fn:self.programWithDepth(1, program1, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </select>\\n        <input class=\\\"feedbackRule-compared-value score\\\" type=\\\"text\\\" value=\\\"\";\n  if (helper = helpers.comparedValue) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.comparedValue); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hideScore), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n    </div>\\n    <div class=\\\"feedbackRule-then-else\\\">\\n        <span class=\\\"feedbackRule-desc i\\\">then</span>\\n        <button class=\\\"btn-info small\\\" type=\\\"button\\\" data-feedback=\\\"then\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Feedback\", options) : helperMissing.call(depth0, \"__\", \"Feedback\", options)))\n    + \"</button>\\n    </div>\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.addElse), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.feedbackElse), {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <span class=\\\"feedbackRule-button-delete icon-bin\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Delete this modal feedback\", options) : helperMissing.call(depth0, \"__\", \"Delete this modal feedback\", options)))\n    + \"\\\" data-role=\\\"rule\\\"></span>\\n</div>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/modalFeedback/panel', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<h3 class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Modal Feedbacks\", options) : helperMissing.call(depth0, \"__\", \"Modal Feedbacks\", options)))\n    + \"</h3>\\n<span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n<span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Modal feedback is shown to the candidate directly following response processing.\", options) : helperMissing.call(depth0, \"__\", \"Modal feedback is shown to the candidate directly following response processing.\", options)))\n    + \"</span>\\n<div class=\\\"feedbackRules\\\">\\n    <p><i>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"None defined yet.\", options) : helperMissing.call(depth0, \"__\", \"None defined yet.\", options)))\n    + \"</i></p>\\n</div>\\n<a href=\\\"#\\\" class=\\\"adder feedbackRule-add\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Add a modal feedback\", options) : helperMissing.call(depth0, \"__\", \"Add a modal feedback\", options)))\n    + \"</a>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/helpers/modalFeedbackRule',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'ui/selecter',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/modalFeedback/rule',\n    'tpl!taoQtiItem/qtiCreator/tpl/modalFeedback/panel'\n], function(_, $, __, selecter, formElement, ruleTpl, panelTpl){\n\n    var _availableConditions = [\n        {\n            name : 'correct',\n            label : __('correct')\n        },\n        {\n            name : 'incorrect',\n            label : __('incorrect')\n        },\n        {\n            name : 'lt',\n            label : '<'\n        },\n        {\n            name : 'lte',\n            label : '<='\n        },\n        {\n            name : 'equal',\n            label : '='\n        },\n        {\n            name : 'gte',\n            label : '>='\n        },\n        {\n            name : 'gt',\n            label : '>'\n        }\n    ];\n\n    var _renderFeedbackRule = function(feedbackRule){\n        \n        var feedbackElseSerial,\n            addElse,\n            feedbackElse = feedbackRule.feedbackElse,\n            addElse = !feedbackElse;\n\n        if(feedbackElse){\n            feedbackElseSerial = feedbackElse.serial;\n        }\n\n        var rule =  ruleTpl({\n            availableConditions : _availableConditions,\n            serial : feedbackRule.serial,\n            condition : feedbackRule.condition,\n            comparedValue : feedbackRule.comparedValue,\n            feedbackThen : feedbackRule.feedbackThen.serial,\n            feedbackElse : feedbackElseSerial,\n            addElse : addElse,\n            hideScore : (feedbackRule.condition === 'correct' || feedbackRule.condition === 'incorrect')\n        });\n        \n        var $rule = $(rule);\n        selecter($rule);\n        \n        return $rule;\n    };\n\n    var _initFeedbackEventListener = function($feedbacksPanel, response){\n\n        var $feedbacks = $feedbacksPanel.find('.feedbackRules');\n        $feedbacksPanel.on('click', '.feedbackRule-add', function(e){\n            e.preventDefault();\n\n            var feedbackRule = response.createFeedbackRule(),\n                $lastRule = $feedbacks.children('.feedbackRule-container:last');\n\n            if($lastRule.length){\n                $lastRule.after(_renderFeedbackRule(feedbackRule));\n            }else{\n                $feedbacks.html(_renderFeedbackRule(feedbackRule));\n            }\n        }).on('click', '.feedbackRule-add-else', function(e){\n            \n            e.preventDefault();\n            \n            var $fbContainer = $(this).parents('.feedbackRule-container'),\n                fbSerial = $fbContainer.data('serial'),\n                fbRule = response.getFeedbackRule(fbSerial),\n                fbModal = response.createFeedbackElse(fbRule);\n\n            $fbContainer.replaceWith(_renderFeedbackRule(fbRule));\n\n        }).on('click', '.feedbackRule-button-delete', function(){\n\n            var $deleteButton = $(this),\n                $fbContainer = $deleteButton.parents('.feedbackRule-container'),\n                fbSerial = $fbContainer.data('serial'),\n                fbRule = response.getFeedbackRule(fbSerial);\n\n            switch($deleteButton.data('role')){\n                case 'rule':\n                    response.deleteFeedbackRule(fbRule);\n                    $fbContainer.remove();\n                    break;\n                case 'else':\n                    response.deleteFeedbackElse(fbRule);\n                    $fbContainer.replaceWith(_renderFeedbackRule(fbRule));//replace all to display the add \"else\" button\n                    break;\n            }\n        }).on('change', '.feedbackRule-condition', function(){\n\n            var $select = $(this),\n                condition = $select.val(),\n                $comparedValue = $select.siblings('.feedbackRule-compared-value'),\n                fbRule = response.getFeedbackRule($(this).parents('.feedbackRule-container').data('serial'));\n\n            if(fbRule.condition === 'correct' || fbRule.condition === 'incorrect'){\n                $comparedValue.val('0');//initialize the value to 0\n            }\n\n            if(condition === 'correct' || condition === 'incorrect'){\n                $comparedValue.hide();\n            }else{\n                $comparedValue.show();\n            }\n\n            formElement.setScore($comparedValue, {\n                required : true,\n                set : function(key, value){\n                    response.setCondition(fbRule, condition, value);\n                }\n            });\n\n        }).on('keyup', '.feedbackRule-compared-value', function(){\n\n            var fbRule = response.getFeedbackRule($(this).parents('.feedbackRule-container').data('serial'));\n\n            formElement.setScore($(this), {\n                required : true,\n                set : function(key, value){\n                    response.setCondition(fbRule, fbRule.condition, value);\n                }\n            });\n\n        }).on('click', '[data-feedback]', function(){\n\n            var $btn = $(this),\n                fbRule = response.getFeedbackRule($btn.parents('.feedbackRule-container').data('serial')),\n                modalFeedback,\n                modalFeedbackWidget;\n            \n            switch($btn.data('feedback')){\n                case 'then':\n                    modalFeedback = fbRule.feedbackThen;\n                    break;\n                case 'else':\n                    modalFeedback = fbRule.feedbackElse;\n                    break;\n            }\n\n            if(modalFeedback){\n                //show modal feedback editor:\n                modalFeedbackWidget = _getModalFeedbackWidget(modalFeedback);\n                modalFeedbackWidget.changeState('active');\n            }\n\n        });\n\n    };\n    \n    var _widgets = {};\n    \n    var _getModalFeedbackWidget = function(modalFeedback){\n        \n        var $feedbacksContainer = $('#modalFeedbacks');\n        if(!_widgets[modalFeedback.serial]){\n            $feedbacksContainer.append(modalFeedback.render());\n            _widgets[modalFeedback.serial] = modalFeedback.postRender();\n        }\n        \n        return _widgets[modalFeedback.serial];\n    };\n\n    return {\n        initFeedbacksPanel : function($feedbacksPanel, response){\n\n            $feedbacksPanel.html(panelTpl());\n            \n            var $feedbackRules = $feedbacksPanel.find('.feedbackRules'),\n                feedbackRules = response.getFeedbackRules();\n            \n            if(feedbackRules && _.size(feedbackRules)){\n                $feedbackRules.empty();\n                _.each(feedbackRules, function(feedbackRule){\n                    $feedbackRules.append(_renderFeedbackRule(feedbackRule));\n                });\n            }\n\n            _initFeedbackEventListener($feedbacksPanel, response);\n        },\n        renderFeedbackRule : _renderFeedbackRule\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiItem/helper/response',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/response/responseForm',\n    'taoQtiItem/qtiCreator/widgets/helpers/modalFeedbackRule'\n], function($, _, responseHelper, formElement, responseFormTpl, modalFeedbackRule){\n\n    var _saveCallbacks = {\n        mappingAttr : function(response, value, key){\n            if(value === ''){\n                response.removeMappingAttribute(key);\n            }else{\n                response.setMappingAttribute(key, value);\n            }\n        }\n    };\n\n    var answerStateHelper = {\n        //forward to one of the available sub state, according to the response processing template\n        forward : function(widget){\n\n            var response = widget.element.getResponseDeclaration();\n            if(responseHelper.isUsingTemplate(response, 'MATCH_CORRECT')){\n\n                widget.changeState('correct');\n\n            }else if(responseHelper.isUsingTemplate(response, 'MAP_RESPONSE') ||\n                responseHelper.isUsingTemplate(response, 'MAP_RESPONSE_POINT')){\n\n                widget.changeState('map');\n            }else{\n\n                widget.changeState('custom');\n            }\n        },\n        defineCorrect : function(response, define){\n\n            var defineCorrect = false,\n                template = responseHelper.getTemplateNameFromUri(response.template),\n                corrects = response.getCorrect();\n\n            if(define === undefined){\n                //get:\n\n                if(template === 'MAP_RESPONSE' || template === 'MAP_RESPONSE_POINT'){\n                    \n                    if(response.data('defineCorrect') !== undefined){\n                        defineCorrect = !!response.data('defineCorrect');\n                    }else{\n                        //infer it : \n                        defineCorrect = (corrects && _.size(corrects));\n                        response.data('defineCorrect', defineCorrect);//set it\n                    }\n                    \n                }else if(template === 'MATCH_CORRECT'){\n                    defineCorrect = true;\n                }\n\n            }else{\n                //set:\n                if(!define){\n                    //empty correct response\n                    response.correctResponse = [];\n                }\n                response.data('defineCorrect', define);\n            }\n\n            return defineCorrect;\n        },\n        initResponseForm : function(widget){\n\n            var interaction = widget.element,\n                item = interaction.getRelatedItem(),\n                rp = item.responseProcessing,\n                response = interaction.getResponseDeclaration(),\n                template = responseHelper.getTemplateNameFromUri(response.template),\n                editMapping = (_.indexOf(['MAP_RESPONSE', 'MAP_RESPONSE_POINT'], template) >= 0),\n                defineCorrect = answerStateHelper.defineCorrect(response);\n\n            if(!template){\n                if(rp.processingType === 'custom'){\n                    template = 'CUSTOM';\n                }else{\n                    throw 'invalid response template';\n                }\n            }\n\n            widget.$responseForm.html(responseFormTpl({\n                identifier : response.id(),\n                serial : response.getSerial(),\n                defineCorrect : defineCorrect,\n                editMapping : editMapping,\n                editFeedbacks : (template !== 'CUSTOM'),\n                template : template,\n                templates : _getAvailableRpTemplates(interaction),\n                defaultValue : response.getMappingAttribute('defaultValue'),\n                lowerBound : response.getMappingAttribute('lowerBound'),\n                upperBound : response.getMappingAttribute('upperBound')\n            }));\n            widget.$responseForm.find('select[name=template]').val(template);\n\n            var _toggleCorrectWidgets = function(show){\n\n                var $correctWidgets = widget.$container.find('[data-edit=correct]');\n\n                if(show){\n                    $correctWidgets.show();\n                }else{\n                    $correctWidgets.hide();\n                }\n            };\n\n            if(editMapping){\n                _toggleCorrectWidgets(defineCorrect);\n            }\n\n            formElement.setChangeCallbacks(widget.$responseForm, response, {\n                identifier : function(response, value){\n                    response.id(value);\n                    interaction.attr('responseIdentifier', value);\n                },\n                defaultValue : _saveCallbacks.mappingAttr,\n                lowerBound : _saveCallbacks.mappingAttr,\n                upperBound : _saveCallbacks.mappingAttr,\n                template : function(response, value){\n\n                    rp.setProcessingType('templateDriven');\n                    response.setTemplate(value);\n                    answerStateHelper.forward(widget);\n                    answerStateHelper.initResponseForm(widget);\n                },\n                defineCorrect : function(response, value){\n                \n                    _toggleCorrectWidgets(value);\n                    answerStateHelper.defineCorrect(response, !!value);\n                }\n            });\n\n            modalFeedbackRule.initFeedbacksPanel($('.feedbackRule-panel', widget.$responseForm), response);\n\n            formElement.initWidget(widget.$responseForm);\n        },\n        isCorrectDefined : function(widget){\n            var response = widget.element.getResponseDeclaration();\n            return !!_.size(response.getCorrect());\n        }\n    };\n\n    /**\n     * Get available rp templates accoding to interaction type and response processing type\n     * \n     * @todo refactor this : check if \n     * @param {object} interaction\n     * @returns {object} templates\n     */\n    var _getAvailableRpTemplates = function(interaction){\n\n        var templates = {\n            'CUSTOM' : 'custom',\n            'MATCH_CORRECT' : 'match correct',\n            'MAP_RESPONSE' : 'map response',\n            'MAP_RESPONSE_POINT' : 'map response'\n        },\n        rp = interaction.getRelatedItem().responseProcessing;\n\n        switch(interaction.qtiClass){\n            case 'orderInteraction':\n            case 'graphicOrderInteraction':\n            case 'extendedTextInteraction':\n                delete templates.MAP_RESPONSE;\n                delete templates.MAP_RESPONSE_POINT;\n                break;\n            case 'selectPointInteraction':\n            case 'extendedTextInteraction':\n                delete templates.MATCH_CORRECT;\n                delete templates.MAP_RESPONSE;\n                break;\n            case 'sliderInteraction':\n                delete templates.MAP_RESPONSE_POINT;\n                delete templates.MAP_RESPONSE;\n                break;\n            default:\n                delete templates.MAP_RESPONSE_POINT;\n        }\n\n        if(rp.processingType === 'templateDriven'){\n            delete templates.CUSTOM;\n        }else{\n            //consider as custom\n        }\n\n        return templates;\n    };\n\n    return answerStateHelper;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState',\n    'taoQtiItem/qtiCreator/widgets/helpers/content'\n], function(stateFactory, Answer, answerStateHelper, contentHelper){\n\n    var InteractionStateAnswer = stateFactory.create(Answer, function(){\n\n        //add class runtime to display hover style\n        this.widget.$container.addClass('runtime');\n\n        this.initResponseForm();\n\n        this.widget.$responseForm.show();\n\n        contentHelper.changeInnerWidgetState(this.widget, 'inactive');\n\n    }, function(){\n\n        //remove runtime style\n        this.widget.$container.removeClass('runtime');\n\n        this.widget.$responseForm.empty().hide();\n        \n        contentHelper.changeInnerWidgetState(this.widget, 'sleep');\n    });\n\n    //default initResponseForm will intialize the common form applicable to most of the interactions\n    //some exception might be stringInteractions that require additional baseType selection\n    //therfore, in the case of stringInteractions, please overwrite the prototype function with a new implementation\n    InteractionStateAnswer.prototype.initResponseForm = function(){\n\n        var _widget = this.widget;\n\n        answerStateHelper.initResponseForm(_widget);\n\n        _widget.on('responseTemplateChange', function(){\n            answerStateHelper.forward(_widget);\n        });\n    };\n\n    return InteractionStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/Correct',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct'\n], function(stateFactory, Correct){\n\n    var InteractionStateCorrect = stateFactory.create(Correct, function(){\n        //use default [data-edit=\"correct\"].show();\n    }, function(){\n        //use default [data-edit=\"correct\"].hide();\n    });\n\n    return InteractionStateCorrect;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/Map',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Map, answerState){\n\n    var InteractionStateMap = stateFactory.create(Map, function(){\n        \n        //use default [data-edit=\"map\"].show();\n        \n        var $correctWidgets = this.widget.$container.find('[data-edit=\"correct\"]');\n        \n        //check if the interaction response has a correct defined and show correct if so:\n        if(answerState.isCorrectDefined(this.widget)){\n            $correctWidgets.show();\n        }else{\n            $correctWidgets.hide();\n        }\n        \n    }, function(){\n        //use default [data-edit=\"map\"].hide();\n        \n        //plus, hide correct widget\n        this.widget.$container.find('[data-edit=\"correct\"]').hide();\n    });\n\n    return InteractionStateMap;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/states/Custom',['taoQtiItem/qtiCreator/widgets/states/factory'], function(stateFactory){\n    return stateFactory.create('custom', ['answer', 'active'], function(){\n        throw new Error('state \"custom\" prototype init method must be implemented');\n    },function(){\n        throw new Error('state \"custom\" prototype exit method must be implemented');\n    });\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/Custom',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Custom',\n    'tpl!taoQtiItem/qtiCreator/tpl/notifications/widgetOverlay',\n    'i18n'\n], function(stateFactory, Custom, overlayTpl, __){\n\n    var InteractionStateCustom = stateFactory.create(Custom, function(){\n        //use default [data-edit=\"custom\"].show();\n        this.widget.$container.append(overlayTpl({\n            message : __('Custom Response Processing Mode')\n        }));\n        var $e = this.widget.$container.find('[data-edit=map], [data-edit=correct]').hide();\n        \n        //ok button z-index\n    }, function(){\n        //use default [data-edit=\"custom\"].hide();\n        this.widget.$container.children('.overlay').remove();\n    });\n\n    return InteractionStateCustom;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Active',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Map',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Custom'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Question',\n    'taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/htmlEditorTrigger',\n    'i18n'\n], function($, stateFactory, Question, htmlEditor, contentHelper, promptToolbarTpl, __){\n\n    var BlockInteractionStateQuestion = stateFactory.extend(Question, function(){\n\n        this.buildPromptEditor();\n\n    }, function(){\n\n        this.destroyPromptEditor();\n    });\n\n    BlockInteractionStateQuestion.prototype.buildPromptEditor = function(){\n\n        var _widget = this.widget,\n            $editableContainer = _widget.$container.find('.qti-prompt-container'),\n            $editable = $editableContainer.find('.qti-prompt'),\n            container = _widget.element.prompt.getBody();\n\n        //@todo set them in the tpl\n        $editableContainer.attr('data-html-editable-container', true);\n        $editable.attr('data-html-editable', true);\n\n        if(!htmlEditor.hasEditor($editableContainer)){\n\n            var $promptTlb = $(promptToolbarTpl({\n                serial : _widget.serial,\n                state : 'question'\n            }));\n\n            //add toolbar once only:\n            $editableContainer.append($promptTlb);\n            $promptTlb.show();\n\n            htmlEditor.buildEditor($editableContainer, {\n                placeholder : __('define prompt'),\n                change : contentHelper.getChangeCallback(container),\n                data : {\n                    container : container,\n                    widget : _widget\n                }\n            });\n        }\n    };\n\n    BlockInteractionStateQuestion.prototype.destroyPromptEditor = function(){\n\n        var $editableContainer = this.widget.$container.find('.qti-prompt-container');\n        $editableContainer.find('.mini-tlb').remove();\n        htmlEditor.destroyEditor($editableContainer);\n    };\n\n    return BlockInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/associate', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, self=this, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"shuffle\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.shuffle), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Shuffle choices\", options) : helperMissing.call(depth0, \"__\", \"Shuffle choices\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\\n        However each choice may be shuffled of fixed individually.\", options) : helperMissing.call(depth0, \"__\", \"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\\n        However each choice may be shuffled of fixed individually.\", options)))\n    + \"\\n    </span>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Number of associations\", options) : helperMissing.call(depth0, \"__\", \"Number of associations\", options)))\n    + \"</h3>\\n\\n    <div>\\n        <label for=\\\"minAssociations\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"minAssociations\\\" value=\\\"\";\n  if (helper = helpers.minAssociations) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.minAssociations); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"100\\\" type=\\\"text\\\" />\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of choices that the candidate is required to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of choices that the candidate is required to select to form a valid response.\", options)))\n    + \"\\n        </span>\\n    </div>\\n    <div>\\n        <label for=\\\"maxAssociations\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"maxAssociations\\\" value=\\\"\";\n  if (helper = helpers.maxAssociations) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxAssociations); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"100\\\" type=\\\"text\\\" />\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices that the candidate is allowed to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices that the candidate is allowed to select to form a valid response.\", options)))\n    + \"\\n        </span>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/helper',['taoQtiItem/qtiCreator/helper/adaptSize', 'lodash'], function(adaptSize, _){\n    \n    return {\n        adaptSize : function(widget){\n            _.delay(function(){\n                adaptSize.height(widget.$container.find('.add-option, .result-area .target, .choice-area .qti-choice'));\n            }, 500);\n        }\n    }\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Question',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/associate',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/helper'\n], function(stateFactory, Question, formElement, formTpl, helper){\n\n    var AssociateInteractionStateQuestion = stateFactory.extend(Question);\n\n    AssociateInteractionStateQuestion.prototype.initForm = function(){\n\n       var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n\n        $form.html(formTpl({\n            shuffle : !!interaction.attr('shuffle'),\n            minAssociations : parseInt(interaction.attr('minAssociations')),\n            maxAssociations : parseInt(interaction.attr('maxAssociations'))\n        }));\n\n        formElement.initWidget($form);\n        \n        //init data change callbacks\n        var callbacks = formElement.getMinMaxAttributeCallbacks(this.widget.$form, 'minAssociations', 'maxAssociations');\n        callbacks.shuffle = formElement.getAttributeChangeCallback();\n        formElement.setChangeCallbacks($form, interaction, callbacks);\n        \n        //adapt size\n        helper.adaptSize(_widget);\n        _widget.on('choiceCreated', function(){\n            helper.adaptSize(_widget);\n        });\n    };\n    \n    return AssociateInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Choice',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/helper'\n], function(stateFactory, Choice, helper){\n\n    var AssociateInteractionStateChoice = stateFactory.extend(Choice, function(){\n        \n        var widget = this.widget;\n        \n        widget.on('containerBodyChange contentChange choiceCreated', function(){\n            helper.adaptSize(widget);\n        });\n        \n    }, function(){\n        \n    });\n\n    return AssociateInteractionStateChoice;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    var AssociateInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        answerStateHelper.forward(this.widget);\n    }, function(){\n        \n    });\n    \n    return AssociateInteractionStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/ResponseWidget',[\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/AssociateInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager'\n], function(_, __, commonRenderer, creatorHelper, instructionMgr){\n\n    var ResponseWidget = {\n        create : function(widget, responseMappingMode){\n\n            var interaction = widget.element;\n\n            commonRenderer.resetResponse(interaction);\n            commonRenderer.destroy(interaction);\n\n            if(responseMappingMode){\n                instructionMgr.appendInstruction(widget.element, __('Please define association pairs and their scores below.'));\n                interaction.responseMappingMode = true;\n            }else{\n                instructionMgr.appendInstruction(widget.element, __('Please define the correct association pairs below.'));\n            }\n\n            commonRenderer.render(interaction);\n            \n            creatorHelper.adaptSize(widget);\n        },\n        setResponse : function(interaction, response){\n            var responseDeclaration = interaction.getResponseDeclaration();\n            commonRenderer.setResponse(interaction, ResponseWidget.formatResponse(response, responseDeclaration.attr('cardinality')));\n            \n            creatorHelper.adaptSize(interaction.data('widget'));\n            \n        },\n        destroy : function(widget){\n\n            var interaction = widget.element;\n\n            commonRenderer.resetResponse(interaction);\n            commonRenderer.destroy(interaction);\n\n            delete interaction.responseMappingMode;\n\n            commonRenderer.renderEmptyPairs(interaction);\n            \n            creatorHelper.adaptSize(widget);\n        },\n        getResponseSummary : function(responseDeclaration){\n            \n            var pairs = [],\n                correctResponse = _.values(responseDeclaration.getCorrect()),\n                mapEntries = responseDeclaration.getMapEntries();\n            \n            _.each(correctResponse, function(pair) {\n\n                var sortedIdPair = pair.split(' ').sort(),\n                    sortedIdPairKey = sortedIdPair.join(' ');\n\n                pairs[sortedIdPairKey] = {\n                    pair: sortedIdPair,\n                    correct: true,\n                    score: undefined\n                };\n            });\n\n            _.forIn(mapEntries, function(score, pair) {\n\n                var sortedIdPair = pair.split(' ').sort(),\n                    sortedIdPairKey = sortedIdPair.join(' ');\n\n                if (!pairs[sortedIdPairKey]) {\n                    pairs[sortedIdPairKey] = {\n                        pair: sortedIdPair,\n                        correct: false,\n                        score: score\n                    };\n                } else {\n                    pairs[sortedIdPairKey].score = score;\n                }\n            });\n            \n            return pairs;\n        },\n        formatResponse : function(response, cardinality){\n\n            var formatedRes;\n            if(cardinality === 'single'){\n                formatedRes = {base : { pair : [] }};\n            } else {\n                formatedRes = {list : { pair : [] }};\n            }\n            \n            _.each(response, function(pairString){\n                var pair = pairString.split(' ');\n                if(cardinality === 'single'){\n                    formatedRes.base.pair = pair;\n                } else {\n                    formatedRes.list.pair.push(pair);\n                }\n            });\n\n            return formatedRes;\n        },\n        unformatResponse : function(formatedResponse){\n\n            var res = [];\n\n            if(formatedResponse.list && formatedResponse.list.pair){\n                _.each(formatedResponse.list.pair, function(pair){\n                    res.push(pair.join(' '));\n                });\n            }else if(formatedResponse.base && formatedResponse.base.pair){\n                res.push(formatedResponse.base.pair.join(' '));\n            }\n            return res;\n        }\n    };\n\n    return ResponseWidget;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Correct',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/ResponseWidget',\n    'lodash'\n], function(stateFactory, Correct, responseWidget, _){\n\n    var AssociateInteractionStateCorrect = stateFactory.create(Correct, function(){\n\n        var interaction = this.widget.element,\n            response = interaction.getResponseDeclaration();\n\n        responseWidget.create(this.widget, false);\n        responseWidget.setResponse(interaction, _.values(response.getCorrect()));\n\n        this.widget.$container.on('responseChange.qti-widget', function(e, data){\n            response.setCorrect(responseWidget.unformatResponse(data.response));\n        });\n\n    }, function(){\n\n        this.widget.$container.off('responseChange.qti-widget');\n\n        responseWidget.destroy(this.widget);\n    });\n\n    return AssociateInteractionStateCorrect;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/associableChoice.answer', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<div class=\\\"mini-tlb\\\" data-edit=\\\"answer\\\" data-for=\\\"\";\n  if (helper = helpers.choiceSerial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choiceSerial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <label class=\\\"tlb-button right\\\" title=\\\"This answer is correct\\\" data-edit=\\\"correct\\\">\\n        <input \\n            type=\\\"checkbox\\\" \\n            data-role=\\\"correct\\\"\\n            name=\\\"correct_\";\n  if (helper = helpers.interactionSerial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.interactionSerial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"[]\\\" \\n            value=\\\"\";\n  if (helper = helpers.choiceIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choiceIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n            \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.correct), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n    </label>\\n    <label class=\\\"tlb-button right\\\" title=\\\"Score of this answer\\\" data-edit=\\\"map\\\">\\n        <input value=\\\"\";\n  if (helper = helpers.score) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.score); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" data-role=\\\"score\\\" data-for=\\\"\";\n  if (helper = helpers.choiceIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choiceIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" name=\\\"score\\\" class=\\\"score\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\" />\\n    </label>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Map',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/ResponseWidget',\n    'lodash',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/associableChoice.answer'\n], function($, stateFactory, Map, responseWidget, _, responseToolbarTpl){\n\n    var AssociateInteractionStateCorrect = stateFactory.create(Map, function(){\n\n        var _widget = this.widget,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        //init response widget in responseMapping mode:\n        responseWidget.create(_widget, true);\n\n        //start bind events to detect response changes:\n        this.bindResponseChangeListener();\n\n        //finally, apply defined correct response and response mapping:\n        responseWidget.setResponse(interaction, _.keys(responseWidget.getResponseSummary(response)));\n\n    }, function(){\n\n        this.widget.$container.off('responseChange.qti-widget');\n\n        responseWidget.destroy(this.widget);\n\n        this.widget.$container.find('.mini-tlb').remove();\n    });\n\n    AssociateInteractionStateCorrect.prototype.bindResponseChangeListener = function(){\n\n        var _widget = this.widget,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        //@todo to be mapped to actual value\n        var _defaultMappingValue = 0;\n\n        var _saveCorrect = function(){\n            var correct = [];\n            $('input[name=\"correct_' + _widget.serial + '[]\"]:checked').each(function(){\n                correct.push($(this).data('pairIdentifier'));\n            });\n            response.setCorrect(correct);\n        };\n\n        _widget.$container.on('responseChange.qti-widget', function(e, data, extraData){\n\n            if(extraData.type === 'added'){\n\n                //choice identifier pair:\n                var pair = [],\n                    pairs = [],\n                    $filled = extraData.$pair.children('.filled');\n\n                if($filled.length === 2){\n\n                    pairs = responseWidget.getResponseSummary(response);\n\n                    //the pair is complete:\n                    $filled.each(function(){\n\n                        var serial = $(this).data('serial'),\n                            choice = interaction.getChoice(serial);\n\n                        pair.push(choice.id());\n                    });\n\n                    pair.sort();\n\n                    var pairIdentifier = pair.join(' '),\n                        $miniToolbar = extraData.$pair.children('.mini-tlb');\n\n                    if(!$miniToolbar.length){\n\n                        //if does not exist yet, create it:\n                        extraData.$pair.append(responseToolbarTpl({\n                            interactionSerial : interaction.getSerial(),\n                            choiceSerial : 'n/a',\n                            choiceIdentifier : 'n/a'\n                        }));\n\n                        $miniToolbar = extraData.$pair.children('.mini-tlb');\n                    }\n                    $miniToolbar.show();\n                    $miniToolbar.data('pairIdentifier', pairIdentifier);\n\n                    var $correct = $miniToolbar.find('[data-role=correct]').data('pairIdentifier', pairIdentifier);\n                    if(pairs[pairIdentifier] && pairs[pairIdentifier].correct){\n                        $correct.prop('checked', true);\n                    }else{\n                        $correct.prop('checked', false);\n                    }\n\n                    var $score = $miniToolbar.find('[data-role=score]').data('pairIdentifier', pairIdentifier);\n                    if(pairs[pairIdentifier] && pairs[pairIdentifier].score){\n                        $score.val(pairs[pairIdentifier].score);\n                    }else{\n                        //@todo set _defaultMappingValue as placeholder text:\n                        $score.val(_defaultMappingValue);\n                    }\n                }\n\n            }else{\n\n                //reset and hide toolbar\n                $miniToolbar = extraData.$pair.children('.mini-tlb');\n                $miniToolbar.hide();\n\n                //before resetting the correct and score inputs, remove the current map entry from the response:\n                response.removeMapEntry($miniToolbar.data('pairIdentifier'));\n\n                $miniToolbar.removeData('pairIdentifier');\n                $miniToolbar.find('[data-role=correct]').prop('checked', false).removeData('pairIdentifier');\n                $miniToolbar.find('[data-role=score]').val(_defaultMappingValue).removeData('pairIdentifier');\n\n                //finally update the correct response\n                _saveCorrect();\n            }\n        });\n\n        _widget.$container.find('.result-area')\n            .on('change', '[data-role=correct]', _saveCorrect)\n            .on('keyup', '[data-role=score]', function(){\n            var $score = $(this);\n            response.setMapEntry($score.data('pairIdentifier'), $score.val());\n        });\n    };\n\n    return AssociateInteractionStateCorrect;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Map'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/helper'\n], function(Widget, states, helper){\n\n    var AssociateInteractionWidget = Widget.clone();\n\n    AssociateInteractionWidget.initCreator = function(){\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n        \n        helper.adaptSize(this);\n    };\n    \n    return AssociateInteractionWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/interactions/AssociateInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/AssociateInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/Widget'\n], function(_, AssociateInteraction, AssociateInteractionWidget){\n\n    var CreatorAssociateInteraction = _.clone(AssociateInteraction);\n\n    CreatorAssociateInteraction.render = function(interaction, options){\n        \n        AssociateInteraction.renderEmptyPairs(interaction);\n        \n        return AssociateInteractionWidget.build(\n            interaction,\n            AssociateInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorAssociateInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/choiceInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \" horizontal\";\n  }\n\nfunction program5(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-choiceInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"choiceInteraction\\\">\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  <div class=\\\"instruction-container\\\"></div>\\n  <ol class=\\\"plain block-listing solid choice-area\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n      \";\n  options={hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  </ol>\\n  <div class=\\\"notification-container\\\"></div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/ChoiceInteraction',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/choiceInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function(_, $, __, tpl, containerHelper, instructionMgr, pciResponse){\n    'use strict';\n\n    /**\n     * 'pseudo-label' is technically a div that behaves like a label.\n     * This allows the usage of block elements inside the fake label\n     *\n     * @private\n     * @param {Object} interaction - the interaction instance\n     * @param {jQueryElement} $container\n     */\n    var _pseudoLabel = function(interaction, $container){\n\n        $container.off('.commonRenderer');\n\n        $container.on('click.commonRenderer', '.qti-choice', function(e){\n\n            e.preventDefault();\n            e.stopPropagation();//required toherwise any tao scoped ,i/form initialization might prevent it from working\n\n            var $box = $(this);\n            var $radios = $box.find('input:radio').not('[disabled]').not('.disabled');\n            var $checkboxes = $box.find('input:checkbox').not('[disabled]').not('.disabled');\n\n            if($radios.length){\n                $radios.not(':checked').prop('checked', true);\n                $radios.trigger('change');\n            }\n\n            if($checkboxes.length){\n                $checkboxes.prop('checked', !$checkboxes.prop('checked'));\n                $checkboxes.trigger('change');\n            }\n\n            instructionMgr.validateInstructions(interaction, {choice : $box});\n            containerHelper.triggerResponseChangeEvent(interaction);\n        });\n    };\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10278\n     *\n     * @param {Object} interaction - the interaction instance\n     */\n    var render = function(interaction){\n        var $container = containerHelper.get(interaction);\n\n        _pseudoLabel(interaction, $container);\n\n        _setInstructions(interaction);\n    };\n\n    /**\n     * Define the instructions for the interaction\n     * @private\n     * @param {Object} interaction - the interaction instance\n     */\n    var _setInstructions = function(interaction){\n\n        var min = interaction.attr('minChoices'),\n            max = interaction.attr('maxChoices'),\n            choiceCount = _.size(interaction.getChoices()),\n            minInstructionSet = false;\n\n        //if maxChoice = 1, use the radio gorup behaviour\n        //if maxChoice = 0, inifinite choice possible\n        if(max > 1 && max < choiceCount){\n\n            var highlightInvalidInput = function($choice){\n                var $input = $choice.find('.real-label > input'),\n                    $li = $choice.css('color', '#BA122B'),\n                    $icon = $choice.find('.real-label > span').css('color', '#BA122B').addClass('cross error');\n\n                setTimeout(function(){\n                    $input.prop('checked', false);\n                    $li.removeAttr('style');\n                    $icon.removeAttr('style').removeClass('cross');\n                    containerHelper.triggerResponseChangeEvent(interaction);\n                }, 150);\n            };\n\n            if(max === min){\n                minInstructionSet = true;\n                var msg = __('You must select exactly') + ' ' + max + ' ' + __('choices');\n                instructionMgr.appendInstruction(interaction, msg, function(data){\n                    if(_getRawResponse(interaction).length >= max){\n                        this.setLevel('success');\n                        if(this.checkState('fulfilled')){\n                            this.update({\n                                level : 'warning',\n                                message : __('Maximum choices reached'),\n                                timeout : 2000,\n                                start : function(){\n                                    if(data && data.choice){\n                                        highlightInvalidInput(data.choice);\n                                    }\n                                },\n                                stop : function(){\n                                    this.update({level : 'success', message : msg});\n                                }\n                            });\n                        }\n                        this.setState('fulfilled');\n                    }else{\n                        this.reset();\n                    }\n                });\n            }else if(max > min){\n                instructionMgr.appendInstruction(interaction, __('You can select maximum') + ' ' + max + ' ' + __('choices'), function(data){\n                    if(_getRawResponse(interaction).length >= max){\n                        this.setMessage(__('Maximum choices reached'));\n                        if(this.checkState('fulfilled')){\n                            this.update({\n                                level : 'warning',\n                                timeout : 2000,\n                                start : function(){\n                                    if(data && data.choice){\n                                        highlightInvalidInput(data.choice);\n                                    }\n                                },\n                                stop : function(){\n                                    this.setLevel('info');\n                                }\n                            });\n                        }\n                        this.setState('fulfilled');\n                    }else{\n                        this.reset();\n                    }\n                });\n            }\n        }\n\n        if(!minInstructionSet && min > 0 && min < choiceCount){\n            instructionMgr.appendInstruction(interaction, __('You must select at least') + ' ' + min + ' ' + __('choices'), function(){\n                if(_getRawResponse(interaction).length >= min){\n                    this.setLevel('success');\n                }else{\n                    this.reset();\n                }\n            });\n        }\n    };\n\n    /**\n     * Reset the responses previously set\n     *\n     * @param {Object} interaction - the interaction instance\n     */\n    var resetResponse = function(interaction){\n        var $container = containerHelper.get(interaction);\n\n        $('.real-label > input', $container).prop('checked', false);\n    };\n\n    /**\n     * Set a new response to the rendered interaction.\n     * Please note that it does not reset previous responses.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10278\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {0bject} response - the PCI formated response\n     */\n    var setResponse = function(interaction, response){\n        var $container = containerHelper.get(interaction);\n\n        try{\n            _.each(pciResponse.unserialize(response, interaction), function(identifier){\n                $container.find('.real-label > input[value=' + identifier + ']').prop('checked', true);\n            });\n            instructionMgr.validateInstructions(interaction);\n        }catch(e){\n            throw new Error('wrong response format in argument : ' + e);\n        }\n    };\n\n    /**\n     * Get the responses from the DOM.\n     * @private\n     * @param {Object} interaction - the interaction instance\n     * @returns {Array} the list of choices identifiers\n     */\n    var _getRawResponse = function(interaction){\n        var values = [];\n        var $container = containerHelper.get(interaction);\n        $('.real-label > input[name=response-' + interaction.getSerial() + ']:checked', $container).each(function(){\n            values.push($(this).val());\n        });\n        return values;\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10278\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the response formated in PCI\n     */\n    var getResponse = function(interaction){\n        return pciResponse.serialize(_getRawResponse(interaction), interaction);\n    };\n\n    /**\n     * Set additionnal data to the template (data that are not really part of the model).\n     * @param {Object} interaction - the interaction\n     * @param {Object} [data] - interaction custom data\n     * @returns {Object} custom data\n     */\n    var getCustomData = function(interaction, data){\n        return _.merge(data || {}, {\n            horizontal : (interaction.attr('orientation') === 'horizontal')\n        });\n    };\n\n\n    /**\n     * Destroy the interaction by leaving the DOM exactly in the same state it was before loading the interaction.\n     * @param {Object} interaction - the interaction\n     */\n    var destroy = function destroy(interaction){\n        var $container = containerHelper.get(interaction);\n\n        //remove event\n        $container.off('.commonRenderer');\n        $(document).off('.commonRenderer');\n\n        //remove instructions\n        instructionMgr.removeInstructions(interaction);\n\n        //remove all references to a cache container\n        containerHelper.reset(interaction);\n    };\n\n    /**\n     * Set the interaction state. It could be done anytime with any state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {Object} state - the interaction state\n     */\n    var setState  = function setState(interaction, state){\n        var $container;\n\n        if(_.isObject(state)){\n            if(state.response){\n                interaction.resetResponse();\n                interaction.setResponse(state.response);\n            }\n\n            //restore order of previously shuffled choices\n            if(_.isArray(state.order) && state.order.length === _.size(interaction.getChoices())){\n\n                $container = containerHelper.get(interaction);\n\n                $('.qti-simpleChoice', $container)\n                    .sort(function(a, b){\n                        var aIndex = _.indexOf(state.order, $(a).data('identifier'));\n                        var bIndex = _.indexOf(state.order, $(b).data('identifier'));\n                        if(aIndex > bIndex) {\n                            return 1;\n                        }\n                        if(aIndex < bIndex) {\n                            return -1;\n                        }\n                        return 0;\n                    })\n                    .detach()\n                    .appendTo($('.choice-area', $container));\n            }\n        }\n    };\n\n    /**\n     * Get the interaction state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the interaction current state\n     */\n    var getState = function getState(interaction){\n        var $container;\n        var state =  {};\n        var response =  interaction.getResponse();\n\n        if(response){\n            state.response = response;\n        }\n\n        //we store also the choice order if shuffled\n        if(interaction.attr('shuffle') === true){\n            $container = containerHelper.get(interaction);\n\n            state.order = [];\n            $('.qti-simpleChoice', $container).each(function(){\n               state.order.push($(this).data('identifier'));\n            });\n        }\n        return state;\n    };\n\n    /**\n     * Expose the common renderer for the choice interaction\n     * @exports qtiCommonRenderer/renderers/interactions/ChoiceInteraction\n     */\n    return {\n        qtiClass : 'choiceInteraction',\n        template : tpl,\n        getData : getCustomData,\n        render : render,\n        getContainer : containerHelper.get,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy,\n        setState : setState,\n        getState : getState\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/choice', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, self=this, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"shuffle\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.shuffle), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Shuffle choices\", options) : helperMissing.call(depth0, \"__\", \"Shuffle choices\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\\n        However each choice may be \\\"shuffled\\\" of \\\"fixed\\\" individually.\", options) : helperMissing.call(depth0, \"__\", \"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\\n        However each choice may be \\\"shuffled\\\" of \\\"fixed\\\" individually.\", options)))\n    + \"\\n    </span>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allowed number of choices\", options) : helperMissing.call(depth0, \"__\", \"Allowed number of choices\", options)))\n    + \"</h3>\\n\\n    <div>\\n        <label for=\\\"minChoices\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"minChoices\\\" value=\\\"\";\n  if (helper = helpers.minChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.minChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of choices that the candidate is required to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of choices that the candidate is required to select to form a valid response.\", options)))\n    + \"\\n        </span>\\n    </div>\\n    <div>\\n        <label for=\\\"maxChoices\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"maxChoices\\\" value=\\\"\";\n  if (helper = helpers.maxChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n            <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices that the candidate is allowed to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices that the candidate is allowed to select to form a valid response.\", options)))\n    + \"\\n        </span>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Question',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/choice',\n    'lodash'\n], function(stateFactory, Question, formElement, interactionFormElement, formTpl, _){\n\n    var ChoiceInteractionStateQuestion = stateFactory.extend(Question);\n\n    ChoiceInteractionStateQuestion.prototype.initForm = function(updateCardinality){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n\n        $form.html(formTpl({\n            shuffle : !!interaction.attr('shuffle'),\n            maxChoices : parseInt(interaction.attr('maxChoices')),\n            minChoices : parseInt(interaction.attr('minChoices')),\n            choicesCount : _.size(_widget.element.getChoices())\n        }));\n\n        formElement.initWidget($form);\n        \n        //init data change callbacks\n        var callbacks = formElement.getMinMaxAttributeCallbacks(this.widget.$form, 'minChoices', 'maxChoices', {updateCardinality:updateCardinality});\n        callbacks.shuffle = formElement.getAttributeChangeCallback();\n        formElement.setChangeCallbacks($form, interaction, callbacks);\n        \n        interactionFormElement.syncMaxChoices(_widget);\n        \n        //modify the checkbox/radio input appearances\n        _widget.on('attributeChange', function(data){\n            \n            var $checkboxIcons = _widget.$container.find('.real-label > span');\n            \n            if(data.element.serial === interaction.serial && data.key === 'maxChoices'){\n                if(parseInt(data.value) === 1){\n                    //radio\n                    $checkboxIcons.removeClass('icon-checkbox').addClass('icon-radio');\n                }else{\n                    //checkbox\n                    $checkboxIcons.removeClass('icon-radio').addClass('icon-checkbox');\n                }\n            }\n        });\n    };\n\n    return ChoiceInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    var ChoiceInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        \n        //forward to one of the available sub state, according to the response processing template\n        answerStateHelper.forward(this.widget);\n        \n    }, function(){\n        \n    });\n    \n    return ChoiceInteractionStateAnswer;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.score', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"mini-tlb\\\" data-edit=\\\"answer\\\" data-for=\\\"\";\n  if (helper = helpers.choiceSerial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choiceSerial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <label class=\\\"tlb-button right\\\" title=\\\"Score of this answer\\\" data-edit=\\\"map\\\">\\n        <input value=\\\"\";\n  if (helper = helpers.score) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.score); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n       title=\\\"Score of this answer\\\" \\n       type=\\\"text\\\" \\n       data-for=\\\"\";\n  if (helper = helpers.choiceIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choiceIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n       name=\\\"score\\\" \\n       class=\\\"score\\\" \\n       placeholder = \\\"\";\n  if (helper = helpers.placeholder) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.placeholder); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n       data-validate=\\\"$numeric\\\" \\n       data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\" />\\n    </label>\\n</div>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.label', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, self=this, functionType=\"function\", escapeExpression=this.escapeExpression;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"style=\\\"display:block;\\\"\";\n  }\n\n  buffer += \"<div class=\\\"mini-tlb-label\\\" data-edit=\\\"answer\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.show), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n    <label class=\\\"right\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</label>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/ResponseWidget',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/ChoiceInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.score',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.label',\n    'polyfill/placeholders'\n], function($, _, __, commonRenderer, instructionMgr, pciResponse, formElement, answerStateHelper, scoreTpl, labelTpl){\n\n    var _fixInputs = function(widget){\n\n        if(widget.element.attr('maxChoices') === 1){\n            //enforce radios:\n            widget.$container.find('.real-label > :checkbox').replaceWith(function(){\n\n                var $checkbox = $(this);\n\n                return $('<input>', {\n                    type : 'radio',\n                    value : $checkbox.attr('value'),\n                    name : $checkbox.attr('name')\n                });\n\n            });\n\n        }else{\n\n            //enforce radios:\n            widget.$container.find('.real-label > :radio').replaceWith(function(){\n\n                var $radio = $(this);\n\n                return $('<input>', {\n                    type : 'checkbox',\n                    value : $radio.attr('value'),\n                    name : $radio.attr('name')\n                });\n\n            });\n        }\n\n    };\n\n    var ResponseWidget = {\n        create : function(widget, responseMappingMode){\n\n            var interaction = widget.element;\n\n            commonRenderer.resetResponse(interaction);\n            commonRenderer.destroy(interaction);\n\n            _fixInputs(widget);\n\n            if(responseMappingMode){\n                instructionMgr.appendInstruction(widget.element, __('Please define the correct response and the score below.'));\n                interaction.data('responseMappingMode', true);\n                ResponseWidget.createScoreWidgets(widget);\n                ResponseWidget.createCorrectWidgets(widget);\n            }else{\n                instructionMgr.appendInstruction(widget.element, __('Please define the correct response below.'));\n                ResponseWidget.createCorrectWidgets(widget);\n            }\n\n            commonRenderer.render(interaction);\n\n        },\n        setResponse : function(interaction, response){\n\n            commonRenderer.setResponse(interaction, pciResponse.serialize(_.values(response), interaction));\n        },\n        destroy : function(widget){\n\n            var interaction = widget.element;\n\n            commonRenderer.resetResponse(interaction);\n            commonRenderer.destroy(interaction);\n\n            interaction.removeData('responseMappingMode');\n\n            widget.$container.off('responseChange.qti-widget');\n\n            widget.$container.find('.real-label > input').attr('disabled', 'disabled');\n\n            widget.$container.find('.mini-tlb-label[data-edit=answer], .mini-tlb[data-edit=answer]').remove();\n        },\n        createScoreWidgets : function(widget){\n\n            var $container = widget.$container,\n                interaction = widget.element,\n                response = interaction.getResponseDeclaration(),\n                mapEntries = response.getMapEntries(),\n                defaultValue = response.getMappingAttribute('defaultValue');\n\n            var $label = $(labelTpl({\n                label : __('score'),\n                show : true\n            })).css({\n                right : 3,\n                left : 'auto'\n            });\n\n            $container.find('.qti-choice:first .pseudo-label-box').append($label);\n\n            $container.find('.qti-choice').each(function(){\n\n                var $choice = $(this),\n                    id = $choice.data('identifier'),\n                    serial = $choice.data('serial'),\n                    $score;\n\n                $score = $(scoreTpl({\n                    serial : interaction.getSerial(),\n                    choiceSerial : serial,\n                    choiceIdentifier : id,\n                    score : mapEntries[id] ? mapEntries[id] : '',\n                    placeholder : defaultValue\n                }));\n\n                $choice.find('.pseudo-label-box').append($score);\n\n                $score.show().on('click', function(e){\n                    e.stopPropagation();\n                    e.preventDefault();\n                });\n\n            });\n\n            //add placeholder text to show the default value\n            var $scores = $container.find('.score');\n            widget.on('mappingAttributeChange', function(data){\n                if(data.key === 'defaultValue'){\n                    $scores.attr('placeholder', data.value);\n                }\n            });\n\n            formElement.setChangeCallbacks($container, response, {\n                score : function(response, value){\n\n                    var key = $(this).data('for');\n\n                    if(value === ''){\n                        response.removeMapEntry(key);\n                    }else{\n                        response.setMapEntry(key, value, true);\n                    }\n\n                }\n            });\n\n        },\n        createCorrectWidgets : function(widget){\n\n            var $container = widget.$container,\n                interaction = widget.element,\n                response = interaction.getResponseDeclaration(),\n                $corrects = $container.find('.real-label > input');\n\n            $container.find('.qti-choice:first .pseudo-label-box').append(labelTpl({\n                label : __('correct'),\n                show : false\n            }));\n\n            $container.on('responseChange.qti-widget', function(e, data){\n                response.setCorrect(pciResponse.unserialize(data.response, interaction));\n            });\n\n            var _toggleCorrectInputs = function(show){\n                if(show){\n                    $corrects.removeAttr('disabled');\n                }else{\n                    $corrects.attr('disabled', 'disabled').prop('checked', false);\n                }\n            };\n\n            _toggleCorrectInputs(answerStateHelper.defineCorrect(response));\n\n            widget.on('metaChange', function(data){\n                if(data.element.serial === response.serial && data.key === 'defineCorrect'){\n                    _toggleCorrectInputs(data.value);\n                }\n            });\n\n        },\n        formatResponse : function(response){\n            return pciResponse.serialize(_.values(response));\n        },\n        unformatResponse : function(formatedResponse){\n            return pciResponse.unserialize(formatedResponse);\n        }\n    };\n\n    return ResponseWidget;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Correct',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/ResponseWidget',\n    'lodash'\n], function(stateFactory, Correct, responseWidget, _){\n\n    var ChoiceInteractionStateCorrect = stateFactory.create(Correct, function(){\n\n        var _widget = this.widget,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        //init response widget in responseMapping mode:\n        responseWidget.create(_widget);\n\n        //finally, apply defined correct response and response mapping:\n        responseWidget.setResponse(interaction, _.values(response.getCorrect()));\n\n    }, function(){\n\n        responseWidget.destroy(this.widget);\n\n    });\n\n    return ChoiceInteractionStateCorrect;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Map',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/ResponseWidget',\n    'lodash'\n], function(stateFactory, Map, responseWidget, _){\n\n    var ChoiceInteractionStateMap = stateFactory.create(Map, function(){\n\n        var _widget = this.widget,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        //init response widget in responseMapping mode:\n        responseWidget.create(_widget, true);\n\n        //finally, apply defined correct response and response mapping:\n        responseWidget.setResponse(interaction, _.values(response.getCorrect()));\n\n    }, function(){\n\n        responseWidget.destroy(this.widget);\n\n    });\n\n    return ChoiceInteractionStateMap;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Map'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/states'\n], function(Widget, states){\n\n    var ChoiceInteractionWidget = Widget.clone();\n\n    ChoiceInteractionWidget.initCreator = function(){\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n    };\n    \n    return ChoiceInteractionWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/interactions/ChoiceInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/ChoiceInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/Widget'\n], function(_, ChoiceInteraction, ChoiceInteractionWidget){\n    \n    var CreatorChoiceInteraction = _.clone(ChoiceInteraction);\n\n    CreatorChoiceInteraction.render = function(interaction, options){\n        \n        return ChoiceInteractionWidget.build(\n            interaction,\n            ChoiceInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorChoiceInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/endAttemptInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<button class=\\\"qti-interaction qti-inlineInteraction qti-endAttemptInteraction btn small btn-info\\\" \\n        data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n        data-qti-class=\\\"endAttemptInteraction\\\" \\n        value=\\\"false\\\">\\n        \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\n</button>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/interactions/EndAttemptInteraction',[\n    'lodash',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/endAttemptInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'i18n'\n], function(_, tpl, containerHelper, pciResponse, __){\n\n    \"use strict\";\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10402\n     *\n     * @param {object} interaction\n     */\n    var render = function(interaction, options){\n\n        var $container = containerHelper.get(interaction);\n\n        //on click,\n        $container.on('click.commonRenderer', function(){\n            $container.val(true);\n            $container.trigger('endattempt', [interaction.attr('responseIdentifier')]);\n        });\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10402\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n\n        _setVal(interaction, pciResponse.unserialize(response, interaction)[0]);\n    };\n\n\n    /**\n     * Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10402\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        var val = containerHelper.get(interaction).val();\n        val = (val && val !== 'false' && val !== '0');\n        return pciResponse.serialize([val], interaction);\n    };\n\n    /**\n     * Reset the response ... wondering if it is useful ...\n\n     * @param {type} interaction\n     */\n    var resetResponse = function(interaction){\n        _setVal(interaction, false);\n    };\n\n    /**\n     *\n     * @param {Object} interaction\n     * @param {Boolean} val\n     */\n    var _setVal = function(interaction, val){\n\n        containerHelper.get(interaction)\n            .val(val)\n            .change();\n\n    };\n\n    /**\n     * Destroy the interaction to restore the dom as it is before render() is called\n     *\n     * @param {Object} interaction\n     */\n    var destroy = function(interaction){\n\n        //remove event\n        containerHelper.get(interaction).off('.commonRenderer');\n\n        //destroy response\n        resetResponse(interaction);\n    };\n\n    /**\n     * Define default template data\n     *\n     * @param {Object} interaction\n     * @param {Object} data\n     * @returns {Object}\n     */\n    var getCustomData = function(interaction, data){\n        if(!data.attributes.title){\n            data.attributes.title = __('End Attempt');\n        }\n        return data;\n    };\n\n    return {\n        qtiClass : 'endAttemptInteraction',\n        template : tpl,\n        getData : getCustomData,\n        render : render,\n        getContainer : containerHelper.get,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/Widget',['taoQtiItem/qtiCreator/widgets/interactions/Widget'], function(Widget){\n\n    var InlineInteractionWidget = Widget.clone();\n\n    InlineInteractionWidget.destroy = function(){\n        \n        //remove all events on the original DOM element\n        this.$original.off('.qti-widget');\n        \n        //remove the external container completely\n        this.$container.remove();\n\n        //clean old referenced event\n        this.offEvents();\n    };\n\n    return InlineInteractionWidget;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep'], function(stateFactory, SleepState){\n\n    var InlineInteractionStateSleep = stateFactory.create(SleepState, function(){\n\n        var _widget = this.widget,\n            $container = this.widget.$original;\n\n        $container.on('click.qti-widget.sleep', function(e){\n            e.stopPropagation();\n            //if active == false do this: (else nothing)\n            //show toolbar, prompt widget and choice widgets and property form\n\n            //init default mode: question\n            _widget.changeState('question');\n        });\n\n        //add listener to display proper hover style\n        $container.on('mouseenter.sleep', function(e){\n            $container.addClass('hover');\n            $container.parent().trigger('mouseleave.sleep');\n        }).on('mouseleave.sleep', function(){\n            $container.removeClass('hover');\n            $container.parent().trigger('mouseenter.sleep');\n        });\n\n    }, function(){\n\n        this.widget.$original.removeClass('hover').off('.sleep');\n    });\n\n    return InlineInteractionStateSleep;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/Active',[\n    'jquery', \n    'lodash',\n    'taoQtiItem/qtiCreator/widgets/states/factory', \n    'taoQtiItem/qtiCreator/widgets/interactions/states/Active'], \nfunction($, _, stateFactory, Active){\n\n    var InteractionStateActive = stateFactory.extend(Active, function(){\n        \n        var _this = this;\n        $(window).on('resize.active', _.throttle(function(){\n            _this.positionWidget();\n        }, 200));\n        \n        this.positionWidget();\n\n    }, function(){\n\n        //unbind events\n        $(window).off('.active');\n        \n        //hide it:\n        this.widget.$container.hide();\n    });\n\n    InteractionStateActive.prototype.positionWidget = function(){\n        \n        //show toolbar, ok button, event binding performed by parent state\n        var _widget = this.widget,\n            itemOffset = _widget.$itemContainer.offset(),\n            originalOffset = _widget.$original.offset();\n\n        //debug\n//        _widget.$itemContainer.on('mousemove', _.throttle(function(e){\n//            console.log(e.pageX - itemOffset.left, e.pageY - itemOffset.top);\n//        }, 200));\n//        _widget.$itemContainer.css({border:'2px solid red'});\n//        _widget.$container.css({border:'2px solid red'});\n//        _widget.$original.css({border:'2px solid red'});\n\n        //calculate absolute position:\n        _widget.$container.show().css({\n            position : 'absolute',\n            top : originalOffset.top - itemOffset.top - 22,\n            left : originalOffset.left - itemOffset.left - 32\n        });\n        \n    };\n\n    return InteractionStateActive;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/Active'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/endAttempt', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n<div class=\\\"panel\\\">\\n    <label for=\\\"restrictedIdentifier\\\" class=\\\"spinner\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Response identifier\", options) : helperMissing.call(depth0, \"__\", \"Response identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select a response identifier from the list.\", options) : helperMissing.call(depth0, \"__\", \"Select a response identifier from the list.\", options)))\n    + \"</span>\\n    <select name=\\\"restrictedIdentifier\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n    \t\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.restrictedIdentifiers), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </select>\\n</div>\\n\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    \t\t<option value=\\\"\"\n    + escapeExpression(((stack1 = (data == null || data === false ? data : data.key)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.selected), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n    \t\";\n  return buffer;\n  }\nfunction program3(depth0,data) {\n  \n  \n  return \"selected=\\\"selected\\\"\";\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n<div class=\\\"panel\\\">\\n    <label for=\\\"\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Response identifier\", options) : helperMissing.call(depth0, \"__\", \"Response identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the response identifier. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the response identifier. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"responseIdentifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.responseIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.responseIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. END_ATTEMPT\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.responseSerial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.responseSerial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n</div>\\n\";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hasRestrictedIdentifier), {hash:{},inverse:self.program(5, program5, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Label\", options) : helperMissing.call(depth0, \"__\", \"Label\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The button label.\", options) : helperMissing.call(depth0, \"__\", \"The button label.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"title\\\" \\n           value=\\\"\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. End Attempt\\\" \\n           data-validate=\\\"$notEmpty;\\\">\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/endAttemptInteraction/states/Question',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/endAttempt'\n], function(_, $, stateFactory, Question, formElement, formTpl){\n    'use strict';\n    var EndAttemptInteractionStateQuestion = stateFactory.extend(Question, function(){\n        \n        var $mainOption = this.widget.$container.find('.main-option'),\n            $original = this.widget.$original;\n        \n        //listener to children choice widget change and update the original interaction placehoder\n        $(document).on('choiceTextChange.qti-widget.question', function(){\n            $original.width($mainOption.width());\n        });\n\n    }, function(){\n        \n        $(document).off('.qti-widget.question');\n    });\n\n    EndAttemptInteractionStateQuestion.prototype.addNewChoiceButton = function(){};\n\n    EndAttemptInteractionStateQuestion.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            $title = _widget.$container.find('.endAttemptInteraction-placeholder'),\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n        \n        var restrictedIdentifiers = _prepareRestrictedIdentifier(_widget);\n        var hasRestrictedIdentifier = !!_.size(restrictedIdentifiers);\n        \n        $form.html(formTpl({\n            hasRestrictedIdentifier : hasRestrictedIdentifier,\n            restrictedIdentifiers : restrictedIdentifiers,\n            responseSerial : response.serial,\n            responseIdentifier : interaction.attr('responseIdentifier'),\n            title : interaction.attr('title')\n        }));\n\n        formElement.initWidget($form);\n\n        formElement.setChangeCallbacks($form, interaction, {\n            title : function(interaction, title){\n                interaction.attr('title', title);\n                $title.html(title);\n                _widget.$original.html(title);\n            },\n            responseIdentifier : function(interaction, identifier){\n                //directly save the validate response identifier (it went throught the validator so we know it is unique)\n                response.id(identifier);\n                //sync the response identifier in the interaction\n                interaction.attr('responseIdentifier', identifier);\n            },\n            restrictedIdentifier : function(interaction, identifier){\n                //generate a response from that identifier (because might not be unique\n                response.buildIdentifier(identifier, false);\n                //sync the response identifier in the interaction\n                interaction.attr('responseIdentifier', response.id());\n            }\n        });\n    };\n    \n    /**\n     * Prepare the restricted identifiers to be used \n     * (when the option in configuration \"responseIdentifiers\" is set)\n     * \n     * @param {Object} widget\n     * @returns {Object}\n     */\n    function _prepareRestrictedIdentifier(widget){\n        \n        var ret = {},\n            interaction = widget.element,\n            response = interaction.getResponseDeclaration(),\n            responseIdentifier = interaction.attr('responseIdentifier'),\n            config = widget.options.config,\n            defaultIdentifier = '',\n            isset = '',\n            i = 0;\n        \n        //only execute the code when the config option is set \"responseIdentifiers\"\n        if(config && config.responseIdentifiers){\n            \n            _.forIn(config.responseIdentifiers, function(title, identifier){\n                \n                //store the first identifier as the default one\n                if(!i){\n                    defaultIdentifier = identifier;\n                }\n                \n                //considered selected when match the pattern RESPONSE_STUFF === RESPONSE_STUFF_2 === RESPONSE_STUFF_3\n                var selected = responseIdentifier.match(new RegExp('^('+identifier+')(_[0-9]*)?$'));\n                \n                //prepare the template data\n                ret[identifier] = {\n                    identifier : identifier,\n                    title : title,\n                    selected : selected\n                };\n                \n                if(selected){\n                    isset = true;\n                }\n                \n                i++;\n            });\n            \n            //if none of the authorized identifier is set, set the first one\n            if(!isset){\n                //directly save the validate response identifier (it went throught the validator so we know it is unique)\n                response.buildIdentifier(defaultIdentifier, false);\n                //sync the response identifier in the interaction\n                interaction.attr('responseIdentifier', response.id());\n            }\n        }\n        return ret;\n    }\n    \n    return EndAttemptInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/endAttemptInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/endAttemptInteraction/states/Question'\n], function(factory, states){\n    'use strict';\n    return factory.createBundle(states, arguments, ['answer', 'correct', 'map']);\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/endAttemptInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"widget-box widget-inline widget-endAttemptInteraction qti-interaction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-edit=\\\"active\\\">\\r\\n    <span class=\\\"btn small btn-info endAttemptInteraction-placeholder\\\">\\r\\n        \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\r\\n    </span>\\r\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/endAttemptInteraction/Widget',[\n    'lodash',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/endAttemptInteraction/states/states',\n    'tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/endAttemptInteraction'\n], function(_, InteractionWidget, states, interactionTpl){\n    'use strict';\n    var EndAttemptInteractionWidget = InteractionWidget.clone();\n    \n    /**\n     * Init the creator\n     */\n    EndAttemptInteractionWidget.initCreator = function(){\n\n        this.registerStates(states);\n\n        InteractionWidget.initCreator.call(this);\n\n        //remove toolbar title, because it is too large\n        this.$container.find('.tlb-title').remove();\n    };\n    \n    /**\n     * Render the interaction widget from template\n     * \n     * @returns {Object}\n     */\n    EndAttemptInteractionWidget.renderInteraction = function(){\n\n        var interaction = this.element,\n            tplData = {\n            tag : interaction.qtiClass,\n            serial : interaction.serial,\n            attributes : interaction.attributes\n        };\n\n        return interactionTpl(tplData);\n    };\n    \n    /**\n     * Prepare and define the end attempt interaction widget container\n     */\n    EndAttemptInteractionWidget.buildContainer = function(){\n        var previous, next;\n        //add a space to be able to place the cursor before and after it.\n        if(this.$original.length){\n            previous = this.$original[0].previousSibling;\n            next = this.$original[0].nextSibling;\n\n            if(!previous || (previous.nodeType === 3 && previous.nodeValue === '') || previous.nodeType !== 3){\n                this.$original.before('&nbsp;');\n            }\n            if(!next || (next.nodeType === 3 && next.nodeValue === '') || next.nodeType !== 3){\n                this.$original.after('&nbsp;');\n            }\n        }\n\n        //set the itemContainer where the actual widget should be append and be positioned absolutely\n        this.$itemContainer = this.$original.parents('.item-editor-item');\n\n        //prepare html: interaction & choices:\n        this.$itemContainer.append(this.renderInteraction());\n        \n        this.$container = this.$itemContainer.find('.widget-endAttemptInteraction[data-serial=' + this.element.getSerial() + ']');\n    };\n\n    return EndAttemptInteractionWidget;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/endAttemptInteraction.placeholder', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"widget-box btn small btn-info endAttemptInteraction-placeholder\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"endAttemptInteraction\\\">\\n    \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/renderers/interactions/EndAttemptInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/EndAttemptInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/endAttemptInteraction/Widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/endAttemptInteraction.placeholder'\n], function($, _, EndAttemptInteraction, EndAttemptInteractionWidget, tpl){\n    'use strict';\n    var CreatorEndAttemptInteraction = _.clone(EndAttemptInteraction);\n\n    CreatorEndAttemptInteraction.template = tpl;\n    \n    /**\n     * Render the end attempt interaction widget\n     * \n     * @param {Object} interaction - the qti js object\n     * @param {Object} options\n     * @returns {Object}\n     */\n    CreatorEndAttemptInteraction.render = function(interaction, options){\n        \n        //need to pass choice option form to the interaction widget because it will manage everything\n        options = options || {};\n        \n        //complete the option\n        var interactionsConfig = this.getOption('interactions');\n        if(interactionsConfig.endAttempt){\n            options.config = interactionsConfig.endAttempt;\n        }\n        \n        return EndAttemptInteractionWidget.build(\n            interaction,\n            $('.endAttemptInteraction-placeholder[data-serial=\"' + interaction.serial + '\"]'),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorEndAttemptInteraction;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/extendedTextInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n        \";\n  stack1 = (helper = helpers.equal || (depth0 && depth0.equal),options={hash:{},inverse:self.program(8, program8, data),fn:self.program(4, program4, data),data:data},helper ? helper.call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format), \"xhtml\", options) : helperMissing.call(depth0, \"equal\", ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format), \"xhtml\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        {!-- If there's an expected length or a max length --}}\\n        \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.expectedLength), {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.maxLength), {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.maxWords), {hash:{},inverse:self.noop,fn:self.program(16, program16, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  return buffer;\n  }\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n            \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.maxStringLoop), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  return buffer;\n  }\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n                <div class=\\\"text-container text-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" solid\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" name=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"_\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"\\\" contenteditable></div>\\n            \";\n  return buffer;\n  }\nfunction program6(depth0,data) {\n  \n  \n  return \" attributes.class\";\n  }\n\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n            \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.maxStringLoop), {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  return buffer;\n  }\nfunction program9(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n                <textarea class=\\\"text-container text-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" solid\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" name=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"_\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.patternMask), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"></textarea>\\n            \";\n  return buffer;\n  }\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"pattern=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.patternMask)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program12(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n            <div class=\\\"text-counter\\\">\\n                <span class=\\\"count-chars\\\">0</span> \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"of\", options) : helperMissing.call(depth0, \"__\", \"of\", options)))\n    + \" \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.expectedLength)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"chars\", options) : helperMissing.call(depth0, \"__\", \"chars\", options)))\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"recommanded\", options) : helperMissing.call(depth0, \"__\", \"recommanded\", options)))\n    + \".\\n            </div>\\n        \";\n  return buffer;\n  }\n\nfunction program14(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n            <div class=\\\"text-counter\\\">\\n                <span class=\\\"count-chars\\\">0</span> \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"of\", options) : helperMissing.call(depth0, \"__\", \"of\", options)))\n    + \" \";\n  if (helper = helpers.maxLength) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxLength); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"chars\", options) : helperMissing.call(depth0, \"__\", \"chars\", options)))\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"maximum\", options) : helperMissing.call(depth0, \"__\", \"maximum\", options)))\n    + \".\\n            </div>\\n        \";\n  return buffer;\n  }\n\nfunction program16(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n            <div class=\\\"text-counter\\\">\\n                <span class=\\\"count-words\\\">0</span> \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"of\", options) : helperMissing.call(depth0, \"__\", \"of\", options)))\n    + \" \";\n  if (helper = helpers.maxWords) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxWords); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"words\", options) : helperMissing.call(depth0, \"__\", \"words\", options)))\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"maximum\", options) : helperMissing.call(depth0, \"__\", \"maximum\", options)))\n    + \".\\n            </div>\\n        \";\n  return buffer;\n  }\n\nfunction program18(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n        \";\n  stack1 = (helper = helpers.equal || (depth0 && depth0.equal),options={hash:{},inverse:self.program(21, program21, data),fn:self.program(19, program19, data),data:data},helper ? helper.call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format), (depth0 && depth0.xhtml), options) : helperMissing.call(depth0, \"equal\", ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format), (depth0 && depth0.xhtml), options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \\n        \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.expectedLength), {hash:{},inverse:self.noop,fn:self.program(23, program23, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.maxLength), {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.maxWords), {hash:{},inverse:self.noop,fn:self.program(16, program16, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  return buffer;\n  }\nfunction program19(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n            <div class=\\\"text-container text-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" solid\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" contenteditable></div>\\n        \";\n  return buffer;\n  }\n\nfunction program21(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n            <textarea class=\\\"text-container text-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" solid\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.patternMask), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"></textarea>\\n        \";\n  return buffer;\n  }\n\nfunction program23(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n            <div class=\\\"text-counter\\\">\\n                <span class=\\\"count-chars\\\">0</span> \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"of\", options) : helperMissing.call(depth0, \"__\", \"of\", options)))\n    + \" \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.expectedLength)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"chars\", options) : helperMissing.call(depth0, \"__\", \"chars\", options)))\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"recommended\", options) : helperMissing.call(depth0, \"__\", \"recommended\", options)))\n    + \".\\n            </div>\\n        \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-extendedTextInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"extendedTextInteraction\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.multiple), {hash:{},inverse:self.program(18, program18, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/extendedTextInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'ckeditor',\n    'ui/ckeditor/ckConfigurator',\n    'polyfill/placeholders'\n], function($, _, __, tpl, containerHelper, instructionMgr, ckEditor ,ckConfigurator){\n    'use strict';\n\n    /**\n     * Setting the pattern mask for the input, for browsers which doesn't support this feature\n     * @param {jQuery} $element\n     * @param {string} pattern\n     * @returns {undefined}\n     */\n    var _setPattern = function($element, pattern){\n        var patt = new RegExp('^'+pattern+'$');\n\n        //test when some data is entering in the input field\n        //@todo plug the validator + tooltip\n        $element.on('keyup', function(){\n            $element.removeClass('field-error');\n            if(!patt.test($element.val())){\n                $element.addClass('field-error');\n            }\n        });\n    };\n\n    /**\n     * Whether or not multiple strings are expected from the candidate to\n     * compose a valid response.\n     *\n     * @param {object} interaction\n     * @returns {boolean}\n     */\n    var _isMultiple = function(interaction) {\n        var attributes = interaction.getAttributes();\n        var response = interaction.getResponseDeclaration();\n        return !!(attributes.maxStrings && (response.attr('cardinality') === 'multiple' || response.attr('cardinality') === 'ordered'));\n    };\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10296\n     *\n     * @param {object} interaction\n     */\n    var render = function(interaction){\n\n        var $container = containerHelper.get(interaction);\n        var attributes = interaction.getAttributes();\n\n        var response = interaction.getResponseDeclaration();\n        var multiple = _isMultiple(interaction);\n\n        var $el, expectedLength, expectedLines, placeholderType;\n\n        // ckEditor config event.\n        ckEditor.on('instanceCreated', function(event) {\n            var editor = event.editor,\n                toolbarType = 'extendedText';\n\n            editor.on('configLoaded', function(e) {\n                editor.config = ckConfigurator.getConfig(editor, toolbarType, ckeOptions);\n                editor.disableAutoInline = false; // NOT A GOOD IDEA, JUST TRY\n            });\n\n            editor.on('change', function(e) {\n                containerHelper.triggerResponseChangeEvent(interaction, {});\n            });\n        });\n\n\n        // if the input is textarea\n        if (!multiple) {\n            $el = $container.find('textarea');\n            var ckeOptions = {\n               extraPlugins: 'confighelper',\n               resize_enabled: true\n            };\n            //setting the placeholder for the textarea\n            if (attributes.placeholderText) {\n                $el.attr('placeholder', attributes.placeholderText);\n            }\n            // Enable ckeditor only if text format is 'xhtml'.\n            if (_getFormat(interaction) === 'xhtml') {\n                // replace the textarea with ckEditor\n                var editor = ckEditor.replace($container.find('.text-container')[0], ckeOptions);\n                // store the instance inside data on the container\n                $container.data('editor', editor);\n            }\n            else {\n                $el.bind('keyup change', function(e) {\n                    containerHelper.triggerResponseChangeEvent(interaction, {});\n                });\n            }\n            if (attributes.expectedLength || attributes.expectedLines || attributes.patternMask) {\n                var $textarea = $('.text-container', $container),\n                    $charsCounter = $('.count-chars',$container),\n                    $wordsCounter = $('.count-words',$container);\n\n                if (attributes.patternMask !== \"\") {\n                    var maxWords = _parsePattern(attributes.patternMask, 'words'),\n                        maxLength = _parsePattern(attributes.patternMask, 'chars');\n                    maxWords = (isNaN(maxWords)) ? undefined : maxWords;\n                    maxLength = (isNaN(maxLength) ? undefined : maxLength);\n                }\n\n                /**\n                 * Prevent the user to enter more text (words or char) than the limit allow\n                 * @param  {event} evt the event that is trigged and which call this function\n                 */\n                var limitUserInput = function(evt){\n                    /**\n                     * store the keycode regardless the format of the interaction\n                     * @type {Number}\n                     */\n                    var keys = [\n                        32, // space\n                        13, // enter\n                        2228237, // shift + enter in ckEditor\n                    ];\n                    var keyCode = (typeof evt.data !== \"undefined\") ? evt.data.keyCode : evt.which ;\n                    if ((maxWords && getWordsCount() >= maxWords && _.contains(keys,keyCode)) || (maxLength && getCharsCount() >= maxLength)){\n                        if (typeof evt.cancel !== \"undefined\"){\n                            evt.cancel();\n                        }else {\n                            evt.preventDefault();\n                        }\n                        if(maxLength){\n                            var value = _getTextareaValue(interaction);\n                            setText(interaction,value);\n                        }\n                    }\n                    updateCounter();\n                };\n\n                /**\n                 * Update the rendering of the counters\n                 */\n                var updateCounter = function(){\n                    $charsCounter.text(getCharsCount());\n                    $wordsCounter.text(getWordsCount());\n                };\n\n                /**\n                 * Get the number of words that are actually written in the response field\n                 * @return {Number} number of words\n                 */\n                var getWordsCount = function(){\n                    var value = _getTextareaValue(interaction);\n                    return value.replace(/\\s+/gi, ' ').split(' ').length;\n                };\n\n                /**\n                 * Get the number of characters that are actually written in the response field\n                 * @return {Number} number of characters\n                 */\n                var getCharsCount = function(){\n                    var value = _getTextareaValue(interaction);\n                    return value.length;\n                };\n\n                /**\n                 * Keycode to ignore\n                 * @type {Array}\n                 */\n                var keycodes = [\n                    8, // backspace\n                    222832, // Shift + backspace in ckEditor\n                    1114120, // Ctrl + backspace in ckEditor\n                    1114177, // Ctrl + a in ckEditor\n                    1114202, // Ctrl + z in ckEditor\n                    1114200, // Ctrl + x in ckEditor\n                ];\n\n                if (_getFormat(interaction) === \"xhtml\") {\n                    _ckEditor(interaction).on('key',function(e){\n                        if (_.contains(keycodes,e.data.keyCode)){\n                            updateCounter();\n                        }else{\n                            limitUserInput(e);\n                        }\n                    });\n                }else{\n                    $textarea.on('keydown',function(e){\n                       if (_.contains(keycodes,e.which)){\n                            updateCounter();\n                        }else{\n                            limitUserInput(e);\n                        }\n                    });\n                }\n\n            }\n        }\n        else {\n            $el = $container.find('input');\n\n            //setting the checking for minimum number of answers\n            if (attributes.minStrings) {\n\n                //get the number of filled inputs\n                var _getNumStrings = function($element) {\n\n                    var num = 0;\n\n                    $element.each(function() {\n                        if ($(this).val() !== '') {\n                            num++;\n                        }\n                    });\n\n                    return num;\n                };\n\n                var minStrings = parseInt(attributes.minStrings);\n\n                if (minStrings > 0) {\n\n                    $el.on('blur', function() {\n                        setTimeout(function() {\n                            //checking if the user was clicked outside of the input fields\n\n                            //TODO remove notifications in favor of instructions\n\n                            if (!$el.is(':focus') && _getNumStrings($el) < minStrings) {\n                                instructionMgr.appendNotification(interaction, __('The minimum number of answers is ') + ' : ' + minStrings, 'warning');\n                            }\n                        }, 100);\n                    });\n                }\n            }\n\n            //set the fields width\n            if (attributes.expectedLength) {\n                expectedLength = parseInt(attributes.expectedLength, 10);\n\n                if (expectedLength > 0) {\n                    $el.each(function() {\n                        $(this).css('width', expectedLength + 'em');\n                    });\n                }\n            }\n\n            //set the fileds pattern mask\n            if (attributes.patternMask) {\n                $el.each(function() {\n                    _setPattern($(this), attributes.patternMask);\n                });\n            }\n\n            //set the fileds placeholder\n            if (attributes.placeholderText) {\n                /**\n                 * The type of the fileds placeholder:\n                 * multiple - set placeholder for each field\n                 * first - set placeholder only for first field\n                 * none - dont set placeholder\n                 */\n                placeholderType = 'first';\n\n                if (placeholderType === 'multiple') {\n                    $el.each(function() {\n                        $(this).attr('placeholder', attributes.placeholderText);\n                    });\n                }\n                else if (placeholderType === 'first') {\n                    $el.first().attr('placeholder', attributes.placeholderText);\n                }\n            }\n        }\n    };\n\n    /**\n     * Reset the textarea / ckEditor\n     * @param  {object} interaction the interaction\n     */\n    var resetResponse = function(interaction) {\n        if (_getFormat(interaction) === 'xhtml') {\n            _ckEditor(interaction).setData('');\n        }else{\n            containerHelper.get(interaction).find('input, textarea').val('');\n        }\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10296\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response) {\n\n        var _setMultipleVal = function(identifier, value) {\n            interaction.getContainer().find('#'+identifier).val(value);\n        };\n\n        var _setVal = function(value) {\n            interaction.getContainer().find('textarea').val(value);\n        };\n\n        var baseType = interaction.getResponseDeclaration().attr('baseType');\n\n        if (response.base && response.base[baseType] !== undefined) {\n            _setVal(response.base[baseType]);\n        }\n        else if (response.list && response.list[baseType]) {\n\n            for (var i in response.list[baseType]) {\n                var serial = (response.list.serial === undefined) ? '' : response.list.serial[i];\n                _setMultipleVal(serial + '_' + i, response.list[baseType][i]);\n            }\n\n        }\n        else {\n            throw new Error('wrong response format in argument.');\n        }\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10296\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction) {\n\n        var $container = containerHelper.get(interaction);\n        var attributes = interaction.getAttributes();\n        var responseDeclaration = interaction.getResponseDeclaration();\n        var baseType = responseDeclaration.attr('baseType');\n        var numericBase = attributes.base || 10;\n        var multiple = !!(attributes.maxStrings && (responseDeclaration.attr('cardinality') === 'multiple' || responseDeclaration.attr('cardinality') === 'ordered'));\n        var ret = multiple ? {list:{}} : {base:{}};\n\n        if (multiple) {\n\n            var values = [];\n\n            $container.find('input').each(function(i) {\n\n                var $el = $(this);\n\n                if (attributes.placeholderText && $el.val() === attributes.placeholderText) {\n                    values[i] = '';\n                }\n                else {\n                    if (baseType === 'integer') {\n                        values[i] = parseInt($el.val(), numericBase);\n                        values[i] = isNaN(values[i]) ? '' : values[i];\n                    }\n                    else if(baseType === 'float') {\n                        values[i] = parseFloat($el.val());\n                        values[i] = isNaN(values[i]) ? '' : values[i];\n                    }\n                    else if(baseType === 'string') {\n                        values[i] = $el.val();\n                    }\n                }\n            });\n\n            ret.list[baseType] = values;\n        }\n        else {\n\n            var value = '';\n\n            if (attributes.placeholderText && _getTextareaValue(interaction) === attributes.placeholderText) {\n                value = '';\n            }\n            else {\n\n                if (baseType === 'integer') {\n                    value = parseInt(_getTextareaValue(interaction), numericBase);\n                }\n                else if (baseType === 'float') {\n                    value = parseFloat(_getTextareaValue(interaction));\n                }\n                else if (baseType === 'string') {\n                    value = _getTextareaValue(interaction);\n                }\n            }\n\n            ret.base[baseType] = isNaN(value) && typeof value === 'number' ? '' : value;\n        }\n\n        return ret;\n    };\n\n    /**\n     * return the value of the textarea or ckeditor data\n     * @param  {Object} interaction\n     * @return {String}             the value\n     */\n    var _getTextareaValue = function(interaction) {\n        if (_getFormat(interaction) === 'xhtml') {\n            return _ckEditorData(interaction);\n        }\n        else {\n            return containerHelper.get(interaction).find('textarea').val();\n        }\n    };\n\n    /**\n     * return the ckEditor instance\n     * @param  {object} interaction the interaction\n     * @return {object}             ckeditor instance\n     */\n    var _ckEditor = function(interaction){\n        return containerHelper.get(interaction).data('editor');\n    };\n\n    /**\n     * get the text content of the ckEditor ( not the entire html )\n     * @param  {object} interaction the interaction\n     * @return {string}             text content of the ckEditor\n     */\n    var _ckEditorData = function(interaction) {\n        var tempNode = document.createElement('div');\n        tempNode.innerHTML = _ckEditor(interaction).getData();\n        return  tempNode.textContent;\n    };\n\n    var _getFormat = function(interaction) {\n        var format = interaction.attr('format');\n\n        switch (format) {\n            case 'plain':\n            case 'xhtml':\n            case 'preformatted':\n                return format;\n            default:\n                return 'plain';\n        }\n    };\n\n    /**\n     * parse the pattern (idealy from patternMask) and return the max words / chars from the pattern\n     * @param  {String} pattern String from patternMask\n     * @param  {String} type    the type of information you want : words / chars\n     * @return {Number|null}    the number extracted of the pattern, or null if not found\n     */\n    var _parsePattern = function(pattern,type){\n        if (pattern === undefined){return null;}\n\n        var regexChar = /\\^\\[\\\\s\\\\S\\]\\{\\d+\\,(\\d+)\\}\\$/,\n        regexWords =  /\\^\\(\\?\\:\\(\\?\\:\\[\\^\\\\s\\\\:\\\\!\\\\\\?\\\\\\;\\\\\\\\\\\\\\]\\+\\)\\[\\\\s\\\\:\\\\!\\\\\\?\\\\;\\\\\\\\\\\\\\]\\*\\)\\{\\d+\\,(\\d+)\\}\\$/,\n        result;\n\n        if (type === \"words\") {\n            result = pattern.match(regexWords);\n            if (result !== null && result.length > 1) {\n                return parseInt(result[1],10);\n            }else{\n                return null;\n            }\n        }else if (type === \"chars\"){\n            result = pattern.match(regexChar);\n\n            if (result !== null && result.length > 1) {\n                return parseInt(result[1],10);\n            }else{\n                return null;\n            }\n        }else{\n            return null;\n        }\n    };\n\n    var updateFormat = function(interaction, from) {\n        var ckeOptions = {};\n        var $container = containerHelper.get(interaction);\n\n        if ( _getFormat(interaction) === 'xhtml') {\n            var editor = ckEditor.replace($container.find('.text-container')[0], ckeOptions);\n            $container.data('editor', editor);\n        }\n        else {\n            // preFormatted or plain\n            if (from === 'xhtml') {\n                _ckEditor(interaction).destroy();\n            }\n            if ( _getFormat(interaction) === 'preformatted'){\n                $container.find('textarea').addClass('text-preformatted');\n            } else{\n                $container.find('textarea').removeClass('text-preformatted');\n            }\n        }\n    };\n\n    var enable = function(interaction) {\n        var ckeOptions = {};\n        var $container = containerHelper.get(interaction);\n        $container.find('input, textarea').removeAttr('disabled');\n\n        if ( _getFormat(interaction) === 'xhtml') {\n            _ckEditor(interaction).readOnly = false;\n        }\n    };\n\n    var disable = function(interaction) {\n        var $container = containerHelper.get(interaction);\n        $container.find('input, textarea').attr('disabled', 'disabled');\n\n        if ( _getFormat(interaction) === 'xhtml' && $container.data('editor')) {\n            _ckEditor(interaction).readOnly = true;\n        }\n    };\n\n    var clearText = function(interaction) {\n        setText(interaction, '');\n    };\n\n    var setText = function(interaction, text) {\n        var $container = containerHelper.get(interaction);\n\n        if ( _getFormat(interaction) === 'xhtml') {\n            var editor = _ckEditor(interaction);\n            editor.setData(text);\n        }\n        else {\n            $container.find('textarea').val(text);\n        }\n    };\n\n     /**\n     * Clean interaction destroy\n     * @param {Object} interaction\n     */\n    var destroy = function(interaction){\n\n        var $container = containerHelper.get(interaction);\n\n        //remove event\n        $(document).off('.commonRenderer');\n\n        //remove instructions\n        instructionMgr.removeInstructions(interaction);\n\n        //remove all references to a cache container\n        containerHelper.reset(interaction);\n    };\n\n    /**\n     * Set the interaction state. It could be done anytime with any state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {Object} state - the interaction state\n     */\n    var setState  = function setState(interaction, state){\n        if(_.isObject(state)){\n            if(state.response){\n                interaction.resetResponse();\n                interaction.setResponse(state.response);\n            }\n        }\n    };\n\n    /**\n     * Get the interaction state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the interaction current state\n     */\n    var getState = function getState(interaction){\n        var $container;\n        var state =  {};\n        var response =  interaction.getResponse();\n\n        if(response){\n            state.response = response;\n        }\n        return state;\n    };\n\n    var getCustomData = function(interaction, data){\n        var pattern = interaction.attr('patternMask'),\n            maxWords = parseInt(_parsePattern(pattern,'words')),\n            maxLength = parseInt(_parsePattern(pattern, 'chars')),\n            expectedLength = parseInt(interaction.attr('expectedLines'),10);\n        return _.merge(data || {}, {\n            maxWords : (! isNaN(maxWords)) ? maxWords : undefined,\n            maxLength : (! isNaN(maxLength)) ? maxLength : undefined,\n            attributes : (! isNaN(expectedLength)) ? { expectedLength :  expectedLength * 72} : undefined\n        });\n\n    };\n\n    /**\n     * Expose the common renderer for the extended text interaction\n     * @exports qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction\n     */\n    return {\n        qtiClass : 'extendedTextInteraction',\n        template : tpl,\n        render : render,\n        getContainer : containerHelper.get,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        getData : getCustomData,\n        resetResponse : resetResponse,\n        destroy : destroy,\n        getState : getState,\n        setState : setState,\n\n        updateFormat : updateFormat,\n        enable : enable,\n        disable : disable,\n        clearText : clearText,\n        setText : setText\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/extendedText', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    \t\t<option value=\\\"\"\n    + escapeExpression(((stack1 = (data == null || data === false ? data : data.key)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.selected), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n    \t\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  \n  return \"selected=\\\"selected\\\"\";\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n            <option value=\\\"\"\n    + escapeExpression(((stack1 = (data == null || data === false ? data : data.key)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.selected), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n        \";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  \n  return \"style=\\\"display:none\\\"\";\n  }\n\nfunction program8(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.patternMask) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.patternMask); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  return escapeExpression(stack1);\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"value=\\\"\";\n  if (helper = helpers.maxLength) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxLength); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program12(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"value=\\\"\";\n  if (helper = helpers.maxWords) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxWords); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program14(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.expectedLength) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.expectedLength); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  return escapeExpression(stack1);\n  }\n\nfunction program16(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.expectedLines) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.expectedLines); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  return escapeExpression(stack1);\n  }\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"format\\\" class=\\\"spinner\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Format\", options) : helperMissing.call(depth0, \"__\", \"Format\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Used to control the format of the text entered by the candidate.\", options) : helperMissing.call(depth0, \"__\", \"Used to control the format of the text entered by the candidate.\", options)))\n    + \"</span>\\n    <select name=\\\"format\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n    \t\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.formats), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </select>\\n</div>\\n<hr>\\n<div class=\\\"panel\\\">\\n    <h3 class=\\\"full-width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Contraints\", options) : helperMissing.call(depth0, \"__\", \"Contraints\", options)))\n    + \"</h3>\\n    <select name=\\\"constraint\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.constraints), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </select>\\n</div>\\n<div class=\\\"panel extendedText\\\">\\n    \\n    <div id=\\\"constraint-pattern\\\" \";\n  stack1 = helpers.unless.call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.constraints)),stack1 == null || stack1 === false ? stack1 : stack1.pattern)),stack1 == null || stack1 === false ? stack1 : stack1.selected), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n        <label>\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"pattern\", options) : helperMissing.call(depth0, \"__\", \"pattern\", options)))\n    + \"\\n        </label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If given, the pattern mask specifies a regular expression that the candidate's response must match in order to be considered valid\", options) : helperMissing.call(depth0, \"__\", \"If given, the pattern mask specifies a regular expression that the candidate's response must match in order to be considered valid\", options)))\n    + \"</span>\\n        <input type=\\\"text\\\" name=\\\"patternMask\\\" value=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.patternMask), {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"/>\\n    </div>\\n    \\n    <div id=\\\"constraint-maxLength\\\" \";\n  stack1 = helpers.unless.call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.constraints)),stack1 == null || stack1 === false ? stack1 : stack1.maxLength)),stack1 == null || stack1 === false ? stack1 : stack1.selected), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n        <label class=\\\"spinner\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Max length\", options) : helperMissing.call(depth0, \"__\", \"Max length\", options)))\n    + \"\\n        </label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"We will use the patternMask to do this, to be compliant with the IMS standard\", options) : helperMissing.call(depth0, \"__\", \"We will use the patternMask to do this, to be compliant with the IMS standard\", options)))\n    + \"</span>\\n        <input type=\\\"text\\\" data-min=\\\"0\\\" data-increment=\\\"1\\\" class=\\\"incrementer\\\" name=\\\"maxLength\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.maxLength), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" />\\n    </div>\\n    \\n    <div id=\\\"constraint-maxWords\\\" \";\n  stack1 = helpers.unless.call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.constraints)),stack1 == null || stack1 === false ? stack1 : stack1.maxWords)),stack1 == null || stack1 === false ? stack1 : stack1.selected), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n        <label class=\\\"spinner\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Max words\", options) : helperMissing.call(depth0, \"__\", \"Max words\", options)))\n    + \"\\n        </label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"We will use the patternMask to do this, to be compliant with the IMS standard\", options) : helperMissing.call(depth0, \"__\", \"We will use the patternMask to do this, to be compliant with the IMS standard\", options)))\n    + \"</span>\\n        <input type=\\\"text\\\" data-min=\\\"0\\\" data-increment=\\\"1\\\" class=\\\"incrementer\\\" name=\\\"maxWords\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.maxWords), {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n    </div>\\n</div>\\n<hr>\\n<div class=\\\"panel extendedText\\\">\\n    <h3 class=\\\"full-width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Recommendations\", options) : helperMissing.call(depth0, \"__\", \"Recommendations\", options)))\n    + \"</h3>\\n    <label class=\\\"spinner\\\">\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Length\", options) : helperMissing.call(depth0, \"__\", \"Length\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Provides a hint to the candidate as to the expected overall length of the desired response measured in number of characters.\", options) : helperMissing.call(depth0, \"__\", \"Provides a hint to the candidate as to the expected overall length of the desired response measured in number of characters.\", options)))\n    + \"</span>\\n    <input type=\\\"text\\\" data-min=\\\"0\\\" data-increment=\\\"1\\\" class=\\\"incrementer\\\" name=\\\"expectedLength\\\" value=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.expectedLength), {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"/>\\n    <label for=\\\"\\\" class=\\\"spinner\\\">\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Lines\", options) : helperMissing.call(depth0, \"__\", \"Lines\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Provides a hint to the candidate as to the expected number of lines of input required. A line is expected to have about 72 characters.\", options) : helperMissing.call(depth0, \"__\", \"Provides a hint to the candidate as to the expected number of lines of input required. A line is expected to have about 72 characters.\", options)))\n    + \"</span>\\n    <input type=\\\"text\\\" class=\\\"incrementer\\\" data-min=\\\"0\\\" data-increment=\\\"1\\\" name=\\\"expectedLines\\\" value=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.expectedLines), {hash:{},inverse:self.noop,fn:self.program(16, program16, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Question',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/extendedText'\n], function($, _, __, stateFactory, Question, formElement, renderer, formTpl){\n    'use strict';\n    var initState = function initState(){\n        // Disable inputs until response edition.\n        renderer.disable(this.widget.element);\n    };\n\n    var exitState = function exitState(){\n        // Enable inputs until response edition.\n        renderer.enable(this.widget.element);\n    };\n    var regexChar = /\\^\\[\\\\s\\\\S\\]\\{\\d+\\,(\\d+)\\}\\$/,\n        regexWords =  /\\^\\(\\?\\:\\(\\?\\:\\[\\^\\\\s\\\\:\\\\!\\\\\\?\\\\\\;\\\\\\\\\\\\\\]\\+\\)\\[\\\\s\\\\:\\\\!\\\\\\?\\\\;\\\\\\\\\\\\\\]\\*\\)\\{\\d+\\,(\\d+)\\}\\$/;\n\n    var ExtendedTextInteractionStateQuestion = stateFactory.extend(Question, initState, exitState);\n\n    function parsePattern(pattern,type){\n        if (pattern === undefined || pattern === null){\n            return null;\n        }\n        if (type === \"words\") {\n            //expre = /^(?:(?:[^\\s\\:\\!\\?\\;\\\\]+)[\\s\\:\\!\\?\\;\\\\]*){0,3}$/;\n            var result = pattern.match(regexWords);\n\n            if (result !== null && result.length > 1) {\n                return result[1];\n            }else{\n                return null;\n            }\n        }else if (type === \"chars\"){\n            // This is the original regExp generated by our code\n            // expre = /^[\\s\\S]{0,10}$/;\n            // and we will try to extract the top limit from it with this regexp\n            // wich is mostly just escaped version of the first one.\n            var result = pattern.match(regexChar);\n\n            if (result !== null && result.length > 1) {\n                return result[1];\n            }else{\n                return null;\n            }\n        }else{\n            return null;\n        }\n    }\n\n    ExtendedTextInteractionStateQuestion.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element,\n            format = interaction.attr('format'),\n            patternMask = interaction.attr('patternMask'),\n            expectedLength = parseInt(interaction.attr('expectedLength'), 10),\n            expectedLines = parseInt(interaction.attr('expectedLines'),10),\n            maxWords = parseInt(parsePattern(patternMask,'words'),10),\n            maxChars = parseInt(parsePattern(patternMask,'chars'),10);\n\n        var formats = {\n            plain : {label : __(\"Plain text\"), selected : false},\n            preformatted : {label : __(\"Pre-formatted text\"), selected : false},\n            xhtml : {label : __(\"XHTML\"), selected : false}\n        };\n\n        var constraints = {\n            none : {label : __(\"None\"), selected : true},\n            maxLength : {label : __(\"Max Length\"), selected : false},\n            maxWords : {label : __(\"Max Words\"), selected : false},\n            pattern : {label : __(\"Pattern\"), selected : false}\n        };\n\n        /**\n         * Set the selected on the right items before sending it to the view for constraints\n         */\n        if ( !isNaN(maxWords) && maxWords > 0) {\n            constraints.none.selected = false;\n            constraints.maxWords.selected = true;\n        }else if (!isNaN(maxChars) && maxChars > 0) {\n            constraints.none.selected = false;\n            constraints.maxLength.selected = true;\n        }else if( patternMask !== null && patternMask !== undefined && patternMask !== \"\"){\n            constraints.none.selected = false;\n            constraints.pattern.selected = true;\n        }\n        /**\n         * Set the selected on the right items before sending it to the view for formats\n         */\n        if(formats[format]){\n            formats[format].selected = true;\n        }\n\n\n\n        $form.html(formTpl({\n            formats : formats,\n            patternMask : patternMask,\n            maxWords : maxWords,\n            maxLength : maxChars,\n            expectedLength : expectedLength,\n            expectedLines : expectedLines,\n            constraints : constraints\n\n        }));\n\n        formElement.initWidget($form);\n        //  init data change callbacks\n        var callbacks = {};\n\n        // -- format Callback\n        callbacks.format = function(interaction, attrValue){\n            var response = interaction.getResponseDeclaration();\n            var correctResponse = _.values(response.getCorrect());\n            var previousFormat = interaction.attr('format');\n\n            interaction.attr('format', attrValue);\n            renderer.updateFormat(interaction, previousFormat);\n\n            if(previousFormat === 'xhtml'){\n                if(typeof correctResponse[0] !== 'undefined'){\n                    // Get a correct response with all possible html tags removed.\n                    // (Why not let jquery do that :-) ?)\n                    response.setCorrect($('<p>' + correctResponse[0] + '</p>').text());\n                }\n            }\n        };\n        callbacks.constraint = function(interaction,attrValue){\n            $('[id|=\"constraint\"]').hide('500');\n            $('#constraint-' + attrValue).show('1000');\n            if (attrValue === \"none\") {\n                interaction.attr('patternMask',null);\n                $('[name=\"maxWords\"]').val('');\n                $('[name=\"maxLength\"]').val('');\n            }\n        };\n        callbacks.maxWords = function(interaction, attrValue){\n            // 1. Reset maxLength\n            $('[name=\"maxLength\"]').val('');\n            $('[name=\"patternMask\"]').val('');\n\n            var newValue = parseInt(attrValue,10);\n            if (! isNaN(newValue)) {\n                var newPattern = '/^(?:(?:[^\\\\s\\\\:\\\\!\\\\?\\\\;\\\\\\\\]+)[\\\\s\\\\:\\\\!\\\\?\\\\;\\\\\\\\]*){0,' + newValue.toString() + '}$/';\n                interaction.attr('patternMask', newPattern);\n            }\n        };\n        callbacks.maxLength = function(interaction, attrValue){\n            // 1. Reset maxWords\n            $('[name=\"maxWords\"]').val('');\n            $('[name=\"patternMask\"]').val('');\n\n            var newValue = parseInt(attrValue,10);\n            if(! isNaN(newValue)){\n                var newPattern ='/^[\\\\s\\\\S]{0,' + newValue.toString() + '}$/';\n                interaction.attr('patternMask', newPattern);\n            }\n        };\n        callbacks.patternMask = function(interaction, attrValue){\n            interaction.attr('patternMask', attrValue);\n            /**\n             * If anything is entered inside the patternMask, reset maxWords / maxLength(interaction, attrValue)\n             */\n            $('[name=\"maxWords\"]').val('');\n            $('[name=\"maxLength\"]').val('');\n        };\n\n        callbacks.expectedLength = function(interaction, attrValue){\n            var newValue = parseInt(attrValue,10);\n            if(! isNaN(newValue)){\n                interaction.attr('expectedLength', attrValue);\n            }else{\n                interaction.attr('expectedLength', -1);\n            }\n        };\n\n        callbacks.expectedLines = function(interactions, attrValue){\n            var newValue = parseInt(attrValue,10);\n            if(! isNaN(newValue)){\n                interaction.attr('expectedLines', attrValue);\n            }else{\n                interaction.attr('expectedLines',-1);\n            }\n        };\n\n        formElement.setChangeCallbacks($form, interaction, callbacks);\n    };\n\n    return ExtendedTextInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Answer',[\n'taoQtiItem/qtiCreator/widgets/states/factory',\n'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n    'use strict';\n    var ExtendedTextInteractionStateAnswer = stateFactory.extend(Answer, function(){\n\n        // By default, select the correct state when entering response edition.\n        this.widget.changeState('correct');\n\n    }, function(){\n\n    });\n    return ExtendedTextInteractionStateAnswer;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Correct',[\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager'\n], function(_, __,stateFactory, Correct, renderer, instructionMgr){\n\n    var ExtendedTextInteractionStateCorrect = stateFactory.create(Correct, function(){\n\n        _createResponseWidget(this.widget);\n\n    }, function(){\n\n        _destroyResponseWidget(this.widget);\n\n    });\n\n    var _createResponseWidget = function(widget){\n\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var correctResponse = _.values(response.getCorrect());\n\n        renderer.enable(interaction);\n        renderer.setText(interaction, correctResponse[0]);\n       \n        instructionMgr.appendInstruction(interaction, __('Please type the correct response below.'));\n        \n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            response.setCorrect([renderer.getResponse(interaction).base.string]);\n        });\n    };\n\n    var _destroyResponseWidget = function(widget){\n\n        var interaction = widget.element;\n        renderer.clearText(interaction);\n        \n        instructionMgr.removeInstructions(widget.element);\n        widget.$container.off('responseChange.qti-widget');\n    };\n\n    return ExtendedTextInteractionStateCorrect;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/states',[\n'taoQtiItem/qtiCreator/widgets/states/factory',\n'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n'taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Question',\n'taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Answer',\n'taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Correct',\n\n], function(factory, states){\n    'use strict';\n    return factory.createBundle(states, arguments);\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/Widget',[\n'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n'taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/states'\n], function(Widget, states){\n    'use strict';\n    var ExtendedTextInteractionWidget = Widget.clone();\n\n    ExtendedTextInteractionWidget.initCreator = function(){\n        this.registerStates(states);\n        Widget.initCreator.call(this);\n    };\n\n    return ExtendedTextInteractionWidget;\n});\n\n","define('taoQtiItem/qtiCreator/renderers/interactions/ExtendedTextInteraction',[\n'lodash',\n'taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction',\n'taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/Widget'\n], function(_, ExtendedTextInteraction,ExtendedTextInteractionWidget){\n    \n    var CreatorExtendedTextInteraction = _.clone(ExtendedTextInteraction);\n    \n    CreatorExtendedTextInteraction.render = function(interaction, options) {\n        \n        ExtendedTextInteraction.render(interaction);\n        \n        return ExtendedTextInteractionWidget.build(\n                interaction,\n                ExtendedTextInteraction.getContainer(interaction),\n                this.getOption('interactionOptionForm'),\n                this.getOption('responseOptionForm'),\n                options\n        );\n    };\n    \n    return CreatorExtendedTextInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/gapMatchInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-gapMatchInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"gapMatchInteraction\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <ul class=\\\"choice-area none block-listing solid horizontal source\\\" data-eyecatcher=\\\">li\\\">\\n        \";\n  options={hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </ul>\\n    <div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"qti-flow-container\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction',[\n    'lodash',\n    'i18n',\n    'jquery',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/gapMatchInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function(_, __, $, tpl, containerHelper, instructionMgr, pciResponse){\n    'use strict';\n\n    /**\n     * Global variable to count number of choice usages:\n     * @type {object}\n     */\n    var _choiceUsages = {};\n\n    var setChoice = function(interaction, $choice, $target){\n\n        var choiceSerial = $choice.data('serial'),\n            choice = interaction.getChoice(choiceSerial);\n\n        if(!_choiceUsages[choiceSerial]){\n            _choiceUsages[choiceSerial] = 0;\n        }\n        _choiceUsages[choiceSerial]++;\n\n        $target\n            .data('serial', choiceSerial)\n            .html($choice.html())\n            .addClass('filled');\n\n        if(!interaction.responseMappingMode &&\n            choice.attr('matchMax') &&\n            _choiceUsages[choiceSerial] >= choice.attr('matchMax')){\n\n            $choice.attr(\"class\", \"deactivated\");\n        }\n\n        containerHelper.triggerResponseChangeEvent(interaction);\n    };\n\n    var unsetChoice = function(interaction, $choice, animate){\n\n        var serial = $choice.data('serial');\n        var $container = containerHelper.get(interaction);\n\n        $container.find('.choice-area [data-serial=' + serial + ']').removeClass();\n\n        _choiceUsages[serial]--;\n\n        $choice\n            .removeClass('filled')\n            .removeData('serial')\n            .empty();\n\n        if(!interaction.swapping){\n            //set correct response\n            containerHelper.triggerResponseChangeEvent(interaction);\n        }\n    };\n\n    var getChoice = function(interaction, identifier){\n        var $container = containerHelper.get(interaction);\n        return $('.choice-area [data-identifier=' + identifier + ']', $container);\n    };\n\n    var getGap = function(interaction, identifier){\n        var $container = containerHelper.get(interaction);\n        return $('.qti-flow-container [data-identifier=' + identifier + ']', $container);\n    };\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10291\n     *\n     * @param {object} interaction\n     */\n    var render = function(interaction){\n\n        var $container = containerHelper.get(interaction);\n        var $choiceArea = $container.find('.choice-area'),\n            $flowContainer = $container.find('.qti-flow-container'),\n            $activeChoice = null;\n\n        var _getChoice = function(serial){\n            return $choiceArea.find('[data-serial=' + serial + ']');\n        };\n\n        var _setChoice = function($choice, $target){\n            return setChoice(interaction, $choice, $target);\n        };\n\n        var _resetSelection = function(){\n            if($activeChoice){\n                $flowContainer.find('.remove-choice').remove();\n                $activeChoice.removeClass('deactivated active');\n                $container.find('.empty').removeClass('empty');\n                $activeChoice = null;\n            }\n        };\n\n        var _unsetChoice = function($choice){\n            return unsetChoice(interaction, $choice);\n        };\n\n        var _isInsertionMode = function(){\n            return ($activeChoice && !$activeChoice.hasClass('filled'));\n        };\n\n        var _isModeEditing = function(){\n            return ($activeChoice && $activeChoice.hasClass('filled'));\n        };\n\n        $container.on('mousedown.commonRenderer', function(e){\n            _resetSelection();\n        });\n\n        $choiceArea.on('mousedown.commonRenderer', '>li', function(e){\n\n            e.stopPropagation();\n\n            if ( ($activeChoice && $(this).hasClass('active')) || $(this).hasClass('deactivated') ) {\n                e.preventDefault();\n                return;\n            }\n\n            _resetSelection();\n\n            $activeChoice = $(this).addClass('active');\n            $flowContainer.find('.gapmatch-content').addClass('empty');\n        });\n\n        $flowContainer.on('mousedown.commonRenderer', '.gapmatch-content', function(e){\n\n            e.stopPropagation();\n\n            if(_isInsertionMode()){\n\n                var $target = $(this),\n                    choiceSerial = $activeChoice.data('serial'),\n                    targetSerial = $target.data('serial');\n                    \n                if(targetSerial !== choiceSerial){\n\n                    //set choices:\n                    if(targetSerial){\n                        _unsetChoice($target);\n                    }\n\n                    _setChoice($activeChoice, $target);\n                }\n\n                $activeChoice.removeClass('active');\n                $container.find('.empty').removeClass('empty');\n                $activeChoice = null;\n\n            }else if(_isModeEditing()){\n\n                //editing mode:\n                var $target = $(this),\n                    targetSerial = $target.data('serial'),\n                    choiceSerial = $activeChoice.data('serial');\n\n                if(targetSerial !== choiceSerial){\n                    _unsetChoice($activeChoice);\n                    if(targetSerial){\n                        //swapping:\n                        _unsetChoice($target);\n                        _setChoice(_getChoice(targetSerial), $activeChoice);\n                    }\n                    _setChoice(_getChoice(choiceSerial), $target);\n                }\n\n                _resetSelection();\n\n            }else if($(this).data('serial') && $(this).hasClass('filled')){\n\n                //selecting a choice in editing mode:\n                var serial = $(this).data('serial');\n\n                $activeChoice = $(this);\n                $activeChoice.addClass('active');\n\n                $flowContainer.find('>li>div').filter(function(){\n                    return $(this).data('serial') !== serial;\n                }).addClass('empty');\n\n                $choiceArea.find('>li:not(.deactivated)').filter(function(){\n                    return $(this).data('serial') !== serial;\n                }).addClass('empty');\n\n                //append trash bin:\n                var $bin = $('<span>', {'class' : 'icon-undo remove-choice', 'title' : __('remove')});\n                $bin.on('mousedown', function(e){\n                    e.stopPropagation();\n                    _unsetChoice($activeChoice);\n                    _resetSelection();\n                });\n                $(this).append($bin);\n            }\n\n        });\n    };\n\n    var resetResponse = function(interaction){\n        var $container = containerHelper.get(interaction);\n\n        //restore selected choices:\n        $('.gapmatch-content .active', $container).trigger('mousedown.commonRenderer');\n        $('.gapmatch-content', $container).each(function(){\n            unsetChoice(interaction, $(this));\n        });\n    };\n\n    var _setPairs = function(interaction, pairs){\n\n        _.each(pairs, function(pair){\n            if(pair){\n                setChoice(interaction, getChoice(interaction, pair[0]), getGap(interaction, pair[1]).find('.gapmatch-content'));\n            }\n        });\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10291\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n        resetResponse(interaction);\n        _setPairs(interaction, pciResponse.unserialize(response, interaction));\n    };\n\n    var _getRawResponse = function(interaction){\n\n        var response = [];\n        var $container = containerHelper.get(interaction);\n        $('.gapmatch-content', $container).each(function(){\n            var choiceSerial = $(this).data('serial'),\n                pair = [];\n\n            if(choiceSerial){\n                pair.push(interaction.getChoice(choiceSerial).attr('identifier'));\n            }\n            pair.push($(this).data('identifier'));\n\n            if(pair.length === 2){\n                response.push(pair);\n            }\n        });\n        return response;\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10307\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n\n        return pciResponse.serialize(_getRawResponse(interaction), interaction);\n    };\n\n    var destroy = function(interaction){\n\n        var $container = containerHelper.get(interaction);\n\n        //remove event\n        $(document).off('.commonRenderer');\n        $container.off('.commonRenderer');\n        $container.find('.choice-area').off('.commonRenderer');\n        $container.find('.qti-flow-container').off('.commonRenderer');\n\n        //restore selection\n        $container.find('.gapmatch-content').empty();\n        $container.find('.active').removeClass('active');\n        $container.find('.remove-choice').remove();\n        $container.find('.empty').removeClass('empty');\n\n        //remove all references to a cache container\n        containerHelper.reset(interaction);\n    };\n\n    /**\n     * Set the interaction state. It could be done anytime with any state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {Object} state - the interaction state\n     */\n    var setState  = function setState(interaction, state){\n        var $container;\n\n        if(_.isObject(state)){\n            if(state.response){\n                interaction.resetResponse();\n                interaction.setResponse(state.response);\n            }\n\n            //restore order of previously shuffled choices\n            if(_.isArray(state.order) && state.order.length === _.size(interaction.getChoices())){\n\n                $container = containerHelper.get(interaction);\n\n                $('.choice-area .qti-choice', $container)\n                    .sort(function(a, b){\n                        var aIndex = _.indexOf(state.order, $(a).data('identifier'));\n                        var bIndex = _.indexOf(state.order, $(b).data('identifier'));\n                        if(aIndex > bIndex) {\n                            return 1;\n                        }\n                        if(aIndex < bIndex) {\n                            return -1;\n                        }\n                        return 0;\n                    })\n                    .detach()\n                    .appendTo($('.choice-area', $container));\n            }\n        }\n    };\n\n    /**\n     * Get the interaction state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the interaction current state\n     */\n    var getState = function getState(interaction){\n        var $container;\n        var state =  {};\n        var response =  interaction.getResponse();\n\n        if(response){\n            state.response = response;\n        }\n\n        //we store also the choice order if shuffled\n        if(interaction.attr('shuffle') === true){\n            $container = containerHelper.get(interaction);\n\n            state.order = [];\n            $('.choice-area .qti-choice', $container).each(function(){\n               state.order.push($(this).data('identifier'));\n            });\n        }\n        return state;\n    };\n\n    /**\n     * Expose the common renderer for the gapmatch interaction\n     * @exports qtiCommonRenderer/renderers/interactions/GapMatchInteraction\n     */\n    return {\n        qtiClass : 'gapMatchInteraction',\n        template : tpl,\n        render : render,\n        getContainer : containerHelper.get,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy,\n        setState : setState,\n        getState : getState\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/helpers/textWrapper',['jquery'], function($){\n\n    function getSelection(){\n\n        var selection;\n\n        if(window.getSelection){\n            selection = window.getSelection();\n        }else if(document.selection){\n            selection = document.selection.createRange();\n        }\n\n        return selection;\n    }\n\n    function containElement(selection, range){\n\n        if(range.commonAncestorContainer.nodeType === 1){\n            var selectedChildNodes = range.cloneContents().childNodes;\n            for (var i = 0; i < selectedChildNodes.length; i++){\n                if(selectedChildNodes[i].className && \n                   selectedChildNodes[i].className.indexOf(\"qti-choice\") > -1){\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    }\n\n    function wrapSelection(wrap){\n\n        var sel = getSelection();\n        if(sel.rangeCount){\n            var range = sel.getRangeAt(0).cloneRange();\n            if(range.startOffset !== range.endOffset && //prevent empty selection\n                range.toString().trim() && //prevent empty selection\n                !containElement(sel, range)\n                ){\n                        \n                range.surroundContents(wrap);\n                sel.removeAllRanges();\n                sel.addRange(range);\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    function unwrapSelection($editable){\n\n        $editable.trigger('beforeunwrap');\n\n        $editable.find('#selection-wrapper').replaceWith(function(){\n            return $(this).html();\n        });\n\n        $editable.trigger('unwrapped');\n    }\n\n    var textWrapper = {\n        create : function($editable){\n\n            //reset it first:\n            textWrapper.destroy($editable);\n\n            //add listeners:\n            $editable.on('mouseup.textwrapper', function(e){\n\n                var $target = $(e.target);\n                if($target.hasClass('html-editable-shield') || $target.hasClass('widget-box')){\n                    return;\n                }\n\n                var $wrapper = $('<span>', {id : 'selection-wrapper', 'class' : 'inline-text-wrapper'});\n                if(wrapSelection($wrapper[0])){\n                    var wrappedText = $wrapper.text().trim();\n                    $editable.trigger('wrapped', [$wrapper, wrappedText]);\n                }\n\n            }).on('mousedown.textwrapper', function(){\n\n                unwrapSelection($editable);\n\n            });\n\n        },\n        destroy : function($editable){\n\n            unwrapSelection($editable);\n            $editable.off('.textwrapper');\n        },\n        unwrap : function($editable){\n            unwrapSelection($editable);\n        }\n    };\n\n    return textWrapper;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'taoQtiItem/qtiCreator/widgets/helpers/content',\n    'taoQtiItem/qtiCreator/widgets/helpers/textWrapper',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/htmlEditorTrigger'\n], function($, stateFactory, Question, htmlEditor, gridContentHelper, htmlContentHelper, textWrapper, toolbarTpl){\n\n    var ContainerInteractionStateQuestion = stateFactory.extend(Question, function(){\n\n        this.buildEditor();\n\n    }, function(){\n\n        this.destroyTextWrapper();\n        this.destroyEditor();\n    });\n\n    ContainerInteractionStateQuestion.prototype.buildEditor = function(){\n\n        var _this = this,\n            _widget = this.widget,\n            container = _widget.element.getBody(),\n            $container = _widget.$container,\n            $editableContainer = $container.find('.qti-flow-container');\n\n        $editableContainer.attr('data-html-editable-container', true);\n\n        if(!htmlEditor.hasEditor($editableContainer)){\n\n            var $bodyTlb = $(toolbarTpl({\n                serial : _widget.serial,\n                state : 'question'\n            }));\n\n            //add toolbar once only:\n            $editableContainer.append($bodyTlb);\n            $bodyTlb.show();\n\n            //init text wrapper\n            _this.initTextWrapper();\n\n            //hack : prevent ckeditor from removing empty spans\n            $container.find('.gapmatch-content').html('...');\n\n            //create editor\n            htmlEditor.buildEditor($editableContainer, {\n                shieldInnerContent : false,\n                change : gridContentHelper.getChangeCallbackForBlockStatic(container),\n                markupChange : function(){\n                    textWrapper.unwrap(this);\n                },\n                data : {\n                    container : container,\n                    widget : _widget\n                }\n            });\n            \n            //restore gaps\n            $container.find('.gapmatch-content').empty();\n        }\n    };\n\n    ContainerInteractionStateQuestion.prototype.destroyEditor = function(){\n\n        var $container = this.widget.$container,\n            $flowContainer = $container.find('.qti-flow-container');\n\n        //hack : prevent ckeditor from removing empty spans\n        $container.find('.gapmatch-content').html('...');\n\n        //search and destroy the editor\n        htmlEditor.destroyEditor($flowContainer);\n        \n        //restore gaps\n        $container.find('.gapmatch-content').empty();\n\n        //remove toolbar\n        $flowContainer.find('.mini-tlb[data-role=cke-launcher-tlb]').remove();\n    };\n\n    ContainerInteractionStateQuestion.prototype.initTextWrapper = function(){\n\n        var widget = this.widget,\n            interaction = widget.element,\n            $editable = widget.$container.find('.qti-flow-container [data-html-editable]'),\n            gapModel = this.getGapModel(),\n            $gapTlb = $(gapModel.toolbarTpl()).show();\n\n        $gapTlb.on('mousedown', function(e){\n\n            e.stopPropagation();//prevent rewrapping\n\n            var $wrapper = $gapTlb.parent(),\n                text = $wrapper.text().trim();\n\n            //detach it from the DOM for another usage in the next future\n            $gapTlb.detach();\n\n            //create gap:\n            $wrapper\n                .removeAttr('id')\n                .addClass('widget-box')\n                .attr('data-new', true)\n                .attr('data-qti-class', gapModel.qtiClass);\n\n            textWrapper.destroy($editable);\n\n            htmlContentHelper.createElements(interaction.getBody(), $editable, htmlEditor.getData($editable), function(newGapWidget){\n\n                newGapWidget.changeState('question');\n                textWrapper.create($editable);\n                gapModel.afterCreate(widget, newGapWidget, text);\n            });\n            \n        }).on('mouseup', function(e){\n            e.stopPropagation();//prevent rewrapping\n        });\n\n        //init text wrapper:\n        $editable.on('editorready.wrapper', function(){\n            textWrapper.create($(this));\n        }).on('wrapped.wrapper', function(e, $wrapper){\n            $wrapper.append($gapTlb);\n        }).on('beforeunwrap.wrapper', function(){\n            $gapTlb.detach();\n        });\n    };\n\n    ContainerInteractionStateQuestion.prototype.destroyTextWrapper = function(){\n\n        //destroy text wrapper:\n        var $editable = this.widget.$container.find('.qti-flow-container [data-html-editable]');\n        textWrapper.destroy($editable);\n        $editable.off('.wrapper');\n\n    };\n\n    ContainerInteractionStateQuestion.prototype.getGapModel = function(){\n\n        this.throwMissingRequiredImplementationError('getModel');\n    };\n\n    return ContainerInteractionStateQuestion;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/Question'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/gapMatch', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, self=this, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"shuffle\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.shuffle), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Shuffle choices\", options) : helperMissing.call(depth0, \"__\", \"Shuffle choices\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\\n        However each choice may be \\\"shuffled\\\" of \\\"fixed\\\" individually.\", options) : helperMissing.call(depth0, \"__\", \"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\\n        However each choice may be \\\"shuffled\\\" of \\\"fixed\\\" individually.\", options)))\n    + \"\\n    </span>\\n</div>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/gap-create', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<span class=\\\"mini-tlb\\\" data-edit=\\\"\";\n  if (helper = helpers.state) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.state); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-role=\\\"create-gap-tlb\\\">\\n    <span class=\\\"rgt tlb-button\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Create gap\", options) : helperMissing.call(depth0, \"__\", \"Create gap\", options)))\n    + \"\\\" data-role=\\\"create-gap\\\">\\n        <span class=\\\"icon-magicwand\\\"></span>\\n    </span>\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Question',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/gapMatch',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/gap-create',\n    'lodash'\n], function(stateFactory, Question, formElement, formTpl, gapTpl, _){\n\n    var GapMatchInteractionStateQuestion = stateFactory.extend(Question, function(){\n\n        //ensure that the cardinality of the interaction response is consistent with thte number of gaps\n        this.syncCardinality();\n        this.preventSingleChoiceDeletion();\n\n    }, function(){\n        \n        this.widget.offEvents('question');\n    });\n\n    GapMatchInteractionStateQuestion.prototype.syncCardinality = function(){\n\n        var interaction = this.widget.element,\n            response = interaction.getResponseDeclaration();\n\n        var updateCardinality = function(data){\n\n            var cardinality,\n                choice = data.element || data.choice;\n\n            if(choice.qtiClass === 'gap'){\n                cardinality = _.size(interaction.getGaps()) === 1 ? 'single' : 'multiple';\n                response.attr('cardinality', cardinality);\n            }\n        };\n\n        this.widget\n            .on('elementCreated', updateCardinality)\n            .on('deleted', updateCardinality);\n    };\n\n    GapMatchInteractionStateQuestion.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n\n        $form.html(formTpl({\n            shuffle : !!interaction.attr('shuffle')\n        }));\n\n        formElement.initWidget($form);\n\n        formElement.setChangeCallbacks($form, interaction, {\n            shuffle : formElement.getAttributeChangeCallback()\n        });\n\n    };\n\n    GapMatchInteractionStateQuestion.prototype.getGapModel = function(){\n\n        return {\n            toolbarTpl : gapTpl,\n            qtiClass : 'gap',\n            afterCreate : function(interactionWidget, newGapWidget, text){\n\n                //after the gap is created, delete it\n                var choice = interactionWidget.element.createChoice(text);\n                interactionWidget.$container.find('.choice-area .add-option').before(choice.render());\n                choice.postRender().changeState('question');\n                \n                newGapWidget.changeState('choice');\n            }\n        };\n    };\n\n    GapMatchInteractionStateQuestion.prototype.preventSingleChoiceDeletion = function(){\n\n        var interaction = this.widget.element,\n            $container = this.widget.$container;\n\n        var _toggleDeleteButtonVisibility = function(){\n            \n            var choiceCount = 0,\n                $deleteButtons = $container.find('.choice-area .qti-choice [data-role=delete]');\n            \n            _.each(interaction.getChoices(), function(choice){\n                if(!choice.data('deleting')){\n                    choiceCount++;\n                }\n            });\n            \n            if(choiceCount <= 1){\n                $deleteButtons.hide();\n            }else{\n                $deleteButtons.show();\n            }\n        };\n        \n        _toggleDeleteButtonVisibility();\n        \n        this.widget\n            .on('deleted', _toggleDeleteButtonVisibility)\n            .on('choiceCreated', _toggleDeleteButtonVisibility);\n        \n        this.widget.afterStateInit(function(e, element, state){\n            if(state.name === 'deleting' && element.is('gapText')){\n                _toggleDeleteButtonVisibility();\n            }\n        }, 'question');\n        \n        this.widget.afterStateExit(function(e, element, state){\n            if(state.name === 'deleting' && element.is('gapText')){\n                _toggleDeleteButtonVisibility();\n            }\n        }, 'question');\n        \n    };\n\n    return GapMatchInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    var GapMatchInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        \n        //forward to one of the available sub state, according to the response processing template\n        answerStateHelper.forward(this.widget);\n        \n    }, function(){\n        \n    });\n    \n    return GapMatchInteractionStateAnswer;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Correct',[\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function(_, __,stateFactory, Correct, commonRenderer, instructionMgr, PciResponse){\n\n    var GapMatchInteractionStateCorrect = stateFactory.create(Correct, function(){\n\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n\n        var corrects  = _.values(response.getCorrect());\n       \n        commonRenderer.resetResponse(interaction); \n        commonRenderer.destroy(interaction);\n        \n        //add a specific instruction\n        instructionMgr.appendInstruction(interaction, __('Please fill the gap with the correct choices.'));\n       \n        //use the common Renderer\n        commonRenderer.render.call(interaction.getRenderer(), interaction);\n   \n        commonRenderer.setResponse(\n            interaction, \n            PciResponse.serialize(_.invoke(corrects, String.prototype.split, ' '), interaction)\n        );\n\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n           var type = response.attr('cardinality') === 'single' ? 'base' : 'list';\n           if(data.response && data.response[type]){\n                if(type === 'base'){\n                    response.setCorrect(data.response.base.directedPair.join(' '));\n                } else {\n                    response.setCorrect(   \n                        _.map(data.response.list.directedPair, function(pair){\n                            return pair.join(' ');\n                        })\n                    ); \n                }\n           }\n        });\n\n    }, function(){\n        var widget = this.widget;\n        var interaction = this.widget.element;\n        \n        //stop listening responses changes\n        widget.$container.off('responseChange.qti-widget');\n\n        commonRenderer.resetResponse(interaction); \n        commonRenderer.destroy(interaction);\n\n        instructionMgr.removeInstructions(interaction);\n    });\n\n    return GapMatchInteractionStateCorrect;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/response/pairScoreMappingForm', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n                    <option value=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.value) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.value); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</option> \\n                    \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"style=\\\"display:block\\\"\";\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n            \";\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  return buffer;\n  }\n\n  buffer += \"    <div class=\\\"form-container\\\">\\n        <h1>\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h1>\\n\\n        <hr />\\n        <div class=\\\"panel grid-row\\\">\\n            <h2>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Add new pairs\", options) : helperMissing.call(depth0, \"__\", \"Add new pairs\", options)))\n    + \":</h2>\\n        </div> \\n        <div class=\\\"panel grid-row\\\">\\n            <div class=\\\"col-4\\\">\\n                <select class=\\\"select2 new-pair-left\\\" data-placeholder=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select a \", options) : helperMissing.call(depth0, \"__\", \"Select a \", options)));\n  if (helper = helpers.leftTitle) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.leftTitle); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n                    <option></option>\\n                    \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.pairLeft), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                </select>\\n             </div>\\n             <div class=\\\"col-4\\\">\\n                <select class=\\\"select2 new-pair-right\\\"  data-placeholder=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select a \", options) : helperMissing.call(depth0, \"__\", \"Select a \", options)));\n  if (helper = helpers.rightTitle) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.rightTitle); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n                    <option></option>\\n                    \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.pairRight), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                </select>\\n             </div>\\n             <div class=\\\"col-1\\\">\\n                &nbsp;\\n            </div>\\n             <div class=\\\"col-2\\\">\\n                <button class=\\\"pair-adder btn-info small\\\"><span class=\\\"icon-add\\\"></span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Add\", options) : helperMissing.call(depth0, \"__\", \"Add\", options)))\n    + \"</button>\\n            </div> \\n        </div>\\n        <hr />\\n        <div class=\\\"panel grid-row heading\\\">\\n             <div class=\\\"col-4\\\">\";\n  if (helper = helpers.leftTitle) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.leftTitle); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</div>\\n             <div class=\\\"col-3\\\">\";\n  if (helper = helpers.rightTitle) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.rightTitle); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</div>\\n            \\n            <div class=\\\"col-2\\\" data-edit=\\\"correct\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.defineCorrect), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n                <span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Correct\", options) : helperMissing.call(depth0, \"__\", \"Correct\", options)))\n    + \"</span>\\n                <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n                <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Is this pair the correct response?\", options) : helperMissing.call(depth0, \"__\", \"Is this pair the correct response?\", options)))\n    + \"</span>\\n            </div>\\n\\n            <div class=\\\"col-2\\\">\\n                <span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Score\", options) : helperMissing.call(depth0, \"__\", \"Score\", options)))\n    + \"</span>\\n                <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n                <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Set the score for this response\", options) : helperMissing.call(depth0, \"__\", \"Set the score for this response\", options)))\n    + \"</span>\\n            </div>\\n            <div class=\\\"col-1\\\"></div>\\n        </div>\\n\\n        <div class=\\\"panel pairs\\\">\\n        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.pairs), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </div>\\n\\n        <hr />\\n\\n        <span class=\\\"arrow\\\"></span>\\n        <span class=\\\"arrow-cover\\\"></span>\\n    </div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/response/pairScoreForm', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", self=this, escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"style=\\\"display:block\\\"\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \" checked=\\\"checked\\\"\";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"data-default=\\\"true\\\"\";\n  }\n\n  buffer += \"<div class=\\\"grid-row\\\">\\n    <div class=\\\"col-4\\\">\\n       \";\n  if (helper = helpers.left) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.left); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </div>\\n    <div class=\\\"col-3\\\">\\n       \";\n  if (helper = helpers.right) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.right); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </div>\\n    \\n    <div class=\\\"col-2\\\" data-edit=\\\"correct\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.defineCorrect), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n        <label>\\n            <input name=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-correct\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.correct), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" />\\n            <span class=\\\"icon-checkbox\\\"></span>\\n        </label>\\n    </div>\\n\\n    <div class=\\\"col-2\\\">\\n        <input type=\\\"text\\\" \\n               value=\\\"\";\n  if (helper = helpers.score) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.score); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n               name=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-score\\\" \\n               class=\\\"score\\\" \\n               \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.defaultScore), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"  \\n               data-validate=\\\"$numeric\\\" \\n               data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\" \\n        />\\n    </div>\\n    <div class=\\\"col-1\\\">\\n        <a href=\\\"#\\\" class=\\\"pair-deleter\\\" id=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-delete\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove pair\", options) : helperMissing.call(depth0, \"__\", \"Remove pair\", options)))\n    + \"\\\"><span class=\\\"icon-bin\\\"></span></a>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/pairScoringForm',[\n    'jquery', \n    'lodash' ,\n    'i18n',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/response/pairScoreMappingForm',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/response/pairScoreForm',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'ui/tooltipster',\n    'ui/selecter'\n], function($, _, __, formTpl, pairTpl, answerStateHelper, formElementHelper, tooltipster, selecter){\n\n    //to bind html element to a pair, we use this separator to replace spaces in the pair name.\n    //The colons char isn't allowed by QTI but it is in HTML, so no change to encounter this separator into the pairs id.\n    var separator = {\n        html : '::',\n        qti  : ' '\n    };\n\n    /**\n     * Create a new instance of PairScoringForm\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/helpers/pairScoringForm\n     * @param {Object} widget - the interaction widget \n     * @param {Object} [options]\n     * @returns {PairScoringForm} the form compoenent, loaded by default.\n     */\n    return function formFactory(widget, options){\n\n        var $container  = widget.$container;\n        var interaction = widget.element;\n        var response    = interaction.getResponseDeclaration();\n        var $popup      = [];\n        var pairs       = [];\n        var $form;\n\n        /**\n         * The form compoenent\n         * @typedef PairScoringForm\n         */\n        var pairScoringForm = {\n\n            /**\n             * Load / reload the compoenent\n             * @memberof PairScoringForm\n             * @returns {PairScoringForm} for chaining\n             */\n            load : function load(){\n                var self            = this;\n                var callbacks       = {};\n                var corrects        = _.values(response.getCorrect());\n                var mapEntries      = response.getMapEntries();\n           \n                //create / update the HTML element\n                if(!$popup.length){\n                    $popup = createPopup($container);\n                } else {\n                    $popup.empty();\n                }\n                \n                if(options){\n\n                    //prepare content for the form, using either current map entries or data given in options.\n                    if(options.entries){\n                        pairs = preparePairs(options.entries);\n\n                        //update the current map entries according to what we got in entry\n                        response.removeMapEntries();\n                        _.forEach(pairs , function(pair){\n                            if(typeof pair.score === 'undefined' || pair.score === null){\n                                pair.score = response.mappingAttributes.defaultValue || 0;\n                            }\n                            response.setMapEntry(pair.id.replace(separator.html, separator.qti), pair.score);\n                        });\n                    } else {\n                        pairs = preparePairs(mapEntries);\n                    }\n\n                    //run the template with the data\n                    $form = $(formTpl({\n                        'title'             : options.title      || __('Pair scoring'),\n                        'leftTitle'         : options.leftTitle  || __('Choices'),\n                        'rightTitle'        : options.rightTitle || __('Gaps'),\n                        'defineCorrect'     : answerStateHelper.defineCorrect(response),\n                        'scoreMin'          : response.getMappingAttribute('lowerBound'),\n                        'scoreMax'          : response.getMappingAttribute('upperBound'),\n                        'pairs'             : _.map(pairs, pairTpl),\n                        'pairLeft'          : _.isFunction(options.pairLeft) ? options.pairLeft() : _.values(interaction.getChoices()), \n                        'pairRight'         : _.isFunction(options.pairRight) ? options.pairRight() : _.values(interaction.getChoices()) \n                    }));\n                    \n                    updateFormBindings();\n\n                    $popup.append($form);\n\n                    //initialize UI componenets manually \n                    selecter($popup);\n                    tooltipster($popup);\n                    deleter($popup);\n                    adder($popup);\n                }\n\n                return this;\n            },\n\n            /**\n             * Add a new pair\n             * @memberof PairScoringForm\n             * @param {String} key - the pair key\n             * @returns {PairScoringForm} for chaining\n             */\n            addPair : function addPair(key){\n                \n                var score = response.mappingAttributes.defaultValue;\n                var pair  = formatPair(score, key, true);\n                \n                //update internal model\n                pairs.push(pair);\n\n                //update the response\n                response.setMapEntry(key, score);\n\n                $('.pairs', $popup).append(pairTpl(pair));\n\n                updateFormBindings();\n               \n                if(_.isFunction(options.add)){\n                    options.add(key);\n                }\n\n                return this;\n            },\n\n            /**\n             * Remove a pair\n             * @memberof PairScoringForm\n             * @param {String} key - the pair key to remove\n             * @returns {PairScoringForm} for chaining\n             */\n            removePair : function removePair(key){\n\n                //update internal model\n                _.remove(pairs, {id : key.replace(separator.qti, separator.html)});\n\n                //update the response\n                response.removeMapEntry(key);\n   \n                if(_.isFunction(options.remove)){\n                    options.remove(key);\n                }\n        \n                return this;\n            },\n\n            /**\n             * Destroy the compoenent\n             * @memberof PairScoringForm\n             */\n            destroy : function(){\n                if($popup.length){\n                    $popup.remove();\n                }\n                \n                //reset overflow\n                $('#item-editor-panel').css('overflow', '');\n            }\n        };\n\n        /**\n         * Set up the pair adder. \n         * Disable list options according to the current values. \n         * \n         * @private\n         * @param {jQueryElement} $container - to scope element finding\n         */\n        function adder($container){\n           var $panel   = $('.panel-new-pair', $container); \n           var $adder   = $('.pair-adder', $container);\n           var $left    = $('.new-pair-left', $container);\n           var $right   = $('.new-pair-right', $container);\n           var $options = $('.select2 > option', $container); \n\n           //disable options based on existing pairs\n           $left.on('change', function(){\n                var currentLeft = $left.select2('val'),\n                    currentRight = $right.select2('val');\n                \n                $options.removeProp('disabled'); \n                \n                _(pairs).where({leftId : currentLeft}).forEach(function(pair){\n                    $right.find('option[value=\"' + pair.rightId+ '\"]').prop('disabled', true);\n                });\n                _(pairs).where({rightId : currentRight}).forEach(function(pair){\n                    $left.find('option[value=\"' + pair.leftId+ '\"]').prop('disabled', true);\n                });\n                if(options.type === 'pair'){\n                    _(pairs).where({rightId : currentLeft}).forEach(function(pair){\n                        $right.find('option[value=\"' + pair.leftId+ '\"]').prop('disabled', true); \n                    });\n                }\n           });\n           $right.on('change', function(){\n                var currentRight = $right.select2('val'),\n                    currentLeft = $left.select2('val');\n                \n                $options.removeProp('disabled'); \n                \n                _(pairs).where({rightId : currentRight}).forEach(function(pair){\n                    $left.find('option[value=\"' + pair.leftId+ '\"]').prop('disabled', true);\n                });\n                _(pairs).where({leftId : currentLeft}).forEach(function(pair){\n                    $right.find('option[value=\"' + pair.rightId+ '\"]').prop('disabled', true);\n                });\n                if(options.type === 'pair'){\n                    _(pairs).where({leftId : currentRight}).forEach(function(pair){\n                        $left.find('option[value=\"' + pair.rightId+ '\"]').prop('disabled', true); \n                    });\n                }\n           });\n\n           //create a new pair\n           $adder.on('click', function(e){\n               $options.removeProp('disabled');\n               e.preventDefault();\n               var key;\n               var lval = $left.select2('val');\n               var rval = $right.select2('val');\n               if(lval && rval){\n                   //update the form component\n                   key      = lval + separator.qti + rval;\n                   pairScoringForm.addPair(key);\n\n                   //reset the select lists\n                   $left.select2('val', '');\n                   $right.select2('val', '');\n                }\n           }); \n        }\n\n        /**\n         * Set up the pair remover.\n         * @private\n         * @param {jQueryElement} $container - to scope element finding\n         */\n        function deleter($container){\n            $container\n              .off('click', '.pair-deleter')\n              .on('click', '.pair-deleter', function(e){\n                e.preventDefault();\n\n                var $elt = $(this);\n                var key = $elt.attr('id')\n                              .replace(/-delete$/, '')\n                              .replace(separator.html, separator.qti);\n    \n                pairScoringForm.removePair(key);\n                \n                $elt.closest('.grid-row').remove();\n           });\n        }\n\n        /**\n         * Transform entries to pair object that contains the property required by the template.\n         * @private\n         * @param {Array} entries - using the response.mapEntries format pair:score, ie.  <pre>{ \"choice1 choice2\" : 3  }</pre>\n         * @returns {Array} the pairs as a collection of objects.\n         */\n        function preparePairs(entries){\n            var defaultScore = parseFloat(response.mappingAttributes.defaultValue);\n            return _.map(entries, function(value, key){\n                return formatPair(value, key, parseFloat(value) === defaultScore);\n            });\n        }\n\n\n        /**\n         * Format a key/score mapping to a pair object used by the template and by this scoring component.\n         * @private\n         * @param {Number} score - the value mapped to the pair\n         * @param {String} key - the pair key\n         * @param {Boolean} [default = false] - is the score the default value\n         * @returns {Object} the pair \n         */\n        function formatPair(score, key, defaultScore){\n            var pair = key.split(separator.qti);\n            return {\n                id              : key.replace(separator.qti, separator.html),\n                score           : score,\n                defaultScore    : !!defaultScore, \n                leftId          : pair[0],\n                rightId         : pair[1],\n                left            : _.isFunction(options.formatLeft) ? options.formatLeft(pair[0]) : pair[0],\n                right           : _.isFunction(options.formatRight) ? options.formatRight(pair[1]) : pair[1],\n                defineCorrect   : answerStateHelper.defineCorrect(response),\n                correct         : _.contains(_.values(response.getCorrect()), key) \n            };\n        }\n\n        /**\n         * Update the form bindings callbacks.\n         * @private\n         */\n        function updateFormBindings(){\n            var callbacks = {};\n            var corrects  = _.values(response.getCorrect());\n    \n            if($form.length){\n\n               //the default value changes\n                widget.on('mappingAttributeChange', function(data){\n                    if(data.key === 'defaultValue'){\n                        _.forEach(pairs, function(pair){\n                            var $score = $('[name=\"' +  pair.id + '-score\"]', $form);\n                            if($score.data('default')){\n                                $score.val(data.value);\n                                response.setMapEntry( pair.id.replace(separator.html, separator.qti), data.value);\n                            } \n                        });\n                    }\n                });\n\n                //creates callbacls for score and correct, for each pair\n                _.forEach(pairs, function(pair){\n                    var id = pair.id.replace(separator.html, separator.qti);\n                    callbacks[pair.id + '-score'] = function(response, value){\n                        $('[name=\"' +  pair.id + '-score\"]', $form).removeAttr('data-default').removeData('default');\n                        response.setMapEntry(id, value);\n                    };\n                    callbacks[pair.id + '-correct'] = function(response, value){\n                        if(value === true){\n                            if(!_.contains(corrects, id)){\n                                corrects.push(id);\n                            }\n                        } else {\n                            corrects = _.without(corrects, id);\n                        }\n                        response.setCorrect(corrects);\n                    };\n                });\n                \n                //set up the form data binding\n                formElementHelper.setChangeCallbacks($form, response, callbacks);\n            }\n        }\n        \n        return pairScoringForm.load();\n    };\n\n    /**\n     * Creates a popup relative to container\n     * @private\n     * @returns {jQueryElement} the popup\n     */\n    function createPopup($container){\n        var $element    = $('<div class=\"mapping-editor arrow-top-left\"></div>'); \n        var width       = $container.innerWidth();\n        var height      = $container.innerHeight();\n\n        //only one \n        $('.mapping-editor', $container).remove();\n\n        //style and attach the form\n        $element.css({       \n            'top'       : height - 30,\n            'width'     : width - 100\n        }).appendTo($container);\n\n        return $element;\n    }\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Map',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse', \n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/pairScoringForm' \n], function($, _, __, stateFactory, Map, commonRenderer, instructionMgr, PciResponse, scoringFormFactory){\n\n    /**\n     * Initialize the state.\n     */\n    function initMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var corrects  = _.values(response.getCorrect());\n        var currentResponses =  _.size(response.getMapEntries()) === 0 ? corrects : _.keys(response.getMapEntries());\n\n        \n        //really need to destroy before ? \n        commonRenderer.resetResponse(interaction); \n        commonRenderer.destroy(interaction);\n        \n        //add a specific instruction\n        instructionMgr.appendInstruction(interaction, __('Please fill the gap with the texts below, then edit the score for each pair.'));\n        \n        //set the current mapping mode, needed by the common renderer\n        interaction.responseMappingMode = true;\n \n        //use the common Renderer\n        commonRenderer.render.call(interaction.getRenderer(), interaction);\n    \n        //change the display of the gaps\n        displayGaps(widget.$container);\n\n        //and initialize the scoring form\n        if(_.size(response.getMapEntries()) === 0){\n            updateForm(widget, corrects);\n        } else {\n            updateForm(widget);\n        }\n        \n        //each response change leads to an update of the scoring form\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            var type  = response.attr('cardinality') === 'single' ? 'base' : 'list';\n            var pairs, entries;\n            if(data && data.response &&  data.response[type]){\n               pairs = _.invoke(data.response[type].directedPair, Array.prototype.join, ' ');\n               entries = _.keys(response.getMapEntries());\n                \n               //add new pairs from  the difference between the current entries and the given data\n               _(pairs).difference(entries).forEach(interaction.pairScoringForm.addPair, interaction.pairScoringForm);\n            }\n\n            displayGaps(widget.$container);\n        });\n    }\n\n    /**\n     * Exit the map state\n     */\n    function exitMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        widget.$container.off('responseChange.qti-widget');\n\n        if(interaction.pairScoringForm){\n            interaction.pairScoringForm.destroy();\n        }\n\n        //destroy the common renderer\n        commonRenderer.resetResponse(interaction); \n        commonRenderer.destroy(interaction);\n\n        instructionMgr.removeInstructions(interaction);\n    }\n\n    /**\n     * The gap in this states show their identifier, to visually identify them.\n     * @param {jQueryElement} $container - the interaction container\n     */\n    function displayGaps($container){\n        $('.gapmatch-content', $container)\n          .removeClass('filled')            //this disable gap selection\n          .addClass('gap-info')\n          .each(function(){\n            var $elt = $(this);\n            $elt.text($elt.data('identifier'));\n        });\n    }\n\n    /**\n     * Update the scoring form\n     * @param {Object} widget - the current widget\n     * @param {Array} [entries] - to force the use of this collection instead of the mapEntries\n     */\n    function updateForm(widget, entries){\n\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var mapEntries = response.getMapEntries();\n\n        //keep a map of choices descriptions for the formatLeft callback\n        var formatedChoices = _.transform(interaction.getChoices(), function(acc, choice){\n            acc[choice.id()] = choice.val();\n        }, {});\n\n        var mappingChange = function mappingChange(){\n            //set the current responses, either the mapEntries or the corrects if nothing else\n            commonRenderer.setResponse(\n                interaction, \n                PciResponse.serialize(_.invoke(_.keys(response.getMapEntries()), String.prototype.split, ' '), interaction)\n            );\n        };\n\n        //set up the scoring form options\n        var options = {\n            leftTitle : __('Choice'),\n            rightTitle : __('Gap'),\n            type : 'directedPair',\n            pairLeft : function(){\n                return _.map(interaction.getChoices(), function(choice){\n                    return {\n                        id : choice.id(),\n                        value : choice.val()\n                    };\n                });\n            },\n            pairRight : function(){\n                return _.map(interaction.getGaps(), function(gap){\n                    return {\n                        id : gap.id(),\n                        value : gap.id()\n                    };\n                });\n            },\n            formatLeft : function(value){\n                return formatedChoices[value] || value;\n            }\n        };\n\n        //format the entries to match the needs of the scoring form\n        if(entries){\n            options.entries = _.transform(entries, function(result, value){\n                result[value] = mapEntries[value] !== undefined ? mapEntries[value] : response.mappingAttributes.defaultValue;\n            }, {}); \n        }\n\n        //initialize the scoring form \n        interaction.pairScoringForm = scoringFormFactory(widget, options);\n    }\n\n    /**\n     * The map answer state for the graphicGapMatch interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Map\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Map\n     */\n    return  stateFactory.create(Map, initMapState, exitMapState);\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Map'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/states'\n], function(Widget, states){\n\n    var GapMatchInteractionWidget = Widget.clone();\n\n    GapMatchInteractionWidget.initCreator = function(){\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n    };\n    \n    return GapMatchInteractionWidget;\n});\n\n","define('taoQtiItem/qtiCreator/renderers/interactions/GapMatchInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/Widget'\n], function(_, GapMatchInteraction, GapMatchInteractionWidget){\n    \n    var CreatorGapMatchInteraction = _.clone(GapMatchInteraction);\n\n    CreatorGapMatchInteraction.render = function(interaction, options){\n        \n        return GapMatchInteractionWidget.build(\n            interaction,\n            GapMatchInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorGapMatchInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicAssociateInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-graphicInteraction qti-graphicAssociateInteraction clearfix \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"image-editor solid\\\">\\n        <div id='graphic-paper-\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"' class=\\\"main-image-box\\\"></div>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine(\"json!taoQtiItem/qtiCommonRenderer/renderers/graphic-style.json\", function(){ return {    \n    \"basic\" : {\n        \"stroke\" : \"#8D949E\",\n        \"stroke-width\" : 2,\n        \"stroke-dasharray\": \"\",\n        \"stroke-linejoin\" : \"round\",\n        \"fill\" : \"#cccccc\",\n        \"fill-opacity\" : 0.5,\n        \"cursor\" : \"pointer\"\n    },\n    \"hover\"  : {\n        \"stroke\" : \"#3E7DA7\",\n        \"fill\" :  \"#0E5D91\", \n        \"fill-opacity\" : 0.3\n    },\n    \"selectable\"  : {\n        \"stroke-dasharray\": \"-\",\n        \"stroke\" : \"#3E7DA7\",\n        \"fill\" : \"#cccccc\",\n        \"fill-opacity\" : 0.5\n    },\n    \"active\" : {\n        \"stroke\" : \"#3E7DA7\",\n        \"stroke-dasharray\": \"\",\n        \"fill\" :  \"#0E5D91\",\n        \"fill-opacity\" : 0.5\n    },\n    \"error\" : {\n        \"stroke\" : \"#C74155\",\n        \"stroke-dasharray\": \"\",\n        \"fill-opacity\" : 0.5,\n        \"fill\" :  \"#661728\"  \n    },\n    \"success\" : {\n        \"stroke\" : \"#C74155\",\n        \"stroke-dasharray\": \"\",\n        \"fill\" :  \"#0E914B\",\n        \"fill-opacity\" : 0.5\n    },\n    \"layer\" : {\n        \"fill\" :  \"#ffffff\", \n        \"opacity\" : 0, \n        \"cursor\": \"pointer\"\n    },\n    \"creator\" : {\n        \"fill-opacity\" : 0.5,\n        \"stroke\" : \"#3E7DA7\",\n        \"stroke-dasharray\": \"\",\n        \"fill\" :  \"#0E5D91\", \n        \"cursor\" : \"pointer\"\n    },\n    \"imageset-rect-stroke\" : {\n            \"fill\" : \"#ffffff\",\n            \"stroke\" : \"#666666\",\n            \"stroke-width\" : 1,\n            \"stroke-linejoin\" : \"round\",\n            \"cursor\" : \"pointer\"\n    },\n    \"imageset-rect-no-stroke\" : {\n            \"fill\" : \"#ffffff\",\n            \"stroke\" : \"#ffffff\",\n            \"stroke-width\" : 2,\n            \"stroke-linejoin\" : \"round\",\n            \"cursor\" : \"pointer\"\n    },\n    \"imageset-img\" : {\n        \"cursor\" : \"pointer\"\n    },\n    \"order-text\" : {\n        \"fill\" : \"#ffffff\",\n        \"stroke\": \"#000000\",\n        \"stroke-width\" : 0.7,\n        \"font-family\" : \"sans-serif\",\n        \"font-weight\": \"bold\", \n        \"font-size\" : 22,\n        \"cursor\" : \"pointer\"\n    },\n    \"score-text-default\" : {\n        \"stroke\": \"#444444\",\n        \"stroke-width\" : 0.5,\n        \"font-family\" : \"sans-serif\",\n        \"font-weight\": \"normal\", \n        \"font-size\" : 20,\n        \"cursor\" : \"pointer\"\n    },\n    \"score-text\" : {\n        \"stroke\": \"#000000\",\n        \"stroke-width\" : 0.5,\n        \"font-family\" : \"sans-serif\",\n        \"font-weight\": \"normal\", \n        \"font-size\" : 20,\n        \"cursor\" : \"pointer\"\n    },\n    \"small-text\" : {\n        \"stroke\": \"#000000\",\n        \"stroke-width\" : 0.5,\n        \"font-family\" : \"sans-serif\",\n        \"font-weight\": \"normal\", \n        \"font-size\" : 16,\n        \"cursor\" : \"pointer\"\n    },\n    \"layer-pos-text\" : {\n        \"stroke\": \"#333\",\n        \"stroke-width\" : 0.5,\n        \"font-family\" : \"sans-serif\",\n        \"font-weight\": \"normal\", \n        \"font-size\" : 14\n    },\n    \"target\" : {\n        \"path\" : \"m 18,8.4143672 -1.882582,0 C 15.801891,4.9747852 13.071059,2.2344961 9.63508,1.9026738 L 9.63508,0 8.2305176,0 l 0,1.9026387 C 4.7947148,2.2343027 2.0637246,4.9746621 1.7481973,8.4143672 l -1.7481973,0 0,1.4045625 1.754877,0 c 0.3460429,3.4066753 3.0632871,6.1119843 6.4756406,6.4413813 l 0,1.739689 1.4045624,0 0,-1.739725 c 3.412547,-0.329537 6.129633,-3.034793 6.475641,-6.4413453 l 1.889279,0 z m -8.36492,6.5188648 0,-4.064673 -1.4045624,0 0,4.063882 C 5.5511016,14.612555 3.4232695,12.494619 3.0864551,9.8189297 l 4.0449512,0 0,-1.4045625 -4.0546368,0 C 3.3788672,5.6984941 5.5228887,3.5393379 8.2305176,3.2161113 l 0,3.9153125 1.4045624,0 0,-3.9160859 c 2.711162,0.3203965 4.858576,2.4808887 5.160955,5.1990293 l -3.927441,0 0,1.4045625 3.917773,0 C 14.449289,12.496957 12.318363,14.616158 9.63508,14.933232 z\",\n        \"fill\" : \"#0E914B\",\n        \"width\" : 1,\n        \"stroke-width\" : 0,\n        \"cursor\" : \"pointer\"\n    },\n    \"target-hover\" : {\n        \"fill\" : \"#3E7DA7\", \n        \"fill-opacity\" : 1\n    },\n    \"target-success\" : {\n        \"fill\" : \"#0E914B\", \n        \"fill-opacity\" : 1\n   },\n   \"assoc\" : {\n        \"stroke-width\" : 2, \n        \"stroke-linecap\" : \"round\", \n        \"cursor\" : \"pointer\"\n   },\n   \"assoc-layer\" : {\n        \"stroke-width\" : 12, \n        \"cursor\" : \"pointer\", \n        \"stroke-opacity\" : 0\n   },\n   \"assoc-bullet\" : {\n        \"fill\": \"#000000\"\n   },\n    \"close\" : {\n        \"path\" : \"m 8.9997236,18.000001 c -4.9703918,0 -8.99972284217367,-4.02901 -8.99972284217367,-9 C 7.5782633e-7,4.029011 4.0293108,9.8531742e-7 8.9997236,9.8531742e-7 13.970691,9.8531742e-7 18.000001,4.029011 18.000001,9.000001 c 0,4.97099 -4.02931,9 -9.0002774,9 z m 0.0045,-16.37151 c -4.06191,0 -7.35492,3.29635 -7.35492,7.36251 0,4.06562 3.292989,7.36255 7.35492,7.36255 4.0630384,0 7.3554334,-3.29693 7.3554334,-7.36255 0,-4.06614 -3.292969,-7.36251 -7.3554334,-7.36251 v 0 z m 3.1314894,9.31167 -1.953823,-1.94014 1.953843,-1.94018 c 0.08964,-0.089 0.134622,-0.19099 0.135073,-0.30584 4.31e-4,-0.11488 -0.04383,-0.21712 -0.132838,-0.30681 l -0.54267,-0.54685 c -0.08898,-0.0897 -0.190903,-0.13473 -0.305719,-0.13514 -0.114837,-4.4e-4 -0.217064,0.0439 -0.306703,0.1329 l -1.9623724,1.94865 -1.962395,-1.94865 c -0.08964,-0.089 -0.191845,-0.13336 -0.306702,-0.1329 -0.114837,4.3e-4 -0.216736,0.0455 -0.305719,0.13514 l -0.54265,0.54685 c -0.08902,0.0897 -0.133269,0.19193 -0.132838,0.30681 4.3e-4,0.11485 0.04543,0.21681 0.135073,0.30584 l 1.953823,1.94018 -1.953782,1.94014 c -0.0896,0.089 -0.134684,0.19094 -0.135114,0.3058 -4.31e-4,0.11486 0.04386,0.21716 0.132838,0.30681 l 0.542671,0.54687 c 0.08896,0.0897 0.190923,0.13467 0.305718,0.13516 0.114857,3.9e-4 0.217105,-0.0439 0.306724,-0.13288 l 1.962332,-1.94863 1.9623324,1.94863 c 0.08962,0.089 0.191886,0.13323 0.306744,0.13288 0.114836,-4.5e-4 0.216736,-0.0455 0.305698,-0.13516 l 0.542691,-0.54687 c 0.089,-0.0897 0.133227,-0.19193 0.132838,-0.30681 -3.9e-4,-0.1149 -0.0455,-0.21683 -0.135073,-0.3058 z\",\n        \"fill\" : \"#0E5D91\",\n        \"width\" : 1,\n        \"opacity\" : 0,\n        \"stroke-width\" : 0,\n        \"cursor\" : \"pointer\"\n   },\n   \"close-bg\" : {\n        \"fill\" : \"#ffffff\",\n        \"stroke\" : \"none\",\n        \"cursor\" : \"pointer\",\n        \"opacity\" : 0  \n    },\n    \"touch-circle\" : {\n        \"fill\" : \"none\", \n        \"stroke\" : \"#3E7DA7\",\n        \"stroke-width\" : 2\n    }\n}\n;});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/helpers/Graphic',[\n    'jquery', \n    'lodash', \n    'raphael', \n    'scale.raphael', \n    'json!taoQtiItem/qtiCommonRenderer/renderers/graphic-style.json'\n], function($, _, raphael, scaleRaphael, gstyle){\n\n    //maps the QTI shapes to Raphael shapes\n    var shapeMap = {\n        'default' : 'rect',\n        'poly'    : 'path'\n    };\n\n    //length constraints to validate coords\n    var coordsValidator = {\n        'rect' : 4,\n        'ellipse' : 4,\n        'circle' : 3,\n        'poly' : 6,\n        'default' : 0\n    };\n\n    //transform the coords from the QTI system to Raphael system\n    var qti2raphCoordsMapper = {\n\n        /**\n         * Rectangle coordinate mapper:  from left-x,top-y,right-x-bottom-y to x,y,w,h\n         * @param {Array} coords - QTI coords\n         * @returns {Array} raphael coords\n         */\n        'rect' : function(coords){\n           return [\n                coords[0],\n                coords[1],\n                coords[2] - coords[0],\n                coords[3] - coords[1]\n            ];\n        },\n        \n        /**\n         * Creates the coords for a default shape (a rectangle that covers all the paper)\n         * @param {Raphael.Paper} paper - the paper\n         * @returns {Array} raphael coords\n         */\n        'default' : function(paper){\n           return [ 0, 0, paper.width, paper.height ];\n        },\n        \n        /**\n         * polygone coordinate mapper:  from x1,y1,...,xn,yn to SVG path format\n         * @param {Array} coords - QTI coords\n         * @returns {Array} path desc\n         */\n        'poly' : function(coords){\n            var a;\n            var size = coords.length;\n\n            // autoClose if needed\n            if((coords[0] !== coords[size - 2]) && (coords[1] !== coords[size - 1])){\n                coords.push(coords[0]);\n                coords.push(coords[1]);\n            }\n            \n            // move to first point\n            coords[0] = \"M\" + coords[0];\n            for(a = 1; a < size; a++){\n                if(a % 2 === 0){\n                    coords[a] = \"L\" + coords[a];\n                }\n            }\n            return [coords.join(\" \")];\n        }\n    };\n\n    //transform the coords from a raphael shape to the QTI system\n    var raph2qtiCoordsMapper = {\n\n        /**\n         * Rectangle coordinate mapper: from x,y,w,h to left-x,top-y,right-x-bottom-y\n         * @param {Object} attr - Raphael Element's attributes\n         * @returns {Array} qti based coords\n         */\n        'rect' : function(attr){\n           return [\n                attr.x,\n                attr.y,\n                attr.x + attr.width,\n                attr.y + attr.height\n            ];\n        },\n\n        /**\n         * Circle coordinate mapper\n         * @param {Object} attr - Raphael Element's attributes\n         * @returns {Array} qti based coords\n         */\n        'circle' : function(attr){\n           return [\n                attr.cx,\n                attr.cy,\n                attr.r      \n           ];\n        },\n        \n        /**\n         * Ellispe coordinate mapper\n         * @param {Object} attr - Raphael Element's attributes\n         * @returns {Array} qti based coords\n         */\n        'ellipse' : function(attr){\n           return [\n                attr.cx,\n                attr.cy,\n                attr.rx,\n                attr.ry\n            ];\n        },\n\n        /**\n         * Get the coords for a default shape (a rectangle that covers all the paper)\n         * @param {Object} attr - Raphael Element's attributes\n         * @returns {Array} qti based coords\n         */\n        'default' : function(attr){\n           return this.rect(attr);\n        },\n        \n        /**\n         * polygone coordinate mapper:  from SVG path (available as segments) to x1,y1,...,xn,yn format\n         * @param {Raphael.Paper} paper - the paper\n         * @returns {Array} raphael coords\n         */\n        'path' : function(attr){\n            var poly = [];\n            var i;\n            if(_.isArray(attr.path)){\n               for(i = 1; i < attr.path.length; i++){\n                    if(attr.path[i].length === 3){\n                        poly.push(attr.path[i][1]);\n                        poly.push(attr.path[i][2]);\n                    }\n               }\n            }\n            return poly;\n        }\n    };\n\n\n\n    /**\n     * Graphic interaction helper\n     * @exports qtiCommonRenderer/helpers/Graphic\n     */\n    var GraphicHelper = {\n   \n        /**\n         * Raw access to the styles\n         * @type {Object}\n         */\n        _style : gstyle,\n\n\n        /**\n         * Apply the style defined by name to the element\n         * @param {Raphael.Element} element - the element to change the state\n         * @param {String} state - the name of the state (from states) to switch to\n         */\n        setStyle : function(element, name){\n            if(element && gstyle[name]){\n                element.attr(gstyle[name]);\n            }\n        },\n\n\n        /**\n         * Create a Raphael paper with a bg image, that is width responsive\n         * @param {String} id - the id of the DOM element that will contain the paper\n         * @param {String} serial - the interaction unique indentifier\n         * @param {Object} options - the paper parameters\n         * @param {String} options.img - the url of the background image\n         * @param {jQueryElement} [options.container] - the parent of the paper element (got the closest parent by default)\n         * @param {Number} [options.width] - the paper width\n         * @param {Number} [options.height] - the paper height\n         * @param {String} [options.imgId] - an identifier for the image element\n         * @returns {Raphael.Paper} the paper\n         */ \n        responsivePaper : function(id, serial, options){\n\n            var paper, image;\n\n            var $container = options.container || $('#' + id).parent();\n            var $editor    = $('.image-editor', $container);\n            var $body  = $container.closest('.qti-itemBody');\n            var factory = raphael.type === 'SVG' ? scaleRaphael : raphael; \n\n            var width = options.width || $container.innerWidth();\n            var height = options.height || $container.innerHeight();\n\n            var resizer = _.throttle(resizePaper, 10);\n\n            //padding and border diff. always add 1px to cover the rounded value in scalling\n\n\n            paper = factory.call(null ,id, width, height);\n            image = paper.image(options.img, 0, 0, width, height);\n            if(options.imgId){\n                image.id = options.imgId;\n            } \n\n            //retry to resize once the SVG is loaded \n            $(image.node)\n              .attr('externalResourcesRequired','true')\n              .on(\"load\", function() {\n            \n                resizePaper(); \n            });\n\n            if(raphael.type === 'SVG'){ \n           \n                //scale on creation\n                resizePaper();\n\n                $(window).on('resize.qti-widget.'  + serial, resizer);\n                $(document).on('customcssloaded.styleeditor', function(){\n                    _.delay(resizer, 200);\n                });\n                $container.on('resize.qti-widget.' + serial , function(e, givenWidth){\n                    resizer(e, givenWidth);\n                });\n\n            } else {\n                paper.canvas.setAttribute('viewBox', '0 0 ' + width + ' ' + height);\n                $container.find('.main-image-box').width(width);\n                if(typeof options.resize === 'function'){\n                    options.resize(width, 1);\n                }\n            }\n            \n            /**\n             * scale the raphael paper\n             * @private\n             */\n            function resizePaper(e, givenWidth){\n                if(e){\n                    e.stopPropagation();\n                }\n\n                var factor          = 1;\n                var diff            = ($editor.outerWidth() - $editor.width()) + ($container.outerWidth() - $container.width()) + 1;\n                var maxWidth        = $body.width();\n                var containerWidth  = $container.innerWidth();\n\n                if(containerWidth > 0 || givenWidth > 0){\n\n                    if(!givenWidth && $container.children('.image-sidebar').length){\n                        diff += $container.children('.image-sidebar').outerWidth(true);\n                    }                    \n\n                    if(givenWidth < containerWidth && givenWidth < maxWidth){\n                        containerWidth = givenWidth - diff;\n                    } else if(containerWidth > maxWidth){\n                        containerWidth = maxWidth - diff;\n                    } else {\n                        containerWidth -= diff;\n                    }\n     \n                    if($container.hasClass('responsive')){\n                        factor = containerWidth / width;\n\n                        paper.changeSize(containerWidth, height * factor, false, false);\n                        paper.scaleAll( factor );\n                    } else {\n                        paper.changeSize(containerWidth, height, false, false);\n                    }\n                    if(typeof options.resize === 'function'){\n                        options.resize(containerWidth, factor);\n                    }\n                    $container.trigger('resized.qti-widget');\n                }\n            }\n\n            return paper;\n        },\n \n        /**\n         * Create a new Element into a raphael paper\n         * @param {Raphael.Paper} paper - the interaction paper\n         * @param {String} type - the shape type\n         * @param {String|Array.<Number>} coords - qti coords as a string or an array of number\n         * @param {Object} [options] - additional creation options\n         * @param {String} [options.id] - to set the new element id\n         * @param {String} [options.title] - to set the new element title\n         * @param {String} [options.style = basic] - to default style \n         * @param {Boolean} [options.hover = true] - to disable the default hover state\n         * @param {Boolean} [options.touchEffect = true] - a circle appears on touch\n         * @param {Boolean} [options.qtiCoords = true] - if the coords are in QTI format\n         * @returns {Raphael.Element} the created element\n         */\n        createElement : function(paper, type, coords, options){\n            var self = this;\n            var element;\n            var bbox; \n            var shaper = shapeMap[type] ? paper[shapeMap[type]] : paper[type];\n            var shapeCoords = options.qtiCoords !== false ? self.raphaelCoords(paper, type, coords) : coords;\n\n            if(typeof shaper === 'function'){\n               element = shaper.apply(paper, shapeCoords);\n               if(element){\n                    if(options.id){\n                        element.id = options.id;\n                    }\n                    if(options.title){\n                        element.attr('title', options.title);\n                    }\n                    element.attr(gstyle[options.style || 'basic'])\n                            .toFront();\n                    if(options.hover !== false){\n                      element.hover(function(){\n                            if(!element.flashing){\n                                self.updateElementState(this, 'hover'); \n                            }\n                      }, function(){\n                            if(!element.flashing){\n                                self.updateElementState(this, this.active ? 'active' : this.selectable ? 'selectable' : 'basic');\n                            }\n                      });\n                    }\n                        \n                   if(options.touchEffect !== false){\n                       element.touchstart(function(){\n                            self.createTouchCircle(paper, element.getBBox());\n                       });\n                   }\n               }\n    \n            } else {\n                throw new Error('Unable to find method ' + type + ' on paper');\n            }\n            return element; \n        },\n\n        /**\n         * Create target point\n         * @param {Raphael.Paper} paper - the paper\n         * @param {Object} [options]\n         * @param {Object} [options.id] - and id to identify the target\n         * @param {Object} [options.point] - the point to add to the paper\n         * @param {Number} [options.point.x = 0] - point's x coord\n         * @param {Number} [options.point.y = 0] - point's y coord \n         * @param {Boolean} [options.hover] = true - the target has an hover effect\n         * @param {Function} [options.create] - call once created\n         * @param {Function} [options.remove] - call once removed\n         */\n        createTarget : function createTarget(paper, options){\n            var self    = this;\n            options     = options || {};\n            var point   = options.point || {x : 0, y : 0};\n            var baseSize= 18;\n            var factor  = (paper.w && paper.width) ? paper.width / paper.w : 1; \n            var size    = factor !== 1 ? Math.floor(18 / factor) + 1 : baseSize;\n            var half    = size / 2;\n            var x       = point.x >= half ? point.x - half : 0;\n            var y       = point.y >= half ? point.y - half : 0;\n            var hover   = typeof options.hover === 'undefined' ? true : !!options.hover;\n            var tBBox;\n        \n            //create the target from a path\n            var target = paper\n                .path(gstyle.target.path)\n                .transform('T' + x + ',' + y + 's' + size / baseSize)\n                .attr(gstyle.target)\n                .attr('title', _('Click again to remove'));\n\n            //generate an id if not set in options\n            if(options.id){\n                target.id = options.id;\n            } else {\n                var count = 0;\n                paper.forEach(function(element){\n                    if(element.data('target')){\n                        count++;\n                    }   \n                });\n                target.id = 'target-' + count;\n            }\n\n            tBBox = target.getBBox();\n\n            //create an invisible rect over the target to ensure path selection\n            var layer = paper\n                .rect(tBBox.x, tBBox.y, tBBox.width, tBBox.height)\n                .attr(gstyle.layer)\n                .click(function(){\n                    var id = target.id;\n                    var point = this.data('point');\n                    if(_.isFunction(options.select)){\n                        options.select(target, point, this);\n                    }\n                    if(_.isFunction(options.remove)){\n                        this.remove();\n                        target.remove();\n                        options.remove(id, point);\n                    }\n                });\n            if(hover){\n                layer.hover(function(){\n                    if(!target.flashing){\n                        self.setStyle(target, 'target-hover');\n                    }\n                }, function(){\n                    if(!target.flashing){\n                        self.setStyle(target, 'target-success');\n                    }\n                });\n            }\n\n            layer.id = 'layer-' + target.id;\n            layer.data('point', point);\n            target.data('target', point);\n\n            if(_.isFunction(options.create)){\n                options.create(target);\n            }\n    \n            return target;\n        },\n\n\n        /**\n         * Get the Raphael coordinate from QTI coordinate\n         * @param {Raphael.Paper} paper - the interaction paper\n         * @param {String} type - the shape type\n         * @param {String|Array.<Number>} coords - qti coords as a string or an array of number\n         * @returns {Array} the arguments array of coordinate to give to the approriate raphael shapre creator\n         */\n        raphaelCoords :  function raphaelCoords(paper, type, coords){\n            var shapeCoords;\n            if(_.isString(coords)){\n                coords = _.map(coords.split(','), function(coord){\n                    return parseInt(coord, 10);\n                });\n            }\n            if(!_.isArray(coords) || coords.length < coordsValidator[type]){\n                throw new Error('Invalid coords ' + JSON.stringify(coords) + '  for type ' + type);\n            } \n            switch(type){\n                case 'rect' : shapeCoords = qti2raphCoordsMapper.rect(coords); break; \n                case 'default' : shapeCoords = qti2raphCoordsMapper['default'].call(null, paper); break; \n                case 'poly' : shapeCoords = qti2raphCoordsMapper.poly(coords); break; \n                default : shapeCoords = coords; break;\n            }\n            return shapeCoords;\n        },\n\n        /**\n         * Get the QTI coordinates from a Raphael Element\n         * @param {Raphael.Element} element - the shape to get the coords from\n         * @returns {String} the QTI coords\n         */\n        qtiCoords : function qtiCoords(element){\n            var mapper = raph2qtiCoordsMapper[element.type];\n            var result = '';\n            if(_.isFunction(mapper)){\n                result = _.map(mapper.call(raph2qtiCoordsMapper, element.attr()), function(coord){\n                            return _.parseInt(coord);\n                        }).join(',');\n            }\n            return result;\n        },\n \n        /**\n         * Create a circle that animate and disapear from a shape.\n         * \n         * @param {Raphael.Paper} paper - the paper\n         * @param {Raphael.Element} element - used to get the bbox from\n         */\n        createTouchCircle : function(paper, bbox){\n            var radius = bbox.width > bbox.height ? bbox.width : bbox.height;\n            var tCircle = paper.circle( (bbox.x + (bbox.width / 2)),  (bbox.y + (bbox.height / 2)), radius);\n            tCircle.attr(gstyle['touch-circle']);\n            _.defer(function(){\n                tCircle.animate({'r' : radius + 5, opacity: 0.7}, 300, function(){\n                    tCircle.remove();\n                });     \n            });\n        },\n\n        /**\n         * Create a text, that scales.\n         * \n         * @param {Raphael.Paper} paper - the paper\n         * @param {Object} options - the text options\n         * @param {Number} options.left - x coord\n         * @param {Number} options.top - y coord\n         * @param {String} [options.content] - the text content\n         * @param {String} [options.id] - the element identifier\n         * @param {String} [options.style = 'small-text'] - the style name according to the graphic-style.json keys\n         * @param {String} [options.title] - the text tooltip content\n         * @param {Boolean} [options.hide = false] - if the text starts hidden\n         * @returns {Raphael.Element} the created text\n         */\n        createText : function(paper, options){\n            var fontSize, scaledFontSize;\n            var top     = options.top || 0;\n            var left    = options.left || 0;\n            var content = options.content || '';\n            var style   = options.style || 'small-text';\n            var title   = options.title || '';\n            var factor  = 1;\n        \n            if(paper.width && paper.w){\n                factor = paper.width / paper.w;\n            }\n\n            var text = paper.text(left , top, content).toFront();\n            if(options.id){\n                text.id = options.id;\n            }\n            if(options.hide){\n                text.hide();\n            }\n                \n            text.attr(gstyle[style]);\n \n            if(typeof factor !== 'undefined' && factor !== 1){\n                fontSize = parseInt(text.attr('font-size'), 10);\n                scaledFontSize   = Math.floor(fontSize / factor) + 1;\n        \n                text.attr('font-size', scaledFontSize);\n            }\n  \n            if(title){\n                this.updateTitle(text, title);\n            }\n            return text; \n        },\n\n        /**\n         * Create a text in the middle of the related shape.\n         * \n         * @param {Raphael.Paper} paper - the paper\n         * @param {Raphael.Element} shape - the shape to add the text to\n         * @param {Object} options - the text options\n         * @param {String} [options.content] - the text content\n         * @param {String} [options.id] - the element identifier\n         * @param {String} [options.style = 'small-text'] - the style name according to the graphic-style.json keys\n         * @param {String} [options.title] - the text tooltip content\n         * @param {Boolean} [options.hide = false] - if the text starts hidden\n         * @param {Boolean} [options.shapeClick = false] - clicking the text delegates to the shape\n         * @returns {Raphael.Element} the created text\n         */\n        createShapeText : function(paper, shape, options){\n            var self    = this;\n            var fontSize, scaledFontSize;\n            var bbox    = shape.getBBox();\n       \n            var text = this.createText(paper, _.merge({\n                left : bbox.x + (bbox.width / 2),\n                top  : bbox.y + (bbox.height / 2)\n            }, options));\n \n            if(options.shapeClick){\n                text.click(function(){\n                    self.trigger(shape, 'click');\n                });\n            }   \n            return text; \n        },\n\n        /**\n         * Create an image with a padding and a border, using a set.\n         * \n         * @param {Raphael.Paper} paper - the paper\n         * @param {Object} options - image options\n         * @param {Number} options.left - x coord\n         * @param {Number} options.top - y coord\n         * @param {Number} options.width - image width\n         * @param {Number} options.height - image height\n         * @param {Number} options.url - image ulr\n         * @param {Number} [options.padding = 6] - a multiple of 2 is welcomed\n         * @param {Boolean} [options.border = false] - add a border around the image\n         * @param {Boolean} [options.shadow = false] - add a shadow back the image\n         * @returns {Raphael.Element} the created set, augmented of a move(x,y) method\n         */\n        createBorderedImage : function(paper, options){\n            var padding = options.padding >= 0 ? options.padding : 6;\n            var halfPad = padding / 2;\n \n            var rx = options.left,\n                ry = options.top, \n                rw = options.width + padding, \n                rh = options.height + padding;\n\n            var ix = options.left + halfPad,\n                iy = options.top + halfPad,\n                iw = options.width, \n                ih = options.height;\n\n            var set = paper.set();\n    \n            //create a rectangle with a padding and a border.\n            var rect = paper\n                .rect(rx, ry, rw, rh)\n                .attr(options.border ? gstyle['imageset-rect-stroke'] : gstyle['imageset-rect-no-stroke']);\n\n            //and an image centered into the rectangle.\n            var image = paper\n                .image(options.url, ix, iy, iw, ih)\n                .attr(gstyle['imageset-img']);\n\n            if(options.shadow){\n                set.push(rect.glow({ \n                    width   : 2,\n                    offsetx : 1,\n                    offsety : 1\n                }));\n            }\n            set.push(rect, image);\n\n            /**\n             * Add a move method to set that keep the given coords during an animation\n             * @private\n             * @param {Number} x - destination\n             * @param {Number} y - destination\n             * @param {Number} [duration = 400] - the animation duration\n             * @returns {Raphael.Element} the set for chaining\n             */\n            set.move = function move(x, y, duration){\n                var animation = raphael.animation({x: x, y : y}, duration || 400);\n                var elt = rect.animate(animation);\n                image.animateWith(elt, animation, {x : x + halfPad, y : y + halfPad}, duration || 400);\n                return set;\n            };\n        \n            return set;\n        },\n        \n        /**\n         * Update the visual state of an Element\n         * @param {Raphael.Element} element - the element to change the state\n         * @param {String} state - the name of the state (from states) to switch to\n         * @param {String} [title] - a title linked to this step\n         */\n        updateElementState : function(element, state, title){\n            if(element && element.animate){\n                element.animate(gstyle[state], 200, 'linear', function(){\n                    element.attr(gstyle[state]); //for attr that don't animate\n                });\n        \n                if(title){\n                    this.updateTitle(element, title);\n                }\n            }\n        },\n\n        /**\n         * Update the title of an element (the attr method of Raphael adds only new node instead of updating exisitings).\n         * @param {Raphael.Element} element - the element to update the title\n         * @param {String} [title] - the new title\n         */\n        updateTitle : function(element, title){\n            if(element && element.node){\n                //removes all remaining titles nodes\n                _.forEach(element.node.children, function(child){\n                    if(child.nodeName.toLowerCase() === 'title'){\n                        element.node.removeChild(child);\n                    }\n                });\n                \n                //then set the new title\n                element.attr('title', title);\n            }\n        },\n\n        /**\n         * Highlight an element with the error style\n         * @param {Raphael.Element} element - the element to hightlight\n         * @param {String} [restorState = 'basic'] - the state to restore the elt into after flash\n         */\n        highlightError : function(element, restoredState){\n            var self = this;\n            if(element){\n               element.flashing = true; \n               self.updateElementState(element, 'error');\n                _.delay(function(){\n                    self.updateElementState(element, restoredState || 'basic');\n                    element.flashing = false; \n                }, 800);\n           }\n        },\n\n        /**\n         * Trigger an event already bound to a raphael element\n         * @param {Raphael.Element} element\n         * @param {String} event - the event name\n         *\n         */\n        trigger : function(element, event){\n\n            var evt = _.where(element.events, { name : event});\n            if(evt.length && evt[0] && typeof evt[0].f === 'function'){\n                evt[0].f.apply(element, Array.prototype.slice.call(arguments, 2));\n            }\n        },\n\n\n        /**\n         * Get an x/y point from a MouseEvent\n         * @param {MouseEvent} event - the source event\n         * @param {Raphael.Paper} paper - the interaction paper\n         * @param {jQueryElement} $container - the paper container\n         * @param {Boolean} isResponsive - if the paper is scaling\n         * @returns {Object} x,y point\n         */\n        getPoint : function getPoint(event, paper, $container, isResponsive){\n            var rwidth, rheight, wfactor;\n\n            //get the click coords\n            var point = this.clickPoint($container, event);\n\n            //recalculate point coords in case of scaled image.\n            if(paper.w && paper.w !== paper.width){\n                if(isResponsive){\n                    wfactor = paper.w / paper.width;\n                    point.x = Math.round(point.x * wfactor);\n                    point.y = Math.round(point.y * wfactor);\n                } else if(paper.width > paper.w){\n                    rwidth = (paper.width - paper.w) / 2;\n                    point.x = Math.round(point.x - rwidth);\n                } else {  \n                    wfactor = paper.w / paper.width;\n                    point.x = Math.round(point.x * wfactor);\n\n                    rheight = (paper.height - (paper.height * (2 - wfactor))) / 2;\n                    point.y = Math.round((point.y * wfactor) - rheight);\n                } \n            }\n    \n            return point;\n        },\n\n        /**\n         * Get paper position relative to the container \n         * @param {jQueryElement} $container - the paper container\n         * @param {Raphael.Paper} paper - the interaction paper\n         * @returns {Object} position with top and left\n         */\n        position : function($container, paper){\n            var pw = parseInt(paper.w || paper.width, 10);\n            var cw = parseInt($container.width(), 10);\n            var ph = parseInt(paper.w || paper.width, 10);\n            var ch = parseInt($container.height(), 10);\n\n            return {\n                left : ((cw - pw) / 2), \n                top : ((ch - ph) / 2) \n            };\n        },\n\n        /**\n         * Get a point from a click event\n         * @param {jQueryElement} $container - the element that contains the paper\n         * @param {MouseEvent} event - the event triggered by the click\n         * @returns {Object} the x,y point\n         */ \n        clickPoint : function($container, event){\n            var x, y; \n            var offset = $container.offset();\n             if (event.pageX || event.pageY) {\n                x = event.pageX - offset.left;\n                y = event.pageY - offset.top;\n            } else if (event.clientX || event.clientY) {\n                x = event.clientX + document.body.scrollLeft + document.documentElement.scrollLeft - offset.left;\n                y = event.clientY + document.body.scrollTop + document.documentElement.scrollTop - offset.top;\n            }\n\n            return { x : x, y : y };\n        }\n    };\n\n    return GraphicHelper;\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'raphael',\n    'scale.raphael',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicAssociateInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n], function($, _, __, raphael, scaleRaphael, tpl, graphic,  pciResponse, containerHelper, instructionMgr){\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     */\n    var render = function render(interaction){\n\n        var $container = containerHelper.get(interaction);\n        var background = interaction.object.attributes;\n        var baseUrl = this.getOption('baseUrl') || '';\n        var $imageBox  = $('.main-image-box', $container);\n        interaction._vsets = [];\n\n        interaction.paper = graphic.responsivePaper( 'graphic-paper-' + interaction.serial, interaction.serial, {\n            width       : background.width,\n            height      : background.height,\n            img         : baseUrl + background.data,\n            imgId       : 'bg-image-' + interaction.serial,\n            container   : $container\n        });\n\n        //call render choice for each interaction's choices\n        _.forEach(interaction.getChoices(), _.partial(_renderChoice, interaction));\n\n        //make the paper clear the selection by clicking it\n        _paperUnSelect(interaction);\n\n        //set up the constraints instructions\n        instructionMgr.minMaxChoiceInstructions(interaction, {\n            min: interaction.attr('minAssociations'),\n            max: interaction.attr('maxAssociations'),\n            getResponse : _getRawResponse,\n            onError : function(data){\n                if(data && data.target){\n                    graphic.highlightError(data.target);\n                }\n            }\n        });\n    };\n\n\n    /**\n     * Render a choice inside the paper.\n     * Please note that the choice renderer isn't implemented separately because it relies on the Raphael paper instead of the DOM.\n     * @param {Paper} paper - the raphael paper to add the choices to\n     * @param {Object} interaction\n     * @param {Object} choice - the hotspot choice to add to the interaction\n     */\n    var _renderChoice  =  function _renderChoice(interaction, choice){\n        var shape = choice.attr('shape');\n        var coords = choice.attr('coords');\n        var maxAssociations = interaction.attr('maxAssociations');\n\n        var rElement = graphic.createElement(interaction.paper, shape, coords, {\n            id : choice.serial,\n            title : __('Select this area to start an association')\n        })\n        .data('max', choice.attr('matchMax'))\n        .data('matching', 0)\n        .removeData('assocs')\n        .click(function(){\n            var self = this;\n            var active, assocs;\n\n            //can't create more associations than the maxAssociations attr\n            if(maxAssociations > 0 && _getRawResponse(interaction).length >= maxAssociations){\n                _shapesUnSelectable(interaction);\n                instructionMgr.validateInstructions(interaction, { choice : choice, target : this });\n                return;\n            }\n\n            if(this.selectable) {\n                active = _getActiveElement(interaction);\n                if(active){\n\n                    //increment the matching counter\n                    active.data('matching', active.data('matching') + 1);\n                    this.data('matching', this.data('matching') + 1);\n\n                    //attach the response to the active (not the dest)\n                    assocs = active.data('assocs') || [];\n                    assocs.push(choice.id());\n                    active.data('assocs', assocs);\n\n                    //and create the path\n                    _createPath(interaction, active, this, function onRemove(){\n\n                        //decrement the matching counter\n                        active.data('matching', active.data('matching') - 1);\n                        self.data('matching', self.data('matching') - 1);\n\n                        //detach the response from the active\n                        active.data('assocs', _.remove(active.data('assocs') || [], choice.id()));\n\n                        containerHelper.triggerResponseChangeEvent(interaction);\n                        instructionMgr.validateInstructions(interaction, { choice : choice, target : self });\n                    });\n                }\n                _shapesUnSelectable(interaction);\n\n            } else if(this.active) {\n                graphic.updateElementState(this, 'basic', __('Select another area to complete the association'));\n                this.active = false;\n                _shapesUnSelectable(interaction);\n            } else if(_isMatchable(this)){\n                graphic.updateElementState(this, 'active', __('Select this area to start an association'));\n                this.active = true;\n                _shapesSelectable(interaction, this);\n            }\n\n            containerHelper.triggerResponseChangeEvent(interaction);\n            instructionMgr.validateInstructions(interaction, { choice : choice, target : this });\n        });\n    };\n\n    /**\n     * By clicking the paper image the shapes are restored to their default state\n     * @private\n     * @param {Object} interaction\n     */\n    var _paperUnSelect = function _paperUnSelect(interaction){\n        var $container = containerHelper.get(interaction);\n        var image = interaction.paper.getById('bg-image-' + interaction.serial);\n        if(image){\n            image.click(function(){\n                _shapesUnSelectable(interaction);\n                $container.trigger('unselect.graphicassociate');\n            });\n        }\n    };\n\n    /**\n     * Get the element that has the active state\n     * @private\n     * @param {Object} interaction\n     * @returns {Raphael.Element} the active element\n     */\n    var _getActiveElement = function _getActiveElement(interaction){\n        var active;\n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element && element.active === true){\n                active = element;\n                return false;\n            }\n        });\n        return active;\n    };\n\n    /**\n     * Create a path from a src element to a destination.\n     * The path is selectable and can be removed by itself\n     * @private\n     * @param {Object} interaction\n     * @param {Raphael.Element} srcElement - the path starts from this shape\n     * @param {Raphael.Element} destElement - the path ends to this shape\n     * @param {Function} onRemove - called back on path remove\n     */\n    var _createPath = function _createPath(interaction, srcElement, destElement, onRemove){\n        var $container = containerHelper.get(interaction);\n\n        //virtual set, not a raphael one, just to group the elements\n        var vset = [];\n\n        //get the middle point of the source shape\n        var src = srcElement.getBBox();\n        var sx = src.x + (src.width / 2);\n        var sy = src.y + (src.height / 2);\n\n        //get the middle point of the source shape\n        var dest = destElement.getBBox();\n        var dx = dest.x + (dest.width / 2);\n        var dy = dest.y + (dest.height / 2);\n\n        //create a path with bullets at the beginning and the end\n        var srcBullet = interaction.paper.circle(sx, sy, 3)\n            .attr(graphic._style['assoc-bullet']);\n\n        var destBullet = interaction.paper.circle(dx, dy, 3)\n            .attr(graphic._style['assoc-bullet']);\n\n        var path = interaction.paper.path('M' + sx + ',' + sy + 'L' + sx + ',' + sy)\n            .attr(graphic._style.assoc)\n            .animate({path : 'M' + sx + ',' + sy + 'L' + dx + ',' + dy}, 300);\n\n        //create an overall layer that make easier the path selection\n        var layer = interaction.paper.path('M' + sx + ',' + sy + 'L' + dx + ',' + dy)\n            .attr(graphic._style['assoc-layer']);\n\n        //get the middle of the path\n        var midPath = layer.getPointAtLength(layer.getTotalLength() / 2);\n\n        //create an hidden background for the closer\n        var closerBg = interaction.paper.circle(midPath.x, midPath.y, 9)\n            .attr(graphic._style['close-bg'])\n            .toBack();\n\n        //create an hidden closer\n        var closer = interaction.paper.path(graphic._style.close.path)\n            .attr(graphic._style.close)\n            .transform('T' + (midPath.x - 9 ) + ',' + (midPath.y - 9))\n            .attr('title', _('Click again to remove'))\n            .toBack();\n\n        //the path is below the shapes\n        srcElement.toFront();\n        destElement.toFront();\n\n        //add the path into a set\n        vset = [srcBullet, path, destBullet, layer, closerBg, closer];\n        interaction._vsets.push(vset);\n\n        //to identify the element of the set outside the context\n        _.invoke(vset, 'data', 'assoc-path', true);\n\n        //enable to select the path by clicking the invisible layer\n        layer.click(function selectLigne (){\n            if(closer.attrs.opacity === 0){\n                showCloser();\n            } else {\n                hideCloser();\n            }\n        });\n\n        $container.on('unselect.graphicassociate', function(){\n            hideCloser();\n        });\n\n        function showCloser(){\n            closerBg\n                .toFront()\n                .animate({opacity: 0.8}, 300)\n                .click(removeSet);\n            closer\n                .toFront()\n                .animate({opacity: 1}, 300)\n                .click(removeSet);\n        }\n\n        function hideCloser(){\n           if(closerBg && closerBg.type){\n                closerBg\n                    .animate({opacity: 0}, 300, function(){\n                        closerBg.toBack();\n                    })\n                    .unclick();\n                closer\n                    .animate({opacity: 0}, 300, function(){\n                        closer.toBack();\n                    })\n                    .unclick();\n            }\n        }\n\n        //remove set handler\n        function removeSet(){\n            _.invoke(vset, 'remove');\n            interaction._vsets = _.without(interaction._vsets, vset);\n            if(typeof onRemove === 'function'){\n                onRemove();\n            }\n        }\n    };\n\n    /**\n     * Makes the shapes selectable\n     * @private\n     * @param {Object} interaction\n     * @param {Raphael.Element} active - the active shape\n     */\n    var _shapesSelectable = function _shapesSelectable(interaction, active){\n\n        var assocs = active.data('assocs') || [];\n\n        //update the shape state\n        _.forEach(interaction.getChoices(), function(choice){\n            var element;\n            if(!_.contains(assocs, choice.id())){\n                element = interaction.paper.getById(choice.serial);\n                if(!element.active && element.id !== active.id &&  _isMatchable(element, active)){\n                    element.selectable = true;\n                    graphic.updateElementState(element, 'selectable');\n                }\n            }\n        });\n    };\n\n    /**\n     * Makes all the shapes UNselectable\n     * @private\n     * @param {Object} interaction\n     */\n    var _shapesUnSelectable = function _shapesUnSelectable(interaction){\n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element){\n                element.selectable = false;\n                element.active = false;\n                graphic.updateElementState(element, 'basic');\n            }\n        });\n    };\n\n    /**\n     * Check if a shape can accept matches\n     * @private\n     * @param {Raphael.Element} element - the shape\n     * @returns {Boolean} true if the element is matchable\n     */\n    var _isMatchable = function(element){\n        var matchable = false;\n        var matching, matchMax;\n        if(element){\n            matchMax = element.data('max') || 0;\n            matching = element.data('matching') || 0;\n            matchable = (matchMax === 0 || matchMax > matching);\n        }\n        return matchable;\n    };\n\n    /**\n     * Get the response from the interaction\n     * @private\n     * @param {Object} interaction\n     * @returns {Array} the response in raw format\n     */\n    var _getRawResponse = function _getRawResponse(interaction){\n        var responses = [];\n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            var assocs = element.data('assocs');\n            if(element && assocs){\n               responses = responses.concat(_.map(assocs, function(id){\n                    return [choice.id(), id];\n               }));\n            }\n        });\n        return responses;\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * Special value: the empty object value {} resets the interaction responses\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n\n        var responseValues;\n        if(response && interaction.paper){\n\n            try{\n                responseValues = pciResponse.unserialize(response, interaction);\n            } catch(e){}\n\n            if(_.isArray(responseValues)){\n                //create an object with choiceId => shapeElement\n                var map =  _.transform(interaction.getChoices(), function(res, choice){\n                    res[choice.id()] = interaction.paper.getById(choice.serial);\n                });\n               _.forEach(responseValues, function(responseValue){\n                    var el1, el2;\n                    if(_.isArray(responseValue) && responseValue.length === 2){\n                        el1 = map[responseValue[0]];\n                        el2 = map[responseValue[1]];\n                        if(el1 && el2){\n                           graphic.trigger(el1, 'click');\n                           graphic.trigger(el2, 'click');\n                        }\n                    }\n               });\n            }\n        }\n    };\n\n    /**\n     * Reset the current responses of the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * Special value: the empty object value {} resets the interaction responses\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var resetResponse = function resetResponse(interaction){\n        var toRemove = [];\n\n        //reset response and state bound to shapes\n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element){\n                element.data({\n                    'max' : choice.attr('matchMax'),\n                    'matching' : 0,\n                    'assocs' : []\n                });\n            }\n        });\n\n        //remove the paths, but outside the forEach as it is implemented as a linked list\n        interaction.paper.forEach(function(elt){\n            if(elt.data('assoc-path')){\n                toRemove.push(elt);\n            }\n        });\n        _.invoke(toRemove, 'remove');\n    };\n\n\n    /**\n     * Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        var raw = _getRawResponse(interaction);\n        var response =  pciResponse.serialize(_getRawResponse(interaction), interaction);\n        return response;\n    };\n\n    /**\n     * Clean interaction destroy\n     * @param {Object} interaction\n     */\n    var destroy = function destroy(interaction){\n        var $container;\n        if(interaction.paper){\n            $container = containerHelper.get(interaction);\n\n            $(window).off('resize.qti-widget.' + interaction.serial);\n            $container.off('resize.qti-widget.' + interaction.serial);\n\n            interaction.paper.clear();\n            instructionMgr.removeInstructions(interaction);\n\n            $container.off('.graphicassociate');\n\n            $('.main-image-box', $container).empty().removeAttr('style');\n            $('.image-editor', $container).removeAttr('style');\n            $('ul', $container).empty();\n        }\n\n        //remove all references to a cache container\n        containerHelper.reset(interaction);\n    };\n\n    /**\n     * Set the interaction state. It could be done anytime with any state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {Object} state - the interaction state\n     */\n    var setState  = function setState(interaction, state){\n        if(_.isObject(state)){\n            if(state.response){\n                interaction.resetResponse();\n                interaction.setResponse(state.response);\n            }\n        }\n    };\n\n    /**\n     * Get the interaction state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the interaction current state\n     */\n    var getState = function getState(interaction){\n        var $container;\n        var state =  {};\n        var response =  interaction.getResponse();\n\n        if(response){\n            state.response = response;\n        }\n        return state;\n    };\n\n    /**\n     * Expose the common renderer for the hotspot interaction\n     * @exports qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction\n     */\n    return {\n        qtiClass : 'graphicAssociateInteraction',\n        template : tpl,\n        render : render,\n        getContainer : containerHelper.get,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy,\n        setState : setState,\n        getState : getState\n    };\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget',[\n    'jquery', 'lodash', 'i18n',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCreator/helper/dummyElement'\n], function($, _, __, graphic, dummyElement){\n\n    /**\n     * The Widget that provides components used by the QTI Creator for the Hotspot Interaction\n     *\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/Widget\n     */      \n    var GraphicInteractionWidget = {\n\n        /**\n         * Create a basic Raphael paper or a placeholder of no bg is defined.\n         * @param {Function} resize - called back on resize with the width and factor\n         * @returns {Raphael.Paper} the raphael paper if initialized?\n         */ \n        createPaper : function(resize){\n            var paper;\n            var $container  = this.$original;\n            var $item       = $container.parents('.qti-item');\n            var background  = this.element.object.attributes;\n            var serial      = this.element.serial;\n\n            if(!background.data){\n                this._createPlaceholder();\n            } else {\n                paper = graphic.responsivePaper( 'graphic-paper-' + serial, serial, {\n                    width       : background.width, \n                    height      : background.height,\n                    img         : this.baseUrl + background.data,\n                    imgId       : 'bg-image-' + serial,\n                    container   : $container,\n                    resize      : function() {\n                        var $blocks = $('.image-editor.solid, .block-listing.source', $container);\n                        var minWidth = arguments[0];\n                        if(typeof resize === 'function') {\n                            resize.call(this, arguments);\n                        }\n                        if(!$container.hasClass('responsive')) {\n                            $blocks.each(function() {\n                                if(!parseInt(this.style.minWidth)){\n                                    this.style.minWidth = (minWidth).toString() + 'px';\n                                }\n                            });\n                        }\n                    }\n                });\n\n                //listen for internal size change\n                $item.on('resize.gridEdit.' + serial, function(){\n                    $container.trigger('resize.qti-widget.' + serial);\n                });\n\n            }\n\n            return paper;\n        },\n\n        /**\n         * Creates a dummy placeholder for background.\n         * @private\n         */\n        _createPlaceholder : function(){\n            var self       = this;\n            var $container = this.$original;\n            var $imageBox  = $container.find('.main-image-box');\n            var $editor    = $container.find('.image-editor');\n            var diff       = ($editor.outerWidth() - $editor.width()) + ($container.outerWidth() - $container.width()) + 1;\n            dummyElement.get({\n                icon: 'image',\n                css: {\n                    width  : $container.innerWidth() - diff,\n                    height : 200\n                },\n                title : __('Select an image first.')\n            })\n            .click(function(){\n                var $upload  = $('[data-role=\"upload-trigger\"]', self.$form);\n                if($upload.length){\n                    $upload.trigger('click');\n                }\n            })\n            .appendTo($imageBox);\n        },\n\n        /**\n         * call render choice for each interaction's choices\n         */ \n        createChoices : function(){\n            _.forEach(this.element.getChoices(), this._currentChoices, this);\n        },\n        \n        /**\n         * Add shape to the Raphel paper for a QTI choice\n         * @private\n         * @param {Object} choice - the QTI choice \n         */ \n        _currentChoices : function(choice){\n            graphic.createElement(this.element.paper, choice.attr('shape'), choice.attr('coords'), {\n                id          : choice.serial,\n                touchEffect : false\n            });\n        }\n   };\n\n    return GraphicInteractionWidget;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Sleep',[\n    'taoQtiItem/qtiCreator/widgets/states/factory', \n    'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep'\n], function(stateFactory, SleepState){\n   \n    var initSleepState = function initSleepState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        widget.on('metaChange', function(data){\n            if(data.key === 'responsive'){\n                if(data.value === true){\n                    interaction.addClass('responsive');\n                } else {\n                    interaction.removeClass('responsive');\n                }\n                widget.rebuild();\n            }\n        });\n    };\n\n    var exitSleepState = function exitSleepState(){};\n \n    return stateFactory.extend(SleepState, initSleepState, exitSleepState); \n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/graphicInteraction/sidebar', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"tall\";\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n        <li class=\\\"separator\\\"></li>\\n        <li data-type=\\\"target\\\"><span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Drop the target to select a point\", options) : helperMissing.call(depth0, \"__\", \"Drop the target to select a point\", options)))\n    + \"\\\" class=\\\"icon-target\\\"></span></li>\\n        \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"image-sidebar lft  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.showTarget), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n    <ul class=\\\"none forms\\\">\\n        <li data-type=\\\"rect\\\"><span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Draw a rectangle on the image\", options) : helperMissing.call(depth0, \"__\", \"Draw a rectangle on the image\", options)))\n    + \"\\\" class=\\\"icon-rectangle\\\"></span></li>\\n        <li data-type=\\\"circle\\\"><span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Draw a circle on the image\", options) : helperMissing.call(depth0, \"__\", \"Draw a circle on the image\", options)))\n    + \"\\\" class=\\\"icon-circle\\\"></span></li>\\n        <li data-type=\\\"ellipse\\\"><span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Draw an ellipsis on the image\", options) : helperMissing.call(depth0, \"__\", \"Draw an ellipsis on the image\", options)))\n    + \"\\\" class=\\\"icon-ellipsis\\\"></span></li>\\n        <li data-type=\\\"path\\\"><span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Draw a free form on the image\", options) : helperMissing.call(depth0, \"__\", \"Draw a free form on the image\", options)))\n    + \"\\\" class=\\\"icon-free-form\\\"></span></li>\\n    \\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.showTarget), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n        <li class=\\\"separator\\\"></li>\\n        <li class=\\\"bin disabled\\\"><span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove the selected shape\", options) : helperMissing.call(depth0, \"__\", \"Remove the selected shape\", options)))\n    + \"\\\" class=\\\"icon-bin\\\"></span></li>\\n    </ul>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeSideBar',[\n    'jquery', 'lodash', \n    'tpl!taoQtiItem/qtiCreator/tpl/graphicInteraction/sidebar'\n], function($, _, sidebarTmpl){\n\n    /**\n     * Helps you to create the side bar used to select shapes to draw in the QTI Create\n     * @exports qtiCreator/widgets/interaction/helpers/shapeSideBar\n     */\n    var shapeSideBar  = {\n\n        /**\n         * Create the side bar and add it the container.\n         * It will resize the container accordingly.\n         * @param {jQueryElement} $container - a graphic interaction container\n         * @param {Boolean} [showTarget = false] - if the target data type has to be shown\n         * @returns {jQueryElement} the side bar element\n         * @fires shapeSideBar#shapeactive.qti-widget \n         * @fires shapeSideBar#shapedeactive.qti-widget \n         * @fires resize.qti-widget\n         */\n        create : function create($container, showTarget){\n\n            var $imageEditor = $container.find('.image-editor');\n            var serial = $container.data('serial');\n            var $imageBox = $('.main-image-box', $imageEditor);\n            var $sideBar = $(sidebarTmpl({\n                    showTarget : !!showTarget \n                 })).insertBefore($imageEditor);\n            var $forms = $('li[data-type]', $sideBar);\n            var $bin = $('li.bin', $sideBar);\n            //var newWidth = $container.width() - $sideBar.outerWidth(true) - 2; //-2 is a security to prevent the element to dislpay below the sidebar\n           \n            /**\n             * Set a form/shape into an active state\n             * @param {jQueryElement} $form - the form/shape button\n             */ \n            var activate = function activate($form){\n                $forms.filter('.active').each(function(){\n                    deactivate($(this));\n                });\n                $form.addClass('active');\n\n                /**\n                 * When a shape is activated \n                 * @event shapeSideBar#shapeactive.qti-widget\n                 * @param {jQueryElement} $form - the shape element\n                 * @param {String} type - the shape type\n                 */\n                $sideBar.trigger('shapeactive.qti-widget', [$form, $form.data('type')]);\n            }; \n            \n            /**\n             * Set a form/shape into an inactive state\n             * @param {jQueryElement} $form - the form/shape button \n             */ \n            var deactivate = function deactivate($form){\n                $form.removeClass('active');\n                \n                /**\n                 * A shape is deactivated \n                 * @event shapeSideBar#shapedeactive.qti-widget \n                 * @param {jQueryElement} $form - the shape element\n                 * @param {String} type - the shape type\n                 */\n                $sideBar.trigger('shapedeactive.qti-widget', [$form, $form.data('type')]);\n            }; \n\n            /**\n             * To enable the bin \n             * @event shapeSideBar#enabalebin.qti-widget \n             */\n            $sideBar.on('enablebin.qti-widget', function(){\n               $bin.removeClass('disabled')\n                    .on('click', function(e){\n                        e.preventDefault();\n                        $sideBar.trigger('bin.qti-widget');\n                    });\n            });\n            \n            /**\n             * To disable the bin \n             * @event shapeSideBar#disabalebin.qti-widget \n             */\n            $sideBar.on('disablebin.qti-widget', function(){\n               $bin.addClass('disabled')\n                   .off('click'); \n            });\n\n            $forms.click(function(e){\n                e.preventDefault();\n                var $form = $(this);\n                if(!$form.hasClass('active')){\n                    activate($form);\n                } else {\n                    deactivate($form);\n                }\n            }); \n             \n            $container.on('resize.qti-widget.' + serial, function(){\n                _.defer(function(){\n                    $sideBar.find('.forms').height($imageEditor.innerHeight());\n                });\n            });\n            $container.trigger('resize.qti-widget.' + serial); \n            return $sideBar;\n        },\n\n        remove : function remove($container){\n            var $sideBar = $('.image-sidebar', $container);\n            var $imageEditor = $container.find('.image-editor');\n            var $imageBox = $('.main-image-box', $imageEditor);\n            if($sideBar.length){\n                $sideBar.remove();\n                //$imageBox.css('width', 'auto');\n                //$imageEditor.css('width', 'auto');\n\n                $container.off('resize.qti-widget.sidebar');\n                $container.trigger('resize.qti-widget'); \n            }\n        }\n    };\n\n\n    return shapeSideBar;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeHandlers',[\n    'jquery', 'lodash', 'raphael'\n], function($, _, Raphael){\n\n    /**\n     * Creates handlers around a shape\n     * @exports qtiCreator/widgets/interaction/helpers/shapeHandlers\n     * @param {Raphael.Paper} paper - the raphael paper\n     * @param {Raphael.Element} element - the shape\n     * @returns {Array<Raphael.Element>} the handlers \n     */\n    var shapeHandlers = function (paper, element){\n\n        var getCoords = function getHandlingCoords(element){\n            var coords;\n            var scaleFactor = paper.w < paper.width ? 1 : paper.w / paper.width;\n            var bbox        = element.getBBox();\n            var size        = (bbox.width > 25 ? 6 : 4) * scaleFactor;\n            var half        = size / 2;\n            var halfWidth   = bbox.width / 2;\n            var halfHeight  = bbox.height / 2;\n            \n            switch(element.type){\n                case 'circle' :\n                    coords = {\n                        midTop      : [bbox.x + halfWidth - half, bbox.y - size, size, size],\n                        midRight    : [bbox.x + bbox.width, bbox.y + halfHeight - half, size, size],\n                        midBot      : [bbox.x + halfWidth - half, bbox.y + bbox.height, size, size],\n                        midLeft     : [bbox.x - size, bbox.y + halfHeight - half, size, size]\n                    };\n                    break;\n                case 'path' :\n                    coords =  {};\n                    _.forEach(Raphael.parsePathString(element.attr('path')), function(segment, index){\n                        if(segment.length === 3){\n                            coords['point' + index] = segment.slice(1).concat(half);\n                        }\n                    });\n                    break;\n                case 'rect' :\n                case 'ellipse' :\n                    coords = {\n                        topLeft     : [bbox.x - size, bbox.y - size, size, size],\n                        midTop      : [bbox.x + halfWidth - half, bbox.y - size, size, size],\n                        topRight    : [bbox.x + bbox.width, bbox.y - size, size, size],\n                        midRight    : [bbox.x + bbox.width, bbox.y + halfHeight - half, size, size],\n                        botRight    : [bbox.x + bbox.width, bbox.y + bbox.height, size, size],\n                        midBot      : [bbox.x + halfWidth - half, bbox.y + bbox.height, size, size],\n                        botLeft     : [bbox.x - size, bbox.y + bbox.height, size, size],\n                        midLeft     : [bbox.x - size, bbox.y + halfHeight - half, size, size]\n                    };\n                    break;\n            }\n            return coords;\n        };\n\n        return _.map(getCoords(element), function(handlerCoords, name){\n            var handler, cursor, constraints, hshape;\n            if(element.type === 'path'){\n                cursor = 'move';\n                hshape = 'circle'; \n            } else {\n                hshape = 'rect'; \n                switch(name){\n                    case 'topLeft' :\n                        cursor = 'nw-resize';\n                        constraints = { ix : true, iy : true };\n                        break;\n                    case 'midTop' :\n                        cursor = 'ns-resize';\n                        constraints = { iy : true };\n                        break;\n                    case 'topRight' :\n                        cursor = 'ne-resize';\n                        constraints = { x : true, iy : true };\n                        break;\n                    case 'midRight' :\n                        cursor = 'ew-resize';\n                        constraints = { x : true };\n                        break;\n                    case 'botRight' :\n                        cursor = 'se-resize';\n                        break;\n                    case 'midBot' :\n                        cursor = 'ns-resize';\n                        constraints = { y : true };\n                        break;\n                    case 'botLeft' :\n                        cursor = 'sw-resize';\n                        constraints = { ix : true, y : true };\n                        break;\n                    case 'midLeft' :\n                        cursor = 'ew-resize';\n                        constraints = { ix : true };\n                        break;\n                }\n            }\n            return paper[hshape].apply(paper, handlerCoords)\n                        .attr({\n                            'fill' : '#eeeeee',\n                            'cursor' : cursor\n                        })\n                        .data('constraints', constraints);\n        });\n    };\n\n    return shapeHandlers;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeResizer',[\n    'jquery', 'lodash', \n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic'\n], function($, _, commonGraphicHelper){\n\n\n    /**\n     * Resize a Raphael shape.\n     *\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeResizer\n     * @param {Raphael.Element} element - the element to resize\n     * @param {Object} options - the sizing options\n     * @param {Object} [options.start] - the x,y starting point of the shape (prior to the resize)\n     * @param {Object} options.stop - the x,y stop point of the shape (the size is the difference between start and stop)\n     * @param {Object} [options.constraints] - define sizing constraints, ie. {x : true} for horizontal only sizing\n     * @param {Number} [options.pointIndex] - for a path, this is the index of the point into the path\n     * @param {Function} [options.resized] - called back on resized\n     */\n    var resize =  function resize (element, options){\n        var resizer;\n        \n        if(element && element.type && options.stop){\n            resizer = _.bind(shapeResizer[element.type], shapeResizer);\n            \n            if(!options.start){\n                options.start = getStartPoint(element);\n            }\n            \n            if(_.isFunction(resizer)){\n                element.attr(resizer(options));\n                if (_.isFunction(options.resized)) {\n                    options.resized.call(element);\n                }\n            }\n        }\n\n        /**\n         * Get the start point of a shape\n         * @returns {Object} the start point\n         */\n        function getStartPoint(){\n            var startPoint;\n            switch(element.type){\n                case 'circle'   : startPoint = { x : element.attrs.cx, y : element.attrs.cy }; break;\n                case 'ellipse'  : \n                case 'rect'     : startPoint = element.getBBox(); break;\n            }\n            return startPoint;\n        }        \n    };\n    \n    /**\n     * Provides resizing implementation based on the shape type\n     */ \n    var shapeResizer = {\n        \n        /**\n         * Resize a rectangle\n         * @param {Object} options - see resize\n         * @returns {Object} attributes with the new size the Raphael.Element accepts\n         */\n        rect : function resizeRectangle(options){\n            var start = options.start;\n            var stop = options.stop;\n            var constraints = options.constraints;\n            var dest = {};\n            \n            if(!constraints || constraints.x){\n                dest.width = stop.x - start.x;\n                if(dest.width < 0){\n                    dest.x = stop.x;\n                    dest.width = dest.width * -1;\n                } \n            }\n\n            if(!constraints || constraints.y){\n                dest.height = stop.y - start.y;\n                if(dest.height < 0){\n                    dest.y = stop.y;\n                    dest.height = dest.height * -1;\n                }\n            }\n            if(constraints && constraints.ix){\n                dest.x = stop.x;\n                dest.width = start.width - (stop.x - start.x);\n                if(dest.width < 0){\n                    dest.x = stop.x;\n                    dest.width = dest.width * -1;\n                } \n            }\n\n            if(constraints && constraints.iy){\n                dest.y = stop.y;\n                dest.height = start.height - (stop.y - start.y);\n                if(dest.height < 0){\n                    dest.y = stop.y;\n                    dest.height = dest.height * -1;\n                }\n            }\n            \n            //we keep a minimal size\n            if(dest.width < 10){\n                dest.width = 10;\n            }\n            if(dest.height < 10){\n                dest.height = 10;\n            }\n            return dest;\n        },\n        \n        /**\n         * Resize a circle\n         * @param {Object} options - see resize\n         * @returns {Object} attributes with the new size the Raphael.Element accepts\n         */\n        circle : function resizeCircle(options){\n            var start = options.start;\n            var stop = options.stop;\n            var rw = (stop.x > start.x) ? stop.x - start.x  : start.x - stop.x;\n            var rh = (stop.y > start.y) ? stop.y - start.y  : start.y - stop.y;\n            //thanks pythagore \n            var r =  Math.floor( Math.sqrt(Math.pow(rw, 2) + Math.pow(rh, 2)));\n\n            return {\n                r : r < 5 ? 5 : r\n            };\n        },\n\n        /**\n         * Resize an ellispe\n         * @param {Object} options - see resize\n         * @returns {Object} attributes with the new size the Raphael.Element accepts\n         */\n        ellipse : function resizeEllipse(options){\n            var dest = {};\n            var boxDest = this.rect(options); \n\n            if(boxDest.x){\n                dest.x = boxDest.x;\n            }\n\n            if(boxDest.y){\n                dest.y = boxDest.y;\n            }\n            \n            if(boxDest.width){\n                dest.rx = boxDest.width / 2;\n            }\n            \n            if(boxDest.height){\n                dest.ry = boxDest.height / 2;\n            }\n            return dest;\n        },\n\n        /**\n         * Resize a path\n         * @param {Object} options - see resize (pointIndex is required here)\n         * @returns {Object} attributes with the new size the Raphael.Element accepts\n         */\n        path : function resizePath(options){\n            var dest = {};\n            if(options.path && options.start){\n                dest.path = '';\n               _.forEach(options.path, function(point, index){\n                   dest.path += point[0];\n                   if(point.length === 3){\n                       if (index === options.pointIndex || options.pointIndex === 0 && index === 1){\n                            dest.path += options.stop.x + ' ' + options.stop.y;\n                       } else {\n                            dest.path += point[1] + ' ' + point[2];\n                       }\n                   }                 \n               }); \n            }\n            return dest;\n        }\n    };\n    \n    return resize;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeMover',['jquery', 'lodash'], function($, _){\n\n    /**\n     * Move a Raphael shape.\n     *\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeMover\n     * @param {Raphael.Element} element - the element to move\n     * @param {Object} start - the original position\n     * @param {Object} stop - the destination position\n     */\n    var move =  function move (element, start, stop){\n        var mover;\n        if(element && element.type){\n            mover = _.bind(shapeMover[element.type], shapeMover);\n          \n            if(_.isFunction(mover)){\n                element.animate(\n                    mover(start, stop)\n                );\n            }\n        }\n    };\n    \n    /**\n     * Provides moving implementation based on the shape type\n     */ \n    var shapeMover = {\n        \n        /**\n         * Move a rectangle;\n         * @param {Raphael.Element} element - the element to move\n         * @param {Object} start - the original position\n         * @param {Object} stop - the destination position\n         * @returns {Object} attributes with the new position, that the Raphael.Element accepts\n         */\n        rect : function moveRectangle(start, stop){\n            return {\n                x : stop.x - start.x,\n                y : stop.y - start.y\n            };\n        },\n        \n        /**\n         * Move a circle.\n         * @param {Raphael.Element} element - the element to move\n         * @param {Object} start - the original position\n         * @param {Object} stop - the destination position\n         * @returns {Object} attributes with the new position, that the Raphael.Element accepts\n         */\n        circle : function moveCircle(start, stop){\n            return  {\n                cx : stop.x,\n                cy : stop.y\n            };\n        },\n\n        /**\n         * Move an ellipse.\n         * @param {Raphael.Element} element - the element to move\n         * @param {Object} start - the original position\n         * @param {Object} stop - the destination position\n         * @returns {Object} attributes with the new position, that the Raphael.Element accepts\n         */\n        ellipse : function moveEllipse(start, stop){\n            return {\n                cx : stop.x,\n                cy : stop.y\n            };\n        },\n\n        /**\n         * Move a path.\n         * @param {Raphael.Element} element - the element to move\n         * @param {Object} start - the original position\n         * @param {Object} stop - the destination position\n         * @returns {Object} attributes with the new position, that the Raphael.Element accepts\n         */\n        path : function movePath(start, stop){\n                \n            //do not use Raphael.transformPath to prevent using Curves for translation\n            var dest = { \n                path :  '' \n            };\n            _.forEach(start.path, function(point){\n                dest.path += point[0];\n                if(point.length === 3){\n                    dest.path += (point[1] + stop.x - start.x) + ',' + (point[2] + stop.y - start.y);\n                }                 \n            });\n            return dest;\n        }\n    };\n    \n    return move;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/helpers/pathBuilder',[\n    'jquery', 'lodash', \n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic'\n], function($, _, graphicHelper){\n\n\n    var pathBuilder = function(paper){\n\n        var path = {\n\n            _path : null,\n\n            closed : false,\n\n            set : null,\n\n            points : [],\n\n            getPath : function(){\n                return this._path;\n            },\n\n            start : function(point){\n                this.points = [];\n                return this.add(point);\n            },\n\n            add : function(point){\n                var self = this;\n                var stop; \n                var closeMe = false;\n                var scaleFactor = paper.w < paper.width ? 1 : paper.w / paper.width;\n                var pointSize = 3 * scaleFactor;\n                \n                stop = paper.circle(point.x, point.y, pointSize)\n                            .attr({'stroke' : 'black', 'stroke-width': 1, 'fill' : 'white', 'opacity' : 0.7, 'cursor' : 'pointer'})\n                            .click(function(e){\n                                e.preventDefault();\n                                e.stopPropagation();             \n                                if(self.points.length > 2){\n                                    this.attr('fill', 'green');\n                                    self.close();\n                                }\n                            });\n                \n                if(this.points.length === 0){\n\n                    stop.attr('fill', 'red');\n\n                    this.set = paper.set();\n\n                    this._path = paper.path('M' + point.x + ',' + point.y).attr(graphicHelper._style.active).attr('opacity', 0.3); \n                    this.set.push(this._path);\n                }\n\n                this.points.push(point);\n                this.set.push(stop);\n                this._path.animate({ path : this._path.attr('path') + 'L' +  point.x + ',' + point.y});\n     \n                return this;\n            },\n\n            close : function(){\n                this._path.attr({ path : this._path.attr('path') + 'Z'}).attr(graphicHelper._style.active).attr('opacity', 1); \n                this.set.forEach(function(elt){\n                    if(elt.type === 'circle'){\n                        elt.remove();         \n                    }\n                });\n                this.closed = true;\n                if(_.isFunction(this.closeCb)){\n                    this.closeCb();\n                }\n                \n                return this;\n            },\n\n            onClose : function(closeCb){\n                this.closeCb = closeCb;\n                return this;\n            }\n        };\n        return path;\n    };\n\n    return pathBuilder;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeFactory',[\n    'jquery', 'lodash',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeHandlers',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeResizer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeMover',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/pathBuilder'\n], function($, _, graphicHelper, shapeHandlers, shapeResizer, shapeMover, pathBuilder){\n\n    var shapeFactory = function shapeFactory(options){\n        var paper = options.paper;\n        var background = options.background;\n        var $container = options.$container;\n        var isResponsive = options.isResponsive || false;\n        var type = options.type || 'rect';\n\n        var creator = {\n            \n            states : {\n                drawing : false\n            },\n\n            _events : {},\n\n            on : function on(eventName, cb){\n                if(_.isFunction(cb)){\n                    this._events[eventName] = cb;\n                }\n            },\n\n            is : function is(state){\n                return this.states[state] === true;\n            },\n            \n            setState : function setState(state, value){\n                this.states[state] = value;\n            },\n\n            /**\n             * Start the shape creation\n             */ \n            start : function(){\n                switch(type){\n                    case 'path'     : this.startDrawingPath(); break;\n                    case 'target'   : this.startPositionTarget(); break;\n                    default         : this.startWithMouse(); break;\n                }\n            },\n\n            startPositionTarget : function startPositionTarget(){\n                var self = this;\n                self.setState('drawing', true);\n\n                background.click(function(e){\n                    e.preventDefault();\n                    e.stopPropagation();\n \n                    //get the current mouse point, even on a responsive paper\n                    var point = graphicHelper.getPoint(e, paper, $container, isResponsive);\n                    \n                    //add the point to the paper\n                    graphicHelper.createTarget(paper, {\n                        point : point, \n                        create : function created(target){\n                            self.setState('drawing', false);\n                            background.unclick();\n                            if(self._events['created.qti-widget']){\n                               self._events['created.qti-widget'].call(this, target); \n                            }\n                        },\n                        remove : false,\n                        hover  : false\n                    });\n                });\n            },\n\n            startDrawingPath : function startDrawingPath(){\n                var self = this;\n                var builder = pathBuilder(paper);\n                \n                self.setState('drawing', true);\n                \n                builder.onClose(created);\n                background.click(function(e){\n                    e.preventDefault();\n                    e.stopPropagation();             \n                    if(self.is('drawing')){\n                        builder.add(\n                            graphicHelper.getPoint(e, paper, $container, isResponsive)\n                        );\n                    }\n                });\n\n                function created(){\n                    self.setState('drawing', false);\n                    background.unclick();\n                    if(self._events['created.qti-widget']){\n                       self._events['created.qti-widget'].call(this, builder.getPath()); \n                    }\n                }\n            },\n          \n            startWithMouse : function startWithMouse(){            \n                var self = this;\n                var smoothResize = _.throttle(resize, 10);\n                var startPoint;\n                var shape;\n                \n                background.mousedown( function startDrawing(event){\n                    event.preventDefault();\n\n                    if(!self.is('drawing')){\n                        self.setState('drawing', true);\n\n                        startPoint = graphicHelper.getPoint(event, paper, $container, isResponsive);\n\n                        //create a base shape\n                        shape = graphicHelper.createElement(paper, type, [startPoint.x, startPoint.y, 25, 25], { \n                                style       : 'creator',\n                                hover       : false, \n                                touchEffect : false, \n                                qtiCoords   : false\n                            });\n    \n                        shape.mouseup(created);\n                        background.mouseup(created);\n                        \n                        //resize it now\n                        shape.mousemove(smoothResize);\n                        background.mousemove(smoothResize);    \n                    }\n                });\n\n                function created(){\n                    self.setState('drawing', false);\n                    background\n                        .unmousedown()\n                        .unmousemove()\n                        .unmouseup();\n                    shape\n                        .unmousedown()\n                        .unmouseup()\n                        .unmousemove();\n                    if(self._events['created.qti-widget']){\n                       self._events['created.qti-widget'].call(this, shape); \n                    }\n                }\n\n                function resize(event){\n                    if(self.is('drawing')){\n                        shapeResizer(shape, {\n                            start   : startPoint,\n                            stop    : graphicHelper.getPoint(event, paper, $container, isResponsive)\n                        });\n                    }\n                }\n            },\n\n            stop : function(){\n\n                    background\n                        .unmousedown()\n                        .unmousemove()\n                        .unmouseup()\n                        .unclick();\n            }\n        };\n\n        return creator;\n    };\n\n    return shapeFactory;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeEditor',[\n    'jquery', 'lodash',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeHandlers',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeResizer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeMover',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/pathBuilder'\n], function($, _, graphicHelper, shapeHandlers, shapeResizer, shapeMover, pathBuilder){\n\n    /**\n     * Enables you to edit a shape: handling, resizing, moving.\n     * This function is a factory that gives you a new instance of editor.\n     * \n     * @exports taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeEditor\n     *\n     * @param {Raphael.Element} shape - the shape to edit\n     * @param {Object} options - the contextual options\n     * @param {Raphael.Paper} options.paper - the raphael paper\n     * @param {Raphael.Element} options.background - the paper's background image element\n     * @param {jQueryElement} options.$container - the paper container\n     * @param {Boolean} [options.isResponsive = false] - if we are in responsive mode (auto scalling)\n     * @returns {shapeEditor.editor} the shape editor instance\n     */\n    var shapeEditor = function(shape, options){\n\n        var paper = options.paper;\n        var background = options.background;\n        var $container = options.$container;\n        var isResponsive = options.isResponsive || false;\n\n        /**\n         * The editor linked to a shape \n         * @type shapeEditor.editor\n         */\n        var editor = {\n\n            shape : null,\n\n            handlers : [],\n\n            states : {\n                drawing : false,\n                handling : false,\n                resizing : false,\n                moving : false\n            },\n\n            _events : {},\n\n            /**\n             * Listen for an event bound to the editor\n             * @param {String} eventName - the name of the event to listen\n             * @param {Function} cb - event callback \n             * @returns {shapeEditor.editor} for chaining\n             */\n            on : function on(eventName, cb){\n                if(_.isFunction(cb)){\n                    this._events[eventName] = cb;\n                }\n                return this;\n            },\n\n            /**\n             * Trigger an event on the editor\n             * @param {String} eventName - the name of the event to trigger\n             * @param {...*} args - additional args to pass to the bound callbacks\n             * @returns {shapeEditor.editor} for chaining\n             */\n            trigger : function(eventName){\n                if(_.isFunction(this._events[eventName])){\n                    this._events[eventName].apply(this, Array.prototype.slice.call(arguments, 1));\n                }\n                return this;\n            },\n\n            /**\n             * Check if the editor is in the given state\n             * @param {String} state - the state name\n             * @returns {Boolean} is in the state or not \n             */\n            is : function is(state){\n                return this.states[state] === true;\n            },\n            \n            /**\n             * Set the editor in a particular state\n             * @param {String} state - the state name\n             * @param {Boolean} value -\n             * @returns {shapeEditor.editor} for chaining\n             */\n            setState : function setState(state, value){\n                this.states[state] = value;\n                return this;\n            },\n\n\n            /**\n             * Set up the editor \n             * @constructor\n             * @private \n             * @param {Raphael.Element} shape - the shape to edit\n             * @returns {shapeEditor.editor} the shape editor instance\n             */ \n            _init : function(shape){\n                var self = this;\n                if(shape && shape.type){\n                    self.shape = shape;\n                    background.click(function(){\n                         if(!self.is('resizing') && self.is('handling')){\n                            self.quitHandling();  \n                         }\n                    });\n                    self.shape.click(function(){\n                         if(!self.is('resizing')){\n                            if(!self.is('handling')){\n                                self.enterHandling();  \n                            } else {\n                                self.quitHandling();  \n                            }    \n                        }\n                    });\n                }\n                return this;\n            },\n\n            /**\n             * Start the shape handling \n             * @returns {shapeEditor.editor} the shape editor instance\n             */ \n            enterHandling : function enterHandling(){\n                var self = this;\n                \n                //enter handling\n                self.setState('handling', true)\n                    .trigger('enterhandling.qti-widget');\n    \n                //do not move set\n                if(self.shape.type === 'set'){\n                    return;\n                }                   \n\n                //create handlers to resize the shape\n                self.handlers = shapeHandlers(paper, self.shape);\n                _.forEach(self.handlers, function(handler){\n                    //drag the handlers to resize the shape\n                    handler.drag(resize, startResize, resized);\n                });\n\n                //drag the shape to move it\n                self.shape.drag(move, startMove, moved);\n\n                var keyResizer = _.throttle(keyResize, 20);\n  \n                //bind keys \n                $(document).on('keydown.qti-widget', function(e){\n                    var code = e.which;\n                    //arrows\n                    if(code >= 37 && code <= 40){\n                        e.preventDefault();\n                        keyResizer(code);\n                    }\n                    //delete and backspace\n                    //if(e.which === 8 || e.which === 46){\n                        //e.preventDefault();\n                        //self.quitHandling();\n                        //self.removeShape();\n                    //}\n                });\n\n                /**\n                 * Start the resizing from an handler, create the layer, the start point, etc.\n                 * Used as handler dragstart callback\n                 * @private\n                 */ \n                function startResize (){ \n                    var handler  = this; \n                    var bbox;\n                    self.setState('resizing', true)\n                        .trigger('shapechanging.qti-widget');\n                    \n                    //create a layer to be reiszed\n                    self.layer = self.shape.clone();\n                    self.layer.attr(graphicHelper._style.basic);\n                    self.layer.attr('cursor', handler.attrs.cursor);\n\n                    bbox = self.layer.getBBox();\n                    self.layerTxt = graphicHelper.createShapeText(paper, self.layer, { \n                        style   : 'layer-pos-text',\n                        content : parseInt(bbox.width, 10) + ' x ' + parseInt(bbox.height, 10) \n                    });\n\n                    if(self.shape.type === 'path'){\n                       _.forEach(self.shape.attr('path'), function(point, index){\n                           if(point.length === 3 && point[1] === this.attr('cx') && point[2] === this.attr('cy')){\n                                this.pointIndex = index;\n                                return false; \n                           }                 \n                       }, handler); \n                    }\n\n                    //hide others\n                    _.invoke(_.reject(_.clone(self.handlers), function(elt){\n                        return elt === handler;\n                    }), 'hide');                              \n                }\n                 \n                /**\n                 * Resize a shape (in fact only the layer)\n                 * Used as handler drag callback\n                 * @private\n                 */ \n               function resize(dx, dy, x, y, event){\n                    var stopPoint, options;\n                    if(self.is('resizing')){\n\n                        stopPoint = graphicHelper.getPoint(event, paper, $container, isResponsive);\n                        options =  {\n                            stop        : stopPoint,\n                            constraints : this.data('constraints'),\n                            resized     : _.throttle(function(){\n                                var bbox = this.getBBox();\n                                self.layerTxt.attr('text',  parseInt(bbox.width, 10) + ' x ' + parseInt(bbox.height, 10) );\n                            }, 100)\n                        };\n\n                        if(self.shape.type === 'path'){\n                            options.start = _.pick(this.attrs, ['cx', 'cy']); \n                            options.path = self.layer.attr('path');\n                            options.pointIndex = this.pointIndex;\n                        }\n\n                        shapeResizer(self.layer, options);\n                         \n\n                        \n                        if(this.type === 'circle'){\n                            this.animate({\n                                cx : stopPoint.x,\n                                cy : stopPoint.y\n                            });\n                        } else {\n                            this.animate(stopPoint);\n                        }\n                    }\n                }\n               \n                /**\n                 * Finish resize: sync the shape to the resized layer\n                 * Used as handler dragend callback\n                 * @private\n                 */ \n                function resized(){\n                    self.shape.animate(\n                        _.pick(self.layer.attrs, ['x', 'y', 'cx', 'cy', 'r', 'rx', 'ry', 'width', 'height', 'path']),\n                        200,\n                        function animationEnd(){\n                            self.setState('resizing', false)\n                                .trigger('shapechange.qti-widget');\n                        }\n                    );\n                    self.layer.remove();\n                    self.layerTxt.remove();\n                    \n                    _.invoke(self.handlers, 'remove');\n                    self.handlers = [];\n                } \n               \n                /**\n                 * Resize a shape from keyboard\n                 * @param {Number} code - the HTMLEvent's key code\n                 * @private\n                 */ \n                function keyResize(code){ \n                    var attr, stop, start;\n                    if(!self.is('moving')){\n                        self.setState('moving', true);\n                        _.invoke(self.handlers, 'remove');\n                        \n                        attr = shape.attr();\n\n                        switch(self.shape.type){\n\n                            case 'rect' : \n                                start = { x: 0, y: 0 }; \n                                stop  = {\n                                    x : (code === 39) ? attr.x + 1 : (code === 37) ? attr.x - 1 : attr.x,\n                                    y : (code === 40) ? attr.y + 1 : (code === 38) ? attr.y - 1 : attr.y,\n                                };\n                                break;\n                            case 'ellipse' : \n                            case 'circle' : \n                                start = { x: 0, y: 0 }; \n                                stop  = {\n                                    x : (code === 39) ? attr.cx + 1 : (code === 37) ? attr.cx - 1 : attr.cx,\n                                    y : (code === 40) ? attr.cy + 1 : (code === 38) ? attr.cy - 1 : attr.cy,\n                                };\n                                break;\n                            case 'path' : \n                                start = { path : attr.path }; \n                                stop  = {\n                                };\n                                break;\n                        }\n\n                        shapeMover(\n                            self.shape, start, stop\n                        );\n                        self.setState('moving', false)\n                            .trigger('shapechange.qti-widget');\n                    }\n                }\n\n                /**\n                 * Start the moving the shape.\n                 * Used as handler dragstart callback\n                 * @private\n                 */ \n                function startMove(x, y , event){\n                    self.setState('moving', true)\n                        .trigger('shapechanging.qti-widget');\n                    \n                    var mousePoint = graphicHelper.getPoint(event, paper, $container, isResponsive);\n                    this.startPoint = {\n                        x : mousePoint.x - this.attr('x'),\n                        y : mousePoint.y - this.attr('y')\n                    };\n                    if(this.type === 'path'){\n                        this.startPoint.path = this.attr('path');\n                    }\n                    self.shape.attr('cursor', 'move');\n                    background.attr('cursor', 'move');\n                    _.invoke(self.handlers, 'remove');                              \n                }        \n                \n                /**\n                 * Move a shape\n                 * Used as handler drag callback\n                 * @private\n                 */ \n                function move(dx, dy, x, y, event){\n                    var dest;\n                    if(self.is('moving')){\n                        shapeMover(\n                            this, \n                            this.startPoint, \n                            graphicHelper.getPoint(event, paper, $container, isResponsive)\n                        );\n                    }\n                }\n\n                /**\n                 * Finish moving\n                 * Used as shape dragend callback\n                 * @private\n                 */ \n                function moved(){\n                    delete this.startPoint;\n                    self.shape.attr('cursor', 'pointer');\n                    background.attr('cursor', 'default');\n\n                    self.setState('moving', false)\n                        .trigger('shapechange.qti-widget');\n                }\n\n                return this;\n            },\n            \n            /**\n             * Stop the shape handling \n             * @returns {shapeEditor.editor} the shape editor instance\n             */ \n            quitHandling : function quitHandling(){\n                $(document).off('keydown.qti-widget');\n\n                this.shape.undrag();\n                _.invoke(this.handlers, 'remove');\n                this.handlers = [];\n\n                this.setState('moving', false)\n                    .setState('resizing', false)\n                    .setState('handling', false)\n                    .trigger('quithandling.qti-widget'); \n                \n                return this;\n            },\n\n            /**\n             * Removes the editor's shape \n             * @returns {shapeEditor.editor} the shape editor instance\n             */ \n            removeShape : function removeShape(){\n                var id, data;\n                if(this.shape){\n                    this.quitHandling();\n                    id = this.shape.id;\n                    data = this.shape.data;\n                    this.shape.remove();\n                    this.trigger('remove.qti-widget', id, data); \n                }\n                \n                return this;\n            },\n\n            /**\n             * Clean up editor in case of reference keeping \n             * @returns {shapeEditor.editor} the shape editor instance\n             */ \n            destroy : function destroy(){\n                if(this.is('handling')){\n                    this.quitHandling();\n                }\n                if(this.shape){\n                    this.shape.unclick();\n                    background.unclick();\n                }\n                this.shape = null;\n                this.handlers  = [];\n                this._events  = {};\n                return this;\n            }\n        };\n        \n        return editor._init(shape);\n    };\n\n    return shapeEditor;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeSideBar',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeFactory',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeEditor',\n], function($, _, GraphicHelper, shapeSideBar, shapeFactory, shapeEditor){\n\n    /**\n     * This factory creates an new shape editor. \n     * The editor manages to create the side bar to add, move, resize and delete the interaction shapes.\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor\n     * @param {Object} widget - the graphic interaction widget\n     * @param {Object} [options]\n     * @param {Array<String>} [options.currents] - the list of current shapes ids (use interaction's choices serial by default)\n     * @param {Boolean} [options.target = false]  - if the side bar contains a target type (to select a point)\n     * @param {shapeCreated} [options.shapeCreated]\n     * @param {shapeRemoved} [options.shapeRemoved]\n     * @param {shapeChange} [options.shapeChange]\n     * @param {shapeChanging} [options.shapeChanging]\n     * @param {enterHandling} [options.enterHandling]\n     * @param {quitHandling} [options.quitHandling]\n     * @returns {InteractionShapeEditor}\n     */\n    return function factory(widget, options){\n\n        /**\n         * One by interaction, but itthat contains multipe shapeEditor (one by shape).\n         * @typedef InteractionShapeEditor\n         */\n        var interactionShapeEditor = {\n\n            //keep the ref to the editor to be able to destroy them later\n            editors :  [],\n\n            /**\n             * Create the editor\n             */\n            create : function(){\n                var editors     = this.editors;\n                var factories   = {};\n                var $container  = widget.$container;\n                var $original   = widget.$original;\n                var interaction = widget.element;\n                var paper       = interaction.paper;\n                var image       = paper.getById('bg-image-' + interaction.serial);\n                var currents    = options.currents || _.pluck(interaction.getChoices(), 'serial');\n\n                //set up shape cnotextual options\n                var shapeOptions = {\n                    paper : interaction.paper, \n                    background : image, \n                    $container : $container.find('.main-image-box'), \n                    isResponsive : $original.hasClass('responsive')\n                };\n            \n                //create the side bar \n                var $sideBar = shapeSideBar.create($original, !!options.target); \n\n                //once a shape type is selected\n                $sideBar.on('shapeactive.qti-widget', function(e, $form, type){\n                \n                    //enable to create a shape of the given type\n                    createShape(type, function shapeCreated (shape){\n                        \n                        if(_.isFunction(options.shapeCreated)){\n                        \n                            /**\n                             * Called back when a shape is created\n                             * @callback shapeCreated\n                             * @param {Raphael.Element} shape - the new shape\n                             * @param {String} type - the new shape type \n                             */\n                            options.shapeCreated(shape, type);\n                        }                \n                        \n                        //deactivate the form in the sidebar\n                        $form.removeClass('active');\n\n                        //start the shape editor (hnadling, resize, move)\n                        editCreatedShape(type, shape);\n                    });\n                });\n\n                $sideBar.on('shapedeactive.qti-widget', function(e, $form, type){\n                       if(factories && factories[type]){\n                            factories[type].stop();\n                       }\n                });\n\n                //retrieve the current shapes and make them editable\n                _.forEach(currents, function(id){\n                    var element = paper.getById(id);\n                    if(element){\n                        element\n                            .attr(GraphicHelper._style.creator)\n                            .unmouseover()\n                            .unmouseout();\n                        if(/^target/.test(element.id)){\n                            editCreatedShape('target', element);\n                        } else {\n                            editCreatedShape(element.type, element, false);\n                        }\n                    }\n                });\n\n                /**\n                 * Make a shape editable\n                 * @private\n                 * @param {Raphael.Element} shape - the shape to make editable\n                 * @param {Boolean} [enterHandling = false]  - wether to enter handling directly\n                 */\n                function editShape(shape, enterHandling){\n\n                    var editor = shapeEditor(shape, shapeOptions); \n                    editor.on('enterhandling.qti-widget', function(){\n\n                        //only one shape handling at a time\n                        _.invoke(_.reject(editors, editor), 'quitHandling');\n\n                        //enable to bin the shape\n                        $sideBar\n                            .trigger('enablebin.qti-widget')\n                            .on('bin.qti-widget', function(){\n                                \n                                //remove the shape and the editor\n                                editor.removeShape();\n                                editor.destroy();\n                                editors = _.reject(editors, editor);\n                                editor = undefined;\n                            });\n                         \n                        if(_.isFunction(options.enterHandling)){\n                            \n                            /**\n                             * Called back when a shape is being handled\n                             * @callback enterHandling\n                             * @param {Raphael.Element} shape - the shape\n                             */\n                            options.enterHandling(shape);\n                        }                \n                    }).on('shapechanging.qti-widget', function(){\n\n                        if(_.isFunction(options.shapeChanging)){\n                            \n                            /**\n                             * Called back when a shape is being changed\n                             * @callback shapeChanging\n                             * @param {Raphael.Element} shape - the shape\n                             */\n                            options.shapeChanging(shape);\n                        }                \n\n                    }).on('shapechange.qti-widget', function(){\n\n                        if(_.isFunction(options.shapeChange)){\n                            \n                            /**\n                             * Called back when a shape has changed\n                             * @callback shapeChange\n                             * @param {Raphael.Element} shape - the shape\n                             */\n                            options.shapeChange(shape);\n                        }                \n\n                    }).on('quithandling.qti-widget', function(){\n\n                        if(_.isFunction(options.quitHandling)){\n                            \n                            /**\n                             * Called back when the handling is left on a shape\n                             * @callback quitHandling\n                             * @param {Raphael.Element} shape - the shape\n                             */\n                            options.quitHandling(shape);\n                        }                \n\n                        //update the side bar\n                        $sideBar\n                            .trigger('disablebin.qti-widget')\n                            .off('click')\n                            .off('bin.qti-widget');\n\n                    }).on('remove.qti-widget', function(id, data){\n                        if(_.isFunction(options.shapeRemoved)){\n                            \n                            /**\n                             * Called back when a shape is removed\n                             * @callback shapeRemoved\n                             * @param {String} id - the id of the passed away shape\n                             */\n                            options.shapeRemoved(id, data);\n                        }                \n                        _.remove(currents, id);\n                    });\n\n                    editors.push(editor);\n                    if(enterHandling){\n                        editor.enterHandling();\n                    }\n                }\n\n                /**\n                 * Enables to create a shape of the given type\n                 * @private\n                 * @param {String} type - the shape type (rect, circle, ellipse or path)\n                 * @param {Function} created - call back once a new shape is created\n                 */\n                function createShape(type, created){\n                    var factory = factories[type];\n                    if(!factories[type]){\n                        factory = shapeFactory(_.merge({type : type}, shapeOptions));\n                        factories[type] = factory;\n                    } \n                    \n                    factory.on('created.qti-widget', created); \n                    factory.start();\n                }\n\n                /**\n                 * Make the created shape editable\n                 * @private\n                 * @param {String} type - the shape type (rect, circle, ellipse or path)\n                 * @param {Raphael.Element} shape - the new shape\n                 * @param {Boolean} enterHandling - if the shape start in handling mode\n                 */\n                function editCreatedShape(type, shape, enterHandling){\n                    var layer, set;\n                    if(type !== 'target'){\n                        editShape(shape, enterHandling);\n                    } else {\n                        //for the target, we group the elements into a set\n                        layer    = paper.getById('layer-' + shape.id);\n                        set      = paper.set(shape, layer);\n                        set.id   = shape.id;\n                        set.data = shape.data(); \n                        editShape(set, enterHandling);\n                    }\n                }\n            },\n\n            /**\n             * Destroy the editor\n             */\n            destroy : function(){\n\n                var $container  = widget.$original;\n                var interaction = widget.element;\n                var paper       = interaction.paper;\n                var currents    = options.currents || _.pluck(interaction.getChoices(), 'serial');\n\n                shapeSideBar.remove($container);\n                \n                _.invoke(this.editors, 'destroy');\n\n                //reset the shape style\n                _.forEach(currents, function(id){\n                    var element = paper.getById(id);\n                    if(element){\n                        element\n                            .attr(GraphicHelper._style.basic)\n                            .hover(function(){\n                                if(!element.flashing){\n                                    GraphicHelper.updateElementState(this, 'hover'); \n                                }\n                          }, function(){\n                                if(!element.flashing){\n                                    GraphicHelper.updateElementState(this, this.active ? 'active' : this.selectable ? 'selectable' : 'basic');\n                                }\n                          });\n                    }\n                });\n            }\n        };\n    \n        return interactionShapeEditor;\n    };\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\n\n/**\n * Pre-configured instance of the resource manager\n *\n * @author dieter <dieter@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/resourceManager',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'util/image',\n    'ui/resourcemgr'\n], function ($, _, __, imageUtil) {\n    'use strict';\n\n    var ns = 'upload';\n\n    /**\n     * @exports\n     */\n    return function($element, options){\n        $element.resourcemgr({\n            title : options.title,\n            appendContainer : options.mediaManager.appendContainer,\n            mediaSources : options.mediaManager.mediaSources,\n            browseUrl : options.mediaManager.browseUrl,\n            uploadUrl : options.mediaManager.uploadUrl,\n            deleteUrl : options.mediaManager.deleteUrl,\n            downloadUrl : options.mediaManager.downloadUrl,\n            fileExistsUrl : options.mediaManager.fileExistsUrl,\n            params : {\n                uri : options.uri,\n                lang : options.lang,\n                filters : 'image/jpeg,image/png,image/gif'\n            },\n            pathParam : 'path',\n            select : function(e, files){\n                var selected;\n                if(files.length > 0){\n                    selected = files[0];\n                    imageUtil.getSize(options.baseUrl + encodeURIComponent(files[0].file), function(size){\n                        $element.trigger('selected.' + ns, {\n                            selected: selected,\n                            size: size\n                        });\n                    });\n                }\n            }\n        });\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'util/image',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/resourceManager',\n    'ui/resourcemgr'\n], function($, _, __, imageUtil, resourceManager){\n\n    return function($form, options){\n\n        var _ns = '.imageSelector',\n            $upload = $('[data-role=\"upload-trigger\"]', $form),\n            $src = $('input[name=data]', $form),\n            $width = $('input[name=width]', $form),\n            $height = $('input[name=height]', $form),\n            $type = $('input[name=type]', $form);\n            options.title = options.title\n                ? options.title\n                : __('Please select a background picture for your interaction from the resource manager.\\\n                      You can add new files from your computer with the button \"Add file(s)\".');\n\n        /**\n         * Configure and launch the pre-configured instance of the resource manager\n         *\n         * @private\n         */\n        var _openResourceMgr = function(){\n            $upload.on('selected.upload', function(e, args) {\n                if(args.size && args.size.width >= 0){\n                    $width.val(args.size.width).trigger('change');\n                    $height.val(args.size.height).trigger('change');\n                }\n                $type.val(args.selected.mime).trigger('change');\n                _.defer(function(){\n                    $src.val(args.selected.file).trigger('change');\n                });\n\n            })\n                .on('open', function(){\n                    $src.trigger('open.'+_ns);\n                    //hide tooltip if displayed\n                    if($src.hasClass('tooltipstered')){\n                        $src.blur().tooltipster('hide');\n                    }\n                })\n                .on('close', function(){\n                    $src.trigger('close.'+_ns);\n                });\n\n\n            resourceManager($upload, options);\n\n        };\n\n        $upload.on('click', _openResourceMgr);\n\n        //if empty, open file manager immediately\n        if(!$src.val()){\n            _openResourceMgr();\n        }\n    };\n\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicAssociate', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n\\n    \\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Interaction Background\", options) : helperMissing.call(depth0, \"__\", \"Interaction Background\", options)))\n    + \"</h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"data\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"File\", options) : helperMissing.call(depth0, \"__\", \"File\", options)))\n    + \"</label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The file path to the image.\", options) : helperMissing.call(depth0, \"__\", \"The file path to the image.\", options)))\n    + \"</div>\\n        <input type=\\\"text\\\" name=\\\"data\\\" value=\\\"\";\n  if (helper = helpers.data) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.data); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty; $fileExists(baseUrl=\";\n  if (helper = helpers.baseUrl) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.baseUrl); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")\\\"/>\\n        <button class=\\\"btn-info small block\\\" data-role=\\\"upload-trigger\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select image\", options) : helperMissing.call(depth0, \"__\", \"Select image\", options)))\n    + \"</button>\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width\", options) : helperMissing.call(depth0, \"__\", \"Width\", options)))\n    + \"</label>\\n        <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height\", options) : helperMissing.call(depth0, \"__\", \"Height\", options)))\n    + \"</label>\\n        <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"type\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Mime Type\", options) : helperMissing.call(depth0, \"__\", \"Mime Type\", options)))\n    + \"</label>\\n        <input name=\\\"type\\\" value=\\\"\";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n    \\n     <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allowed number of associations\", options) : helperMissing.call(depth0, \"__\", \"Allowed number of associations\", options)))\n    + \"\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of associations that the candidate is required to make to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of associations that the candidate is required to make to form a valid response.\", options)))\n    + \"<br>\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"he maximum number of associations that the candidate is allowed to make.\", options) : helperMissing.call(depth0, \"__\", \"he maximum number of associations that the candidate is allowed to make.\", options)))\n    + \"\\n        </span>\\n    </h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"minAssociations\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"minAssociations\\\" value=\\\"\";\n  if (helper = helpers.minAssociations) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.minAssociations); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"maxAssociations\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"maxAssociations\\\" value=\\\"\";\n  if (helper = helpers.maxAssociations) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxAssociations); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/choices/associableHotspot', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"\\n<div class=\\\"panel\\\">\\n    <label for=\\\"\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"identifier\", options) : helperMissing.call(depth0, \"__\", \"identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. my-hotspot_1\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n</div>\\n\\n<h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allowed number of matches\", options) : helperMissing.call(depth0, \"__\", \"Allowed number of matches\", options)))\n    + \"\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of choices this choice must be associated with to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of choices this choice must be associated with to form a valid response.\", options)))\n    + \"<br>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices this choice may be associated with.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices this choice may be associated with.\", options)))\n    + \"\\n    </span>\\n</h3>\\n\\n<div>\\n    <label for=\\\"matchMin\\\" class=\\\"spinner\\\">Min</label>\\n    <input name=\\\"matchMin\\\" value=\\\"\";\n  if (helper = helpers.matchMin) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.matchMin); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n</div>\\n<div>\\n    <label for=\\\"matchMax\\\" class=\\\"spinner\\\">Max</label>\\n    <input name=\\\"matchMax\\\" value=\\\"\";\n  if (helper = helpers.matchMax) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.matchMax); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n</div>\\n\\n<h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Shape position\", options) : helperMissing.call(depth0, \"__\", \"Shape position\", options)))\n    + \"</h3>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"x\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Left\", options) : helperMissing.call(depth0, \"__\", \"Left\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"x\\\" value=\\\"\";\n  if (helper = helpers.x) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.x); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"y\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Top\", options) : helperMissing.call(depth0, \"__\", \"Top\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"y\\\" value=\\\"\";\n  if (helper = helpers.y) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.y); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width\", options) : helperMissing.call(depth0, \"__\", \"Width\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The shape width in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The shape width in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height\", options) : helperMissing.call(depth0, \"__\", \"Height\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The shape height in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The shape height in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Question',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/helpers/identifier',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicAssociate',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/associableHotspot',\n    'taoQtiItem/qtiCreator/helper/dummyElement',\n    'taoQtiItem/qtiCreator/helper/panel'\n], function($, _, __, GraphicHelper, stateFactory, Question, shapeEditor, imageSelector, formElement, interactionFormElement,  identifierHelper, formTpl, choiceFormTpl, dummyElement, panel){\n\n    /**\n     * Question State initialization: set up side bar, editors and shae factory\n     */\n    var initQuestionState = function initQuestionState(){\n\n        var widget      = this.widget;\n        var interaction = widget.element;\n        var options     = widget.options; \n        var paper       = interaction.paper;\n\n        if(!paper){\n            return;\n        }\n\n        var $choiceForm  = widget.choiceForm;\n        var $formInteractionPanel = $('#item-editor-interaction-property-bar');\n        var $formChoicePanel = $('#item-editor-choice-property-bar');\n\n        var $left, $top, $width, $height;\n\n        //instantiate the shape editor, attach it to the widget to retrieve it during the exit phase\n        widget._editor = shapeEditor(widget, {\n            shapeCreated : function(shape, type){\n                var newChoice = interaction.createChoice({\n                    shape  : type === 'path' ? 'poly' : type,\n                    coords : GraphicHelper.qtiCoords(shape) \n                });\n\n                //link the shape to the choice\n                shape.id = newChoice.serial;\n            },\n            shapeRemoved : function(id){\n                interaction.removeChoice(id);\n            },\n            enterHandling : function(shape){\n                enterChoiceForm(shape.id);\n            },\n            quitHandling : function(){\n                leaveChoiceForm();\n            },\n            shapeChange : function(shape){\n                var bbox;\n                var choice = interaction.getChoice(shape.id);\n                if(choice){\n                    choice.attr('coords', GraphicHelper.qtiCoords(shape));\n    \n                    if($left && $left.length){\n                        bbox = shape.getBBox();\n                        $left.val(parseInt(bbox.x, 10)); \n                        $top.val(parseInt(bbox.y, 10));\n                        $width.val(parseInt(bbox.width, 10));\n                        $height.val(parseInt(bbox.height, 10));                         \n                    }         \n                }\n            }\n        });\n    \n        //and create an instance\n        widget._editor.create();\n\n        /**\n         * Set up the choice form\n         * @private\n         * @param {String} serial - the choice serial\n         */\n        function enterChoiceForm(serial){\n            var choice = interaction.getChoice(serial);\n            var element, bbox;\n\n            if(choice){\n                \n                //get shape bounding box\n                element = interaction.paper.getById(serial);\n                bbox = element.getBBox();\n\n                $choiceForm.empty().html(\n                    choiceFormTpl({\n                        identifier  : choice.id(),\n                        fixed       : choice.attr('fixed'),\n                        serial      : serial,\n                        matchMin    : choice.attr('matchMin'),\n                        matchMax    : choice.attr('matchMax'),\n                        choicesCount: _.size(interaction.getChoices()),\n                        x           : parseInt(bbox.x, 10), \n                        y           : parseInt(bbox.y, 10),\n                        width       : parseInt(bbox.width, 10),\n                        height      : parseInt(bbox.height, 10)                         \n                    })\n                );\n\n                formElement.initWidget($choiceForm);\n\n                //init data validation and binding\n                var callbacks = formElement.getMinMaxAttributeCallbacks($choiceForm, 'matchMin', 'matchMax');\n                callbacks.identifier = identifierHelper.updateChoiceIdentifier;\n                callbacks.fixed = formElement.getAttributeChangeCallback();\n\n                formElement.setChangeCallbacks($choiceForm, choice, callbacks);\n\n                $formChoicePanel.show();\n                panel.openSections($formChoicePanel.children('section'));\n                panel.closeSections($formInteractionPanel.children('section'));\n                \n                //change the nodes bound to the position fields\n                $left   = $('input[name=x]', $choiceForm);\n                $top    = $('input[name=y]', $choiceForm);\n                $width  = $('input[name=width]', $choiceForm);\n                $height = $('input[name=height]', $choiceForm);\n            }\n        }\n        \n        /**\n         * Leave the choice form\n         * @private\n         */\n        function leaveChoiceForm(){\n            if($formChoicePanel.css('display') !== 'none'){\n                panel.openSections($formInteractionPanel.children('section'));\n                $formChoicePanel.hide();\n                $choiceForm.empty();\n            }\n        }\n    };\n\n    /**\n     * Exit the question state, leave the room cleaned up\n     */\n    var exitQuestionState = function initQuestionState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        var paper       = interaction.paper;\n\n        if(!paper){\n            return;\n        }\n        \n        $(window).off('resize.changestate');\n\n        if(widget._editor){\n            widget._editor.destroy();\n        }\n    };\n    \n    /**\n     * The question state for the graphicAssociate interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Question\n     */\n    var GraphicAssociateInteractionStateQuestion = stateFactory.extend(Question, initQuestionState, exitQuestionState);\n\n    /**\n     * Initialize the form linked to the interaction\n     */\n    GraphicAssociateInteractionStateQuestion.prototype.initForm = function(){\n\n        var widget = this.widget;\n        var options = widget.options;\n        var interaction = widget.element;\n        var $form = widget.$form;\n\n        /**\n         * Get the maximum number of pairs regarding the number of choices: f(n) = n(n-1)/2\n         * @param {Number} choices - the number of choices\n         * @returns {Number} the number of possible pairs\n         */ \n        var getMaxPairs = function getMaxPairs(choices){\n            var pairs = 0;\n            if(choices > 0){\n                return Math.round((choices * (choices - 1)) / 2);\n            } \n            return pairs;\n        };\n\n        $form.html(formTpl({\n            baseUrl         : options.baseUrl,\n            maxAssociations : parseInt(interaction.attr('maxAssociations'), 10),\n            minAssociations : parseInt(interaction.attr('minAssociations'), 10),\n            choicesCount    : getMaxPairs(_.size(interaction.getChoices())),\n            data            : interaction.object.attr('data'),\n            width           : interaction.object.attr('width'),\n            height          : interaction.object.attr('height'),\n            type            : interaction.object.attr('type')\n        }));\n\n        imageSelector($form, options); \n\n        formElement.initWidget($form);\n        \n        //init data change callbacks\n        var callbacks = formElement.getMinMaxAttributeCallbacks($form, 'minAssociations', 'maxAssociations');\n        callbacks.data = function(inteaction, value){\n            interaction.object.attr('data', value);\n            widget.rebuild({\n                ready:function(widget){\n                    widget.changeState('question');\n                }\n            });\n        };\n        callbacks.width = function(inteaction, value){\n            interaction.object.attr('width', value);\n        };\n        callbacks.height = function(inteaction, value){\n            interaction.object.attr('height', value);\n        };\n        callbacks.type = function(inteaction, value){\n            if(!value || value === ''){\n                interaction.object.removeAttr('type');\n            } else {\n                interaction.object.attr('type', value);\n            }\n        };\n        formElement.setChangeCallbacks($form, interaction, callbacks, { validateOnInit : false });\n        \n        interactionFormElement.syncMaxChoices(widget, 'minAssociations', 'maxAssociations');\n    };\n\n    return GraphicAssociateInteractionStateQuestion;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    /**\n     * Just forward to the correct/map states\n     */\n    function initAnswerState(){\n        answerStateHelper.forward(this.widget);\n    }\n    \n    \n    function exitAnswerState(){\n        //needed an exit callback even empty\n    }\n    \n    \n    /**\n     * The answer state for the graphicAssociate interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/states/Answer\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Answer\n     */\n    return stateFactory.extend(Answer, initAnswerState, exitAnswerState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Correct',[\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function(_, __, stateFactory, Correct, commonRenderer, instructionMgr, PciResponse){\n\n    /**\n     * Initialize the state: use the common renderer to set the correct response.\n     */\n    function initCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var corrects  = _.values(response.getCorrect());\n\n        commonRenderer.resetResponse(interaction);\n        commonRenderer.destroy(interaction);\n\n        if(!interaction.paper){\n            return;\n        }\n        \n        //add a specific instruction\n        instructionMgr.appendInstruction(interaction, __('Please set the correct associations by linking the choices.'));\n        \n        //use the common Renderer\n        commonRenderer.render.call(interaction.getRenderer(), interaction);\n\n        commonRenderer.setResponse(\n            interaction, \n            PciResponse.serialize(_.invoke(corrects, String.prototype.split, ' '), interaction)\n        );\n\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n           if(data.response && data.response.list){\n                response.setCorrect(\n                    _.map(data.response.list.pair, function(pair){\n                        return pair.join(' ');\n                    })\n                ); \n           }\n        });\n\n    }\n\n    /**\n     * Exit the correct state\n     */\n    function exitCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        if(!interaction.paper){\n            return;\n        }\n\n        //stop listening responses changes\n        widget.$container.off('responseChange.qti-widget');\n        \n        //destroy the common renderer\n        commonRenderer.resetResponse(interaction); \n        commonRenderer.destroy(interaction); \n        instructionMgr.removeInstructions(interaction);\n\n        //initialize again the widget's paper\n        interaction.paper = widget.createPaper();\n        widget.createChoices();\n    }\n\n    /**\n     * The correct answer state for the graphicAssociate interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Correct\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Correct\n     */\n    return stateFactory.create(Correct, initCorrectState, exitCorrectState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Map',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse', \n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/pairScoringForm'\n], function($, _, __, stateFactory, Map, commonRenderer, instructionMgr, graphicHelper, PciResponse, scoringFormFactory){\n\n    /**\n     * Initialize the state.\n     */\n    function initMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var corrects  = _.values(response.getCorrect());\n        var currentResponses =  _.size(response.getMapEntries()) === 0 ? corrects : _.keys(response.getMapEntries());\n\n        //really need to destroy before ? \n        commonRenderer.resetResponse(interaction); \n        commonRenderer.destroy(interaction);\n        \n        if(!interaction.paper){\n            return;\n        }\n\n        //add a specific instruction\n        instructionMgr.appendInstruction(interaction, __('Create assocations and fill the score in the form below'));\n        interaction.responseMappingMode = true;\n\n        //use the common Renderer\n        commonRenderer.render.call(interaction.getRenderer(), interaction);    \n\n\t\t//display the choices ids\n        showChoicesId(interaction);\n\n        //and initialize the scoring form\n        if(_.size(response.getMapEntries()) === 0){\n            updateForm(widget, corrects);\n        } else {\n            updateForm(widget);\n        }\n        \n        //each response change leads to an update of the scoring form\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            var type  = response.attr('cardinality') === 'single' ? 'base' : 'list';\n            var pairs, entries;\n            if(data && data.response &&  data.response[type]){\n               pairs = _.invoke(data.response[type].pair, Array.prototype.join, ' ');\n               entries = _.keys(response.getMapEntries());\n                \n               //add new pairs from  the difference between the current entries and the given data\n               _(pairs).difference(entries).forEach(interaction.pairScoringForm.addPair, interaction.pairScoringForm);\n\n                \n               removePaths(interaction);\n            }\n        });\n    }\n\n    function removePaths(interaction){\n        _.delay(function(){\n           _.forEach(interaction._vsets, function(vset){\n                _.invoke(vset, 'remove');\n            });\n            interaction._vsets = [];\n        }, 500);\n    }\n\n    /**\n     * Exit the map state\n     */\n    function exitMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        if(!interaction.paper){\n            return;\n        }\n        \n        widget.$container.off('responseChange.qti-widget');\n\n        if(interaction.pairScoringForm){\n            interaction.pairScoringForm.destroy();\n        }\n\n        //destroy the common renderer\n        commonRenderer.resetResponse(interaction); \n        commonRenderer.destroy(interaction);\n        instructionMgr.removeInstructions(interaction);\n\n        //initialize again the widget's paper\n        interaction.paper = widget.createPaper();\n        widget.createChoices();\n    }\n\n    function showChoicesId(interaction){\n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element){\n                graphicHelper.createShapeText(interaction.paper, element, {\n                    shapeClick: true,\n                    content : choice.id()\n                }).transform('t0,-10').toFront();\n            }\n        });\n    }\n\n\t/**\n     * Update the scoring form\n     * @param {Object} widget - the current widget\n     * @param {Array} [entries] - to force the use of this collection instead of the mapEntries\n     */\n    function updateForm(widget, entries){\n\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var mapEntries = response.getMapEntries();\n\n        var mappingChange = function mappingChange(){\n            //set the current responses, either the mapEntries or the corrects if nothing else\n            commonRenderer.setResponse(\n                interaction, \n                PciResponse.serialize(_.invoke(_.keys(response.getMapEntries()), String.prototype.split, ' '), interaction)\n            );\n        };\n\n        var getPairValues = function getPairValues(){\n            return _.map(interaction.getChoices(), function(choice){\n                return {\n                    id : choice.id(),\n                    value : choice.id()\n                };\n            });\n        };\n\n        //set up the scoring form options\n        var options = {\n            leftTitle : __('left'),\n            rightTitle : __('right'),\n            type : 'pair',\n            pairLeft : getPairValues,\n            pairRight : getPairValues\n        };\n\n        //format the entries to match the needs of the scoring form\n        if(entries){\n            options.entries = _.transform(entries, function(result, value){\n                result[value] = mapEntries[value] !== undefined ? mapEntries[value] : response.mappingAttributes.defaultValue;\n            }, {}); \n        }\n\n        //initialize the scoring form \n        interaction.pairScoringForm = scoringFormFactory(widget, options);\n    }\n\n    /**\n     * The map answer state for the graphicAssociate interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Map\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Map\n     */\n    return  stateFactory.create(Map, initMapState, exitMapState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Map'\n], function(factory, states){\n\n    //creates a state bundle for the interaction\n    return factory.createBundle(states, arguments);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/Widget',[\n    'jquery', 'lodash', 'i18n',\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/states'\n], function($, _, __, Widget, GraphicWidget, states){\n\n    /**\n     * The Widget that provides components used by the QTI Creator for the GraphicAssociate Interaction.\n     * \n     * @extends taoQtiItem/qtiCreator/widgets/interactions/Widget\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/GraphicInteraction/Widget\n     *\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/Widget\n     */      \n    var GraphicAssociateInteractionWidget = _.extend(Widget.clone(), GraphicWidget, {\n\n        /**\n         * Set up the widget\n         * @see {taoQtiItem/qtiCreator/widgets/interactions/Widget#initCreator}\n         * @param {Object} options - extra options \n         * @param {String} options.baseUrl - the resource base url\n         * @param {jQueryElement} options.choiceForm = a reference to the form of the choices\n         */\n        initCreator : function(options){\n            var paper;\n            this.baseUrl = options.baseUrl;\n            this.choiceForm = options.choiceForm;\n            \n            this.registerStates(states);\n            \n            //call parent initCreator\n            Widget.initCreator.call(this);\n           \n            paper = this.createPaper(); \n            if(paper){\n                this.element.paper = paper;\n                this.createChoices();    \n            }\n        },\n\n        /**\n         * Gracefull destroy the widget\n         * @see {taoQtiItem/qtiCreator/widgets/Widget#destroy}\n         */\n        destroy : function(){\n\n            var $container = this.$original;\n            var $item      = $container.parents('.qti-item');\n\n            //stop listening the resize\n            $item.off('resize.gridEdit.' + this.element.serial);\n            $(window).off('resize.qti-widget.' + this.element.serial);\n            $container.off('resize.qti-widget.' + this.element.serial);\n\n            //call parent destroy\n            Widget.destroy.call(this);\n        }\n   });\n\n    return GraphicAssociateInteractionWidget;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/renderers/interactions/GraphicAssociateInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/Widget'\n], function(_, GraphicAssociateInteraction, GraphicAssociateInteractionWidget){\n        \n    /**\n     * The CreatorGraphicAssociateInteraction  Renderer \n     * @extends taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction\n     * @exports taoQtiItem/qtiCreator/renderers/interactions/GraphicAssociateInteraction\n     */\n    var CreatorGraphicAssociateInteraction = _.clone(GraphicAssociateInteraction);\n\n    /**\n     * Render the interaction for authoring.\n     * It delegates the rendering to the widget layer.\n     * @param {Object} interaction - the model\n     * @param {Object} [options] - extra options\n     */\n    CreatorGraphicAssociateInteraction.render = function(interaction, options){\n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        options.choiceForm = this.getOption('choiceOptionForm');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        \n        return GraphicAssociateInteractionWidget.build(\n            interaction,\n            GraphicAssociateInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorGraphicAssociateInteraction;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicGapMatchInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-graphicInteraction qti-graphicGapMatchInteraction \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" clearfix\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"image-editor solid\\\">\\n        <div id='graphic-paper-\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"' class=\\\"main-image-box\\\"></div>\\n        <div class=\\\"clearfix\\\"></div>\\n        <ul class=\\\"none block-listing horizontal source\\\">\\n            \";\n  options={hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}\n  if (helper = helpers.gapImgs) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.gapImgs); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.gapImgs) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </ul>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicGapMatchInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager'\n], function($, _, __, tpl, graphic,  pciResponse, containerHelper, instructionMgr){\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     */\n    var render = function render(interaction){\n        var $container = containerHelper.get(interaction);\n        var $gapList = $('ul.source', $container);\n        var $imageBox  = $('.main-image-box', $container);\n        var background = interaction.object.attributes;\n        var baseUrl = this.getOption('baseUrl') || '';\n\n        interaction.gapFillers = [];\n\n        //create the paper\n        interaction.paper = graphic.responsivePaper( 'graphic-paper-' + interaction.serial, interaction.serial, {\n            width       : background.width,\n            height      : background.height,\n            img         : baseUrl + background.data,\n            imgId       : 'bg-image-' + interaction.serial,\n            container   : $container,\n            resize      : function(newSize, factor){\n               $gapList.css('max-width', newSize + 'px');\n               if(factor !== 1){\n                    $gapList.find('img').each(function(){\n                        var $img = $(this);\n                        $img.width( $img.attr('width') * factor );\n                        $img.height( $img.attr('height') * factor );\n                    });\n               }\n            }\n        });\n\n        //call render choice for each interaction's choices\n        _.forEach(interaction.getChoices(), _.partial(_renderChoice, interaction));\n\n        //create the list of gap images\n        _renderGapList(interaction, $gapList);\n\n        //clicking the paper to reset selection\n        _paperUnSelect(interaction);\n    };\n\n\n    /**\n     * Render a choice inside the paper.\n     * Please note that the choice renderer isn't implemented separately because it relies on the Raphael paper instead of the DOM.\n     *\n     * @private\n     * @param {Paper} paper - the raphael paper to add the choices to\n     * @param {Object} interaction\n     * @param {Object} choice - the hotspot choice to add to the interaction\n     */\n    var _renderChoice  =  function _renderChoice(interaction, choice){\n\n        //create the shape\n        var rElement = graphic.createElement(interaction.paper, choice.attr('shape'), choice.attr('coords'), {\n            id : choice.serial,\n            title : __('Select an image first'),\n            hover : false\n        })\n        .data('max', choice.attr('matchMax') )\n        .data('matching', [])\n        .click(function onClickShape(){\n\n            // check if can make the shape selectable on click\n            if(_isMatchable(this) && this.selectable === true){\n                _selectShape(interaction, this);\n            }\n        });\n    };\n\n    /**\n     * Render the list of gap choices\n     * @private\n     * @param {Object} interaction\n     * @param {jQueryElement} $orderList - the list than contains the orderers\n     */\n    var _renderGapList = function _renderGapList(interaction, $gapList){\n\n        //activate the gap filling\n        $gapList.children('li').click(function onClickGapImg (e){\n            e.preventDefault();\n            var $elt = $(this);\n            if(!$elt.hasClass('disabled')){\n\n                //toggle tha active state of the gap images\n                if($elt.hasClass('active')){\n                    $elt.removeClass('active');\n                    _shapesUnSelectable(interaction);\n                } else {\n                    $gapList.children('li').removeClass('active');\n                    $elt.addClass('active');\n                    _shapesSelectable(interaction);\n                }\n            }\n        });\n    };\n\n    /**\n     * By clicking the paper image the shapes are restored to their default state\n     * @private\n     * @param {Object} interaction\n     */\n    var _paperUnSelect = function _paperUnSelect(interaction){\n        var $container = containerHelper.get(interaction);\n        var $gapImages = $('ul > li', $container);\n        var image = interaction.paper.getById('bg-image-' + interaction.serial);\n        if(image){\n            image.click(function(){\n                _shapesUnSelectable(interaction);\n                $gapImages.removeClass('active');\n            });\n        }\n    };\n    /**\n     * Select a shape (a gap image must be active)\n     * @private\n     * @param {Object} interaction\n     * @param {Raphael.Element} element - the selected shape\n     * @param {Boolean} [trackResponse = true] - if the selection trigger a response chane\n     */\n    var _selectShape = function _selectShape(interaction, element, trackResponse){\n        var $img,\n            $clone,\n            gapFiller,\n            id,\n            bbox,\n            shapeOffset,\n            activeOffset,\n            matching,\n            currentCount;\n\n        if(typeof trackResponse === 'undefined'){\n            trackResponse = true;\n        }\n\n        //lookup for the active element\n        var $container = containerHelper.get(interaction);\n        var $gapList = $('ul', $container);\n        var $active = $gapList.find('.active:first');\n        var $imageBox = $('.main-image-box', $container);\n        var boxOffset   = $imageBox.offset();\n\n        if($active.length){\n\n            //the macthing elements are linked to the shape\n            id = $active.data('identifier');\n            matching = element.data('matching') || [];\n            matching.push(id);\n            element.data('matching', matching);\n            currentCount = matching.length;\n\n            //the image to clone\n            $img = $active.find('img');\n\n            //then reset the state of the shapes and the gap images\n            _shapesUnSelectable(interaction);\n            $gapList.children().removeClass('active');\n\n            $clone = $img.clone();\n            shapeOffset  = $(element.node).offset();\n            activeOffset   = $active.offset();\n\n            $clone.css({\n                'position' : 'absolute',\n                'display'  : 'block',\n                'z-index'  : 10000,\n                'opacity'  : 0.8,\n                'top'      : activeOffset.top - boxOffset.top,\n                'left'     : activeOffset.left - boxOffset.left\n            });\n\n            $clone.appendTo($imageBox);\n            $clone.animate({\n                'top'       : shapeOffset.top - boxOffset.top,\n                'left'      : shapeOffset.left - boxOffset.left\n            }, 400, function animationEnd(){\n\n                $clone.remove();\n\n                //extract some coords for positioning\n                bbox = element.getBBox();\n\n                //create an image into the paper and move it to the selected shape\n                gapFiller = graphic.createBorderedImage(interaction.paper, {\n                    url     :  $img.attr('src'),\n                    left    : bbox.x + (3 * (currentCount - 1)),\n                    top     : bbox.y + (3 * (currentCount - 1)),\n                    width   : parseInt($img.attr('width'), 10),\n                    height  : parseInt($img.attr('height'), 10),\n                    padding : 0,\n                    border  : false,\n                    shadow  : true\n                })\n                .data('identifier', id)\n                .toFront()\n                .unclick()\n                .click(function(e){\n                    e.preventDefault();\n                    e.stopPropagation();\n                    if($gapList.find('.active').length > 0){\n\n                        //simulate a click on the shape\n                        graphic.trigger(element, 'click');\n\n                    } else {\n                        //update the element matching array\n                        element.data('matching', _.without(element.data('matching') || [], this.data('identifier')));\n\n                        //delete interaction.gapFillers[interaction.gapFillers.indexOf(gapFiller)];\n                        interaction.gapFillers = _.without(interaction.gapFillers, gapFiller);\n\n                        //and remove the filler\n                        gapFiller.remove();\n\n                        containerHelper.triggerResponseChangeEvent(interaction);\n                    }\n                });\n\n                interaction.gapFillers.push(gapFiller);\n\n                containerHelper.triggerResponseChangeEvent(interaction);\n            });\n        }\n    };\n\n    /**\n     * Makes the shapes selectable (at least thos who can still accept matches)\n     * @private\n     * @param {Object} interaction\n     */\n    var _shapesSelectable = function _shapesSelectable(interaction){\n\n        var tooltip = __('Select the area to add an image');\n\n        //update the shape state\n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(_isMatchable(element)){\n                element.selectable = true;\n                graphic.updateElementState(element, 'selectable', tooltip);\n            }\n        });\n\n        //update the gap images tooltip\n        _.forEach(interaction.gapFillers, function(gapFiller){\n            gapFiller.forEach(function(element){\n                graphic.updateTitle(element, tooltip);\n            });\n        });\n    };\n\n    /**\n     * Makes all the shapes UNselectable\n     * @private\n     * @param {Object} interaction\n     */\n    var _shapesUnSelectable = function _shapesUnSelectable(interaction){\n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element){\n                element.selectable = false;\n                graphic.updateElementState(element, 'basic', __('Select an image first'));\n            }\n        });\n\n        //update the gap images tooltip\n        _.forEach(interaction.gapFillers, function(gapFiller){\n            gapFiller.forEach(function(element){\n                graphic.updateTitle(element, __('Remove'));\n            });\n        });\n    };\n\n    /**\n     * Check if a shape can accept matches\n     * @private\n     * @param {Raphael.Element} element - the shape\n     * @returns {Boolean} true if the element is matchable\n     */\n    var _isMatchable = function(element){\n        var matchable = false;\n        var matching, matchMax;\n        if(element){\n            matchMax = element.data('max') || 0;\n            matching = element.data('matching') || [];\n            matchable = (matchMax === 0 || matchMax > matching.length);\n        }\n        return matchable;\n    };\n\n    /**\n     * Get the responses from the interaction\n     * @private\n     * @param {Object} interaction\n     * @returns {Array} of matches\n     */\n    var _getRawResponse = function _getRawResponse(interaction){\n        var pairs = [];\n\n       _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element && _.isArray(element.data('matching'))){\n                _.forEach(element.data('matching'), function(match){\n                    pairs.push([choice.id(), match]);\n                });\n            }\n       });\n       return pairs;\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * Special value: the empty object value {} resets the interaction responses\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n        var $container = containerHelper.get(interaction);\n        var responseValues;\n        if(response && interaction.paper){\n            try{\n                responseValues = pciResponse.unserialize(response, interaction);\n            } catch(e){ }\n\n            if(_.isArray(responseValues)){\n\n                _.forEach(interaction.getChoices(), function(choice){\n                    var element = interaction.paper.getById(choice.serial);\n                    if(element){\n                        _.forEach(responseValues, function(pair){\n                            var index = _.indexOf(pair, choice.id());\n                            if(index > -1 && pair.length === 2){\n\n                                $(\"[data-identifier=\" + pair[index === 0 ? 1 : 0] + \"]\", $container).addClass('active');\n                                _selectShape(interaction, element, false);\n                            }\n                        });\n                    }\n                });\n            }\n        }\n    };\n\n    /**\n     * Reset the current responses of the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * Special value: the empty object value {} resets the interaction responses\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var resetResponse = function resetResponse(interaction){\n        var $container = containerHelper.get(interaction);\n\n        _shapesUnSelectable(interaction);\n\n        _.forEach(interaction.gapFillers, function(gapFiller){\n            graphic.trigger(gapFiller.items[0], 'click');\n        });\n    };\n\n\n    /**\n     * Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        var raw = _getRawResponse(interaction);\n        var response =  pciResponse.serialize(_getRawResponse(interaction), interaction);\n        return response;\n    };\n\n    /**\n     * Clean interaction destroy\n     * @param {Object} interaction\n     */\n    var destroy = function destroy(interaction){\n        var $container;\n        if(interaction.paper){\n            $container = containerHelper.get(interaction);\n\n            $(window).off('resize.qti-widget.' + interaction.serial);\n            $container.off('resize.qti-widget.' + interaction.serial);\n\n            interaction.paper.clear();\n            instructionMgr.removeInstructions(interaction);\n\n            $('.main-image-box', $container).empty().removeAttr('style');\n            $('.image-editor', $container).removeAttr('style');\n            $('ul', $container).empty();\n        }\n        //remove all references to a cache container\n        containerHelper.reset(interaction);\n    };\n\n    /**\n     * Set the interaction state. It could be done anytime with any state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {Object} state - the interaction state\n     */\n    var setState  = function setState(interaction, state){\n        if(_.isObject(state)){\n            if(state.response){\n                interaction.resetResponse();\n                interaction.setResponse(state.response);\n            }\n        }\n    };\n\n    /**\n     * Get the interaction state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the interaction current state\n     */\n    var getState = function getState(interaction){\n        var $container;\n        var state =  {};\n        var response =  interaction.getResponse();\n\n        if(response){\n            state.response = response;\n        }\n        return state;\n    };\n\n    /**\n     * Expose the common renderer for the hotspot interaction\n     * @exports qtiCommonRenderer/renderers/interactions/HotspotInteraction\n     */\n    return {\n        qtiClass        : 'graphicGapMatchInteraction',\n        template        : tpl,\n        render          : render,\n        getContainer    : containerHelper.get,\n        setResponse     : setResponse,\n        getResponse     : getResponse,\n        resetResponse   : resetResponse,\n        destroy : destroy,\n        setState : setState,\n        getState : getState\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Sleep',[\n    'taoQtiItem/qtiCreator/widgets/states/factory', \n    'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep'\n], function(stateFactory, SleepState){\n   \n    var initSleepState = function initSleepState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        widget.on('metaChange', function(data){\n            if(data.key === 'responsive'){\n                if(data.value === true){\n                    interaction.addClass('responsive');\n                } else {\n                    interaction.removeClass('responsive');\n                }\n                widget.rebuild();\n            }\n        });\n    };\n\n    var exitSleepState = function exitSleepState(){\n        var widget      = this.widget;\n        $('.image-editor.solid, .block-listing.source', widget.$container).css('min-width', 0);\n    };\n \n    return stateFactory.extend(SleepState, initSleepState, exitSleepState); \n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicGapMatch', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n\\n    \\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Interaction Background\", options) : helperMissing.call(depth0, \"__\", \"Interaction Background\", options)))\n    + \"</h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"data\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"File\", options) : helperMissing.call(depth0, \"__\", \"File\", options)))\n    + \"</label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The file path to the image.\", options) : helperMissing.call(depth0, \"__\", \"The file path to the image.\", options)))\n    + \"</div>\\n        <input type=\\\"text\\\" name=\\\"data\\\" value=\\\"\";\n  if (helper = helpers.data) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.data); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty; $fileExists(baseUrl=\";\n  if (helper = helpers.baseUrl) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.baseUrl); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")\\\"/>\\n        <button class=\\\"btn-info small block\\\" data-role=\\\"upload-trigger\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select image\", options) : helperMissing.call(depth0, \"__\", \"Select image\", options)))\n    + \"</button>\\n    </div>\\n\\n    <div class=\\\"panel media-sizer-panel\\\">\\n        <!-- media sizer goes here -->\\n    </div>\\n<input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"hidden\\\" />\\n<input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"hidden\\\" />\\n\\n    <input type=\\\"hidden\\\" name=\\\"type\\\" value=\\\"\";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/choices/gapImg', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"identifier\", options) : helperMissing.call(depth0, \"__\", \"identifier\", options)))\n    + \"</label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n        <input type=\\\"text\\\" \\n               name=\\\"identifier\\\" \\n               value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n               placeholder=\\\"e.g. my-hotspot_1\\\" \\n               data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n    </div>\\n    \\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Choice Image\", options) : helperMissing.call(depth0, \"__\", \"Choice Image\", options)))\n    + \"</h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"data\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"File\", options) : helperMissing.call(depth0, \"__\", \"File\", options)))\n    + \"</label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The file path to the image.\", options) : helperMissing.call(depth0, \"__\", \"The file path to the image.\", options)))\n    + \"</div>\\n        <input type=\\\"text\\\" name=\\\"data\\\" value=\\\"\";\n  if (helper = helpers.data) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.data); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty; $fileExists(baseUrl=\";\n  if (helper = helpers.baseUrl) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.baseUrl); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")\\\"/>\\n        <button class=\\\"btn-info small block\\\" data-role=\\\"upload-trigger\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select image\", options) : helperMissing.call(depth0, \"__\", \"Select image\", options)))\n    + \"</button>\\n    </div>\\n\\n    <div class=\\\"panel media-sizer-panel\\\">\\n        <!-- media sizer goes here -->\\n    </div>\\n\\n    <input name=\\\"type\\\" type=\\\"hidden\\\" value=\\\"\";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n\\n    <hr/>\\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Max. number of matches\", options) : helperMissing.call(depth0, \"__\", \"Max. number of matches\", options)))\n    + \" </h3>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices this choice may be associated with.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices this choice may be associated with.\", options)))\n    + \"<br>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of choices this choice must be associated with to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of choices this choice must be associated with to form a valid response.\", options)))\n    + \"\\n    </span>\\n\\n    <div>\\n        <label for=\\\"matchMin\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"matchMin\\\" value=\\\"\";\n  if (helper = helpers.matchMin) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.matchMin); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n    <div>\\n        <label for=\\\"matchMax\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"matchMax\\\" value=\\\"\";\n  if (helper = helpers.matchMax) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.matchMax); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\n\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Question',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/helpers/identifier',\n\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicGapMatch',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/associableHotspot',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/gapImg',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/media',\n\n    'taoQtiItem/qtiCreator/helper/dummyElement',\n    'taoQtiItem/qtiCreator/helper/panel',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/resourceManager',\n    'ui/feedback',\n    'ui/mediasizer'\n], function ($, _, __, GraphicHelper, stateFactory, Question, shapeEditor, imageSelector, formElement, identifierHelper, formTpl, choiceFormTpl, gapImgFormTpl, mediaTlbTpl, dummyElement, panel, resourceManager) {\n\n    \"use strict\";\n\n    /**\n     * Media size runs not in automated mode, this applies the values manually\n     *\n     * @param params\n     * @param factor\n     */\n    function applyMediasizerValues(params, factor) {\n        factor = factor || 1;\n\n        // css() + attr() for consistency\n        params.$target.css({\n            width: params.width * factor,\n            height: params.height * factor\n        })\n            .attr('width', params.width * factor)\n            .attr('height', params.height * factor);\n    }\n\n\n\n    /**\n     * Question State initialization: set up side bar, editors and shae factory\n     */\n    var initQuestionState = function initQuestionState() {\n\n        var widget = this.widget;\n        var interaction = widget.element;\n        var options = widget.options;\n        var paper = interaction.paper;\n\n        var gapImgSelectorOptions = _.clone(options);\n        gapImgSelectorOptions.title = gapImgSelectorOptions.title\n            ? gapImgSelectorOptions.title\n            : __('Please select a choice picture for your interaction from the resource manager. \\\n                  You can add new files from your computer with the button \"Add file(s)\".');\n\n        if (!paper) {\n            return;\n        }\n\n        var $choiceForm = widget.choiceForm;\n        var $formInteractionPanel = $('#item-editor-interaction-property-bar');\n        var $formChoicePanel = $('#item-editor-choice-property-bar');\n\n        var $left, $top, $width, $height;\n\n        //instantiate the shape editor, attach it to the widget to retrieve it during the exit phase\n        widget._editor = shapeEditor(widget, {\n            shapeCreated: function (shape, type) {\n                var newChoice = interaction.createChoice({\n                    shape: type === 'path' ? 'poly' : type,\n                    coords: GraphicHelper.qtiCoords(shape)\n                });\n\n                //link the shape to the choice\n                shape.id = newChoice.serial;\n            },\n            shapeRemoved: function (id) {\n                interaction.removeChoice(id);\n            },\n            enterHandling: function (shape) {\n                enterChoiceForm(shape.id);\n            },\n            quitHandling: function () {\n                leaveChoiceForm();\n            },\n            shapeChange: function (shape) {\n                var bbox;\n                var choice = interaction.getChoice(shape.id);\n                if (choice) {\n                    choice.attr('coords', GraphicHelper.qtiCoords(shape));\n\n                    if ($left && $left.length) {\n                        bbox = shape.getBBox();\n                        $left.val(parseInt(bbox.x, 10));\n                        $top.val(parseInt(bbox.y, 10));\n                        $width.val(parseInt(bbox.width, 10));\n                        $height.val(parseInt(bbox.height, 10));\n                    }\n                }\n            }\n        });\n\n        //and create an instance\n        widget._editor.create();\n\n        _.forEach(interaction.getGapImgs(), setUpGapImg);\n\n        createGapImgAddOption();\n\n        // stop the question mode on resize to keep the coordinate system coherent,\n        // even in responsive (the side bar behaves weirdly)\n        $(window).on('resize.changestate', function () {\n            widget.changeState('sleep');\n        });\n\n\n\n        /**\n         * Create the 'add option' button\n         */\n        function createGapImgAddOption() {\n            var $gapList = $('ul.source', widget.$original);\n            var $addOption =\n                $('<li class=\"empty add-option\">' +\n                    '<div><span class=\"icon-add\"></span></div>' +\n                    '</li>');\n\n            $addOption.on('click', function () {\n                var gapImgObj = interaction.createGapImg({});\n                gapImgObj.object.removeAttr('type');\n\n                // on successful upload\n                $addOption.on('selected.upload', function (e, args) {\n\n                    $addOption.off('selected.upload');\n\n                    gapImgObj.object.attr('data', args.selected.file);\n                    gapImgObj.object.attr('type', args.selected.mime);\n                    gapImgObj.object.attr('width', args.size.width);\n                    gapImgObj.object.attr('height', args.size.height);\n                    setUpGapImg(gapImgObj);\n                });\n                resourceManager($addOption, gapImgSelectorOptions);\n\n            });\n            $addOption.appendTo($gapList);\n        }\n\n\n        /**\n         * Insert and setup the gap image\n         *\n         * @param gapImgObj\n         */\n        function setUpGapImg(gapImgObj) {\n\n            var $gapList = $('ul.source', widget.$original);\n            var $addOption = $('.empty', $gapList);\n            var $gapImgBox = $('[data-serial=\"' + gapImgObj.serial + '\"]', $gapList);\n            var $deleteBtn = $(mediaTlbTpl());\n\n            if (!$gapImgBox.length) {\n                $gapImgBox = $(gapImgObj.render()).insertBefore($addOption);\n            }\n\n            //manage gap deletion\n            $deleteBtn\n                .appendTo($gapImgBox)\n                .show()\n                .click(function (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    $gapImgBox.remove();\n                    interaction.removeGapImg(gapImgObj);\n                });\n\n            enterGapImgForm(gapImgObj.serial);\n\n            $gapImgBox.off('click').on('click', function () {\n                if ($gapImgBox.hasClass('active')) {\n                    $gapImgBox.removeClass('active');\n                    leaveChoiceForm();\n                }\n                else {\n                    $('.active', $gapList).removeClass('active');\n                    $gapImgBox.addClass('active');\n                    enterGapImgForm(gapImgObj.serial);\n                }\n            });\n        }\n\n        /**\n         * Set up the choice form\n         *\n         * @private\n         * @param {String} serial - the choice serial\n         */\n        function enterChoiceForm(serial) {\n            var choice = interaction.getChoice(serial);\n            var element, bbox;\n\n            if (choice) {\n\n                //get shape bounding box\n                element = interaction.paper.getById(serial);\n                bbox = element.getBBox();\n\n                $choiceForm.empty().html(\n                    choiceFormTpl({\n                        identifier: choice.id(),\n                        fixed: choice.attr('fixed'),\n                        serial: serial,\n                        matchMin: choice.attr('matchMin'),\n                        matchMax: choice.attr('matchMax'),\n                        choicesCount: _.size(interaction.getChoices()),\n                        x: parseInt(bbox.x, 10),\n                        y: parseInt(bbox.y, 10),\n                        width: parseInt(bbox.width, 10),\n                        height: parseInt(bbox.height, 10)\n                    })\n                );\n\n                formElement.initWidget($choiceForm);\n\n                //init data validation and binding\n                var callbacks = formElement.getMinMaxAttributeCallbacks($choiceForm, 'matchMin', 'matchMax');\n                callbacks.identifier = identifierHelper.updateChoiceIdentifier;\n                callbacks.fixed = formElement.getAttributeChangeCallback();\n\n                formElement.setChangeCallbacks($choiceForm, choice, callbacks);\n\n                $formChoicePanel.show();\n                panel.openSections($formChoicePanel.children('section'));\n                panel.closeSections($formInteractionPanel.children('section'));\n\n                //change the nodes bound to the position fields\n                $left = $('input[name=x]', $choiceForm);\n                $top = $('input[name=y]', $choiceForm);\n                $width = $('input[name=width]', $choiceForm);\n                $height = $('input[name=height]', $choiceForm);\n            }\n        }\n\n        /**\n         * Leave the choice form\n         * @private\n         */\n        function leaveChoiceForm() {\n            if ($formChoicePanel.css('display') !== 'none') {\n                panel.openSections($formInteractionPanel.children('section'));\n                $formChoicePanel.hide();\n                $choiceForm.empty();\n            }\n        }\n\n        /**\n         * Set up the gapImg form\n         * @private\n         * @param {String} serial - the gapImg serial\n         */\n        function enterGapImgForm(serial) {\n\n            var callbacks,\n                gapImg = interaction.getGapImg(serial),\n                $gapImgBox,\n                $gapImgElem,\n                $mediaSizer;\n\n            if (gapImg) {\n\n                $choiceForm.empty().html(gapImgFormTpl({\n                    identifier: gapImg.id(),\n                    fixed: gapImg.attr('fixed'),\n                    serial: serial,\n                    matchMin: gapImg.attr('matchMin'),\n                    matchMax: gapImg.attr('matchMax'),\n                    choicesCount: _.size(interaction.getChoices()),\n                    baseUrl: options.baseUrl,\n                    data: gapImg.object.attr('data'),\n                    width: gapImg.object.attr('width'),\n                    height: gapImg.object.attr('height'),\n                    type: gapImg.object.attr('type')\n                }));\n\n                // <li/> that will contain the image\n                $gapImgBox = $('li[data-serial=\"' + gapImg.serial + '\"]');\n\n\n                $gapImgElem = $gapImgBox.find('img');\n\n                //init media sizer\n                $mediaSizer = $choiceForm.find('.media-sizer-panel')\n                    .on('create.mediasizer', function(e, params) {\n                        applyMediasizerValues(params, widget.$original.data('factor'));\n                    });\n\n                $mediaSizer.empty().mediasizer({\n                    target: $gapImgElem,\n                    showResponsiveToggle: false,\n                    showSync: false,\n                    responsive: false,\n                    parentSelector: $gapImgBox,\n                    // needs to be done on.sizechange.mediasizer to take in account the scale factor\n                    applyToMedium: false,\n                    maxWidth: interaction.object.attr('width')\n                });\n\n                imageSelector($choiceForm, gapImgSelectorOptions);\n\n                formElement.initWidget($choiceForm);\n\n                // bind callbacks to ms\n                // init data validation and binding\n                callbacks = formElement.getMinMaxAttributeCallbacks($choiceForm, 'matchMin', 'matchMax');\n                callbacks.identifier = identifierHelper.updateChoiceIdentifier;\n                callbacks.fixed = formElement.getAttributeChangeCallback();\n                callbacks.data = function (element, value) {\n                    gapImg.object.attr('data', value);\n                    setUpGapImg(gapImg);\n                };\n\n                // callbacks\n                $mediaSizer.on('sizechange.mediasizer', function(e, params) {\n                    applyMediasizerValues(params, widget.$original.data('factor'));\n\n                    gapImg.object.attr('width', params.width);\n                    gapImg.object.attr('height', params.height);\n                });\n\n                callbacks.type = function (element, value) {\n                    if (!value || value === '') {\n                        interaction.object.removeAttr('type');\n                    }\n                    else {\n                        gapImg.object.attr('type', value);\n                    }\n                };\n                formElement.setChangeCallbacks($choiceForm, gapImg, callbacks);\n\n                $formChoicePanel.show();\n                panel.openSections($formChoicePanel.children('section'));\n                panel.closeSections($formInteractionPanel.children('section'));\n\n                if (typeof window.scroll === 'function') {\n                    window.scroll(0, $choiceForm.offset().top);\n                }\n            }\n        }\n    };\n\n    /**\n     * Exit the question state, leave the room cleaned up\n     */\n    var exitQuestionState = function exitQuestionState() {\n        var widget = this.widget;\n        var interaction = widget.element;\n        var paper = interaction.paper;\n\n        if (!paper) {\n            return;\n        }\n\n\n        $(window).off('resize.changestate');\n\n        if (widget._editor) {\n            widget._editor.destroy();\n        }\n\n        //remove gapImg placeholder\n        $('ul.source .empty', widget.$original).remove();\n\n        //restore gapImg appearance\n        widget.$container.find('.qti-gapImg').removeClass('active')\n            .find('.mini-tlb').remove();\n        $('.image-editor.solid, .block-listing.source', widget.$container).css('min-width', 0);\n    };\n\n    /**\n     * The question state for the graphicGapMatch interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Question\n     */\n    var GraphicGapMatchInteractionStateQuestion = stateFactory.extend(Question, initQuestionState, exitQuestionState);\n\n    /**\n     * Initialize the form linked to the interaction\n     */\n    GraphicGapMatchInteractionStateQuestion.prototype.initForm = function () {\n\n        var widget = this.widget;\n        var options = widget.options;\n        var interaction = widget.element;\n        var $form = widget.$form;\n        var $container = widget.$original;\n        var isResponsive = $container.hasClass('responsive');\n        var $mediaSizer;\n        var $bgImage;\n\n        $form.html(formTpl({\n            baseUrl: options.baseUrl,\n            data: interaction.object.attr('data'),\n            width: interaction.object.attr('width'),\n            height: interaction.object.attr('height'),\n            type: interaction.object.attr('type')\n        }));\n\n        imageSelector($form, options);\n\n        formElement.initWidget($form);\n\n        //Toggle the image resizing panel depending on the widget container is responsive or not.\n        $form.find('.panel-interaction-size').toggle(!isResponsive);\n\n\n        if(!isResponsive) {\n            $mediaSizer = $form.find('.media-sizer-panel');\n\n            $bgImage = $container.find('.svggroup svg image');\n\n            if(!!$bgImage.length){\n                $mediaSizer.empty().mediasizer({\n                    target: $bgImage,\n                    showResponsiveToggle: false,\n                    showSync: false,\n                    responsive: false,\n                    parentSelector: $container.attr('id'),\n                    applyToMedium: false,\n                    maxWidth: interaction.object.attr('width')\n                });\n            }\n\n            $mediaSizer.on('sizechange.mediasizer', function(e, params) {\n\n                interaction.object.attr('width', params.width);\n                interaction.object.attr('height', params.height);\n\n                $container.trigger('resize.qti-widget.' + widget.serial, [params.width]);\n            });\n        }\n\n        //init data change callbacks\n        var callbacks = {};\n        callbacks.data = function (interaction, value) {\n            interaction.object.attr('data', value);\n            widget.rebuild({\n                ready: function (widget) {\n                    widget.changeState('question');\n                }\n            });\n        };\n        callbacks.width = function (interaction, value) {\n            interaction.object.attr('width', value);\n        };\n        callbacks.height = function (interaction, value) {\n            interaction.object.attr('height', value);\n        };\n        callbacks.type = function (interaction, value) {\n            if (!value || value === '') {\n                interaction.object.removeAttr('type');\n            }\n            else {\n                interaction.object.attr('type', value);\n            }\n        };\n        formElement.setChangeCallbacks($form, interaction, callbacks, { validateOnInit: false });\n    };\n\n    return GraphicGapMatchInteractionStateQuestion;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    /**\n     * Just forward to the correct/map states\n     */\n    function initAnswerState(){\n        answerStateHelper.forward(this.widget);\n    }\n    \n    \n    function exitAnswerState(){\n        //needed an exit callback even empty\n    }\n    \n    \n    /**\n     * The answer state for the graphicGapMatch interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/states/Answer\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Answer\n     */\n    return stateFactory.extend(Answer, initAnswerState, exitAnswerState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Correct',[\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function(_, __, stateFactory, Correct, commonRenderer, instructionMgr, PciResponse){\n\n    /**\n     * Initialize the state: use the common renderer to set the correct response.\n     */\n    function initCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var corrects  = _.values(response.getCorrect());\n        \n        commonRenderer.resetResponse(interaction); \n        commonRenderer.destroy(interaction);\n\n        if(!interaction.paper){\n            return;\n        }\n        \n        //add a specific instruction\n        instructionMgr.appendInstruction(interaction, __('Please fill the gap with the correct choices below.'));\n       \n        widget.createGapImgs(); \n \n        //use the common Renderer\n        commonRenderer.render.call(interaction.getRenderer(), interaction);\n\n\n        commonRenderer.setResponse(\n            interaction, \n            PciResponse.serialize(_.invoke(corrects, String.prototype.split, ' '), interaction)\n        );\n\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n           if(data.response && data.response.list){\n                response.setCorrect(\n                    _.map(data.response.list.directedPair, function(pair){\n                        return pair.join(' ');\n                    })\n                ); \n           }\n        });\n    }\n\n    /**\n     * Exit the correct state\n     */\n    function exitCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        if(!interaction.paper){\n            return;\n        }\n\n        //stop listening responses changes\n        widget.$container.off('responseChange.qti-widget');\n        \n        //destroy the common renderer\n        commonRenderer.resetResponse(interaction); \n        commonRenderer.destroy(interaction); \n        instructionMgr.removeInstructions(interaction);\n\n        //initialize again the widget's paper\n        interaction.paper = widget.createPaper(_.bind(widget.scaleGapList, widget));\n        widget.createChoices();\n        widget.createGapImgs();\n    }\n\n    /**\n     * The correct answer state for the graphicGapMatch interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Correct\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Correct\n     */\n    return stateFactory.create(Correct, initCorrectState, exitCorrectState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Map',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse', \n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/pairScoringForm'\n], function($, _, __, stateFactory, Map, commonRenderer, instructionMgr, graphicHelper, PciResponse, scoringFormFactory){\n\n    /**\n     * Initialize the state.\n     */\n    function initMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var corrects  = _.values(response.getCorrect());\n        var currentResponses =  _.size(response.getMapEntries()) === 0 ? corrects : _.keys(response.getMapEntries());\n        \n        //really need to destroy before ? \n        commonRenderer.resetResponse(interaction);\n        commonRenderer.destroy(interaction);\n        \n        if(!interaction.paper){\n            return;\n        }\n\n        //add a specific instruction\n        instructionMgr.appendInstruction(interaction, __('Please fill the gap with the images below, then edit the score for each gap/image pair.'));\n        interaction.responseMappingMode = true;\n\n        widget.createGapImgs(); \n \n        //use the common Renderer\n        commonRenderer.render.call(interaction.getRenderer(), interaction);\n    \n        //change the display of the gaps\n        showChoicesId(interaction);\n\n        //and initialize the scoring form\n        if(_.size(response.getMapEntries()) === 0){\n            updateForm(widget, corrects);\n        } else {\n            updateForm(widget);\n        }\n        \n        //each response change leads to an update of the scoring form\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            var type  = response.attr('cardinality') === 'single' ? 'base' : 'list';\n            var pairs, entries;\n            if(data && data.response &&  data.response[type]){\n               pairs = _.invoke(data.response[type].directedPair, Array.prototype.join, ' ');\n               entries = _.keys(response.getMapEntries());\n                \n               //add new pairs from  the difference between the current entries and the given data\n               _(pairs).difference(entries).forEach(interaction.pairScoringForm.addPair, interaction.pairScoringForm);\n            }\n            removeGapFillers(interaction);\n        });\n    }\n\n    /**\n     * Exit the map state\n     */\n    function exitMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        if(!interaction.paper){\n            return;\n        }\n        \n        widget.$container.off('responseChange.qti-widget');\n\n        if(interaction.pairScoringForm){\n            interaction.pairScoringForm.destroy();\n        }\n\n        //destroy the common renderer\n        commonRenderer.resetResponse(interaction); \n        commonRenderer.destroy(interaction); \n        instructionMgr.removeInstructions(interaction);\n\n        //initialize again the widget's paper\n        interaction.paper = widget.createPaper(_.bind(widget.scaleGapList, widget));\n        widget.createChoices();\n        widget.createGapImgs();\n    }\n\n    function removeGapFillers(interaction){\n        _.forEach(interaction.gapFillers, function(gapFiller){\n            gapFiller.remove();\n        });\n        interaction.gapFillers = [];\n    }\n\n    function showChoicesId(interaction){\n       \n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element){\n                graphicHelper.createShapeText(interaction.paper, element, {\n                    shapeClick: true,\n                    content : choice.id()\n                });\n            }\n        });\n    }\n\n     /**\n     * Update the scoring form\n     * @param {Object} widget - the current widget\n     * @param {Array} [entries] - to force the use of this collection instead of the mapEntries\n     */\n    function updateForm(widget, entries){\n\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var mapEntries = response.getMapEntries();\n\n        var mappingChange = function mappingChange(){\n            //set the current responses, either the mapEntries or the corrects if nothing else\n            commonRenderer.setResponse(\n                interaction, \n                PciResponse.serialize(_.invoke(_.keys(response.getMapEntries()), String.prototype.split, ' '), interaction)\n            );\n        };\n        var gapSrcs  = {};\n        _.forEach(interaction.getGapImgs(), function(gapImg){\n            if(gapImg.object && gapImg.object.attr('data')){\n                gapSrcs[gapImg.id()] = widget.options.baseUrl + gapImg.object.attr('data');\n            }\n        });       \n\n        //set up the scoring form options\n        var options = {\n            leftTitle : __('Choice'),\n            rightTitle : __('Gap'),\n            type : 'directedPair',\n            pairLeft : function(){\n                return _.map(interaction.getChoices(), function(choice){\n                    return {\n                        id : choice.id(),\n                        value : choice.id()\n                    };\n                });\n            },\n            pairRight : function(){\n                return _.map(interaction.getGapImgs(), function(gap){\n                    return {\n                        id : gap.id(),\n                        value : gap.id()\n                    };\n                });\n            },\n            formatRight : function(id){\n                var formated = id;\n                if(gapSrcs[id]){\n                    formated += \"<br><img height='24px' src='\" + gapSrcs[id] + \"' />\"; \n                }\n                return formated;\n            }\n        };\n\n        //format the entries to match the needs of the scoring form\n        if(entries){\n            options.entries = _.transform(entries, function(result, value){\n                result[value] = mapEntries[value] !== undefined ? mapEntries[value] : response.mappingAttributes.defaultValue;\n            }, {}); \n        }\n\n        //initialize the scoring form \n        interaction.pairScoringForm = scoringFormFactory(widget, options);\n    }\n\n    /**\n     * The map answer state for the graphicGapMatch interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Map\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Map\n     */\n    return  stateFactory.create(Map, initMapState, exitMapState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Sleep',    \n    'taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Map'\n], function(factory, states){\n\n    //creates a state bundle for the interaction\n    return factory.createBundle(states, arguments);\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/gapImg', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"alt=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.objetLabel)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  return buffer;\n  }\n\n  buffer += \"<li class=\\\"qti-choice qti-gapImg selectable\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <img src=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.object)),stack1 == null || stack1 === false ? stack1 : stack1.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.data)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \\n         width=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.object)),stack1 == null || stack1 === false ? stack1 : stack1.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\\n         height=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.object)),stack1 == null || stack1 === false ? stack1 : stack1.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\\n         \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.objectLabel), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    />\\n</li>\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/Widget',[\n    'jquery', 'lodash', 'i18n',\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/states',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/gapImg'\n], function($, _, __, Widget, GraphicWidget, states, gapImgTpl){\n\n    /**\n     * The Widget that provides components used by the QTI Creator for the GraphicGapMatch Interaction\n     *\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/Widget\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/GraphicInteraction/Widget\n     *\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/Widget\n     */      \n    var GraphicGapMatchInteractionWidget = _.extend(Widget.clone(), GraphicWidget, {\n\n        /**\n         * Initialize the widget\n         * @see {taoQtiItem/qtiCreator/widgets/interactions/Widget#initCreator}\n         * @param {Object} options - extra options \n         * @param {String} options.baseUrl - the resource base url\n         * @param {jQueryElement} options.choiceForm = a reference to the form of the choices\n         */\n        initCreator : function(options){\n            var paper;\n            this.baseUrl = options.baseUrl;\n            this.choiceForm = options.choiceForm;\n            \n            this.registerStates(states);\n            \n            //call parent initCreator\n            Widget.initCreator.call(this);\n          \n            paper = this.createPaper(_.bind(this.scaleGapList, this)); \n            if(paper){\n                this.element.paper = paper;\n                this.createChoices();\n                this.createGapImgs();\n            }\n        },\n\n        /**\n         * Gracefully destroy the widget\n         * @see {taoQtiItem/qtiCreator/widgets/Widget#destroy}\n         */\n        destroy : function(){\n\n            var $container = this.$original;\n            var $item      = $container.parents('.qti-item');\n\n            //stop listening the resize\n            $item.off('resize.gridEdit.' + this.element.serial);\n            $(window).off('resize.qti-widget.' + this.element.serial);\n            $container.off('resize.qti-widget.' + this.element.serial);\n\n            //call parent destroy\n            Widget.destroy.call(this);\n        },\n\n        /**\n         * Called back on paper resize to scale the gap list\n         * @param {Number} newSize - the interaction size\n         * @param {Number} [factor = 1] - scaling factor\n         */\n        scaleGapList : function(newSize, factor){\n\n           var $container = this.$original;\n           var $gapList   = $('ul.source', $container);\n           $gapList.css('max-width', newSize + 'px'); \n           if(factor && factor !== 1){\n                $gapList.find('img').each(function(){\n                    var $img = $(this);\n                    $img.width( $img.attr('width') * factor );\n                    $img.height( $img.attr('height') * factor );\n                });\n               $container.data('factor', factor);\n           } \n        },\n\n        /**\n         * Create the gap images\n         */\n        createGapImgs : function(){\n            var interaction = this.element;\n            var $container  = this.$original;\n            var $gapList    = $('ul.source', $container);\n    \n            $gapList.empty();\n            _.forEach(interaction.gapImgs, function(gapImg){\n                $gapList.append(gapImg.render());            \n            });\n        }\n   });\n\n    return GraphicGapMatchInteractionWidget;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/renderers/interactions/GraphicGapMatchInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/Widget'\n], function(_, GraphicGapMatchInteraction, GraphicGapMatchInteractionWidget){\n        \n    /**\n     * The CreatorGraphicGapMatchInteraction  Renderer \n     * @extends taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction\n     * @exports taoQtiItem/qtiCreator/renderers/interactions/GraphicGapMatchInteraction\n     */\n    var CreatorGraphicGapMatchInteraction = _.clone(GraphicGapMatchInteraction);\n\n    /**\n     * Render the interaction for authoring.\n     * It delegates the rendering to the widget layer.\n     * @param {Object} interaction - the model\n     * @param {Object} [options] - extra options\n     */\n    CreatorGraphicGapMatchInteraction.render = function(interaction, options){\n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        options.choiceForm = this.getOption('choiceOptionForm');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        \n        return GraphicGapMatchInteractionWidget.build(\n            interaction,\n            GraphicGapMatchInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorGraphicGapMatchInteraction;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicOrderInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-graphicInteraction qti-graphicOrderInteraction clearfix \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"image-editor solid\\\">\\n        <div id='graphic-paper-\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"' class=\\\"main-image-box\\\"></div>\\n        <div class=\\\"clearfix\\\"></div>\\n        <ul class=\\\"none block-listing horizontal ordinals\\\"></ul>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'raphael',\n    'scale.raphael',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicOrderInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager'\n], function($, _, __, raphael, scaleRaphael, tpl, graphic,  pciResponse, containerHelper, instructionMgr){\n\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     */\n    var render = function render(interaction){\n        var $container = containerHelper.get(interaction);\n        var $orderList = $('ul', $container);\n        var background = interaction.object.attributes;\n        var baseUrl = this.getOption('baseUrl') || '';\n\n        //create the paper\n        interaction.paper = graphic.responsivePaper( 'graphic-paper-' + interaction.serial, interaction.serial, {\n            width       : background.width,\n            height      : background.height,\n            img         : baseUrl + background.data,\n            imgId       : 'bg-image-' + interaction.serial,\n            container   : $container\n        });\n\n        //create the list of number to order\n        _renderOrderList(interaction, $orderList);\n\n        //call render choice for each interaction's choices\n        _.forEach(interaction.getChoices(), _.partial(_renderChoice, interaction, $orderList));\n\n        //set up the constraints instructions\n        instructionMgr.minMaxChoiceInstructions(interaction, {\n            min: interaction.attr('minChoices'),\n            max: interaction.attr('maxChoices'),\n            getResponse : _getRawResponse,\n            onError : function(data){\n                graphic.highlightError(data.target);\n            }\n        });\n    };\n\n    /**\n     * Render a choice inside the paper.\n     * Please note that the choice renderer isn't implemented separately because it relies on the Raphael paper instead of the DOM.\n     * @private\n     * @param {Object} interaction\n     * @param {jQueryElement} $orderList - the list than contains the orderers\n     * @param {Object} choice - the hotspot choice to add to the interaction\n     */\n    var _renderChoice  =  function _renderChoice(interaction, $orderList, choice){\n\n        var rElement = graphic.createElement(interaction.paper, choice.attr('shape'), choice.attr('coords'), {\n            id : choice.serial,\n            title : __('Select this area')\n        })\n        .click(function(){\n            if(this.active){\n                _unselectShape(interaction.paper, this, $orderList);\n            } else {\n                _selectShape(interaction.paper, this, $orderList);\n            }\n            containerHelper.triggerResponseChangeEvent(interaction);\n            instructionMgr.validateInstructions(interaction, { choice : choice });\n        });\n    };\n\n    /**\n     * Render the list of numbers\n     * @private\n     * @param {Object} interaction\n     * @param {jQueryElement} $orderList - the list than contains the orderers\n     */\n    var _renderOrderList = function _renderOrderList(interaction, $orderList){\n        var $orderers;\n        var size = _.size(interaction.getChoices());\n        var min = interaction.attr('minChoices');\n        var max = interaction.attr('maxChoices');\n\n        //calculate the number of orderer to display\n        if(max > 0 && max < size){\n            size = max;\n        } else if(min > 0 && min < size){\n           size = min;\n        }\n\n        //add them to the list\n        _.times(size, function(index){\n            var position = index + 1;\n            var $orderer = $('<li class=\"selectable\" data-number=\"' + position + '\">' + position +  '</li>');\n            if(index === 0){\n                $orderer.addClass('active');\n            }\n            $orderList.append($orderer);\n        });\n\n        //create related svg texts\n        _createTexts(interaction.paper, size, $orderList);\n\n        //bind the activation event\n        $orderers = $orderList.children('li');\n        $orderers.click(function(e){\n            e.preventDefault();\n            var $orderer = $(this);\n\n            if(!$orderer.hasClass('active') && !$orderer.hasClass('disabled')){\n                $orderers.removeClass('active');\n                $orderer.addClass('active');\n            }\n        });\n    };\n\n    /**\n     * Select a shape to position an order\n     * @private\n     * @param {Raphael.Paper} paper - the interaction paper\n     * @param {Raphael.element} element - the selected shape\n     * @param {jQueryElement} $orderList - the list than contains the orderers\n     */\n    var _selectShape = function _selectShape(paper, element, $orderList){\n\n        //lookup for the active number\n        var $active = $orderList.find('.active:first');\n        if($active.length && $active.data('number') > 0){\n\n            //associate the current number directly to the element\n            element.data('number', $active.data('number'));\n            element.active  = true;\n            _showText(paper, element);\n            graphic.updateElementState(element, 'active');\n\n            //update the state of the order list\n            $active.toggleClass('active disabled').siblings(':not(.disabled)').first().toggleClass('active');\n        }\n    };\n\n    /**\n     * Unselect a shape to free the position\n     * @private\n     * @param {Raphael.Paper} paper - the interaction paper\n     * @param {Raphael.element} element - the unselected shape\n     * @param {jQueryElement} $orderList - the list than contains the orderers\n     */\n    var _unselectShape = function _unselectShape(paper, element, $orderList){\n        var number = element.data('number');\n\n        //update element state\n        element.active  = false;\n        _hideText(paper, element);\n        element.removeData('number');\n        graphic.updateElementState(element, 'basic');\n\n        //reset order list state and activate the removed number\n        $orderList\n            .children().removeClass('active')\n            .filter('[data-number='+number+']').removeClass('disabled').addClass('active');\n    };\n\n    /**\n     * Creates ALL the texts (the numbers to display in the shapes). They are created styled but hidden.\n     *\n     * @private\n     * @param {Raphael.Paper} paper - the interaction paper\n     * @param {Number} size - the number of numbers to create...\n     * @param {jQueryElement} $orderList - the list than contains the orderers\n     * @return {Array} the creates text element\n     */\n    var _createTexts = function _createTexts(paper, size){\n        var texts = [];\n        _.times(size, function(index){\n\n            var number = index + 1;\n            var text = graphic.createText(paper, {\n                id          : 'text-' + number,\n                content     : number,\n                title       : __('Remove'),\n                style       : 'order-text',\n                hide        : true\n            });\n\n            //clicking the text will has the same effect that clicking the shape: unselect.\n            text.click(function(){\n                paper.forEach(function(element){\n                    if(element.data('number') === number && element.events){  //we just need to retrieve the right element\n                        //call the click event\n                        var evt = _.where(element.events, { name : 'click'});\n                        if(evt.length && evt[0] && typeof evt[0].f === 'function'){\n                            evt[0].f.call(element);\n                        }\n                    }\n                });\n            });\n            texts.push(text);\n        });\n        return texts;\n    };\n\n    /**\n     * Show the text that match the element's number.\n     * We need to display it at the center of the shape.\n     * @private\n     * @param {Raphael.Paper} paper - the interaction paper\n     * @param {Raphael.Element} element - the element to show the text for\n     */\n    var _showText =  function _showText(paper, element){\n        var bbox = element.getBBox();\n        var transf;\n\n        //we retrieve the good text from it's id\n        var text = paper.getById('text-' + element.data('number'));\n        if(text){\n\n            //move it to the center of the shape (using absolute transform), and than display it\n            transf = 'T' + (bbox.x + (bbox.width / 2)) + ',' +\n                           (bbox.y + (bbox.height / 2));\n            text.transform(transf)\n                .show()\n                .toFront();\n        }\n    };\n\n    /**\n     * Hide an element text.\n     * @private\n     * @param {Raphael.Paper} paper - the interaction paper\n     * @param {Raphael.Element} element - the element to hide the text for\n     */\n    var _hideText =  function _hideText (paper, element){\n        var text = paper.getById('text-' + element.data('number'));\n        if(text){\n            text.hide();\n        }\n    };\n\n    /**\n     * Get the responses from the interaction\n     * @private\n     * @param {Object} interaction\n     * @returns {Array} of points\n     */\n    var _getRawResponse = function _getRawResponse(interaction){\n        var response = [];\n        _.forEach(interaction.getChoices(), function(choice){\n            var elt = interaction.paper.getById(choice.serial);\n            if(elt && elt.data('number')){\n                response.push({\n                    index : elt.data('number'),\n                    id : choice.id()\n                });\n            }\n        });\n        return _(response).sortBy('index').map('id').value();\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * Special value: the empty object value {} resets the interaction responses\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n        var responseValues;\n        var $container = containerHelper.get(interaction);\n        var $orderList = $('ul', $container);\n        if(response && interaction.paper){\n\n            try {\n                //try to unserualize tthe pci response\n                responseValues = pciResponse.unserialize(response, interaction);\n            } catch(e){}\n\n            if(_.isArray(responseValues)){\n                _.forEach(responseValues, function(responseValue, index){\n                    var element;\n                    var number = index + 1;\n\n                    //get the choice that match the response\n                    var choice = _(interaction.getChoices()).where({'attributes' : { 'identifier' : responseValue}}).first();\n                    if(choice){\n                       element = interaction.paper.getById(choice.serial);\n                       if(element){\n                            //activate the orderer to be consistant\n                            $orderList.children('[data-number='+number+']').addClass('active');\n\n                            //select the related shape\n                            _selectShape(interaction.paper, element, $orderList);\n                       }\n                    }\n                });\n            }\n        }\n    };\n\n    /**\n     * Reset the current responses of the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * Special value: the empty object value {} resets the interaction responses\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var resetResponse = function resetResponse(interaction){\n        var $container = containerHelper.get(interaction);\n        var $orderList = $('ul', $container);\n\n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element){\n                _unselectShape(interaction.paper, element, $orderList);\n            }\n        });\n\n        $orderList.children('li').removeClass('active disabled').first().addClass('active');\n    };\n\n\n    /**\n     i* Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        return  pciResponse.serialize(_getRawResponse(interaction), interaction);\n    };\n\n    /**\n     * Clean interaction destroy\n     * @param {Object} interaction\n     */\n    var destroy = function destroy(interaction){\n        var $container;\n        if(interaction.paper){\n            $container = containerHelper.get(interaction);\n\n            $(window).off('resize.qti-widget.' + interaction.serial);\n            $container.off('resize.qti-widget.' + interaction.serial);\n\n            interaction.paper.clear();\n            instructionMgr.removeInstructions(interaction);\n\n            $('.main-image-box', $container).empty().removeAttr('style');\n            $('.image-editor', $container).removeAttr('style');\n            $('ul', $container).empty();\n        }\n\n        //remove all references to a cache container\n        containerHelper.reset(interaction);\n    };\n\n    /**\n     * Set the interaction state. It could be done anytime with any state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {Object} state - the interaction state\n     */\n    var setState  = function setState(interaction, state){\n        if(_.isObject(state)){\n            if(state.response){\n                interaction.resetResponse();\n                interaction.setResponse(state.response);\n            }\n        }\n    };\n\n    /**\n     * Get the interaction state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the interaction current state\n     */\n    var getState = function getState(interaction){\n        var $container;\n        var state =  {};\n        var response =  interaction.getResponse();\n\n        if(response){\n            state.response = response;\n        }\n        return state;\n    };\n\n\n    /**\n     * Expose the common renderer for the interaction\n     * @exports qtiCommonRenderer/renderers/interactions/SelectPointInteraction\n     */\n    return {\n        qtiClass : 'graphicOrderInteraction',\n        template : tpl,\n        render : render,\n        getContainer : containerHelper.get,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy,\n        setState : setState,\n        getState : getState\n    };\n});\n\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Sleep',[\n    'taoQtiItem/qtiCreator/widgets/states/factory', \n    'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep'\n], function(stateFactory, SleepState){\n   \n    var initSleepState = function initSleepState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        widget.on('metaChange', function(data){\n            if(data.key === 'responsive'){\n                if(data.value === true){\n                    interaction.addClass('responsive');\n                } else {\n                    interaction.removeClass('responsive');\n                }\n                widget.rebuild();\n            }\n        });\n    };\n\n\n    var exitSleepState = function exitSleepState(){};\n \n    return stateFactory.extend(SleepState, initSleepState, exitSleepState); \n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicOrder', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    \\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Interaction Background\", options) : helperMissing.call(depth0, \"__\", \"Interaction Background\", options)))\n    + \"</h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"data\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"File\", options) : helperMissing.call(depth0, \"__\", \"File\", options)))\n    + \"</label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The file path to the image.\", options) : helperMissing.call(depth0, \"__\", \"The file path to the image.\", options)))\n    + \"</div>\\n        <input type=\\\"text\\\" name=\\\"data\\\" value=\\\"\";\n  if (helper = helpers.data) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.data); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty; $fileExists(baseUrl=\";\n  if (helper = helpers.baseUrl) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.baseUrl); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")\\\"/>\\n        <button class=\\\"btn-info small block\\\" data-role=\\\"upload-trigger\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select image\", options) : helperMissing.call(depth0, \"__\", \"Select image\", options)))\n    + \"</button>\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width\", options) : helperMissing.call(depth0, \"__\", \"Width\", options)))\n    + \"</label>\\n        <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height\", options) : helperMissing.call(depth0, \"__\", \"Height\", options)))\n    + \"</label>\\n        <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"type\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Mime Type\", options) : helperMissing.call(depth0, \"__\", \"Mime Type\", options)))\n    + \"</label>\\n        <input name=\\\"type\\\" value=\\\"\";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <hr>\\n\\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allowed number of choices\", options) : helperMissing.call(depth0, \"__\", \"Allowed number of choices\", options)))\n    + \"\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of choices that the candidate is required to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of choices that the candidate is required to select to form a valid response.\", options)))\n    + \"<br>\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices that the candidate is allowed to select.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices that the candidate is allowed to select.\", options)))\n    + \"\\n        </span>\\n    </h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"minChoices\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"minChoices\\\" value=\\\"\";\n  if (helper = helpers.minChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.minChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"maxChoices\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"maxChoices\\\" value=\\\"\";\n  if (helper = helpers.maxChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/choices/hotspot', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"\\n<div class=\\\"panel\\\">\\n    <label for=\\\"\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"identifier\", options) : helperMissing.call(depth0, \"__\", \"identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. my-hotspot_1\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n</div>\\n\\n<h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Shape position\", options) : helperMissing.call(depth0, \"__\", \"Shape position\", options)))\n    + \"</h3>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"x\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Left\", options) : helperMissing.call(depth0, \"__\", \"Left\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"x\\\" value=\\\"\";\n  if (helper = helpers.x) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.x); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"y\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Top\", options) : helperMissing.call(depth0, \"__\", \"Top\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"y\\\" value=\\\"\";\n  if (helper = helpers.y) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.y); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width\", options) : helperMissing.call(depth0, \"__\", \"Width\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The shape width in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The shape width in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height\", options) : helperMissing.call(depth0, \"__\", \"Height\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The shape height in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The shape height in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Question',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/helpers/identifier',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicOrder',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/hotspot',\n    'taoQtiItem/qtiCreator/helper/panel'\n], function($, _, GraphicHelper, stateFactory, Question, shapeEditor, imageSelector, formElement, interactionFormElement, identifierHelper, formTpl, choiceFormTpl, panel){\n\n    /**\n     * Question State initialization: set up side bar, editors and shae factory\n     */\n    var initQuestionState = function initQuestionState(){\n\n        var widget      = this.widget;\n        var interaction = widget.element;\n        var paper       = interaction.paper;\n\n        if(!paper){\n            return;\n        }\n\n        var $choiceForm  = widget.choiceForm;\n        var $formInteractionPanel = $('#item-editor-interaction-property-bar');\n        var $formChoicePanel = $('#item-editor-choice-property-bar');\n\n        var $left, $top, $width, $height;\n\n        //instantiate the shape editor, attach it to the widget to retrieve it during the exit phase\n        widget._editor = shapeEditor(widget, {\n            shapeCreated : function(shape, type){\n                var newChoice = interaction.createChoice({\n                    shape  : type === 'path' ? 'poly' : type,\n                    coords : GraphicHelper.qtiCoords(shape) \n                });\n\n                //link the shape to the choice\n                shape.id = newChoice.serial;\n            },\n            shapeRemoved : function(id){\n                interaction.removeChoice(id);\n            },\n            enterHandling : function(shape){\n                enterChoiceForm(shape.id);\n            },\n            quitHandling : function(){\n                leaveChoiceForm();\n            },\n            shapeChange : function(shape){\n                var bbox;\n                var choice = interaction.getChoice(shape.id);\n                if(choice){\n                    choice.attr('coords', GraphicHelper.qtiCoords(shape));\n    \n                    if($left && $left.length){\n                        bbox = shape.getBBox();\n                        $left.val(parseInt(bbox.x, 10)); \n                        $top.val(parseInt(bbox.y, 10));\n                        $width.val(parseInt(bbox.width, 10));\n                        $height.val(parseInt(bbox.height, 10));                         \n                    }         \n                }\n            }\n        });\n    \n        //and create an instance\n        widget._editor.create();\n\n        //we need to stop the question mode on resize, to keep the coordinate system coherent, \n        //even in responsive (the side bar introduce a biais)\n        $(window).on('resize.changestate', function(){\n            widget.changeState('sleep');\n        });\n\n\n        widget.on('attributeChange', function(data){\n            if(data.key === 'maxChoices'){\n                widget.renderOrderList();\n            }\n        });\n        /**\n         * Set up the choice form\n         * @private\n         * @param {String} serial - the choice serial\n         */\n        function enterChoiceForm(serial){\n            var choice = interaction.getChoice(serial);\n            var element, bbox;\n            if(choice){\n                \n                //get shape bounding box\n                element = interaction.paper.getById(serial);\n                bbox = element.getBBox();\n\n                $choiceForm.empty().html(\n                    choiceFormTpl({\n                        identifier  : choice.id(),\n                        fixed       : choice.attr('fixed'),\n                        serial      : serial,\n                        x           : parseInt(bbox.x, 10), \n                        y           : parseInt(bbox.y, 10),\n                        width       : parseInt(bbox.width, 10),\n                        height      : parseInt(bbox.height, 10)                         \n                    })\n                );\n\n                formElement.initWidget($choiceForm);\n\n                //init data validation and binding\n                formElement.setChangeCallbacks($choiceForm, choice, {\n                    identifier  : identifierHelper.updateChoiceIdentifier,\n                    fixed       : formElement.getAttributeChangeCallback() \n                });\n\n                $formChoicePanel.show();\n                panel.openSections($formChoicePanel.children('section'));\n                panel.closeSections($formInteractionPanel.children('section'));\n\n                //change the nodes bound to the position fields\n                $left   = $('input[name=x]', $choiceForm);\n                $top    = $('input[name=y]', $choiceForm);\n                $width  = $('input[name=width]', $choiceForm);\n                $height = $('input[name=height]', $choiceForm);\n            }\n        }\n        \n        /**\n         * Leave the choice form\n         * @private\n         */\n        function leaveChoiceForm(){\n            if($formChoicePanel.css('display') !== 'none'){\n                panel.openSections($formInteractionPanel.children('section'));\n                $formChoicePanel.hide();\n                $choiceForm.empty();\n            }\n        }\n    };\n\n    /**\n     * Exit the question state, leave the room cleaned up\n     */\n    var exitQuestionState = function initQuestionState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        var paper       = interaction.paper;\n\n        if(!paper){\n            return;\n        }\n        \n        $(window).off('resize.changestate');\n\n        if(widget._editor){\n            widget._editor.destroy();\n        }\n    };\n    \n    /**\n     * The question state for the graphicOrder interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Question\n     */\n    var GraphicOrderInteractionStateQuestion = stateFactory.extend(Question, initQuestionState, exitQuestionState);\n\n    /**\n     * Initialize the form linked to the interaction\n     */\n    GraphicOrderInteractionStateQuestion.prototype.initForm = function(){\n\n        var widget = this.widget;\n        var options = widget.options;\n        var interaction = widget.element;\n        var $form = widget.$form;\n\n        $form.html(formTpl({\n            baseUrl         : options.baseUrl,\n            maxChoices      : parseInt(interaction.attr('maxChoices')),\n            minChoices      : parseInt(interaction.attr('minChoices')),\n            choicesCount    : _.size(interaction.getChoices()),\n            data            : interaction.object.attr('data'),\n            width           : interaction.object.attr('width'),\n            height          : interaction.object.attr('height'),\n            type            : interaction.object.attr('type')\n        }));\n\n        imageSelector($form, options); \n\n        formElement.initWidget($form);\n        \n        //init data change callbacks\n        var callbacks = formElement.getMinMaxAttributeCallbacks(this.widget.$form, 'minChoices', 'maxChoices', {updateCardinality:false});\n        callbacks.data = function(i, value){\n            interaction.object.attr('data', value);\n            widget.rebuild({\n                ready:function(widget){\n                    widget.changeState('question');\n                }\n            });\n        };\n        callbacks.width = function(i, value){\n            interaction.object.attr('width', value);\n        };\n        callbacks.height = function(i, value){\n            interaction.object.attr('height', value);\n        };\n        callbacks.type = function(i, value){\n            if(!value || value === ''){\n                interaction.object.removeAttr('type');\n            } else {\n                interaction.object.attr('type', value);\n            }\n        };\n        formElement.setChangeCallbacks($form, interaction, callbacks, { validateOnInit : false });\n        \n        interactionFormElement.syncMaxChoices(widget);\n    };\n\n    return GraphicOrderInteractionStateQuestion;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    /**\n     * Just forward to the correct/map states\n     */\n    function initAnswerState(){\n        answerStateHelper.forward(this.widget);\n    }\n    \n    \n    function exitAnswerState(){\n        //needed an exit callback even empty\n    }\n    \n    \n    /**\n     * The answer state for the graphicOrder interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/states/Answer\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Answer\n     */\n    return stateFactory.extend(Answer, initAnswerState, exitAnswerState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Correct',[\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function(_, __, stateFactory, Correct, commonRenderer, instructionMgr, PciResponse){\n\n    /**\n     * Initialize the state: use the common renderer to set the correct response.\n     */\n    function initCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n       \n        //really need to destroy before ? \n        commonRenderer.resetResponse(interaction);\n        commonRenderer.destroy(interaction);\n\n        if(!interaction.paper){\n            return;\n        }\n        \n        //add a specific instruction\n        instructionMgr.appendInstruction(interaction, __('Please order the choices below to set the correct answer'));\n        \n        //use the common Renderer\n        commonRenderer.render.call(interaction.getRenderer(), interaction);\n\n        commonRenderer.setResponse(interaction, PciResponse.serialize(_.values(response.getCorrect()), interaction));\n\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            response.setCorrect(PciResponse.unserialize(data.response, interaction)); \n        });\n\n    }\n\n    /**\n     * Exit the correct state\n     */\n    function exitCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        if(!interaction.paper){\n            return;\n        }\n\n        //stop listening responses changes\n        widget.$container.off('responseChange.qti-widget');\n        \n        //destroy the common renderer\n        commonRenderer.resetResponse(interaction);\n        commonRenderer.destroy(interaction); \n        instructionMgr.removeInstructions(interaction);\n\n        //initialize again the widget's paper\n        interaction.paper = widget.createPaper(_.bind(widget.scaleOrderList, widget)); \n        widget.createChoices();\n        widget.renderOrderList();\n    }\n\n    /**\n     * The correct answer state for the graphicOrder interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Correct\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Correct\n     */\n    return stateFactory.create(Correct, initCorrectState, exitCorrectState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n\t'taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Correct'\n], function(factory, states){\n\n    //creates a state bundle for the interaction\n    return factory.createBundle(states, arguments);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/Widget',[\n    'jquery', 'lodash', 'i18n',\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/states'\n], function($, _, __, Widget, GraphicWidget, states){\n\n    /**\n     * The Widget that provides components used by the QTI Creator for the GraphicOrder Interaction\n     *\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/Widget\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/GraphicInteraction/Widget\n     *\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/Widget\n     */      \n    var GraphicOrderInteractionWidget = _.extend(Widget.clone(), GraphicWidget, {\n\n        /**\n         * Initialize the widget\n         * @see {taoQtiItem/qtiCreator/widgets/interactions/Widget#initCreator}\n         * @param {Object} options - extra options \n         * @param {String} options.baseUrl - the resource base url\n         * @param {jQueryElement} options.choiceForm = a reference to the form of the choices\n         */\n        initCreator : function(options){\n            var paper;\n            this.baseUrl = options.baseUrl;\n            this.choiceForm = options.choiceForm;\n            \n            this.registerStates(states);\n            \n            //call parent initCreator\n            Widget.initCreator.call(this);\n           \n            paper = this.createPaper(_.bind(this.scaleOrderList, this)); \n            if(paper){\n                this.element.paper = paper;\n                this.createChoices();\n                this.renderOrderList();\n            }\n        },\n\n        /**\n         * Gracefull destroy the widget\n         * @see {taoQtiItem/qtiCreator/widgets/Widget#destroy}\n         * @param {Object} options - extra options \n         * @param {String} options.baseUrl - the resource base url\n         * @param {jQueryElement} options.choiceForm = a reference to the form of the choices\n         */\n        destroy : function(){\n\n            var $container = this.$original;\n            var $item      = $container.parents('.qti-item');\n\n            //stop listening the resize\n            $item.off('resize.gridEdit.' + this.element.serial);\n            $(window).off('resize.qti-widget.' + this.element.serial);\n            $container.off('resize.qti-widget.' + this.element.serial);\n\n            //call parent destroy\n            Widget.destroy.call(this);\n        },\n\n        /**\n         * Called back on paper resize to scale the order list\n         * @param {Number} newSize - the interaction size\n         */\n        scaleOrderList : function(newSize){\n            $('ul.block-listing', this.$original).css('max-width', newSize + 'px');\n        }, \n\n        /**\n         * Render the list of numbers\n         */\n         renderOrderList : function renderOrderList(){\n            var interaction = this.element;\n            var size        = _.size(interaction.getChoices());\n            var min         = interaction.attr('minChoices');\n            var max         = interaction.attr('maxChoices');\n            var $orderList  = $('ul.block-listing', this.$original);\n\n            //calculate the number of orderer to display\n            if(max > 0 && max < size){\n                size = max;\n            } else if(min > 0 && min < size){\n               size = min;\n            }\n    \n            $orderList.empty();\n\n            //add them to the list\n            _.times(size, function(index){\n                var position = index + 1;\n                var $orderer = $('<li class=\"selectable\" data-number=\"' + position + '\">' + position +  '</li>');\n                if(index === 0){\n                    $orderer.addClass('active');\n                }\n                $orderList.append($orderer);\n            });\n        }\n   });\n\n    return GraphicOrderInteractionWidget;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/renderers/interactions/GraphicOrderInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/Widget'\n], function(_, GraphicOrderInteraction, GraphicOrderInteractionWidget){\n        \n    /**\n     * The CreatorGraphicOrderInteraction  Renderer \n     * @extends taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction\n     * @exports taoQtiItem/qtiCreator/renderers/interactions/GraphicOrderInteraction\n     */\n    var CreatorGraphicOrderInteraction = _.clone(GraphicOrderInteraction);\n\n    /**\n     * Render the interaction for authoring.\n     * It delegates the rendering to the widget layer.\n     * @param {Object} interaction - the model\n     * @param {Object} [options] - extra options\n     */\n    CreatorGraphicOrderInteraction.render = function(interaction, options){\n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        options.choiceForm = this.getOption('choiceOptionForm');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        \n        return GraphicOrderInteractionWidget.build(\n            interaction,\n            GraphicOrderInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorGraphicOrderInteraction;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/hotspotInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-graphicInteraction qti-hotspotInteraction clearfix \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"image-editor solid\\\">\\n        <div id='graphic-paper-\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"' class=\\\"main-image-box\\\"></div>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'raphael',\n    'scale.raphael',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/hotspotInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager'\n], function($, _, __, raphael, scaleRaphael, tpl, graphic,  pciResponse, containerHelper, instructionMgr){\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     */\n    var render = function render(interaction){\n\n        var $container = containerHelper.get(interaction);\n        var background = interaction.object.attributes;\n        var baseUrl = this.getOption('baseUrl') || '';\n\n        interaction.paper = graphic.responsivePaper( 'graphic-paper-' + interaction.serial, interaction.serial, {\n            width     : background.width,\n            height    : background.height,\n            img       : baseUrl + background.data,\n            container : $container\n        });\n\n        //call render choice for each interaction's choices\n        _.forEach(interaction.getChoices(), _.partial(_renderChoice, interaction));\n\n        //set up the constraints instructions\n        instructionMgr.minMaxChoiceInstructions(interaction, {\n            min: interaction.attr('minChoices'),\n            max: interaction.attr('maxChoices'),\n            getResponse : _getRawResponse,\n            onError : function(data){\n                if(data.target.active){\n                    data.target.active = false;\n                    graphic.updateElementState(this, 'basic', __('Select this area'));\n                    graphic.highlightError(data.target);\n                    containerHelper.triggerResponseChangeEvent(interaction);\n                    $container.trigger('inactiveChoice.qti-widget', [data.choice, data.target]);\n                }\n            }\n        });\n    };\n\n    /**\n     * Render a choice inside the paper.\n     * Please note that the choice renderer isn't implemented separately because it relies on the Raphael paper instead of the DOM.\n     * @param {Paper} paper - the raphael paper to add the choices to\n     * @param {Object} interaction\n     * @param {Object} choice - the hotspot choice to add to the interaction\n     */\n    var _renderChoice  =  function _renderChoice(interaction, choice){\n        var $container = containerHelper.get(interaction);\n        var rElement = graphic.createElement(interaction.paper, choice.attr('shape'), choice.attr('coords'), {\n            id : choice.serial,\n            title : __('Select this area')\n        })\n        .click(function(){\n            if(this.active){\n                graphic.updateElementState(this, 'basic', __('Select this area'));\n                this.active = false;\n                $container.trigger('inactiveChoice.qti-widget', [choice, this]);\n            } else {\n                graphic.updateElementState(this, 'active', __('Click again to remove'));\n                this.active = true;\n                $container.trigger('activeChoice.qti-widget', [choice, this]);\n            }\n            containerHelper.triggerResponseChangeEvent(interaction);\n            instructionMgr.validateInstructions(interaction, { choice : choice, target : this });\n        });\n    };\n\n    /**\n     * Get the response from the interaction\n     * @private\n     * @param {Object} interaction\n     * @returns {Array} the response in raw format\n     */\n    var _getRawResponse = function _getRawResponse(interaction){\n\n       return _(interaction.getChoices())\n        .map(function(choice){\n            var rElement = interaction.paper.getById(choice.serial);\n            return (rElement && rElement.active === true) ? choice.id() : false;\n       })\n        .filter(_.isString)\n        .value();\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * Special value: the empty object value {} resets the interaction responses\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n\n        var responseValues;\n        if(response && interaction.paper){\n\n            try{\n                responseValues = pciResponse.unserialize(response, interaction);\n\n            } catch(e){ }\n\n            if(_.isArray(responseValues)){\n\n                _.forEach(interaction.getChoices(), function(choice){\n                    var rElement;\n                    if(_.contains(responseValues, choice.attributes.identifier)){\n                        rElement = interaction.paper.getById(choice.serial);\n                        if(rElement){\n                            rElement.active = true;\n                            graphic.updateElementState(rElement, 'active', __('Click again to remove'));\n                            instructionMgr.validateInstructions(interaction, { choice : choice, target : rElement });\n                        }\n                    }\n                });\n            }\n        }\n    };\n\n    /**\n     * Reset the current responses of the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * Special value: the empty object value {} resets the interaction responses\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var resetResponse = function resetResponse(interaction){\n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element){\n                element.active = false;\n                graphic.updateElementState(element, 'basic');\n            }\n        });\n        instructionMgr.resetInstructions(interaction);\n    };\n\n\n    /**\n     * Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        var raw = _getRawResponse(interaction);\n        var response =  pciResponse.serialize(_getRawResponse(interaction), interaction);\n        return response;\n    };\n\n    /**\n     * Clean interaction destroy\n     * @param {Object} interaction\n     */\n    var destroy = function destroy(interaction){\n        var $container;\n        if(interaction.paper){\n            $container = containerHelper.get(interaction);\n\n            $(window).off('resize.qti-widget.' + interaction.serial);\n            $container.off('resize.qti-widget.' + interaction.serial);\n\n            interaction.paper.clear();\n            instructionMgr.removeInstructions(interaction);\n\n            $('.main-image-box', $container).empty().removeAttr('style');\n            $('.image-editor', $container).removeAttr('style');\n        }\n\n        //remove all references to a cache container\n        containerHelper.reset(interaction);\n    };\n    /**\n     * Set the interaction state. It could be done anytime with any state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {Object} state - the interaction state\n     */\n    var setState  = function setState(interaction, state){\n        if(_.isObject(state)){\n            if(state.response){\n                interaction.resetResponse();\n                interaction.setResponse(state.response);\n            }\n        }\n    };\n\n    /**\n     * Get the interaction state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the interaction current state\n     */\n    var getState = function getState(interaction){\n        var $container;\n        var state =  {};\n        var response =  interaction.getResponse();\n\n        if(response){\n            state.response = response;\n        }\n        return state;\n    };\n\n    /**\n     * Expose the common renderer for the hotspot interaction\n     * @exports qtiCommonRenderer/renderers/interactions/HotspotInteraction\n     */\n    return {\n        qtiClass : 'hotspotInteraction',\n        template : tpl,\n        render : render,\n        getContainer : containerHelper.get,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy,\n        setState : setState,\n        getState : getState\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Sleep',[\n    'taoQtiItem/qtiCreator/widgets/states/factory', \n    'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep'\n], function(stateFactory, SleepState){\n   \n    var initSleepState = function initSleepState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        widget.on('metaChange', function(data){\n            if(data.key === 'responsive'){\n                if(data.value === true){\n                    interaction.addClass('responsive');\n                } else {\n                    interaction.removeClass('responsive');\n                }\n                widget.rebuild();\n            }\n        });\n    };\n\n    var exitSleepState = function exitSleepState(){\n        \"use strict\";\n\n        $('.image-editor.solid, .block-listing.source', this.widget.$container).css('min-width', 0);\n    };\n \n    return stateFactory.extend(SleepState, initSleepState, exitSleepState); \n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/hotspot', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    \\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Interaction Background\", options) : helperMissing.call(depth0, \"__\", \"Interaction Background\", options)))\n    + \"</h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"data\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"File\", options) : helperMissing.call(depth0, \"__\", \"File\", options)))\n    + \"</label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The file path to the image.\", options) : helperMissing.call(depth0, \"__\", \"The file path to the image.\", options)))\n    + \"</div>\\n        <input type=\\\"text\\\" name=\\\"data\\\" value=\\\"\";\n  if (helper = helpers.data) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.data); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty; $fileExists(baseUrl=\";\n  if (helper = helpers.baseUrl) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.baseUrl); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")\\\"/>\\n        <button class=\\\"btn-info small block\\\" data-role=\\\"upload-trigger\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select image\", options) : helperMissing.call(depth0, \"__\", \"Select image\", options)))\n    + \"</button>\\n    </div>\\n\\n    <div class=\\\"panel media-sizer-panel\\\">\\n        <!-- media sizer goes here -->\\n    </div>\\n    <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"hidden\\\" />\\n    <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"hidden\\\" />\\n\\n\\n        <input name=\\\"type\\\" value=\\\"\";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"hidden\\\" readonly />\\n\\n    <hr>\\n\\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allowed number of choices\", options) : helperMissing.call(depth0, \"__\", \"Allowed number of choices\", options)))\n    + \"\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of choices that the candidate is required to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of choices that the candidate is required to select to form a valid response.\", options)))\n    + \"<br>\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices that the candidate is allowed to select.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices that the candidate is allowed to select.\", options)))\n    + \"\\n        </span>\\n    </h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"minChoices\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"minChoices\\\" value=\\\"\";\n  if (helper = helpers.minChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.minChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"maxChoices\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"maxChoices\\\" value=\\\"\";\n  if (helper = helpers.maxChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Question',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/helpers/identifier',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/hotspot',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/hotspot',\n    'taoQtiItem/qtiCreator/helper/panel',\n    'ui/mediasizer'\n], function($, _, GraphicHelper, stateFactory, Question, shapeEditor, imageSelector, formElement, interactionFormElement,  identifierHelper, formTpl, choiceFormTpl,  panel){\n\n    /**\n     * Question State initialization: set up side bar, editors and shae factory\n     */\n    var initQuestionState = function initQuestionState(){\n\n        var widget      = this.widget;\n        var interaction = widget.element;\n        var paper       = interaction.paper;\n\n        if(!paper){\n            return;\n        }\n\n        var $choiceForm  = widget.choiceForm;\n        var $formInteractionPanel = $('#item-editor-interaction-property-bar');\n        var $formChoicePanel = $('#item-editor-choice-property-bar');\n\n        var $left, $top, $width, $height;\n\n        //instantiate the shape editor, attach it to the widget to retrieve it during the exit phase\n        widget._editor = shapeEditor(widget, {\n            shapeCreated : function(shape, type){\n                var newChoice = interaction.createChoice({\n                    shape  : type === 'path' ? 'poly' : type,\n                    coords : GraphicHelper.qtiCoords(shape) \n                });\n\n                //link the shape to the choice\n                shape.id = newChoice.serial;\n            },\n            shapeRemoved : function(id){\n                interaction.removeChoice(id);\n            },\n            enterHandling : function(shape){\n                enterChoiceForm(shape.id);\n            },\n            quitHandling : function(){\n                leaveChoiceForm();\n            },\n            shapeChange : function(shape){\n                var bbox;\n                var choice = interaction.getChoice(shape.id);\n                if(choice){\n                    choice.attr('coords', GraphicHelper.qtiCoords(shape));\n    \n                    if($left && $left.length){\n                        bbox = shape.getBBox();\n                        $left.val(parseInt(bbox.x, 10)); \n                        $top.val(parseInt(bbox.y, 10));\n                        $width.val(parseInt(bbox.width, 10));\n                        $height.val(parseInt(bbox.height, 10));                         \n                    }         \n                }\n            }\n        });\n    \n        //and create an instance\n        widget._editor.create();\n\n        //we need to stop the question mode on resize, to keep the coordinate system coherent, \n        //even in responsive (the side bar introduce a biais)\n        $(window).on('resize.changestate', function(){\n            widget.changeState('sleep');\n        });\n\n        /**\n         * Set up the choice form\n         * @private\n         * @param {String} serial - the choice serial\n         */\n        function enterChoiceForm(serial){\n            var choice = interaction.getChoice(serial);\n            var element, bbox;\n\n            if(choice){\n\n                //get shape bounding box\n                element = interaction.paper.getById(serial);\n                bbox = element.getBBox();\n\n                $choiceForm.empty().html(\n                    choiceFormTpl({\n                        identifier  : choice.id(),\n                        fixed       : choice.attr('fixed'),\n                        serial      : serial,\n                        x           : parseInt(bbox.x, 10), \n                        y           : parseInt(bbox.y, 10),\n                        width       : parseInt(bbox.width, 10),\n                        height      : parseInt(bbox.height, 10)                         \n                    })\n                );\n\n                formElement.initWidget($choiceForm);\n\n                //init data validation and binding\n                formElement.setChangeCallbacks($choiceForm, choice, {\n                    identifier  : identifierHelper.updateChoiceIdentifier,\n                    fixed       : formElement.getAttributeChangeCallback() \n                });\n\n                $formChoicePanel.show();\n                panel.openSections($formChoicePanel.children('section'));\n                panel.closeSections($formInteractionPanel.children('section'));\n\n                //change the nodes bound to the position fields\n                $left   = $('input[name=x]', $choiceForm);\n                $top    = $('input[name=y]', $choiceForm);\n                $width  = $('input[name=width]', $choiceForm);\n                $height = $('input[name=height]', $choiceForm);\n            }\n        }\n        \n        /**\n         * Leave the choice form\n         * @private\n         */\n        function leaveChoiceForm(){\n            if($formChoicePanel.css('display') !== 'none'){\n                panel.openSections($formInteractionPanel.children('section'));\n                $formChoicePanel.hide();\n                $choiceForm.empty();\n            }\n        }\n    };\n\n    /**\n     * Exit the question state, leave the room cleaned up\n     */\n    var exitQuestionState = function initQuestionState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        var paper       = interaction.paper;\n\n        if(!paper){\n            return;\n        }\n        \n        $(window).off('resize.changestate');\n\n        if(widget._editor){\n            widget._editor.destroy();\n        }\n        $('.image-editor.solid, .block-listing.source', widget.$container).css('min-width', 0);\n    };\n    \n    /**\n     * The question state for the hotspot interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Question\n     */\n    var HotspotInteractionStateQuestion = stateFactory.extend(Question, initQuestionState, exitQuestionState);\n\n    /**\n     * Initialize the form linked to the interaction\n     */\n    HotspotInteractionStateQuestion.prototype.initForm = function(){\n\n        var widget = this.widget;\n        var options = widget.options;\n        var interaction = widget.element;\n        var $form = widget.$form;\n        var $container = widget.$original;\n        var isResponsive = $container.hasClass('responsive');\n        var $mediaSizer;\n        var $bgImage;\n\n        $form.html(formTpl({\n            baseUrl         : options.baseUrl,\n            maxChoices      : parseInt(interaction.attr('maxChoices')),\n            minChoices      : parseInt(interaction.attr('minChoices')),\n            choicesCount    : _.size(interaction.getChoices()),\n            data            : interaction.object.attr('data'),\n            width           : interaction.object.attr('width'),\n            height          : interaction.object.attr('height'),\n            type            : interaction.object.attr('type')\n        }));\n\n        imageSelector($form, options); \n\n        formElement.initWidget($form);\n\n        if(!isResponsive) {\n            $mediaSizer = $form.find('.media-sizer-panel');\n\n            $bgImage = $container.find('.svggroup svg image');\n\n            if(!!$bgImage.length){\n                $mediaSizer.empty().mediasizer({\n                    target: $bgImage,\n                    showResponsiveToggle: false,\n                    showSync: false,\n                    responsive: false,\n                    parentSelector: $container.attr('id'),\n                    applyToMedium: false,\n                    maxWidth: interaction.object.attr('width')\n                });\n            }\n\n            $mediaSizer.on('sizechange.mediasizer', function(e, params) {\n\n                interaction.object.attr('width', params.width);\n                interaction.object.attr('height', params.height);\n\n                $container.trigger('resize.qti-widget.' + widget.serial, [params.width]);\n            });\n        }\n        \n        //init data change callbacks\n        var callbacks = formElement.getMinMaxAttributeCallbacks(this.widget.$form, 'minChoices', 'maxChoices');\n        callbacks.data = function(inteaction, value){\n            interaction.object.attr('data', value);\n            widget.rebuild({\n                ready: function(widget){\n                    _.defer(function(){\n                        widget.changeState('question');\n                    });\n                }\n            });\n        };\n        callbacks.width = function(inteaction, value){\n            interaction.object.attr('width', value);\n        };\n        callbacks.height = function(inteaction, value){\n            interaction.object.attr('height', value);\n        };\n        callbacks.type = function(inteaction, value){\n            if(!value || value === ''){\n                interaction.object.removeAttr('type');\n            } else {\n                interaction.object.attr('type', value);\n            }\n        };\n        formElement.setChangeCallbacks($form, interaction, callbacks, { validateOnInit : false });\n        \n        interactionFormElement.syncMaxChoices(widget);\n    };\n\n    return HotspotInteractionStateQuestion;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    /**\n     * Just forward to the correct/map states\n     */\n    function initAnswerState(){\n        answerStateHelper.forward(this.widget);\n    }\n    \n    \n    function exitAnswerState(){\n        //needed an exit callback even empty\n    }\n    \n    \n    /**\n     * The answer state for the hotspot interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/states/Answer\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Answer\n     */\n    return stateFactory.extend(Answer, initAnswerState, exitAnswerState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Correct',[\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function(_, __, stateFactory, Correct, commonRenderer, instructionMgr, PciResponse){\n\n    /**\n     * Initialize the state: use the common renderer to set the correct response.\n     */\n    function initCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        \n        //really need to destroy before ? \n        commonRenderer.resetResponse(interaction);\n        commonRenderer.destroy(interaction);\n\n        if(!interaction.paper){\n            return;\n        }\n        \n        //add a specific instruction\n        instructionMgr.appendInstruction(interaction, __('Please select the correct hotspot choices below.'));\n        \n        //use the common Renderer\n        commonRenderer.render.call(interaction.getRenderer(), interaction);\n\n        commonRenderer.setResponse(interaction, PciResponse.serialize(_.values(response.getCorrect()), interaction));\n\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            response.setCorrect(PciResponse.unserialize(data.response, interaction));\n        });\n    }\n\n    /**\n     * Exit the correct state\n     */\n    function exitCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        if(!interaction.paper){\n            return;\n        }\n\n        //stop listening responses changes\n        widget.$container.off('responseChange.qti-widget');\n        \n        //destroy the common renderer\n        commonRenderer.resetResponse(interaction);\n        commonRenderer.destroy(interaction); \n        instructionMgr.removeInstructions(interaction);\n\n        //initialize again the widget's paper\n        interaction.paper = widget.createPaper();\n        widget.createChoices(); \n    }\n\n    /**\n     * The correct answer state for the hotspot interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Correct\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Correct\n     */\n    return stateFactory.create(Correct, initCorrectState, exitCorrectState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicScorePopup',[\n    'jquery', \n    'lodash' \n], function($, _){\n\n\n    /**\n     * Creates a popup relative to shape in a paper\n     * @param {Raphael.Element} shape - the relative shape\n     * @param {jQueryElement} $container - the svg container\n     * @returns {jQueryElement} the popup\n     */\n    return function createShapePopups(paper, shape, $container, isResponsive){\n        var wfactor;\n        var margin      = 10;\n        var $shape      = $(shape.node);\n        var $element    = $('<div class=\"mapping-editor arrow-left-top\"></div>'); \n        var boxOffset   = $container.offset();\n        var offset      = $shape.offset();\n        var bbox        = shape.getBBox();\n        var width       = bbox.width; \n           \n        if(isResponsive){\n            wfactor = paper.w / paper.width;\n            width   = Math.round(width * (2 - wfactor));\n        }\n \n        //style and attach the form\n        $element.css({\n            'top'       : offset.top - boxOffset.top - margin,\n            'left'      : offset.left - boxOffset.left + width + margin\n        }).appendTo($container);\n\n        return $element;\n    };  \n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/response/graphicScoreMappingForm', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, self=this, functionType=\"function\";\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n        <div class=\\\"panel\\\" data-edit=\\\"correct\\\">\\n            <label>\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Correct\", options) : helperMissing.call(depth0, \"__\", \"Correct\", options)))\n    + \"\\n                <input name=\\\"correct\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.correct), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" />\\n                <span class=\\\"icon-checkbox\\\"></span>\\n            </label>\\n            <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n            <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Is this choice the correct response?\", options) : helperMissing.call(depth0, \"__\", \"Is this choice the correct response?\", options)))\n    + \"</span>\\n        </div>\\n\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  \n  return \" checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"    <a class=\\\"closer\\\" href=\\\"#\\\" data-close=\\\":parent .mapping-editor\\\"></a>\\n    <div class=\\\"form-container\\\">\\n        <h2>\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h2>\\n\\n\";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.noCorrect), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        <div class=\\\"panel\\\">\\n            <label for=\\\"score\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Score\", options) : helperMissing.call(depth0, \"__\", \"Score\", options)))\n    + \"</label>\\n            <input value=\\\"\";\n  if (helper = helpers.score) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.score); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" data-for=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" name=\\\"score\\\" class=\\\"score\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\" />\\n            <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n            <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Set the score for this response\", options) : helperMissing.call(depth0, \"__\", \"Set the score for this response\", options)))\n    + \"</span>\\n        </div>\\n        <span class=\\\"arrow\\\"></span>\\n        <span class=\\\"arrow-cover\\\"></span>\\n    </div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Map',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse', \n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicScorePopup',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/response/graphicScoreMappingForm',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'ui/deleter',\n    'ui/tooltipster'\n], function($, _, __, stateFactory, Map, commonRenderer, instructionMgr, graphicHelper, PciResponse, answerStateHelper, grahicScorePopup, mappingFormTpl, formElement, deleter, tooltipster){\n\n    /**\n     * Initialize the state.\n     */\n    function initMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n\n        //really need to destroy before ? \n        commonRenderer.resetResponse(interaction);\n        commonRenderer.destroy(interaction);\n        \n        if(!interaction.paper){\n            return;\n        }\n\n        //add a specific instruction\n        instructionMgr.appendInstruction(interaction, __('Please the score of each hotspot choice.'));\n        interaction.responseMappingMode = true;\n\n        //here we do not use the common renderer but the creator's widget to get only a basic paper with the choices\n        interaction.paper = widget.createPaper();     \n        widget.createChoices(); \n\n        initResponseMapping(widget);           \n\n        //set the current corrects responses on the paper\n        commonRenderer.setResponse(interaction, PciResponse.serialize(_.values(response.getCorrect()), interaction));   \n    }\n\n    /**\n     * Exit the map state\n     */\n    function exitMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        if(!interaction.paper){\n            return;\n        }\n\n        //destroy the common renderer\n        commonRenderer.resetResponse(interaction);\n        commonRenderer.destroy(interaction); \n        instructionMgr.removeInstructions(interaction);\n\n        //initialize again the widget's paper\n        interaction.paper = widget.createPaper();\n        widget.createChoices(); \n    }\n\n\n    /**\n     * Set up all elements to set the response mapping.\n     * TODO this method needs to be split\n     * @param {Oject} widget - the current widget\n     */\n    function initResponseMapping(widget){\n        var scoreTexts      = {};\n        var interaction     = widget.element;\n        var $container      = widget.$original; \n        var isResponsive    = $container.hasClass('responsive');\n        var $imageBox       = $('.main-image-box', $container);\n        var response        = interaction.getResponseDeclaration();\n        var mapEntries      = response.getMapEntries(); \n        var corrects        = _.values(response.getCorrect());\n\n        //get the shape of each choice\n        _.forEach(interaction.getChoices(), function(choice){    \n            var shape = interaction.paper.getById(choice.serial);\n            var $popup = grahicScorePopup(interaction.paper, shape, $imageBox, isResponsive);\n            var score = mapEntries[choice.id()] || response.mappingAttributes.defaultValue || '0'; \n\n            //create an SVG  text from the default mapping value\n            scoreTexts[choice.serial] = graphicHelper.createShapeText(interaction.paper, shape, {\n                id          : 'score-' + choice.serial,\n                content     : score,\n                style       : 'score-text-default',\n                shapeClick  : true\n            }).data('default', true); \n          \n            //create manually the mapping form (detached)\n            var $form = $(mappingFormTpl({\n                identifier          : choice.id(),\n                correctDefined      : answerStateHelper.isCorrectDefined(widget),\n                correct             : _.contains(response.getCorrect(), choice.id()),\n                score               : score,\n                scoreMin            : response.getMappingAttribute('lowerBound'),\n                scoreMax            : response.getMappingAttribute('upperBound')\n            }));\n\n            //set up the form data binding\n            formElement.setChangeCallbacks($form, response, {\n                score : function(response, value){\n                    var scoreText = scoreTexts[choice.serial];\n                    if(value === ''){\n                        response.removeMapEntry(choice.id());\n                        scoreText.attr({text : response.mappingAttributes.defaultValue})\n                                 .data('default', true);\n                    } else {\n                        response.setMapEntry(choice.id(), value, true);\n                        scoreText.attr({text : value})\n                                 .data('default', false);\n                    }\n                }, \n                correct : function(response, value){\n                    if(value === true){\n                        if(!_.contains(corrects, choice.id())){\n                            corrects.push(choice.id());\n                            shape.active = true;\n                            graphicHelper.updateElementState(shape, 'active');\n                        }\n                    } else {\n                        corrects = _.without(corrects, choice.id());\n                        shape.active = false;\n                        graphicHelper.updateElementState(shape, 'basic');\n                    }\n                    response.setCorrect(corrects);\n                }\n            });\n\n            shape.click(function(){\n                $('.mapping-editor', $container).hide();\n                $popup.show();\n            });\n\n            $popup.append($form);\n        });\n\n        //set up ui components used by the form\n        deleter($container);\n        tooltipster($container);\n        \n        interaction.paper.getById('bg-image-' + interaction.serial).click(function(){\n            $('.mapping-editor', $container).hide();\n        });\n        \n        //the click on the cross hides the popup\n        $('.mapping-editor', $container).on('click', '.closer', function(){\n            $(this).parent('.mapping-editor').hide();\n        });\n\n        //update the elements on attribute changes\n        widget.on('mappingAttributeChange', function(data){\n            if(data.key === 'defaultValue'){\n                _.forEach(scoreTexts, function(scoreText){\n                    if(scoreText.data('default') === true){\n                        scoreText.attr({text : data.value });\n                    }\n                });\n            }\n        });\n    }\n\n\n    /**\n     * The map answer state for the hotspot interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Map\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Map\n     */\n    return  stateFactory.create(Map, initMapState, exitMapState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Map'\n], function(factory, states){\n\n    //creates a state bundle for the interaction\n    return factory.createBundle(states, arguments);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/Widget',[\n    'jquery', 'lodash', 'i18n',\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/states'\n], function($, _, __, Widget, GraphicWidget, states){\n\n    /**\n     * The Widget that provides components used by the QTI Creator for the Hotspot Interaction\n     *\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/Widget\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/GraphicInteraction/Widget\n     *\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/Widget\n     */      \n    var HotspotInteractionWidget = _.extend(Widget.clone(), GraphicWidget, {\n\n        /**\n         * Initialize the widget\n         * @see {taoQtiItem/qtiCreator/widgets/interactions/Widget#initCreator}\n         * @param {Object} options - extra options \n         * @param {String} options.baseUrl - the resource base url\n         * @param {jQueryElement} options.choiceForm = a reference to the form of the choices\n         */\n        initCreator : function(options){\n            var paper;\n            this.baseUrl = options.baseUrl;\n            this.choiceForm = options.choiceForm;\n            \n            this.registerStates(states);\n            \n            //call parent initCreator\n            Widget.initCreator.call(this);\n          \n            paper = this.createPaper(); \n            if(paper){\n                this.element.paper = paper;\n                this.createChoices();    \n            }\n        },\n\n        /**\n         * Gracefull destroy the widget\n         * @see {taoQtiItem/qtiCreator/widgets/Widget#destroy}\n         * @param {Object} options - extra options \n         * @param {String} options.baseUrl - the resource base url\n         * @param {jQueryElement} options.choiceForm = a reference to the form of the choices\n         */\n        destroy : function(){\n\n            var $container = this.$original;\n            var $item      = $container.parents('.qti-item');\n\n            //stop listening the resize\n            $item.off('resize.gridEdit.' + this.element.serial);\n            $(window).off('resize.qti-widget.' + this.element.serial);\n            $container.off('resize.qti-widget.' + this.element.serial);\n\n            //call parent destroy\n            Widget.destroy.call(this);\n        }\n\n   });\n\n    return HotspotInteractionWidget;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/renderers/interactions/HotspotInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/Widget'\n], function(_, HotspotInteraction, HotspotInteractionWidget){\n        \n    /**\n     * The CreatorHotspotInteraction  Renderer \n     * @extends taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction\n     * @exports taoQtiItem/qtiCreator/renderers/interactions/HotspotInteraction\n     */\n    var CreatorHotspotInteraction = _.clone(HotspotInteraction);\n\n    /**\n     * Render the interaction for authoring.\n     * It delegates the rendering to the widget layer.\n     * @param {Object} interaction - the model\n     * @param {Object} [options] - extra options\n     */\n    CreatorHotspotInteraction.render = function(interaction, options){\n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        options.choiceForm = this.getOption('choiceOptionForm');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        \n        return HotspotInteractionWidget.build(\n            interaction,\n            HotspotInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorHotspotInteraction;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/hottextInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div id=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"qti-interaction qti-blockInteraction qti-hottextInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"hottextInteraction\\\">\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  <div class=\\\"instruction-container\\\"></div>\\n  <div class=\\\"qti-flow-container\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/hottextInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function($, _, __, tpl, containerHelper, instructionMgr, pciResponse){\n    'use strict';\n\n    /**\n     * 'pseudo-label' is technically a div that behaves like a label.\n     * This allows the usage of block elements inside the fake label\n     */\n    var pseudoLabel = function(interaction){\n\n        var $container = containerHelper.get(interaction);\n\n        var setChoice = function($choice, interaction){\n            var $inupt = $choice.find('input');\n\n            if($inupt.prop('checked') || $inupt.hasClass('disabled')){\n                $inupt.prop('checked', false);\n            }else{\n                var maxChoices = parseInt(interaction.attr('maxChoices'));\n                var currentChoices = _.values(_getRawResponse(interaction)).length;\n\n                if(currentChoices < maxChoices || maxChoices === 0){\n                    $inupt.prop('checked', true);\n                }\n            }\n            containerHelper.triggerResponseChangeEvent(interaction);\n            instructionMgr.validateInstructions(interaction, {choice : $choice});\n        };\n\n        $('.hottext', $container).on('click', function(e){\n            e.preventDefault();\n            setChoice($(this), interaction);\n        });\n    };\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10278\n     *\n     * @param {object} interaction\n     */\n    var render = function(interaction){\n        pseudoLabel(interaction);\n\n        //set up the constraints instructions\n        instructionMgr.minMaxChoiceInstructions(interaction, {\n            min: interaction.attr('minChoices'),\n            max: interaction.attr('maxChoices'),\n            getResponse : _getRawResponse,\n            onError : function(data){\n                var $input, $choice, $icon;\n                if(data.choice && data.choice.length){\n                    $choice = data.choice.addClass('error');\n                    $input  = $choice.find('input');\n                    $icon   = $choice.find(' > label > span').addClass('error cross');\n\n\n                    setTimeout(function(){\n                        $input.prop('checked', false);\n                        $choice.removeClass('error');\n                        $icon.removeClass('error cross');\n                    }, 350);\n                }\n            }\n        });\n    };\n\n    var resetResponse = function(interaction){\n        var $container = containerHelper.get(interaction);\n        $('input', $container).prop('checked', false);\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10333\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n\n        var $container = containerHelper.get(interaction);\n\n        try{\n            _.each(pciResponse.unserialize(response, interaction), function(identifier){\n                $container.find('input[value=' + identifier + ']').prop('checked', true);\n            });\n            instructionMgr.validateInstructions(interaction);\n        }catch(e){\n            throw new Error('wrong response format in argument : ' + e);\n        }\n    };\n\n    var _getRawResponse = function(interaction){\n        var values = [];\n        var $container = containerHelper.get(interaction);\n        $('input:checked', $container).each(function(){\n            values.push($(this).val());\n        });\n        return values;\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10333\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        return pciResponse.serialize(_getRawResponse(interaction), interaction);\n    };\n\n    /**\n     * Clean interaction destroy\n     * @param {Object} interaction\n     */\n    var destroy = function destroy(interaction){\n        var $container = containerHelper.get(interaction);\n\n        //restore selected choices:\n        $container.find('.hottext').off('click');\n\n        //remove all references to a cache container\n        containerHelper.reset(interaction);\n    };\n\n    /**\n     * Set the interaction state. It could be done anytime with any state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {Object} state - the interaction state\n     */\n    var setState  = function setState(interaction, state){\n        if(_.isObject(state)){\n            if(state.response){\n                interaction.resetResponse();\n                interaction.setResponse(state.response);\n            }\n        }\n    };\n\n    /**\n     * Get the interaction state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the interaction current state\n     */\n    var getState = function getState(interaction){\n        var $container;\n        var state =  {};\n        var response =  interaction.getResponse();\n\n        if(response){\n            state.response = response;\n        }\n        return state;\n    };\n\n\n    return {\n        qtiClass : 'hottextInteraction',\n        template : tpl,\n        render : render,\n        getContainer : containerHelper.get,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy,\n        setState : setState,\n        getState : getState\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/hottext', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allowed number of choices\", options) : helperMissing.call(depth0, \"__\", \"Allowed number of choices\", options)))\n    + \"</h3>\\n\\n    <div>\\n        <label for=\\\"minChoices\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"minChoices\\\" value=\\\"\";\n  if (helper = helpers.minChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.minChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of choices that the candidate is required to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of choices that the candidate is required to select to form a valid response.\", options)))\n    + \"\\n        </span>\\n    </div>\\n    <div>\\n        <label for=\\\"maxChoices\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"maxChoices\\\" value=\\\"\";\n  if (helper = helpers.maxChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n            <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices that the candidate is allowed to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices that the candidate is allowed to select to form a valid response.\", options)))\n    + \"\\n        </span>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/hottext-create', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<span class=\\\"mini-tlb\\\" data-edit=\\\"\";\n  if (helper = helpers.state) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.state); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-role=\\\"create-hottext-tlb\\\">\\n    <span class=\\\"rgt tlb-button\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Create hottext\", options) : helperMissing.call(depth0, \"__\", \"Create hottext\", options)))\n    + \"\\\" data-role=\\\"create-hottext\\\">\\n        <span class=\\\"icon-magicwand\\\"></span>\\n    </span>\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Question',[\n    'lodash',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/hottext',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/hottext-create'\n], function(_, stateFactory, Question, formElement, interactionFormElement, formTpl, hottextTpl){\n\n    var HottextInteractionStateQuestion = stateFactory.extend(Question);\n\n    HottextInteractionStateQuestion.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n\n        $form.html(formTpl({\n            maxChoices : interaction.attr('maxChoices'),\n            minChoices : interaction.attr('minChoices'),\n            choicesCount : _.size(interaction.getChoices())\n        }));\n\n        formElement.initWidget($form);\n\n        var callbacks = formElement.getMinMaxAttributeCallbacks($form, 'minChoices', 'maxChoices');\n        formElement.setChangeCallbacks($form, interaction, callbacks);\n        interactionFormElement.syncMaxChoices(_widget);\n    };\n\n    HottextInteractionStateQuestion.prototype.getGapModel = function(){\n\n        return {\n            toolbarTpl : hottextTpl,\n            qtiClass : 'hottext',\n            afterCreate : function(interactionWidget, newHottextWidget, text){\n            \n                newHottextWidget.element.body(text);\n                newHottextWidget.$container.find('.hottext-content').html(text);//add this manually the first time\n                newHottextWidget.changeState('choice');\n            }\n        };\n    };\n\n    return HottextInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    var HottextInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        \n        this.widget.$original.find('.hottext-checkmark > input').removeProp('disabled');\n        \n        //forward to one of the available sub state, according to the response processing template\n        answerStateHelper.forward(this.widget);\n        \n    }, function(){\n        \n        this.widget.$original.find('.hottext-checkmark > input').prop('disabled', 'disabled');\n        \n    });\n    \n    return HottextInteractionStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Correct',[\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function(_, __, stateFactory, Correct, commonRenderer, instructionMgr, PciResponse){\n\n    /**\n     * Initialize the state: use the common renderer to set the correct response.\n     */\n    function initCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        \n        //really need to destroy before ? \n        commonRenderer.resetResponse(interaction);\n        commonRenderer.destroy(interaction);\n        \n        //add a specific instruction\n        instructionMgr.appendInstruction(interaction, __('Please select the correct hottext choices below.'));\n        \n        //use the common Renderer\n        commonRenderer.render.call(interaction.getRenderer(), interaction);\n\n        commonRenderer.setResponse(interaction, PciResponse.serialize(_.values(response.getCorrect()), interaction));\n\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            response.setCorrect(PciResponse.unserialize(data.response, interaction));\n        });\n    }\n\n    /**\n     * Exit the correct state\n     */\n    function exitCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        //stop listening responses changes\n        widget.$container.off('responseChange.qti-widget');\n        \n        //destroy the common renderer\n        commonRenderer.resetResponse(interaction);\n        commonRenderer.destroy(interaction); \n        instructionMgr.removeInstructions(interaction);\n    }\n\n    /**\n     * The correct answer state for the hottext interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Correct\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Correct\n     */\n    return stateFactory.create(Correct, initCorrectState, exitCorrectState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Map',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse' \n], function($, _, __, stateFactory, Map, commonRenderer, answerStateHelper, instructionMgr, formElement, PciResponse){\n\n    /**\n     * Initialize the state.\n     */\n    function initMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var corrects  = _.values(response.getCorrect());\n        \n        //really need to destroy before ? \n        commonRenderer.resetResponse(interaction);\n        commonRenderer.destroy(interaction);\n        \n        //add a specific instruction\n        instructionMgr.appendInstruction(interaction, __('Please enter the score for the given hottexts.'));\n        \n        //set the current mapping mode, needed by the common renderer\n        interaction.responseMappingMode = true;\n \n        //must be done prior to the render to override clicks        \n        createScoreForm(interaction, widget.$container);\n\n        //use the common Renderer\n        commonRenderer.render.call(interaction.getRenderer(), interaction);\n\n        commonRenderer.setResponse(interaction, PciResponse.serialize(corrects, interaction));\n\n        //each response change leads to an update of the scoring form\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            var type  = response.attr('cardinality') === 'single' ? 'base' : 'list';\n            if(data && data.response &&  data.response[type]){\n                response.setCorrect(data.response[type].identifier);\n            }\n        });\n\n       //change the correct state \n       widget.on('metaChange', function(meta){\n            if(meta.key === 'defineCorrect'){\n                toggleCorrectState(widget.$container, meta.value);\n                if(meta.value === false){\n                    response.setCorrect([]);\n                }\n            }\n        });\n        toggleCorrectState(widget.$container, answerStateHelper.defineCorrect(response));\n    }\n\n    /**\n     * Exit the map state\n     */\n    function exitMapState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        var $container  = widget.$container;\n        \n        $container.off('responseChange.qti-widget');\n\n        $('.score', $container).remove();\n\n        toggleCorrectState($container, true);\n\n        //destroy the common renderer\n        commonRenderer.resetResponse(interaction);\n        commonRenderer.destroy(interaction); \n        instructionMgr.removeInstructions(interaction);\n    }\n\n    function toggleCorrectState($container, enable){\n        if(enable){\n            $('.hottext-checkmark > input', $container)\n                .removeProp('disabled') \n                .removeClass('disabled');\n        } else {\n            $('.hottext-checkmark > input', $container)\n                .prop('disabled', true)\n                .prop('checked', false)\n                .addClass('disabled');\n        }\n    }\n\n    function createScoreForm(interaction, $container){\n        var callbacks = {};\n        var response = interaction.getResponseDeclaration();\n        var mapEntries = response.getMapEntries();\n\n        //do not trigger the responseChange in the score field\n        $('.hottext', $container).on('click', function(e){\n            if($(e.target).hasClass('score') || answerStateHelper.defineCorrect(response) === false){\n                e.preventDefault();\n                e.stopImmediatePropagation();\n            } \n        });\n\n        _.forEach(interaction.getChoices(), function(choice){\n            var $score;\n            var id = choice.serial + '-score';\n            var $hottext = $('[data-serial=\"' + choice.serial + '\"]', $container);\n            if($hottext.length){\n    \n                $score = $(\"<input type='text' name='\" + id + \"' class='score' title='\" + __('Score value') + \"' data-validate='$numeric' data-validate-option='$allowEmpty; $event(type=keyup)' />\"); \n                $score.val(mapEntries[choice.id()] !== undefined ? mapEntries[choice.id()] : response.mappingAttributes.defaultValue);                \n                $hottext.append($score);\n                \n\n                callbacks[id] = function(response, value){\n                    if(value === ''){\n                        response.removeMapEntry(choice.id());\n                    } else {\n                        response.setMapEntry(choice.id(), value, true);\n                    }\n                };\n            }\n        });\n        formElement.setChangeCallbacks($container, response, callbacks);\n    }\n\n\n    /**\n     * The map answer state for the HottextInteraction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Map\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Map\n     */\n    return  stateFactory.create(Map, initMapState, exitMapState);\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Map'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/states'\n], function(Widget, states){\n\n    var HottextInteractionWidget = Widget.clone();\n\n    HottextInteractionWidget.initCreator = function(){\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n    };\n    \n    return HottextInteractionWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/interactions/HottextInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/Widget'\n], function(_, HottextInteraction, HottextInteractionWidget){\n    \n    var CreatorHottextInteraction = _.clone(HottextInteraction);\n\n    CreatorHottextInteraction.render = function(interaction, options){\n        \n        return HottextInteractionWidget.build(\n            interaction,\n            HottextInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorHottextInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/inlineChoiceInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<select class=\\\"qti-interaction qti-inlineInteraction qti-inlineChoiceInteraction\\\"\\n        data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n        data-qti-class=\\\"inlineChoiceInteraction\\\"\\n        data-has-search=\\\"false\\\">\\n    <option></option>                \\n    <option value=\\\"empty\\\"></option>\\n    \";\n  options={hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</select>\\n\";\n  return buffer;\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/InlineChoiceInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/inlineChoiceInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'select2',\n    'tooltipster'\n], function($, _, __, tpl, containerHelper, instructionMgr, pciResponse){\n    'use strict';\n\n    /**\n     * The value of the \"empty\" option\n     * @type String\n     */\n    var _emptyValue = 'empty';\n\n    var _defaultOptions = {\n        allowEmpty:true,\n        placeholderText:__('select a choice')\n    };\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     */\n    var render = function(interaction, options){\n\n        var opts = _.clone(_defaultOptions),\n            required = !!interaction.attr('required');\n        _.extend(opts, options);\n\n        var $container = containerHelper.get(interaction);\n\n        if(opts.allowEmpty && !required){\n            $container.find('option[value=' + _emptyValue + ']').text('--- ' + __('leave empty') + ' ---');\n        }else{\n            $container.find('option[value=' + _emptyValue + ']').remove();\n        }\n\n        $container.select2({\n            width : 'element',\n            placeholder : opts.placeholderText,\n            minimumResultsForSearch : -1,\n            dropdownCssClass  : 'qti-inlineChoiceInteraction-dropdown'\n        });\n\n        var $el = $container.select2('container');\n\n        _setInstructions(interaction);\n\n        $container.on('change', function(){\n\n            if(required && $container.val() !== \"\") {\n                $el.tooltipster('hide');\n            }\n\n            containerHelper.triggerResponseChangeEvent(interaction);\n\n        }).on('select2-open', function(){\n            if(required){\n                $el.tooltipster('hide');\n            }\n        }).on('select2-close', function(){\n\n            if(required && $container.val() === \"\") {\n                $el.tooltipster('show');\n            }\n        });\n    };\n\n    var _setInstructions = function(interaction){\n\n        var required = !!interaction.attr('required'),\n            $container = interaction.getContainer(),\n            $el = $container.select2('container');\n\n        if(required){\n            //set up the tooltip plugin for the input\n            $el.tooltipster({\n                theme: 'tao-warning-tooltip',\n                content: __('A choice must be selected'),\n                delay: 250,\n                trigger: 'custom'\n            });\n\n            if($container.val() === \"\") {\n                $el.tooltipster('show');\n            }\n        }\n\n    };\n\n    var resetResponse = function(interaction){\n        _setVal(interaction, _emptyValue);\n    };\n\n    var _setVal = function(interaction, choiceIdentifier){\n\n        containerHelper.get(interaction)\n            .val(choiceIdentifier)\n            .select2('val', choiceIdentifier);\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n\n         _setVal(interaction, pciResponse.unserialize(response, interaction)[0]);\n    };\n\n    var _getRawResponse = function(interaction){\n        var value = containerHelper.get(interaction).val();\n        return (value && value !== _emptyValue) ? [value] : [];\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        return pciResponse.serialize(_getRawResponse(interaction), interaction);\n    };\n\n     /**\n     * Clean interaction destroy\n     * @param {Object} interaction\n     */\n    var destroy = function(interaction){\n\n        var $container = containerHelper.get(interaction);\n\n        //remove event\n        $(document).off('.commonRenderer');\n\n        $container.select2('destroy');\n\n        //remove instructions\n        instructionMgr.removeInstructions(interaction);\n\n        //remove all references to a cache container\n        containerHelper.reset(interaction);\n    };\n\n    /**\n     * Set the interaction state. It could be done anytime with any state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {Object} state - the interaction state\n     */\n    var setState  = function setState(interaction, state){\n        var $container;\n\n        if(_.isObject(state)){\n            if(state.response){\n                interaction.resetResponse();\n                interaction.setResponse(state.response);\n            }\n\n            //restore order of previously shuffled choices\n            if(_.isArray(state.order) && state.order.length === _.size(interaction.getChoices())){\n\n                $container = containerHelper.get(interaction);\n\n                //just in case the dropdown is opened\n                $container.select2('disable')\n                          .select2('close');\n\n                $('option[data-identifier]', $container)\n                    .sort(function(a, b){\n                        var aIndex = _.indexOf(state.order, $(a).data('identifier'));\n                        var bIndex = _.indexOf(state.order, $(b).data('identifier'));\n                        if(aIndex > bIndex) {\n                            return 1;\n                        }\n                        if(aIndex < bIndex) {\n                            return -1;\n                        }\n                        return 0;\n                    })\n                    .detach()\n                    .appendTo($container);\n\n                $container.select2('enable');\n            }\n        }\n    };\n\n    /**\n     * Get the interaction state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the interaction current state\n     */\n    var getState = function getState(interaction){\n        var $container;\n        var state =  {};\n        var response =  interaction.getResponse();\n\n        if(response){\n            state.response = response;\n        }\n\n        //we store also the choice order if shuffled\n        if(interaction.attr('shuffle') === true){\n            $container = containerHelper.get(interaction);\n\n            state.order = [];\n            $('option[data-identifier]', $container).each(function(){\n               state.order.push($(this).data('identifier'));\n            });\n        }\n        return state;\n    };\n\n    /**\n     * Expose the common renderer for the inline choice interaction\n     * @exports qtiCommonRenderer/renderers/interactions/InlineChoiceInteraction\n     */\n    return {\n        qtiClass : 'inlineChoiceInteraction',\n        template : tpl,\n        render : render,\n        getContainer : containerHelper.get,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy,\n        setState : setState,\n        getState : getState\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Question',\n    'taoQtiItem/qtiCreator/widgets/choices/helpers/formElement',\n    'lodash'\n], function($, stateFactory, QuestionState, formElement, _){\n\n    var ChoiceStateQuestion = stateFactory.extend(QuestionState, function(){\n        this.buildEditor();\n    }, function(){\n        this.destroyEditor();\n    });\n\n    ChoiceStateQuestion.prototype.createToolbar = function(){\n\n        var _widget = this.widget,\n            $toolbar = _widget.$container.find('td:last');\n\n        //set toolbar button behaviour:\n        formElement.initShufflePinToggle(_widget);\n        formElement.initDelete(_widget);\n\n        return $toolbar;\n    };\n\n    ChoiceStateQuestion.prototype.buildEditor = function(){\n\n        var _widget = this.widget,\n            $editableContainer = _widget.$container.children('td:first');\n\n        $editableContainer.attr('contentEditable', true);\n\n        $editableContainer.on('keyup.qti-widget', _.throttle(function(){\n\n            //update model\n            _widget.element.val($(this).text());\n\n            //update placeholder\n            _widget.$original.width($(this).width());\n\n        }, 200)).on('focus.qti-widget', function(){\n\n            _widget.changeState('choice');\n\n        }).on('keypress.qti-widget', function(e){\n\n            if(e.which === 13){\n                e.preventDefault();\n                $(this).blur();\n                _widget.changeState('question');\n            }\n\n        });\n    };\n\n    ChoiceStateQuestion.prototype.destroyEditor = function(){\n\n        var $container = this.widget.$container;\n\n        $container.find('td').removeAttr('contentEditable');\n        $container.children('td:first').off('keyup.qti-widget');\n    };\n\n    return ChoiceStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/Choice',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Choice',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/choice',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/helpers/identifier'\n], function(stateFactory, Choice, formTpl, formElement, identifierHelper){\n    \n    var InlineChoiceStateChoice = stateFactory.extend(Choice);\n\n    InlineChoiceStateChoice.prototype.initForm = function(){\n        \n        var _widget = this.widget;\n        \n        //build form:\n        _widget.$form.html(formTpl({\n            serial:_widget.element.getSerial(),\n            identifier:_widget.element.id()\n        }));\n        \n        //init data validation and binding\n        formElement.setChangeCallbacks(_widget.$form, _widget.element, {\n            identifier : identifierHelper.updateChoiceIdentifier\n        });\n    };\n    \n    return InlineChoiceStateChoice;\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/states',\n    'taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/Question',\n    'taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/Choice'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/inlineChoice/Widget',[\n    'taoQtiItem/qtiCreator/widgets/choices/Widget',\n    'taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/states'\n], function(Widget, states){\n\n    var InlineChoiceWidget = Widget.clone();\n\n    InlineChoiceWidget.initCreator = function(){\n        \n        Widget.initCreator.call(this);\n\n        this.registerStates(states);\n    };\n\n    return InlineChoiceWidget;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/inlineChoice', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, self=this, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"shuffle\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.shuffle), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Shuffle choices\", options) : helperMissing.call(depth0, \"__\", \"Shuffle choices\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\\n        However each choice may be shuffled of fixed individually.\", options) : helperMissing.call(depth0, \"__\", \"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\\n        However each choice may be shuffled of fixed individually.\", options)))\n    + \"\\n    </span>\\n</div>\\n<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"required\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.required), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"required\", options) : helperMissing.call(depth0, \"__\", \"required\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Define whether a choice must be selected by the candidate in order to form a valid response to the interaction.\", options) : helperMissing.call(depth0, \"__\", \"Define whether a choice must be selected by the candidate in order to form a valid response to the interaction.\", options)))\n    + \"\\n    </span>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/inlineChoice'\n], function($, stateFactory, Question, formElement, formTpl){\n\n    var InlineChoiceInteractionStateQuestion = stateFactory.extend(Question, function(){\n\n        var $mainOption = this.widget.$container.find('.main-option'),\n            $original = this.widget.$original;\n        \n        //listener to children choice widget change and update the original interaction placehoder\n        $(document).on('choiceTextChange.qti-widget.question', function(){\n            $original.width($mainOption.width());\n        });\n\n    }, function(){\n        \n        $(document).off('.qti-widget.question');\n    });\n\n    InlineChoiceInteractionStateQuestion.prototype.addNewChoiceButton = function(){\n\n        var _widget = this.widget,\n            $addChoice = _widget.$container.find('.add-option'),\n            interaction = _widget.element;\n\n        //init add choice button once only\n        if(!$addChoice.data('initialized')){\n\n            $addChoice.on('click.qti-widget', function(e){\n\n                e.stopPropagation();\n\n                //add a new choice\n                var choice = interaction.createChoice();\n\n                //append render choice:\n                $(this).closest('tr').before(_widget.renderChoice(choice));\n                _widget.buildChoice(choice, {\n                    ready : function(widget){\n                        //transition state directly back to \"question\"\n                        widget.changeState('question');\n                    }\n                });\n            });\n\n            //set button as initialized\n            $addChoice.data('initialized', true);\n        }\n    };\n\n    InlineChoiceInteractionStateQuestion.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n\n        $form.html(formTpl({\n            shuffle : !!interaction.attr('shuffle'),\n            required : !!interaction.attr('required')\n        }));\n\n        formElement.initWidget($form);\n\n        formElement.setChangeCallbacks($form, interaction, {\n            shuffle : formElement.getAttributeChangeCallback(),\n            required : formElement.getAttributeChangeCallback()\n        });\n    };\n\n    return InlineChoiceInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    var InlineChoiceInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        answerStateHelper.forward(this.widget);\n    }, function(){\n        \n    });\n    \n    return InlineChoiceInteractionStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/ResponseWidget',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCommonRenderer/renderers/Renderer',\n], function($, _, __, CommonRenderer){\n\n    var ResponseWidget = {\n        create : function(widget, callback){\n\n            var _this = this,\n                interaction = widget.element,\n                $placeholder = $('<select>'),\n                $responseWidget = widget.$container.find('.widget-response').append($placeholder);\n\n            this.commonRenderer = new CommonRenderer({shuffleChoices : false});\n            this.commonRenderer.load(function(){\n\n                interaction.render({}, $placeholder, '', this);\n                interaction.postRender({\n                    allowEmpty : false,\n                    placeholderText : __('select correct choice')\n                }, '', this);\n\n                callback.call(_this, this);\n\n                $responseWidget.siblings('.padding').width($responseWidget.width() + 50);//plus icons width\n\n            }, ['inlineChoice', 'inlineChoiceInteraction']);\n\n        },\n        setResponse : function(widget, response){\n            this.commonRenderer.setResponse(widget.element, this.formatResponse(response));\n        },\n        destroy : function(widget){\n            widget.$container.find('.widget-response').empty();\n            widget.$container.find('.padding').removeAttr('style');\n        },\n        formatResponse : function(response){\n            if(!_.isString(response)){\n                response = _.values(response);\n                if(response && response.length){\n                    response = response[0];\n                }\n            }\n            return {base : {identifier : response}};\n        },\n        unformatResponse : function(formatedResponse){\n\n            var response = [];\n\n            if(formatedResponse.base && formatedResponse.base.identifier){\n                response.push(formatedResponse.base.identifier);\n            }\n            return response;\n        }\n    };\n\n    return ResponseWidget;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Correct',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/ResponseWidget',\n    'lodash'\n], function(stateFactory, Correct, responseWidget, _){\n\n    var InlineChoiceInteractionStateCorrect = stateFactory.create(Correct, function(){\n        \n        var _widget = this.widget,\n            response = this.widget.element.getResponseDeclaration();\n            \n            _widget.$container.find('table').hide();\n            \n            //render commonRenderer.render()\n            responseWidget.create(_widget, function(){\n               \n                //set response\n                responseWidget.setResponse(_widget, _.values(response.getCorrect()));\n\n                //save correct response on change\n                _widget.$container.on('responseChange.qti-widget', function(e, data){\n                    response.setCorrect(responseWidget.unformatResponse(data.response));\n                });\n            });\n\n    }, function(){\n        \n        var $container = this.widget.$container;\n        $container.find('table').show();\n        $container.off('responseChange.qti-widget');\n        \n        responseWidget.destroy(this.widget);\n    });\n\n    return InlineChoiceInteractionStateCorrect;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Map',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiItem/helper/interactionHelper',\n    'lodash',\n], function($, stateFactory, Map, formElement, interactionHelper, _){\n\n    var AssociateInteractionStateCorrect = stateFactory.create(Map, function(){\n\n        var _widget = this.widget,\n            $container = _widget.$container,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        $container.find('[data-edit=map]').show();\n\n        //init correct response radio group:\n        var correct = _.values(response.getCorrect());\n        if(correct.length){\n            var selectedChoice = interaction.getChoiceByIdentifier(correct.pop());\n            if(selectedChoice){\n                $container.find('input[name=correct][value=\"' + selectedChoice.serial + '\"]').prop('checked', true);\n            }\n        }\n\n        formElement.setChangeCallbacks($container, response, {\n            correct : function(response, value){\n                response.setCorrect(interactionHelper.serialToIdentifier(interaction, value));\n            },\n            score : function(response, value){\n                var score = parseFloat(value);\n                if(!isNaN(score)){\n                    response.setMapEntry(interactionHelper.serialToIdentifier(interaction, $(this).data('for')), score);\n                }\n            }\n        });\n\n    }, function(){\n\n    });\n\n\n    return AssociateInteractionStateCorrect;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Map'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoiceInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"widget-box widget-inline widget-inlineChoiceInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-edit=\\\"active\\\">\\n    <div class=\\\"qti-interaction qti-inlineChoiceInteraction\\\">\\n        <table>\\n            <colgroup>\\n                <col class=\\\"text\\\">\\n                <col class=\\\"icon\\\">\\n                <col class=\\\"icon\\\">\\n            </colgroup>\\n            <tbody>\\n                <tr>\\n                    <td class=\\\"main-option\\\"><div>-- \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"edit choices\", options) : helperMissing.call(depth0, \"__\", \"edit choices\", options)))\n    + \" --<span class=\\\"icon-down\\\"></span></div></td>\\n                    <td class=\\\"icon-title\\\" data-edit=\\\"map\\\">correct</td>\\n                    <td class=\\\"icon-title\\\" data-edit=\\\"map\\\">score</td>\\n                </tr>\\n                \";\n  options={hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                <tr data-edit=\\\"question\\\">\\n                    <td>\\n                        <div class=\\\"add-option\\\">\\n                            <span class=\\\"icon-add\\\"></span>\\n                            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Add choice\", options) : helperMissing.call(depth0, \"__\", \"Add choice\", options)))\n    + \"\\n                        </div>\\n                    </td>\\n                    <td colspan=\\\"2\\\"></td>\\n                </tr>\\n            </tbody>\\n        </table>\\n        <div>\\n            <div class=\\\"widget-response\\\" data-edit=\\\"correct\\\"></div>\\n            <div class=\\\"padding\\\"></div>\\n        </div>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoice', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"pin\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"shuffle\";\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  \n  return \"display:none;\";\n  }\n\n  buffer += \"<tr class=\\\"widget-box widget-inlineChoice qti-choice\\\" data-edit=\\\"active\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <td class=\\\"option\\\"><div contenteditable=\\\"true\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</div></td>\\n    <td class=\\\"mini-tlb\\\">\\n        <span data-edit=\\\"question\\\" class=\\\"tlb-button\\\">\\n            <span  class=\\\"icon-\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.fixed), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" data-role=\\\"shuffle-pin\\\" style=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.interactionShuffle), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"></span>\\n        </span>\\n        <label data-edit=\\\"map\\\">\\n            <input name=\\\"correct\\\" type=\\\"radio\\\" value=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n            <span class=\\\"icon-radio\\\"></span>\\n        </label>\\n    </td>\\n    <td class=\\\"mini-tlb\\\">\\n        <span data-edit=\\\"question\\\" class=\\\"icon-bin\\\" data-role=\\\"delete\\\"></span>\\n        <input class=\\\"score\\\" name=\\\"score\\\" data-edit=\\\"map\\\" value=\\\"\";\n  if (helper = helpers.score) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.score); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\"/>\\n    </td>\\n</tr>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/Widget',[\n    'lodash',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/Widget',\n    'taoQtiItem/qtiCreator/widgets/choices/inlineChoice/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/states',\n    'tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoiceInteraction',\n    'tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoice'\n], function(_, Element, InteractionWidget, ChoiceWidget, states, inlineChoiceInteractionTpl, inlineChoiceTpl){\n\n    var InlineChoiceInteractionWidget = InteractionWidget.clone();\n\n    InlineChoiceInteractionWidget.initCreator = function(options){\n\n        var _this = this;\n\n        this.registerStates(states);\n\n        InteractionWidget.initCreator.call(this);\n\n        this.$choiceOptionForm = options.choiceOptionForm;\n        _.each(this.element.getChoices(), function(choice){\n            _this.buildChoice(choice);\n        });\n\n       //remove toolbar title, because it is too large\n       this.$container.find('.tlb-title').remove();\n    };\n\n    InlineChoiceInteractionWidget.renderChoice = function(choice, shuffleChoice){\n\n        var tplData = {\n            tag : choice.qtiClass,\n            serial : choice.serial,\n            attributes : choice.attributes,\n            body : choice.text,\n            interactionShuffle:shuffleChoice\n        };\n\n        return inlineChoiceTpl(tplData);\n    };\n\n\n    InlineChoiceInteractionWidget.renderInteraction = function(){\n\n        var _this = this,\n            interaction = this.element,\n            shuffleChoice = interaction.attr('shuffle'),\n            tplData = {\n                tag : interaction.qtiClass,\n                serial : interaction.serial,\n                attributes : interaction.attributes,\n                choices : []\n            };\n\n        _.each(interaction.getChoices(), function(choice){\n            if(Element.isA(choice, 'choice')){\n                tplData.choices.push(_this.renderChoice(choice, shuffleChoice));\n            }\n        });\n\n        return inlineChoiceInteractionTpl(tplData);\n    };\n\n\n    InlineChoiceInteractionWidget.buildChoice = function(choice, options){\n\n        ChoiceWidget.build(\n            choice,\n            this.$container.find('.widget-inlineChoice[data-serial=\"' + choice.serial + '\"]'),\n            this.$choiceOptionForm,\n            options\n            );\n    };\n\n    InlineChoiceInteractionWidget.buildContainer = function(){\n        var previous, next;\n        //add a space to be able to place the cursor before and after it.\n        if(this.$original.length){\n            previous = this.$original[0].previousSibling;\n            next = this.$original[0].nextSibling;\n\n            if(!previous || (previous.nodeType === 3 && previous.nodeValue === '') || previous.nodeType !== 3){\n                this.$original.before('&nbsp;');\n            }\n            if(!next || (next.nodeType === 3 && next.nodeValue === '') || next.nodeType !== 3){\n                this.$original.after('&nbsp;');\n            }\n        }\n\n        //set the itemContainer where the actual widget should be append and be positioned absolutely\n        this.$itemContainer = this.$original.parents('.item-editor-item');\n\n        //prepare html: interaction & choices:\n        this.$itemContainer.append(this.renderInteraction());\n\n        this.$container = this.$itemContainer.find('.widget-inlineChoiceInteraction[data-serial=' + this.element.getSerial() + ']');\n    };\n\n    return InlineChoiceInteractionWidget;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoiceInteraction.placeholder', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<span class=\\\"widget-box inlineChoiceInteraction-placeholder\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"inlineChoiceInteraction\\\">\\n    <label>-- \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"edit choices\", options) : helperMissing.call(depth0, \"__\", \"edit choices\", options)))\n    + \" --</label>\\n    <span class=\\\"icon-down\\\"></span>\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/renderers/interactions/InlineChoiceInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/InlineChoiceInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/Widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoiceInteraction.placeholder'\n], function($, _, InlineChoiceInteraction, InlineChoiceInteractionWidget, tpl){\n\n    var CreatorInlineChoiceInteraction = _.clone(InlineChoiceInteraction);\n\n    CreatorInlineChoiceInteraction.template = tpl;\n\n    CreatorInlineChoiceInteraction.render = function(interaction, options){\n\n        //need to pass choice option form to the interaction widget because it will manage everything\n        options = options || {};\n        options.choiceOptionForm = this.getOption('choiceOptionForm');\n\n        return InlineChoiceInteractionWidget.build(\n            interaction,\n            $('.inlineChoiceInteraction-placeholder[data-serial=\"' + interaction.serial + '\"]'),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorInlineChoiceInteraction;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/matchInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", self=this, escapeExpression=this.escapeExpression, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program5(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n      <tr>\\n        \";\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  stack1 = helpers.each.call(depth0, (depth1 && depth1.matchSet1), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n      </tr>\\n      \";\n  return buffer;\n  }\nfunction program6(depth0,data) {\n  \n  \n  return \"\\n        <td>\\n          <label>\\n            <input type=\\\"checkbox\\\" >\\n            <span class=\\\"icon-checkbox cross\\\"></span>\\n          </label>\\n        </td>\\n        \";\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-matchInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"matchInteraction\\\">\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  <div class=\\\"instruction-container\\\"></div>\\n  <div class=\\\"match-interaction-area\\\">\\n    <table class=\\\"matrix\\\">\\n      <thead>\\n      <tr>\\n        <th> </th>\\n        \";\n  options={hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}\n  if (helper = helpers.matchSet1) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.matchSet1); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.matchSet1) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n      </tr>\\n      </thead>\\n      <tbody>\\n      \";\n  options={hash:{},inverse:self.noop,fn:self.programWithDepth(5, program5, data, depth0),data:data}\n  if (helper = helpers.matchSet2) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.matchSet2); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.matchSet2) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.programWithDepth(5, program5, data, depth0),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n      </tbody>\\n    </table>\\n  </div>\\n  <div class=\\\"notification-container\\\"></div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/MatchInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/matchInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function($, _,  __,tpl, containerHelper, instructionMgr, pciResponse){\n\n    /**\n     * TODO do not use global context var, it's value is shared between interaction instances\n     *\n     * Flag to not throw warning instruction if already\n     * displaying the warning. If such a flag is not used,\n     * disturbances can be seen by the candidate if he clicks\n     * like hell on choices.\n     */\n    var inWarning = false;\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10296\n     *\n     * @param {object} interaction\n     */\n    var render = function(interaction){\n        var $container = containerHelper.get(interaction);\n\n        // Initialize instructions system.\n        _setInstructions(interaction);\n\n        $container.on('click.commonRenderer', 'input[type=checkbox]', function(e){\n            _onCheckboxSelected(interaction, e);\n        });\n\n        instructionMgr.validateInstructions(interaction);\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10296\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n\n        response = _filterResponse(response);\n\n        if(typeof response.list !== 'undefined' && typeof response.list.directedPair !== 'undefined'){\n            _(response.list.directedPair).forEach(function(directedPair){\n                var x = $('th[data-identifier=' + directedPair[0] + ']').index() - 1;\n                var y = $('th[data-identifier=' + directedPair[1] + ']').parent().index();\n\n                $('.matrix > tbody tr').eq(y).find('input[type=checkbox]').eq(x).attr('checked', true);\n            });\n        }\n\n        instructionMgr.validateInstructions(interaction);\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10296\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        var response = pciResponse.serialize(_getRawResponse(interaction), interaction);\n        return response;\n    };\n\n    var resetResponse = function(interaction){\n\n        var $container = containerHelper.get(interaction);\n        $('input[type=checkbox]:checked', $container).each(function(){\n            $(this).prop('checked', false);\n        });\n\n        instructionMgr.validateInstructions(interaction);\n    };\n\n    var _filterResponse = function(response){\n        if(typeof response.list === 'undefined'){\n            // Maybe it's a base?\n            if(typeof response.base === 'undefined'){\n                // Oops, it is even not a base.\n                throw 'The given response is not compliant with PCI JSON representation.';\n            }\n            else{\n                // It's a base, Is it a directedPair? Null?\n                if (response.base === null) {\n                    return {\"list\" : {\"directedPair\" : []}};\n                }\n                else if (typeof response.base.directedPair === 'undefined'){\n                    // Oops again, it is not a directedPair.\n                    throw 'The matchInteraction only accepts directedPair values as responses.';\n                }\n                else{\n                    return {\"list\" : {\"directedPair\" : [response.base.directedPair]}};\n                }\n            }\n        }\n        else if(typeof response.list.directedPair === 'undefined'){\n            // Oops, not a directedPair.\n            throw 'The matchInteraction only accept directedPair values as responses.';\n        }\n        else{\n            return response;\n        }\n    };\n\n    var _getRawResponse = function(interaction){\n        var $container = containerHelper.get(interaction);\n        var values = [];\n\n        $container.find('input[type=checkbox]:checked').each(function(){\n            values.push(_inferValue(this));\n        });\n\n        return values;\n    };\n\n    var _inferValue = function(element){\n        var $element = $(element);\n        var y = $element.closest('tr').index();\n        var x = $element.closest('td').index();\n        var firstId = $('.matrix > thead th').eq(x).data('identifier');\n        var secondId = $('.matrix > tbody th').eq(y).data('identifier');\n        return [firstId, secondId];\n    };\n\n    var _onCheckboxSelected = function(interaction, e){\n\n        var choice;\n        var currentResponse = _getRawResponse(interaction);\n        var minAssociations = interaction.attr('minAssociations');\n        var maxAssociations = interaction.attr('maxAssociations');\n\n        if(maxAssociations === 0){\n            maxAssociations = _countChoices(interaction);\n        }\n\n        if(_.size(currentResponse) > maxAssociations){\n            // No more associations possible.\n            e.preventDefault();\n            instructionMgr.validateInstructions(interaction);\n\n        }else if((choice = _maxMatchReached(interaction, e.target)) !== false){\n\n            // Check if matchmax is respected for both choices\n            // involved in the selection.\n            e.preventDefault();\n            instructionMgr.validateInstructions(interaction, choice);\n\n        }else{\n\n            containerHelper.triggerResponseChangeEvent(interaction, {});\n            instructionMgr.validateInstructions(interaction);\n        }\n\n    };\n\n    var _maxMatchReached = function(interaction, input){\n\n        var association = _inferValue(input);\n        var overflow = false;\n\n        _(association).forEach(function(identifier){\n            var choice = _getChoiceDefinitionByIdentifier(interaction, identifier);\n            var matchMin = choice.attributes.matchMin;\n            var matchMax = choice.attributes.matchMax;\n            var assoc = _countAssociations(interaction, choice);\n\n            if(matchMax > 0 && assoc > matchMax){\n                overflow = choice;\n            }\n        });\n\n        return overflow;\n    };\n\n    var _countAssociations = function(interaction, choice){\n\n        var rawResponse = _getRawResponse(interaction);\n        var count = 0;\n\n        // How much time can we find rawChoice in rawResponses?\n        _(rawResponse).forEach(function(response){\n            if((response[0] === choice.attributes.identifier || response[1] === choice.attributes.identifier)){\n                count++;\n            }\n        });\n\n        return count;\n    };\n\n    var _countChoices = function(interaction){\n        var $container = containerHelper.get(interaction);\n        return $container.find('input[type=checkbox]').length;\n    };\n\n    var _getChoiceDefinitionByIdentifier = function(interaction, identifier){\n        var rawChoices = _getRawChoices(interaction);\n        return rawChoices[identifier];\n    };\n\n    var _getRawChoices = function(interaction){\n        var rawChoices = {};\n\n        _(interaction.choices).forEach(function(matchset){\n            _(matchset).forEach(function(choice){\n                rawChoices[choice.attributes.identifier] = choice;\n            });\n        });\n\n        return rawChoices;\n    };\n\n    var _setInstructions = function(interaction){\n\n        var msg;\n        var minAssociations = interaction.attr('minAssociations');\n        var maxAssociations = interaction.attr('maxAssociations');\n        var choiceCount = _countChoices(interaction);\n\n        // Super closure is here again to save our souls! Houray!\n        // ~~~~~~~ |==||||0__\n\n        var superClosure = function(){\n\n            var onMaxChoicesReached = function(report, msg){\n                if(inWarning === false){\n                    inWarning = true;\n\n                    report.update({\n                        level : 'warning',\n                        message : __('Maximum number of choices reached.'),\n                        timeout : 2000,\n                        stop : function(){\n                            report.update({level : 'success', message : msg});\n                            inWarning = false;\n                        }\n                    });\n                }\n            };\n\n            var onMatchMaxReached = function(interaction, choice, report, msg, level){\n\n                var $container = containerHelper.get(interaction);\n\n                if(inWarning === false){\n                    inWarning = true;\n\n                    var $choice = $container.find('.qti-simpleAssociableChoice[data-identifier=\"' + choice.attributes.identifier + '\"]');\n                    var originalBackgroundColor = $choice.css('background-color');\n                    var originalColor = $choice.css('color');\n\n                    report.update({\n                        level : 'warning',\n                        message : __('The highlighted choice cannot be associated more than %d time(s).').replace('%d', choice.attributes.matchMax),\n                        timeout : 3000,\n                        start : function(){\n                            $choice.animate({\n                                backgroundColor : '#fff',\n                                color : '#ba122b'\n                            }, 250, function(){\n                                $choice.animate({\n                                    backgroundColor : '#ba122b',\n                                    color : '#fff'\n                                }, 250);\n                            });\n                        },\n                        stop : function(){\n                            $choice.animate({\n                                backgroundColor : originalBackgroundColor,\n                                color : originalColor\n                            }, 500);\n                            report.update({level : level, message : msg});\n                            inWarning = false;\n                        }\n                    });\n                }\n            };\n\n            if(minAssociations === 0 && maxAssociations > 0){\n                // No minimum but maximum.\n                msg = __('You must select 0 to %d choices.').replace('%d', maxAssociations);\n\n                instructionMgr.appendInstruction(interaction, msg, function(choice){\n                    var responseCount = _.size(_getRawResponse(interaction));\n\n                    if(choice && choice.attributes && choice.attributes.matchMax > 0 && _countAssociations(interaction, choice) > choice.attributes.matchMax){\n                        onMatchMaxReached(interaction, choice, this, msg, this.getLevel());\n                    }\n                    else if(responseCount <= maxAssociations){\n                        this.setLevel('success');\n                    }\n                    else if(responseCount > maxAssociations){\n                        onMaxChoicesReached(this, msg);\n                    }\n                    else{\n                        this.reset();\n                    }\n                });\n            }\n            else if(minAssociations === 0 && maxAssociations === 0){\n                // No minimum, no maximum.\n                msg = __('You must select 0 to %d choices.').replace('%d', choiceCount);\n\n                instructionMgr.appendInstruction(interaction, msg, function(choice){\n\n                    if(choice && choice.attributes && choice.attributes.matchMax > 0 && _countAssociations(interaction, choice) > choice.attributes.matchMax){\n                        onMatchMaxReached(interaction, choice, this, msg, this.getLevel());\n                    }\n                    else{\n                        this.setLevel('success');\n                    }\n                });\n            }\n            else if(minAssociations > 0 && maxAssociations === 0){\n                // minimum but no maximum.\n                msg = __('You must select %1$d to %2$d choices.');\n                msg = msg.replace('%1$d', minAssociations);\n                msg = msg.replace('%2$d', choiceCount);\n\n                instructionMgr.appendInstruction(interaction, msg, function(choice){\n                    var responseCount = _.size(_getRawResponse(interaction));\n\n                    if(choice && choice.attributes && choice.attributes.matchMax > 0 && _countAssociations(interaction, choice) > choice.attributes.matchMax){\n                        onMatchMaxReached(interaction, choice, this, msg, this.getLevel());\n                    }\n                    else if(responseCount < minAssociations){\n                        this.setLevel('info');\n                    }\n                    else if(responseCount > choiceCount){\n                        onMaxChoicesReached(this, msg);\n                    }\n                    else{\n                        this.setLevel('success');\n                    }\n                });\n            }\n            else if(minAssociations > 0 && maxAssociations > 0){\n                // minimum and maximum.\n                if(minAssociations !== maxAssociations){\n                    msg = __('You must select %1$d to %2$d choices.');\n                    msg = msg.replace('%1$d', minAssociations);\n                    msg = msg.replace('%2$d', maxAssociations);\n                }\n                else{\n                    msg = __('You must select exactly %d choice(s).');\n                    msg = msg.replace('%d', minAssociations);\n                }\n\n                instructionMgr.appendInstruction(interaction, msg, function(choice){\n                    var responseCount = _.size(_getRawResponse(interaction));\n\n                    if(choice && choice.attributes && choice.attributes.matchMax > 0 && _countAssociations(interaction, choice) > choice.attributes.matchMax){\n                        onMatchMaxReached(interaction, choice, this, msg, this.getLevel());\n                    }\n                    else if(responseCount < minAssociations){\n                        this.setLevel('info');\n                    }\n                    else if(responseCount > maxAssociations){\n                        onMaxChoicesReached(this, msg);\n                    }\n                    else if(responseCount >= minAssociations && responseCount <= maxAssociations){\n                        this.setLevel('success');\n                    }\n                });\n            }\n        };\n\n        superClosure();\n    };\n\n    var destroy = function(interaction){\n\n        var $container = containerHelper.get(interaction);\n        $container.off('.commonRenderer');\n\n        instructionMgr.removeInstructions(interaction);\n\n        //remove all references to a cache container\n        containerHelper.reset(interaction);\n    };\n\n    /**\n     * Set the interaction state. It could be done anytime with any state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {Object} state - the interaction state\n     */\n    var setState  = function setState(interaction, state){\n        var $container;\n\n        if(_.isObject(state)){\n\n            //restore order of previously shuffled choices\n            if(_.isArray(state.order) && state.order.length === 2){\n\n                $container = containerHelper.get(interaction);\n\n                $('thead .qti-choice', $container)\n                    .sort(function(a, b){\n                        var aIndex = _.indexOf(state.order[0], $(a).data('identifier'));\n                        var bIndex = _.indexOf(state.order[0], $(b).data('identifier'));\n                        if(aIndex > bIndex) {\n                            return 1;\n                        }\n                        if(aIndex < bIndex) {\n                            return -1;\n                        }\n                        return 0;\n                    })\n                    .detach()\n                    .appendTo($('thead tr', $container));\n\n                $('tbody .qti-choice', $container)\n                    .sort(function(a, b){\n                        var aIndex = _.indexOf(state.order[1], $(a).data('identifier'));\n                        var bIndex = _.indexOf(state.order[1], $(b).data('identifier'));\n                        if(aIndex > bIndex) {\n                            return 1;\n                        }\n                        if(aIndex < bIndex) {\n                            return -1;\n                        }\n                        return 0;\n                    })\n                    .detach()\n                    .each(function(index, elt){\n                        $(elt).prependTo($('tbody tr', $container).eq(index));\n                    });\n            }\n\n            if(state.response){\n                interaction.resetResponse();\n                interaction.setResponse(state.response);\n            }\n        }\n    };\n\n    /**\n     * Get the interaction state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the interaction current state\n     */\n    var getState = function getState(interaction){\n        var $container;\n        var state =  {};\n        var response =  interaction.getResponse();\n\n        if(response){\n            state.response = response;\n        }\n\n        //we store also the choice order if shuffled\n        if(interaction.attr('shuffle') === true){\n            $container = containerHelper.get(interaction);\n\n            state.order = [[], []];\n            $('thead .qti-choice', $container).each(function(){\n               state.order[0].push($(this).data('identifier'));\n            });\n            $('tbody .qti-choice', $container).each(function(){\n               state.order[1].push($(this).data('identifier'));\n            });\n        }\n        return state;\n    };\n\n    /**\n     * Expose the common renderer for the match interaction\n     * @exports qtiCommonRenderer/renderers/interactions/MatchInteraction\n     */\n    return {\n        qtiClass : 'matchInteraction',\n        template : tpl,\n        render : render,\n        getContainer : containerHelper.get,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy,\n        setState : setState,\n        getState : getState,\n        inferValue : _inferValue\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/matchInteraction.adder', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div class=\\\"clearfix add-options\\\" data-edit=\\\"question\\\">\\n    <div class=\\\"rgt\\\">\\n        <span class=\\\"add-option\\\" data-role=\\\"add-row\\\"><span class=\\\"icon-add\\\"></span>Add new row</span>\\n        <span class=\\\"add-option\\\" data-role=\\\"add-col\\\"><span class=\\\"icon-add\\\"></span>Add new column</span>\\n    </div>\\n</div>\";\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/interactions/matchInteraction.row', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"\\n    <td>\\n        <label>\\n            <input type=\\\"checkbox\\\" >\\n            <span class=\\\"icon-checkbox cross\\\"></span>\\n        </label>\\n    </td>\\n    \";\n  }\n\n  buffer += \"<tr>\\n    \";\n  if (helper = helpers.choice) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choice); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = (helper = helpers['for'] || (depth0 && depth0['for']),options={hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data},helper ? helper.call(depth0, 0, (depth0 && depth0.otherMatchSetCount), 1, options) : helperMissing.call(depth0, \"for\", 0, (depth0 && depth0.otherMatchSetCount), 1, options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</tr>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/interactions/matchInteraction.cell', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<td>\\n    <label>\\n        <input type=\\\"checkbox\\\" >\\n        <span class=\\\"icon-checkbox cross\\\"></span>\\n    </label>\\n</td>\";\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Question',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Question',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/matchInteraction.adder',\n    'tpl!taoQtiItem/qtiCreator/tpl/interactions/matchInteraction.row',\n    'tpl!taoQtiItem/qtiCreator/tpl/interactions/matchInteraction.cell',\n    'taoQtiItem/qtiCreator/helper/adaptSize'\n], function($, _, stateFactory, Question, AssociateInteractionQuestionState, adderTpl, rowTpl, cellTpl, adaptSize){\n\n    var MatchInteractionStateQuestion = stateFactory.extend(Question);\n\n    MatchInteractionStateQuestion.prototype.initForm = AssociateInteractionQuestionState.prototype.initForm;\n\n    MatchInteractionStateQuestion.prototype.addNewChoiceButton = function(){\n\n        var widget = this.widget,\n            interaction = widget.element,\n            $matchArea = widget.$container.find('.match-interaction-area'),\n            qtiChoiceClassName = 'simpleAssociableChoice.matchInteraction';\n\n        var _postRender = function(choice){\n            \n            choice.postRender({\n                ready : function(widget){\n                    //transition state directly back to \"question\"\n                    widget.changeState('question');\n                }\n            }, qtiChoiceClassName);\n        };\n\n        if(!$matchArea.find('.add-option').length){\n            \n            $matchArea.append(adderTpl());\n            \n            $matchArea.find('.add-options').show();\n            \n            $matchArea.find('.add-option[data-role=add-col]').on('click', function(){\n                \n                //match set 0\n                var choice = interaction.createChoice(0);\n                \n                $matchArea.find('thead > tr').append(choice.render(qtiChoiceClassName));\n                $matchArea.find('tbody > tr').append(cellTpl({}));\n                \n                _postRender(choice);\n            });\n\n            $matchArea.find('.add-option[data-role=add-row]').on('click', function(){\n                \n                //match set 1\n                var choice = interaction.createChoice(1);\n                \n                $matchArea.find('tbody').append(rowTpl({\n                    choice : choice.render(qtiChoiceClassName),\n                    otherMatchSetCount : _.size(interaction.choices[0])\n                }));\n                \n                _postRender(choice);\n            });\n        }\n\n        $('.qti-item').on('toolbarchange', function() {\n            $matchArea.find('tbody .mini-tlb').each(function() {\n                var $toolbar = $(this);\n                // (string) false is _not_ a mistake\n                // this prevents images etc inside a choice from having funny toolbars\n                if($toolbar.parent().attr('contenteditable') !== 'false') {\n                    $toolbar.css({ left: ($toolbar.width() + 10) * -1, top: -1} );\n                }\n            });\n        });\n\n        //listen for height changes\n        $matchArea.find('tr ').each(function() {\n            var $elements = $(this).find('[data-html-editable=\"true\"]');\n            widget.on('containerBodyChange', function(){\n                adaptSize.height($elements);\n            });\n        });\n\n    };\n\n    return MatchInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    var MatchInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        answerStateHelper.forward(this.widget);\n    }, function(){\n        \n    });\n    \n    return MatchInteractionStateAnswer;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/matchInteraction.score', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<input value=\\\"\";\n  if (helper = helpers.score) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.score); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n       title=\\\"Score of this answer\\\" \\n       type=\\\"text\\\" \\n       data-for=\\\"\";\n  if (helper = helpers.choiceIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choiceIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n       name=\\\"score\\\" \\n       class=\\\"score\\\" \\n       placeholder = \\\"\";\n  if (helper = helpers.placeholder) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.placeholder); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n       data-validate=\\\"$numeric\\\" \\n       data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\" />\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/ResponseWidget',[\n    'jquery',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/MatchInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/matchInteraction.score',\n    'lodash',\n    'i18n',\n    'polyfill/placeholders'\n], function($, commonRenderer, instructionMgr, formElement, scoreTpl, _, __){\n\n    var ResponseWidget = {\n        create : function(widget, responseMappingMode){\n\n            var interaction = widget.element;\n\n            commonRenderer.resetResponse(interaction);\n            commonRenderer.destroy(interaction);\n\n            if(responseMappingMode){\n                instructionMgr.appendInstruction(widget.element, __('Please define the correct response and the score below.'));\n                interaction.data('responseMappingMode', true);\n                ResponseWidget.createScoreWidgets(widget);\n                ResponseWidget.createCorrectWidgets(widget);\n            }else{\n                instructionMgr.appendInstruction(widget.element, __('Please define the correct response below.'));\n                ResponseWidget.createCorrectWidgets(widget);\n            }\n\n            commonRenderer.render(interaction);\n\n            widget.$container.find('table.matrix input[type=checkbox]')\n                .removeProp('disabled')\n                .attr('data-edit', 'correct')\n                .attr('data-role', 'correct');\n        },\n        setResponse : function(interaction, response){\n\n            commonRenderer.setResponse(interaction, ResponseWidget.formatResponse(response));\n        },\n        destroy : function(widget){\n\n            var interaction = widget.element;\n\n            interaction.removeData('responseMappingMode');\n\n            widget.$container.find('table.matrix input[type=checkbox]').prop('disabled', 'disabled');\n            widget.$container.find('table.matrix .score').remove();\n            widget.$container.off('responseChange.qti-widget');\n\n            commonRenderer.resetResponse(interaction);\n            commonRenderer.destroy(interaction);\n        },\n        createScoreWidgets : function(widget){\n\n            var $container = widget.$container,\n                interaction = widget.element,\n                response = interaction.getResponseDeclaration(),\n                mapEntries = response.getMapEntries(),\n                defaultValue = response.getMappingAttribute('defaultValue');\n\n            $container.find('table.matrix td>label').each(function(){\n\n                var pairId = commonRenderer.inferValue(this).join(' ');\n\n                $(this).append(scoreTpl({\n                    serial : interaction.getSerial(),\n                    choiceIdentifier : pairId,\n                    score : mapEntries[pairId] ? mapEntries[pairId] : '',\n                    placeholder : defaultValue\n                }));\n            });\n\n            //add placeholder text to show the default value\n            var $scores = $container.find('table.matrix .score');\n            $scores.on('click', function(e){\n                e.stopPropagation();\n                e.preventDefault();\n            });\n\n            widget.on('mappingAttributeChange', function(data){\n                if(data.key === 'defaultValue'){\n                    $scores.attr('placeholder', data.value);\n                }\n            });\n\n            formElement.setChangeCallbacks($container, response, {\n                score : function(response, value){\n\n                    var key = $(this).data('for');\n\n                    if(value === ''){\n                        response.removeMapEntry(key);\n                    }else{\n                        response.setMapEntry(key, value, true);\n                    }\n\n                }\n            });\n\n        },\n        createCorrectWidgets : function(widget){\n\n            var interaction = widget.element,\n                response = interaction.getResponseDeclaration();\n\n            widget.$container.on('responseChange.qti-widget', function(e, data){\n                response.setCorrect(ResponseWidget.unformatResponse(data.response));\n            });\n\n        },\n        formatResponse : function(response){\n\n            var formatedRes = {list : {directedPair : []}};\n            if(_.size(response) === 1){\n                var pair = _.values(response).pop().split(' ');\n                formatedRes = {base : {directedPair : pair}};\n            }else{\n                formatedRes = {list : {directedPair : []}};\n                _.each(response, function(pairString){\n                    var pair = pairString.split(' ');\n                    formatedRes.list.directedPair.push(pair);\n                });\n            }\n            return formatedRes;\n        },\n        unformatResponse : function(formatedResponse){\n\n            var res = [];\n\n            if(formatedResponse.list && formatedResponse.list.directedPair){\n                _.each(formatedResponse.list.directedPair, function(pair){\n                    res.push(pair.join(' '));\n                });\n            }else if(formatedResponse.base && formatedResponse.base.directedPair){\n                res.push(formatedResponse.base.directedPair.join(' '));\n            }\n            return res;\n        }\n    };\n\n    return ResponseWidget;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Correct',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/ResponseWidget',\n    'lodash'\n], function(stateFactory, Correct, responseWidget, _){\n\n    var MatchInteractionStateCorrect = stateFactory.create(Correct, function(){\n\n        var _widget = this.widget,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        //init response widget in responseMapping mode:\n        responseWidget.create(_widget);\n\n        //finally, apply defined correct response and response mapping:\n        responseWidget.setResponse(interaction, _.values(response.getCorrect()));\n\n    }, function(){\n\n        responseWidget.destroy(this.widget);\n\n    });\n\n    return MatchInteractionStateCorrect;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Map',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/ResponseWidget',\n    'lodash'\n], function($, stateFactory, Map, responseWidget, _){\n\n    var MatchInteractionStateMap = stateFactory.create(Map, function(){\n\n        var _widget = this.widget,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        //init response widget in responseMapping mode:\n        responseWidget.create(_widget, true);\n\n        //finally, apply defined correct response and response mapping:\n        responseWidget.setResponse(interaction, _.values(response.getCorrect()));\n        \n       //change the correct state \n       _widget.on('metaChange', function(meta){\n            if(meta.key === 'defineCorrect'){\n                if(meta.value){\n                    $('.match-interaction-area input[type=\"checkbox\"]', _widget.$container)\n                        .removeProp('disabled') \n                        .removeClass('disabled');\n                } else {\n                    $('.match-interaction-area input[type=\"checkbox\"]', _widget.$container)\n                        .prop('disabled', true)\n                        .prop('checked', false)\n                        .addClass('disabled');\n                }\n                if(meta.value === false){\n                    response.setCorrect([]);\n                }\n            }\n        });\n\n    }, function(){\n\n        responseWidget.destroy(this.widget);\n\n    });\n\n    return MatchInteractionStateMap;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Map'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/states'\n], function(Widget, states){\n\n    var MatchInteractionWidget = Widget.clone();\n\n    MatchInteractionWidget.initCreator = function(){\n        this.registerStates(states);\n        Widget.initCreator.call(this);\n    };\n    \n    return MatchInteractionWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/interactions/MatchInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/MatchInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/Widget'\n], function(_, MatchInteraction,MatchInteractionWidget){\n\n    var CreatorMatchInteraction = _.clone(MatchInteraction);\n\n    CreatorMatchInteraction.render = function(interaction, options){\n        \n        return MatchInteractionWidget.build(\n            interaction,\n            MatchInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorMatchInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/mediaInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-mediaInteraction \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"media-container\\\"></div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Martin for OAT S.A. <code@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/MediaInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/mediaInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'mediaElement'\n], function($, _, __, tpl, pciResponse, containerHelper, instructionMgr, MediaElementPlayer) {\n    'use strict';\n\n    /**\n     * Get the media type (audio, video or video/youtube) regarding it's mime type.\n     * @param {String} mimetype - the mime type\n     * @returns {String} the catrgory/type\n     */\n    var getMediaType = function(mimetype) {\n        var type = '';\n        if (mimetype !== '') {\n            if (mimetype.indexOf('youtube') !== -1) {\n                type = 'video/youtube';\n            } else if (mimetype.indexOf('video') === 0 || mimetype.indexOf('application/ogg')) {\n                type = 'video';\n            } else if (mimetype.indexOf('audio') === 0) {\n                type = 'audio';\n            }\n        }\n        return type;\n    };\n\n    //some default values\n    var defaults = {\n        type   : 'video/mp4',\n        video : {\n            width: 480,\n            height: 270\n        },\n        audio : {\n            width: 400,\n            height: 30\n        }\n    };\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10391\n     *\n     * @param {object} interaction\n     * @fires playerready when the player is sucessfully loaded and configured\n     */\n    var render = function render(interaction) {\n\n        var mediaInteractionObjectToReturn,\n            $meTag,\n            mediaOptions;\n        var $container          = containerHelper.get(interaction);\n        var media               = interaction.object;\n        var baseUrl             = this.getOption('baseUrl') || '';\n        var mediaType           = getMediaType(media.attr('type') || defaults.type);\n        var enablePause         = $container.hasClass('pause');\n        var maxPlays            = parseInt(interaction.attr('maxPlays'), 10) || 0;\n\n        var playFromPauseEvent  = false;\n        var pauseFromClick      = false;\n\n        var features = enablePause ? ['playpause', 'progress', 'current', 'duration', 'volume'] : ['playpause', 'current', 'duration', 'volume'];\n\n        //intialize the player if not yet done\n        var initMediaPlayer = function initMediaPlayer(){\n            if(!interaction.mediaElement && $meTag && $meTag.length){\n                new MediaElementPlayer($meTag, mediaOptions);\n            }\n        };\n\n        //check if the media can be played (using timesPlayed and maxPlays)\n        var canBePlayed = function canBePlayed(){\n            var current = parseInt($container.data('timesPlayed'), 10);\n            return maxPlays === 0 || maxPlays > current;\n        };\n\n        if(_.size(media.attributes) === 0){\n            //TODO move to afterCreate\n            media.attr('type', defaults.type);\n            media.attr('width', $container.innerWidth());\n            media.attr('height', defaults.video.height);\n            media.attr('data', '');\n        }\n\n        //set up player options\n        mediaOptions = {\n            defaultVideoWidth       : defaults.video.width,\n            defaultVideoHeight      : defaults.video.height,\n            videoWidth              : media.attr('width'),\n            videoHeight             : media.attr('height'),\n            audioWidth              : media.attr('width') || defaults.audio.width,\n            audioHeight             : media.attr('height') || defaults.audio.height,\n            features                : features,\n            startVolume             : 1,\n            loop                    : !!interaction.attr('loop'),\n            enableAutosize          : true,\n            alwaysShowControls      : true,\n            iPadUseNativeControls   : false,\n            iPhoneUseNativeControls : false,\n            AndroidUseNativeControls: false,\n            alwaysShowHours         : false,\n            enableKeyboard          : false,\n            pauseOtherPlayers       : false,\n\n            //the player is loaded\n            success: function(mediaElement, playerDom) {\n\n                var stillNeedToCallPlay = true;\n                var $meContainer    = $(playerDom).closest('.mejs-container');\n                var $layers         = $('.mejs-layers', $meContainer);\n                var $playpauseBtn   = $('.mejs-playpause-button', $meContainer);\n                var $bigPlayBtn     = $('.mejs-overlay-play', $meContainer);\n                var $controls       = $('.mejs-controls', $meContainer);\n                var controlsHeight  = $controls.outerHeight();\n\n                interaction.mediaElement = mediaElement;\n\n                //resize the iframe of the youtube plugin\n                if (mediaType === 'video/youtube') {\n                    _.defer(function(){\n                        $('iframe.me-plugin', $container).css('min-height', media.attr('height'));\n                    });\n                }\n\n                //set up the number of times played\n                if (!$container.data('timesPlayed')) {\n                    $container.data('timesPlayed', 0);\n                }\n\n                //controls the autoplaying\n                if (interaction.attr('autostart') && canBePlayed()) {\n\n                    if (mediaType !== 'video/youtube') {\n                        mediaElement.load();\n                        mediaElement.play();\n                    }\n\n                    mediaElement.addEventListener('canplay', function() {\n                        if (stillNeedToCallPlay) {\n                            mediaElement.play();\n                        }\n                    }, false);\n                }\n\n\n                mediaElement.addEventListener('play', function(event) {\n                    stillNeedToCallPlay = false;\n\n                    if (playFromPauseEvent === true) {\n\n                        playFromPauseEvent = false;\n\n                    } else {\n                        //if no pause we detach the controls or add an overlay on iframes to prevent pause from click\n                        if(!enablePause){\n                            $bigPlayBtn.detach();\n                            $playpauseBtn.detach();\n\n                            if(mediaType === 'video/youtube' || mediaElement.pluginType === 'flash') {\n                                $('<div class=\"overlay\"></div>')\n                                    .width(mediaOptions.videoWidth)\n                                    .height(mediaOptions.videoHeight - controlsHeight)\n                                    .appendTo($layers);\n                            }\n                        }\n                    }\n                }, false);\n\n                mediaElement.addEventListener('ended', function(event) {\n                    $container.data('timesPlayed', $container.data('timesPlayed') + 1);\n                    containerHelper.triggerResponseChangeEvent(interaction);\n\n                    if (canBePlayed() && !enablePause){\n\n                        //re attach the controls and remove the overlay\n                        $controls.prepend($playpauseBtn);\n                        $layers.append($bigPlayBtn);\n                        $('.overlay', $layers).remove();\n\n                    } else if(!canBePlayed()) {\n\n                        //we detach the controls or add an overlay on iframes to prevent a new play\n                        $bigPlayBtn.detach();\n                        $playpauseBtn.detach();\n\n                        if(mediaType === 'video/youtube' || mediaElement.pluginType === 'flash') {\n                            $('<div class=\"overlay\"></div>')\n                                .width(mediaOptions.videoWidth)\n                                .height(mediaOptions.videoHeight - controlsHeight)\n                                .appendTo($layers);\n                        }\n\n                        //no other way to stop it if in loop\n                        if(!!interaction.attr('loop')){\n                            if(!interaction.mediaElement.pluginApi){\n                                interaction.mediaElement.setSrc('');\n                            } else {\n                                $(playerDom).remove();\n                            }\n                        }\n\n                    }\n\n                }, false);\n\n                //prevents to pause the player\n                $playpauseBtn.on('click.qti-element', function(e) {\n                        pauseFromClick = true;\n                        if(!enablePause){\n                            e.preventDefault();\n                            e.stopPropagation();                        }\n                    });\n\n                mediaElement.addEventListener('pause', function(event) {\n                    // there is a \"pause\" event fired at the end of a movie and we need to differentiate it from pause event caused by a click\n                    if (pauseFromClick) {\n                        playFromPauseEvent = true;\n                        pauseFromClick = false;\n                        //mediaElement.play();\n                    }\n                });\n\n                /**\n                 * @event playerready\n                 */\n                $container.trigger('playerready');\n            },\n\n            error: function(playerDom) {\n                $(playerDom).closest('div.mejs-container').find('.me-cannotplay').remove();\n            }\n        };\n\n        //create the HTML tags\n        $meTag = $(_buildMedia(media, mediaType, baseUrl)).appendTo($('.media-container', $container));\n\n        //prevent contextmenu and control click on the player to prevent unwanted pause.\n        $meTag\n            .on('contextmenu', function(e) {\n                e.preventDefault();\n            })\n            .on('click.qit-element', function(e) {\n                pauseFromClick = true;\n                if(!enablePause){\n                    e.preventDefault();\n                    e.stopPropagation();\n                    return false;\n                }\n            });\n\n        //initialize the component\n\n       $container.on('responseSet', function() {\n            initMediaPlayer();\n       });\n\n        //gives a small chance to the responseSet event before initializing the player\n        _.defer(function(){\n            initMediaPlayer();\n        });\n    };\n\n    /**\n     * Build the HTML5 tags for a media\n     * @private\n     * @param {Object} media - interaction.object\n     * @param {String} type  - the media type in video, audio and video/youtube\n     * @param {String} baseUrl - to prepend media.url if this is relative resource\n     * @returns {String} the html5 tags\n     */\n    var _buildMedia = function _buildMedia(media, type, baseUrl){\n        var element;\n        var url;\n        var attrs;\n\n        //inline an object to html attributes\n        var inlineAttrs = function inlineAttrs(attrs){\n            return _.reduce(attrs, function(res, value, key){\n                res += key + '=\"' + value + '\" ';\n                return res;\n            }, '');\n        };\n\n        if(media){\n            url = media.attr('data') ? media.attr('data').replace(/^\\//, '') : '';\n\n            attrs = {\n                width : media.attr('width')     + 'px',\n                height: media.attr('height')    + 'px',\n                preload : 'none'\n            };\n            if (!/^http(s)?:\\/\\//.test(url)){\n                url = baseUrl + url;\n                attrs.type = media.attr('type');\n            }\n\n            if (type === 'video/youtube') {\n                element =   '<video ' + inlineAttrs(attrs) + '> ' +\n                                ' <source type=\"video/youtube\" src=\"' + url + '\" /> ' +\n                            '</video>';\n            } else {\n                attrs.src = url;\n                if(!type){\n                    type = 'video';\n                }\n                element =   '<' + type + ' ' + inlineAttrs(attrs) + '></' + type + '>';\n            }\n        }\n        return element;\n    };\n\n    /**\n     * Destroy the current interaction\n     * @param {Object} interaction\n     */\n    var destroy = function(interaction) {\n        var $container = containerHelper.get(interaction);\n\n        if(interaction.mediaElement){\n            //needed to release socket\n            if(!interaction.mediaElement.pluginApi){\n                interaction.mediaElement.setSrc('');\n            }\n            interaction.mediaElement = undefined;\n        }\n\n        $('.instruction-container', $container).empty();\n        $('.media-container', $container).empty();\n\n        $container.removeData('timesPlayed');\n\n        //remove all references to a cache container\n        containerHelper.reset(interaction);\n    };\n\n    /**\n     * Get the responses from the interaction\n     * @private\n     * @param {Object} interaction\n     * @returns {Array} of points\n     */\n    var _getRawResponse = function _getRawResponse(interaction) {\n        return [containerHelper.get(interaction).data('timesPlayed')];\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * Special value: the empty object value {} resets the interaction responses\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response) {\n        if (response) {\n            try {\n                //try to unserialize the pci response\n                var responseValues;\n                responseValues = pciResponse.unserialize(response, interaction);\n                containerHelper.get(interaction).data('timesPlayed', responseValues[0]);\n            } catch (e) {\n                // something went wrong\n            }\n        }\n    };\n\n    /**\n     * Reset the current responses of the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * Special value: the empty object value {} resets the interaction responses\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var resetResponse = function resetResponse(interaction) {\n        containerHelper.get(interaction).data('timesPlayed', 0);\n    };\n\n\n    /**\n     * Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction) {\n        return  pciResponse.serialize(_getRawResponse(interaction), interaction);\n    };\n\n    /**\n     * Set the interaction state. It could be done anytime with any state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {Object} state - the interaction state\n     */\n    var setState  = function setState(interaction, state){\n        if(_.isObject(state)){\n            if(state.response){\n                interaction.resetResponse();\n                interaction.setResponse(state.response);\n            }\n        }\n    };\n\n    /**\n     * Get the interaction state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the interaction current state\n     */\n    var getState = function getState(interaction){\n        var $container;\n        var state =  {};\n        var response =  interaction.getResponse();\n\n        if(response){\n            state.response = response;\n        }\n        return state;\n    };\n\n\n    /**\n     * Expose the common renderer for the interaction\n     * @exports qtiCommonRenderer/renderers/interactions/MediaInteraction\n     */\n    return {\n        qtiClass        : 'mediaInteraction',\n        template        : tpl,\n        render          : render,\n        getContainer    : containerHelper.get,\n        setResponse     : setResponse,\n        getResponse     : getResponse,\n        resetResponse   : resetResponse,\n        destroy         : destroy,\n        setState        : setState,\n        getState        : getState\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/media', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<!--\\n<div class=\\\"panel\\\">\\n      TO BE COMPLETED : add \\\"object\\\" editor (see : http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10173)\\n</div>\\n-->\\n\\n<div class=\\\"panel\\\">\\n    \\n    <div>\\n        <label>\\n            <div>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Media file path or YouTube video address\", options) : helperMissing.call(depth0, \"__\", \"Media file path or YouTube video address\", options)))\n    + \"</div>\\n            <input type=\\\"text\\\" name=\\\"data\\\" placeholder=\\\"Please select media file\\\" value=\\\"\";\n  if (helper = helpers.data) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.data); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty;\\\"/>\\n            <div><button class='selectMediaFile btn-info small block'>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select media file\", options) : helperMissing.call(depth0, \"__\", \"Select media file\", options)))\n    + \"</button></div>\\n        </label>\\n    </div>\\n    \\n    <div>\\n        <label for=\\\"width\\\" class=\\\"spinner\\\">Width</label>\\n        <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\"   data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"1920\\\" style='min-width: 55px!important;' />\\n    </div>\\n    \\n    <div>\\n        <label for=\\\"height\\\" class=\\\"spinner\\\">Height</label>\\n        <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\"  data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"1080\\\" style='min-width: 55px!important;' />\\n    </div>\\n    \\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"autostart\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.autostart), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Autostart\", options) : helperMissing.call(depth0, \"__\", \"Autostart\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The autostart attribute determines if the media object should begin as soon as the candidate starts the attempt (checked) or if the media object should be started under the control of the candidate (unchecked).\", options) : helperMissing.call(depth0, \"__\", \"The autostart attribute determines if the media object should begin as soon as the candidate starts the attempt (checked) or if the media object should be started under the control of the candidate (unchecked).\", options)))\n    + \"\\n    </span>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"loop\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.loop), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Loop\", options) : helperMissing.call(depth0, \"__\", \"Loop\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n       \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The loop attribute is used to set continuous play mode. In continuous play mode, once the media object has started to play it should play continuously (subject to maxPlays).\", options) : helperMissing.call(depth0, \"__\", \"The loop attribute is used to set continuous play mode. In continuous play mode, once the media object has started to play it should play continuously (subject to maxPlays).\", options)))\n    + \"\\n    </span>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"pause\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.pause), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Pause\", options) : helperMissing.call(depth0, \"__\", \"Pause\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n       \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Enable the test taker to pause and restart the playing.\", options) : helperMissing.call(depth0, \"__\", \"Enable the test taker to pause and restart the playing.\", options)))\n    + \"\\n    </span>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <div>\\n        <label for=\\\"maxPlays\\\" class=\\\"spinner\\\">Max plays count</label>\\n        <input name=\\\"maxPlays\\\" value=\\\"\";\n  if (helper = helpers.maxPlays) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxPlays); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"1000\\\" type=\\\"text\\\" style='min-width: 55px!important;' />\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maxPlays attribute indicates that the media object can be played at most maxPlays times - it must not be possible for the candidate to play the media object more than maxPlay times. A value of 0 (the default) indicates that there is no limit.\", options) : helperMissing.call(depth0, \"__\", \"The maxPlays attribute indicates that the media object can be played at most maxPlays times - it must not be possible for the candidate to play the media object more than maxPlay times. A value of 0 (the default) indicates that there is no limit.\", options)))\n    + \"\\n        </span>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/Question',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/media',\n    'ui/resourcemgr'\n], function($, _, __, stateFactory, Question, formElement, formTpl){\n\n    var initQuestionState = function initQuestionState(){\n        this.widget.renderInteraction();\n    };\n\n    var exitQuestionState = function exitQuestionState(){\n        this.widget.destroyInteraction();\n    };\n\n    var MediaInteractionStateQuestion = stateFactory.extend(Question, initQuestionState, exitQuestionState);\n\n    MediaInteractionStateQuestion.prototype.initForm = function(){\n\n        var widget = this.widget;\n        var $form = widget.$form;\n        var $container = widget.$original;\n        var options = widget.options;\n        var interaction = widget.element;\n        var callbacks = {};\n\n        var reRender = _.throttle(function reRender(interaction){\n            xmlUpdateCheat(interaction);\n            widget.destroyInteraction();\n            widget.renderInteraction();\n        }, 1000);\n\n        var xmlUpdateCheat = function xmlUpdateCheat(interaction){\n            // xml update cheat\n            interaction.attr('responseIdentifier', interaction.attr('responseIdentifier'));\n        };\n\n        //initialization binding\n        //initialize your form here, you certainly gonna need to modify it:\n        //append the form to the dom (this part should be almost ok)\n        $form.html(formTpl({\n            //tpl data for the interaction\n            autostart : !!interaction.attr('autostart'),\n            loop : !!interaction.attr('loop'),\n            maxPlays : parseInt(interaction.attr('maxPlays'), 10),\n            pause : interaction.hasClass('pause'),\n            //tpl data for the \"object\", this part is going to be reused by the \"objectWidget\", http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10173\n            data : interaction.object.attr('data'),\n            type : interaction.object.attr('type'), //use the same as the uploadInteraction, contact jerome@taotesting.com for this\n            width : interaction.object.attr('width'),\n            height : interaction.object.attr('height')\n\n        }));\n\n        formElement.initWidget($form);\n\n        //init data change callbacks\n\n        //callbacks.autostart = formElement.getAttributeChangeCallback();\n        callbacks.autostart = function(interaction, attrValue, attrName){\n            interaction.attr(attrName, attrValue);\n            reRender(interaction);\n        };\n\n        //callbacks.loop = formElement.getAttributeChangeCallback();\n        callbacks.loop = function(interaction, attrValue, attrName){\n            interaction.attr(attrName, attrValue);\n            reRender(interaction);\n        };\n\n        callbacks.maxPlays = function(interaction, attrValue, attrName){\n            interaction.attr(attrName, attrValue);\n            reRender(interaction);\n        };\n\n        callbacks.pause = function(interaction, attrValue, attrName){\n            if(attrValue){\n                if(!$container.hasClass('pause')){\n                    $container.addClass('pause');\n                    interaction.addClass('pause');\n                }\n            }else{\n                $container.removeClass('pause');\n                interaction.removeClass('pause');\n            }\n        };\n\n        callbacks.width = function(interaction, attrValue, attrName){\n            interaction.object.attr(attrName, attrValue);\n            reRender(interaction);\n        };\n\n        callbacks.height = function(interaction, attrValue, attrName){\n            interaction.object.attr(attrName, attrValue);\n            reRender(interaction);\n        };\n\n        callbacks.data = function(interaction, attrValue, attrName){\n            if(interaction.object.attr(attrName) !== attrValue){\n                interaction.object.attr(attrName, attrValue);\n                xmlUpdateCheat(interaction);\n\n                var dataValue = $.trim(attrValue).toLowerCase();\n\n                if(/^http(s)?:\\/\\/(www\\.)?youtu/.test(dataValue)){\n                    interaction.object.attr('type', 'video/youtube');\n                }\n\n                if(interaction.object && (!interaction.object.attr('width') || parseInt(interaction.object.attr('width'), 10) <= 0)){\n                    interaction.object.attr('width', widget.$original.innerWidth());\n                }\n                reRender(interaction);\n            }\n        };\n\n        formElement.setChangeCallbacks($form, interaction, callbacks, {invalidate : true});\n\n        var $src = $form.find('input[name=data]');\n        var $uploadTrigger = $form.find('.selectMediaFile');\n        var _openResourceMgr = function(){\n            $uploadTrigger.resourcemgr({\n                title : __('Please select a media file (video or audio) from the resource manager. You can add files from your computer with the button \"Add file(s)\".'),\n                appendContainer : options.mediaManager.appendContainer,\n                mediaSources : options.mediaManager.mediaSources,\n                browseUrl : options.mediaManager.browseUrl,\n                uploadUrl : options.mediaManager.uploadUrl,\n                deleteUrl : options.mediaManager.deleteUrl,\n                downloadUrl : options.mediaManager.downloadUrl,\n                fileExistsUrl : options.mediaManager.fileExistsUrl,\n                params : {\n                    uri : options.uri,\n                    lang : options.lang,\n                    filters : 'video/mp4,video/avi,video/ogv,video/mpeg,video/ogg,video/quicktime,video/webm,video/x-ms-wmv,video/x-flv,audio/mp3,audio/vnd.wav,audio/ogg,audio/vorbis,audio/webm,audio/mpeg,application/ogg'\n                },\n                pathParam : 'path',\n                select : function(e, files){\n                    if(files && files.length){\n                        // set data field content and meybe detect and set media type here\n                        interaction.object.attr('type', files[0].mime);\n                        $form.find('input[name=data]')\n                            .val(files[0].file)\n                            .trigger('change');\n                    }\n                },\n                open : function(){\n                    //hide tooltip if displayed\n                    if($src.hasClass('tooltipstered')){\n                        $src.blur().tooltipster('hide');\n                    }\n                },\n                close : function(){\n                    //triggers validation : \n                    $src.blur();\n                }\n            });\n\n        };\n\n        $uploadTrigger.on('click', _openResourceMgr);\n\n        //if empty, open file manager immediately\n        if(!$src.val()){\n            _openResourceMgr();\n        }\n    };\n\n    return MediaInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/Sleep',[\r\n    'lodash',\r\n    'taoQtiItem/qtiCreator/widgets/states/factory',\r\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep'\r\n], function(_, stateFactory, SleepState) {\r\n\r\n    var initSleepState = function initSleepState() {\r\n        this.widget.renderInteraction();\r\n        this.widget.$original.append('<div class=\"overlay\"></div>');\r\n    };\r\n\r\n    var exitSleepState = function exitSleepState(){\r\n        this.widget.destroyInteraction();\r\n        this.widget.$original.children('.overlay').remove();\r\n    };\r\n\r\n    return stateFactory.extend(SleepState, initSleepState, exitSleepState);\r\n});\r\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/Sleep'\n], function(factory, states){\n    return factory.createBundle(states, arguments, ['answer', 'correct', 'map']);\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/Widget',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/states',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/MediaInteraction'\n], function($, _, Widget, states, commonRenderer){\n    \n    var MediaInteractionWidget = _.extend(Widget.clone(), {\n\n        initCreator : function(){\n            var self        = this; \n            var $container  = this.$original;\n            var $item       = $container.parents('.qti-item');\n\n            this.registerStates(states);            \n            Widget.initCreator.call(this);\n            \n            $item\n              .off('.' + this.element.serial)\n              .on('resize.'+ this.element.serial, _.throttle(function(e){\n                    var width = $container.innerWidth();\n                    if(width > 0){\n                        self.element.object.attr('width', $container.innerWidth());\n                        self.destroyInteraction();\n                        self.renderInteraction();\n                    }\n            }, 100));\n        },\n    \n        destroy : function(){\n\n            var $container = this.$original;\n            var $item      = $container.parents('.qti-item');\n\n            //stop listening the resize\n            $item.off('resize.' + this.element.serial);\n\n            //call parent destroy\n            Widget.destroy.call(this);\n        },\n\n        renderInteraction : function(){\n            var $container  = this.$original; \n            var interaction = this.element;\n            commonRenderer.render.call(interaction.getRenderer(), interaction, {\n                features : 'full',\n                controlPlaying : false\n            });\n        },\n\n        destroyInteraction : function(){\n            var interaction = this.element;\n            commonRenderer.resetResponse.call(interaction.getRenderer(), interaction);    \n            commonRenderer.destroy.call(interaction.getRenderer(), interaction);    \n        }\n    });\n\n    return MediaInteractionWidget;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/interactions/mediaInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-mediaInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n\t\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\t<div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"media-container\\\"></div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/renderers/interactions/MediaInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/MediaInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/Widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/interactions/mediaInteraction'\n], function(_, MediaInteraction, MediaInteractionWidget, tpl){\n    \n    var MediaInteraction = _.clone(MediaInteraction);\n\n    MediaInteraction.template = tpl;\n    \n    MediaInteraction.render = function(interaction, options){\n        \n        \n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        //options.choiceForm = this.getOption('choiceOptionForm');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        \n        return MediaInteractionWidget.build(\n            interaction,\n            MediaInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),//note : no response required...\n            options\n        );\n    };\n\n    return MediaInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/orderInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", self=this, escapeExpression=this.escapeExpression, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"qti-horizontal\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"qti-vertical\";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"horizontal\";\n  }\n\nfunction program7(depth0,data) {\n  \n  \n  return \"vertical\";\n  }\n\nfunction program9(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program11(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program13(depth0,data) {\n  \n  \n  return \"icon-down\";\n  }\n\nfunction program15(depth0,data) {\n  \n  \n  return \"icon-right\";\n  }\n\nfunction program17(depth0,data) {\n  \n  \n  return \"icon-up\";\n  }\n\nfunction program19(depth0,data) {\n  \n  \n  return \"icon-left\";\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-orderInteraction \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" \\n     data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n     data-qti-class=\\\"orderInteraction\\\" \\n     data-orientation=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"order-interaction-area\\\">\\n        <ul class=\\\"choice-area square source solid block-listing \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n            \";\n  options={hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </ul>\\n        <div class=\\\"arrow-bar middle\\\">\\n            <span class=\\\"icon-add-to-selection \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.program(15, program15, data),fn:self.program(13, program13, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"></span>\\n            <span class=\\\"icon-remove-from-selection \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.program(19, program19, data),fn:self.program(17, program17, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" inactive\\\"></span>\\n        </div>\\n        <ul class=\\\"result-area decimal target solid block-listing \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n        </ul>\\n        <div class=\\\"arrow-bar\\\">\\n            <span class=\\\"icon-move-before \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.program(17, program17, data),fn:self.program(19, program19, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" inactive\\\"></span>\\n            <span class=\\\"icon-move-after \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.program(13, program13, data),fn:self.program(15, program15, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" inactive\\\"></span>\\n        </div>\\n    </div>\\n    <div class=\\\"notification-container\\\"></div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/OrderInteraction',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/orderInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function(_, $, __, tpl, containerHelper, instructionMgr, pciResponse){\n    'use strict';\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10283\n     *\n     * @param {Object} interaction - the interaction instance\n     */\n    var render = function(interaction){\n\n        var $container = containerHelper.get(interaction),\n            $choiceArea = $container.find('.choice-area'),\n            $resultArea = $container.find('.result-area'),\n            $iconAdd = $container.find('.icon-add-to-selection'),\n            $iconRemove = $container.find('.icon-remove-from-selection'),\n            $iconBefore = $container.find('.icon-move-before'),\n            $iconAfter = $container.find('.icon-move-after'),\n            $activeChoice = null;\n\n        var _activeControls = function(){\n            $iconAdd.addClass('inactive');\n            $iconRemove.removeClass('inactive').addClass('active');\n            $iconBefore.removeClass('inactive').addClass('active');\n            $iconAfter.removeClass('inactive').addClass('active');\n        };\n\n        var _resetControls = function(){\n            $iconAdd.removeClass('inactive');\n            $iconRemove.removeClass('active').addClass('inactive');\n            $iconBefore.removeClass('active').addClass('inactive');\n            $iconAfter.removeClass('active').addClass('inactive');\n        };\n\n        var _setSelection = function($choice){\n            if($activeChoice){\n                $activeChoice.removeClass('active');\n            }\n            $activeChoice = $choice;\n            $activeChoice.addClass('active');\n            _activeControls();\n        };\n\n        var _resetSelection = function(){\n            if($activeChoice){\n                $activeChoice.removeClass('active');\n                $activeChoice = null;\n            }\n            _resetControls();\n        };\n\n        $container.on('mousedown.commonRenderer', function(e){\n            _resetSelection();\n        });\n\n        $choiceArea.on('mousedown.commonRenderer', '>li:not(.deactivated)', function(e){\n\n            e.stopPropagation();\n\n            _resetSelection();\n\n            $iconAdd.addClass('triggered');\n            setTimeout(function(){\n                $iconAdd.removeClass('triggered');\n            }, 150);\n\n            //move choice to the result list:\n            $resultArea.append($(this));\n            containerHelper.triggerResponseChangeEvent(interaction);\n\n            //update constraints :\n            instructionMgr.validateInstructions(interaction);\n        });\n\n        $resultArea.on('mousedown.commonRenderer', '>li', function(e){\n\n            e.stopPropagation();\n\n            var $choice = $(this);\n            if($choice.hasClass('active')){\n                _resetSelection();\n            }else{\n                _setSelection($(this));\n            }\n        });\n\n        $iconRemove.on('mousedown.commonRenderer', function(e){\n\n            e.stopPropagation();\n\n            if($activeChoice){\n\n                //restore choice back to choice list\n                $choiceArea.append($activeChoice);\n                containerHelper.triggerResponseChangeEvent(interaction);\n\n                //update constraints :\n                instructionMgr.validateInstructions(interaction);\n            }\n\n            _resetSelection();\n        });\n\n        $iconBefore.on('mousedown.commonRenderer', function(e){\n\n            e.stopPropagation();\n\n            var $prev = $activeChoice.prev();\n            if($prev.length){\n                $prev.before($activeChoice);\n                containerHelper.triggerResponseChangeEvent(interaction);\n            }\n        });\n\n        $iconAfter.on('mousedown.commonRenderer', function(e){\n\n            e.stopPropagation();\n\n            var $next = $activeChoice.next();\n            if($next.length){\n                $next.after($activeChoice);\n                containerHelper.triggerResponseChangeEvent(interaction);\n            }\n        });\n\n        _setInstructions(interaction);\n\n        //bind event listener in case the attributes change dynamically on runtime\n        $(document).on('attributeChange.qti-widget.commonRenderer', function(e, data){\n            if(data.element.getSerial() === interaction.getSerial()){\n                if(data.key === 'maxChoices' || data.key === 'minChoices'){\n                    instructionMgr.removeInstructions(interaction);\n                    _setInstructions(interaction);\n                    instructionMgr.validateInstructions(interaction);\n                }\n            }\n        });\n\n        _freezeSize($container);\n    };\n\n    var _freezeSize = function($container){\n        var $orderArea = $container.find('.order-interaction-area');\n        $orderArea.height($orderArea.height());\n    };\n\n    var _setInstructions = function(interaction){\n\n        var $container = containerHelper.get(interaction);\n        var $choiceArea = $('.choice-area', $container),\n            $resultArea = $('.result-area', $container),\n            min = parseInt(interaction.attr('minChoices')),\n            max = parseInt(interaction.attr('maxChoices'));\n\n        if(min){\n            instructionMgr.appendInstruction(interaction, __('You must use at least ' + min + ' choices'), function(){\n                if($resultArea.find('>li').length >= min){\n                    this.setLevel('success');\n                }else{\n                    this.reset();\n                }\n            });\n        }\n\n        if(max && max < _.size(interaction.getChoices())){\n            var instructionMax = instructionMgr.appendInstruction(interaction, __('You can use maximum ' + max + ' choices'), function(){\n                if($resultArea.find('>li').length >= max){\n                    $choiceArea.find('>li').addClass('deactivated');\n                    this.setMessage(__('Maximum choices reached'));\n                }else{\n                    $choiceArea.find('>li').removeClass('deactivated');\n                    this.reset();\n                }\n            });\n\n            $choiceArea.on('mousedown.commonRenderer', '>li.deactivated', function(){\n                var $choice = $(this);\n                $choice.addClass('brd-error');\n                instructionMax.setLevel('warning', 2000);\n                setTimeout(function(){\n                    $choice.removeClass('brd-error');\n                }, 150);\n            });\n        }\n    };\n\n    var resetResponse = function(interaction){\n\n        var $container = containerHelper.get(interaction);\n        var initialOrder = _.keys(interaction.getChoices());\n        var $choiceArea = $('.choice-area', $container).append($('.result-area>li', $container));\n        var $choices = $choiceArea.children('.qti-choice');\n\n        $container.find('.qti-choice.active').mousedown();\n\n        $choices.detach().sort(function(choice1, choice2){\n            return (_.indexOf(initialOrder, $(choice1).data('serial')) > _.indexOf(initialOrder, $(choice2).data('serial')));\n        });\n        $choiceArea.prepend($choices);\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10283\n     *\n     * Special value: the empty object value {} resets the interaction responses\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n\n        var $container = containerHelper.get(interaction);\n        var $choiceArea = $('.choice-area', $container);\n        var $resultArea = $('.result-area', $container);\n\n        if(response === null || _.isEmpty(response)){\n            resetResponse(interaction);\n        }else{\n            try{\n                _.each(pciResponse.unserialize(response, interaction), function(identifier){\n                    $resultArea.append($choiceArea.find('[data-identifier=' + identifier + ']'));\n                });\n            }catch(e){\n                throw new Error('wrong response format in argument : ' + e);\n            }\n        }\n\n        instructionMgr.validateInstructions(interaction);\n    };\n\n    var _getRawResponse = function(interaction){\n        var $container = containerHelper.get(interaction);\n        var response = [];\n        $('.result-area>li', $container).each(function(){\n            response.push($(this).data('identifier'));\n        });\n        return response;\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10283\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        return pciResponse.serialize(_getRawResponse(interaction), interaction);\n    };\n\n    /**\n     * Set additionnal data to the template (data that are not really part of the model).\n     * @param {Object} interaction - the interaction\n     * @param {Object} [data] - interaction custom data\n     * @returns {Object} custom data\n     */\n    var getCustomData = function(interaction, data){\n\n        return _.merge(data || {}, {\n            horizontal : (interaction.attr('orientation') === 'horizontal')\n        });\n\n    };\n\n    /**\n     * Destroy the interaction by leaving the DOM exactly in the same state it was before loading the interaction.\n     * @param {Object} interaction - the interaction\n     */\n    var destroy = function(interaction){\n\n        var $container = containerHelper.get(interaction);\n\n        //first, remove all events\n        var selectors = [\n            '.choice-area',\n            '.result-area',\n            '.icon-add-to-selection',\n            '.icon-remove-from-selection',\n            '.icon-move-before',\n            '.icon-move-after'\n        ];\n        $container.find(selectors.join(',')).andSelf().off('.commonRenderer');\n\n        $(document).off('.commonRenderer');\n\n        $container.find('.order-interaction-area').removeAttr('style');\n\n        instructionMgr.removeInstructions(interaction);\n\n        //remove all references to a cache container\n        containerHelper.reset(interaction);\n    };\n\n    /**\n     * Set the interaction state. It could be done anytime with any state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {Object} state - the interaction state\n     */\n    var setState  = function setState(interaction, state){\n        var $container;\n\n        if(_.isObject(state)){\n            if(state.response){\n                interaction.resetResponse();\n                interaction.setResponse(state.response);\n            }\n\n            //restore order of previously shuffled choices\n            if(_.isArray(state.order) && state.order.length === _.size(interaction.getChoices())){\n\n                $container = containerHelper.get(interaction);\n\n                $('.choice-area .qti-choice', $container)\n                    .sort(function(a, b){\n                        var aIndex = _.indexOf(state.order, $(a).data('identifier'));\n                        var bIndex = _.indexOf(state.order, $(b).data('identifier'));\n                        if(aIndex > bIndex) {\n                            return 1;\n                        }\n                        if(aIndex < bIndex) {\n                            return -1;\n                        }\n                        return 0;\n                    })\n                    .detach()\n                    .appendTo($('.choice-area', $container));\n            }\n        }\n    };\n\n    /**\n     * Get the interaction state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the interaction current state\n     */\n    var getState = function getState(interaction){\n        var $container;\n        var state =  {};\n        var response =  interaction.getResponse();\n\n        if(response){\n            state.response = response;\n        }\n\n        //we store also the choice order if shuffled\n        if(interaction.attr('shuffle') === true){\n            $container = containerHelper.get(interaction);\n\n            state.order = [];\n            $('.choice-area .qti-choice', $container).each(function(){\n               state.order.push($(this).data('identifier'));\n            });\n        }\n        return state;\n    };\n\n     /**\n     * Expose the common renderer for the order interaction\n     * @exports qtiCommonRenderer/renderers/interactions/OrderInteraction\n     */\n    return {\n        qtiClass : 'orderInteraction',\n        getData : getCustomData,\n        template : tpl,\n        render : render,\n        getContainer : containerHelper.get,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse: resetResponse,\n        destroy : destroy,\n        setState : setState,\n        getState : getState\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Question',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Question'\n], function(stateFactory, Question, ChoiceInteractionQuestionState){\n\n    var OrderInteractionStateQuestion = stateFactory.extend(Question);\n    \n    //reuse the same exact same form as choice interaction\n    OrderInteractionStateQuestion.prototype.initForm = function(){\n         ChoiceInteractionQuestionState.prototype.initForm.call(this, false);\n    };\n\n    return OrderInteractionStateQuestion;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer'\n], function(stateFactory, Answer){\n\n    var OrderInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        \n        //currently only allow \"correct\" state\n        this.widget.changeState('correct');\n        \n    }, function(){\n        \n    });\n\n    return OrderInteractionStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Correct',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/OrderInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'lodash',\n    'i18n'\n], function(stateFactory, Correct, commonRenderer, instructionMgr, _, __){\n\n    var InlineChoiceInteractionStateCorrect = stateFactory.create(Correct, function(){\n        \n        _createResponseWidget(this.widget);\n        \n    }, function(){\n        \n        _destroyResponseWidget(this.widget);\n        \n    });\n    \n    var _createResponseWidget = function(widget){\n\n        var interaction = widget.element,\n            response = interaction.getResponseDeclaration(),\n            correctResponse = _.values(response.getCorrect());\n\n        instructionMgr.appendInstruction(widget.element, __('Please define the correct order in the box to the right.'));\n\n        commonRenderer.render(widget.element);\n        commonRenderer.setResponse(interaction, _formatResponse(correctResponse));\n\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            response.setCorrect(_unformatResponse(data.response));\n        });\n    };\n    \n    var _destroyResponseWidget = function(widget){\n        \n        widget.$container.off('responseChange.qti-widget');\n\n        commonRenderer.resetResponse(widget.element);\n\n        commonRenderer.destroy(widget.element);\n    };\n    \n    var _formatResponse = function(response){\n        return {list : {identifier : response}};\n    };\n\n    var _unformatResponse = function(formatedResponse){\n        var res = [];\n        if(formatedResponse.list && formatedResponse.list.identifier){\n            res = formatedResponse.list.identifier;\n        }\n        return res;\n    };\n    \n    return InlineChoiceInteractionStateCorrect;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Correct'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/states'\n], function(Widget, states){\n\n    var OrderInteractionWidget = Widget.clone();\n\n    OrderInteractionWidget.initCreator = function(){\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n    };\n    \n    return OrderInteractionWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/interactions/OrderInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/OrderInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/Widget'\n], function(_, OrderInteraction, OrderInteractionWidget){\n\n    var CreatorOrderInteraction = _.clone(OrderInteraction);\n\n    CreatorOrderInteraction.render = function(interaction, options){\n        \n        return OrderInteractionWidget.build(\n            interaction,\n            OrderInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorOrderInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/customInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"qti-interaction qti-customInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  if (helper = helpers.markup) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.markup); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/runtime/qtiCustomInteractionContext',[],function(){\n\n    //need a global reference to have pciHooks shared in two different requirejs context (\"default\" and \"portableCustomInteraction\")\n    window._pciHooks = window._pciHooks || {};\n\n    /**\n     * Global object accessible by all PCIs\n     * \n     * @type Object\n     */\n    var taoQtiCustomInteractionContext = {\n        /**\n         * register a custom interaction (its runtime model) in global registery\n         * register a renderer\n         * \n         * @param {Object} pciHook\n         * @returns {undefined}\n         */\n        register : function(pciHook){\n            //@todo check pciHook validity\n            window._pciHooks[pciHook.getTypeIdentifier()] = pciHook;\n        },\n        /**\n         * notify when a custom interaction is ready for test taker interaction\n         * \n         * @param {string} pciInstance\n         * @fires custominteractionready\n         */\n        notifyReady : function(pciInstance){\n            //@todo add pciIntance as event data and notify event to delivery engine\n        },\n        /**\n         * notify when a custom interaction is completed by test taker\n         * \n         * @param {string} pciInstance\n         * @fires custominteractiondone\n         */\n        notifyDone : function(pciInstance){\n            //@todo add pciIntance as event data and notify event to delivery engine\n        },\n        /**\n         * Get a cloned object representing the PCI model\n         * \n         * @param {string} pciTypeIdentifier\n         * @returns {Object} clonedPciModel\n         */\n        createPciInstance : function(pciTypeIdentifier){\n\n            if(window._pciHooks[pciTypeIdentifier]){\n\n                var instance = {},\n                    proto = window._pciHooks[pciTypeIdentifier];\n\n                for(var name in proto){\n                    if(typeof proto[name] === 'function'){\n                        //@todo : delegate function call for better performance ?\n                        instance[name] = proto[name];\n                    }else if(proto[name] !== null && typeof proto[name] === 'object'){\n                        //a plain object:\n                        instance[name] = proto[name].constructor();\n                    }else{\n                        //not an object (nor a function) : e.g. 0, 123, '123', null, undefined\n                        instance[name] = proto[name];\n                    }\n                }\n\n                return instance;\n\n            }else{\n                throw 'no portable custom interaction hook found with the id ' + pciTypeIdentifier;\n            }\n        }\n    };\n    \n    \n    return taoQtiCustomInteractionContext;\n});\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/PortableCustomInteraction',[\n    'lodash',\n    'context',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/customInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/PortableElement',\n    'taoQtiItem/runtime/qtiCustomInteractionContext',\n    'taoQtiItem/qtiItem/helper/util'\n], function(_, context, tpl, containerHelper, PortableElement, qtiCustomInteractionContext, util){\n\n    /**\n     * Get the PCI instance associated to the interaction object\n     * If none exists, create a new one based on the PCI typeIdentifier\n     *\n     * @param {Object} interaction - the js object representing the interaction\n     * @returns {Object} PCI instance\n     */\n    var _getPci = function(interaction){\n\n        var pciTypeIdentifier,\n            pci = interaction.data('pci') || undefined;\n\n        if(!pci){\n\n            pciTypeIdentifier = interaction.typeIdentifier;\n            pci = qtiCustomInteractionContext.createPciInstance(pciTypeIdentifier);\n\n            if(pci){\n\n                //binds the PCI instance to TAO interaction object and vice versa\n                interaction.data('pci', pci);\n                pci._taoCustomInteraction = interaction;\n\n            }else{\n                throw 'no custom interaction hook found for the type ' + pciTypeIdentifier;\n            }\n        }\n\n        return pci;\n    };\n\n    /**\n     * Execute javascript codes to bring the interaction to life.\n     * At this point, the html markup must already be ready in the document.\n     *\n     * It is done in 5 steps :\n     * 1. register required libs in the \"portableCustomInteraction\" context\n     * 2. require all required libs\n     * 3. create a pci instance based on the interaction model\n     * 4. initialize the rendering\n     * 5. restore full state if applicable (state and/or response)\n     *\n     * @param {Object} interaction\n     */\n    var render = function(interaction, options){\n\n        options = options || {};\n\n        var id = interaction.attr('responseIdentifier'),\n            typeIdentifier = interaction.typeIdentifier,\n            baseUrl = this.getOption('baseUrl') || PortableElement.getDocumentBaseUrl(), //require a base url !\n            runtimeLocations = options.runtimeLocations ? options.runtimeLocations : this.getOption('runtimeLocations'),\n            config = _.clone(interaction.properties), //pass a clone instead\n            entryPoint = this.getAbsoluteUrl(interaction.entryPoint),\n            $dom = containerHelper.get(interaction).children(),\n            localRequirePaths = {\n                qtiCustomInteractionContext : context.root_url + 'taoQtiItem/views/js/runtime/qtiCustomInteractionContext'\n            },\n        localRequireConfig = {},\n            state = {}, //@todo pass state and response to renderer here:\n            response = {base : null};\n\n        if(runtimeLocations && runtimeLocations[typeIdentifier]){\n            //we are overwriting the runtime libs location:\n            localRequireConfig.runtimeLocation = runtimeLocations[typeIdentifier];\n        }\n\n        //create a new require context to load the libs:\n        var localRequire = PortableElement.getCachedLocalRequire(typeIdentifier, baseUrl, localRequirePaths, localRequireConfig);\n\n        localRequire([entryPoint], function(){\n\n            var pci = _getPci(interaction);\n            if(pci){\n                //call pci initialize() to render the pci\n                pci.initialize(id, $dom[0], config);\n                //restore context (state + response)\n                pci.setSerializedState(state);\n                pci.setResponse(response);\n                //call callback function\n                interaction.triggerPciReady(pci);\n            }\n\n        });\n    };\n\n    /**\n     * Programmatically set the response following the json schema described in\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * @param {Object} interaction\n     * @param {Object} response\n     */\n    var setResponse = function(interaction, response){\n\n        interaction.onPciReady(function(){\n            _getPci(interaction).setResponse(response);\n        });\n    };\n\n    /**\n     * Get the response in the json format described in\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * @param {Object} interaction\n     * @returns {Object}\n     */\n    var getResponse = function(interaction){\n\n        if(interaction.data('pciReady')){\n            return _getPci(interaction).getResponse();\n        }\n        //return pci null\n        return {base : null};\n    };\n\n    /**\n     * Remove the current response set in the interaction\n     * The state may not be restored at this point.\n     *\n     * @param {Object} interaction\n     */\n    var resetResponse = function(interaction){\n\n        interaction.onPciReady(function(){\n            _getPci(interaction).resetResponse();\n        });\n    };\n\n    /**\n     * Reverse operation performed by render()\n     * After this function is executed, only the inital naked markup remains\n     * Event listeners are removed and the state and the response are reset\n     *\n     * @param {Object} interaction\n     */\n    var destroy = function(interaction){\n\n        interaction.onPciReady(function(){\n            _getPci(interaction).destroy();\n        });\n    };\n\n    /**\n     * Restore the state of the interaction from the serializedState.\n     *\n     * @param {Object} interaction\n     * @param {Object} serializedState - json format\n     */\n    var setSerializedState = function(interaction, serializedState){\n\n        interaction.onPciReady(function(){\n            _getPci(interaction).setSerializedState(serializedState);\n        });\n    };\n\n    /**\n     * Get the current state of the interaction as a string.\n     * It enables saving the state for later usage.\n     *\n     * @param {Object} interaction\n     * @returns {Object} json format\n     */\n    var getSerializedState = function(interaction){\n\n        if(interaction.data('pciReady')){\n            return _getPci(interaction).getSerializedState();\n        }\n        return {};\n    };\n\n    return {\n        qtiClass : 'customInteraction',\n        template : tpl,\n        getData : function(customInteraction, data){\n\n            //remove ns + fix media file path\n            var markup = data.markup;\n            markup = util.removeMarkupNamespaces(markup);\n            markup = PortableElement.fixMarkupMediaSources(markup, this);\n            data.markup = markup;\n\n            return data;\n        },\n        render : render,\n        getContainer : containerHelper.get,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy,\n        getSerializedState : getSerializedState,\n        setSerializedState : setSerializedState\n    };\n});\n\n","define('taoQtiItem/qtiCreator/renderers/interactions/PortableCustomInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/PortableCustomInteraction',\n    'taoQtiItem/qtiCreator/editor/customInteractionRegistry',\n    'taoQtiItem/qtiCreator/helper/commonRenderer'\n], function(_, Renderer, ciRegistry, commonRenderer){\n\n    var CreatorCustomInteraction = _.clone(Renderer);\n\n    CreatorCustomInteraction.render = function(interaction, options){\n        \n        //initial rendering:\n        Renderer.render.call(commonRenderer.get(), interaction, {baseUrl : ciRegistry.getBaseUrl(interaction.typeIdentifier)});\n        \n        var pciCreator = ciRegistry.getCreator(interaction.typeIdentifier),\n            Widget = pciCreator.getWidget();\n        \n        return Widget.build(\n            interaction,\n            Renderer.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n            );\n    };\n\n    return CreatorCustomInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/selectPointInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-graphicInteraction qti-selectPointInteraction clearfix \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"image-editor solid\\\">\\n        <div id='graphic-paper-\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"' class=\\\"main-image-box\\\"></div>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/selectPointInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager'\n], function($, _, __, tpl, graphic, pciResponse, containerHelper, instructionMgr){\n    'use strict';\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     */\n    var render = function render(interaction){\n        var $container = containerHelper.get(interaction);\n        var background = interaction.object.attributes;\n        var baseUrl = this.getOption('baseUrl') || '';\n\n        //create the paper\n        interaction.paper = graphic.responsivePaper( 'graphic-paper-' + interaction.serial, interaction.serial, {\n            width       : background.width,\n            height      : background.height,\n            img         : baseUrl + background.data,\n            imgId       : 'bg-image-' + interaction.serial,\n            container   : $container\n        });\n\n        //enable to select the paper to position a target\n        _enableSelection(interaction);\n\n        //set up the constraints instructions\n        instructionMgr.minMaxChoiceInstructions(interaction, {\n            min: interaction.attr('minChoices'),\n            max: interaction.attr('maxChoices'),\n            choiceCount : false,\n            getResponse : _getRawResponse,\n            onError : function(data){\n                if(data){\n                    graphic.highlightError(data.target, 'success');\n                }\n            }\n        });\n    };\n\n    /**\n     * Make the image clickable and place targets at the given position.\n     * @private\n     * @param {object} interaction\n     */\n    var _enableSelection = function _enableSelection(interaction){\n        var maxChoices      = interaction.attr('maxChoices');\n        var $container      = containerHelper.get(interaction);\n        var $imageBox       = $container.find('.main-image-box');\n        var isResponsive    = $container.hasClass('responsive');\n        var image           = interaction.paper.getById('bg-image-' + interaction.serial);\n        var isTouch         = false;\n\n        //used to see if we are in a touch context\n        image.touchstart(function(){\n            isTouch = true;\n            image.untouchstart();\n        });\n\n        //get the point on click\n        image.click(function imageClicked(event){\n\n            if(maxChoices > 0 && _getRawResponse(interaction).length >= maxChoices){\n                instructionMgr.validateInstructions(interaction);\n                return;\n            }\n\n            //get the current mouse point, even on a responsive paper\n            var point = graphic.getPoint(event, interaction.paper, $imageBox, isResponsive);\n\n            //add the point to the paper\n            graphic.createTarget(interaction.paper, {\n                point : point,\n                create : changePoint,\n                remove : function pointRemoved (){\n                    changePoint();\n                }\n            });\n        });\n\n        /**\n         * When there is point added or reomved\n         */\n        function changePoint(target){\n            if(isTouch && target){\n                graphic.createTouchCircle(interaction.paper, target.getBBox());\n            }\n            containerHelper.triggerResponseChangeEvent(interaction);\n            instructionMgr.validateInstructions(interaction, {target : target});\n        }\n    };\n    /**\n     * Get the responses from the interaction\n     * @private\n     * @param {Object} interaction\n     * @returns {Array} of points\n     */\n    var _getRawResponse = function _getRawResponse(interaction){\n        var points = [];\n        interaction.paper.forEach(function(element){\n            var point = element.data('point');\n            if(typeof point === 'object' && point.x && point.y){\n                points.push([Math.round(point.x), Math.round(point.y)]);\n            }\n        });\n        return points;\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n\n        var responseValues;\n        if(response && interaction.paper){\n\n            try{\n                responseValues = pciResponse.unserialize(response, interaction);\n            }catch(e){\n            }\n\n            if(_.isArray(responseValues)){\n                _(responseValues)\n                    .flatten()\n                    .map(function(value, index){\n                    if(index % 2 === 0){\n                        return {x : value, y : responseValues[index + 1]};\n                    }\n                })\n                .filter(_.isObject)\n                .forEach(function(point){\n                   graphic.createTarget(interaction.paper, {\n                        point : point\n                   });\n                });\n            }\n        }\n    };\n\n    /**\n     * Reset the current responses of the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * Special value: the empty object value {} resets the interaction responses\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var resetResponse = function resetResponse(interaction){\n        interaction.paper.forEach(function(element){\n            var point = element.data('point');\n            if(typeof point === 'object'){\n                graphic.trigger(element, 'click');\n            }\n        });\n    };\n\n\n    /**\n     i* Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        var raw = _getRawResponse(interaction);\n        var response = pciResponse.serialize(_getRawResponse(interaction), interaction);\n        return response;\n    };\n\n    /**\n     * Clean interaction destroy\n     * @param {Object} interaction\n     */\n    var destroy = function destroy(interaction){\n        var $container;\n        if(interaction.paper){\n            $container = containerHelper.get(interaction);\n\n            $(window).off('resize.qti-widget.' + interaction.serial);\n            $container.off('resize.qti-widget.' + interaction.serial);\n\n            interaction.paper.clear();\n            instructionMgr.removeInstructions(interaction);\n\n            $('.main-image-box', $container).empty().removeAttr('style');\n            $('.image-editor', $container).removeAttr('style');\n        }\n\n        //remove all references to a cache container\n        containerHelper.reset(interaction);\n    };\n\n    /**\n     * Set the interaction state. It could be done anytime with any state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {Object} state - the interaction state\n     */\n    var setState  = function setState(interaction, state){\n        if(_.isObject(state)){\n            if(state.response){\n                interaction.resetResponse();\n                interaction.setResponse(state.response);\n            }\n        }\n    };\n\n    /**\n     * Get the interaction state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the interaction current state\n     */\n    var getState = function getState(interaction){\n        var $container;\n        var state =  {};\n        var response =  interaction.getResponse();\n\n        if(response){\n            state.response = response;\n        }\n        return state;\n    };\n\n\n    /**\n     * Expose the common renderer for the interaction\n     * @exports qtiCommonRenderer/renderers/interactions/SelectPointInteraction\n     */\n    return {\n        qtiClass : 'selectPointInteraction',\n        template : tpl,\n        render : render,\n        getContainer : containerHelper.get,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy,\n        setState : setState,\n        getState : getState\n    };\n});\n\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Sleep',[\n    'taoQtiItem/qtiCreator/widgets/states/factory', \n    'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep'\n], function(stateFactory, SleepState){\n   \n    var initSleepState = function initSleepState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        widget.on('metaChange', function(data){\n            if(data.key === 'responsive'){\n                if(data.value === true){\n                    interaction.addClass('responsive');\n                } else {\n                    interaction.removeClass('responsive');\n                }\n            }\n        });\n    };\n\n    var exitSleepState = function exitSleepState(){};\n \n    return stateFactory.extend(SleepState, initSleepState, exitSleepState); \n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/selectPoint', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n\\n    \\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Interaction Background\", options) : helperMissing.call(depth0, \"__\", \"Interaction Background\", options)))\n    + \"</h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"data\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"File\", options) : helperMissing.call(depth0, \"__\", \"File\", options)))\n    + \"</label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The file path to the image.\", options) : helperMissing.call(depth0, \"__\", \"The file path to the image.\", options)))\n    + \"</div>\\n        <input type=\\\"text\\\" name=\\\"data\\\" value=\\\"\";\n  if (helper = helpers.data) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.data); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty; $fileExists(baseUrl=\";\n  if (helper = helpers.baseUrl) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.baseUrl); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")\\\"/>\\n        <button class=\\\"btn-info small block\\\" data-role=\\\"upload-trigger\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select image\", options) : helperMissing.call(depth0, \"__\", \"Select image\", options)))\n    + \"</button>\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width\", options) : helperMissing.call(depth0, \"__\", \"Width\", options)))\n    + \"</label>\\n        <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height\", options) : helperMissing.call(depth0, \"__\", \"Height\", options)))\n    + \"</label>\\n        <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"type\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Mime Type\", options) : helperMissing.call(depth0, \"__\", \"Mime Type\", options)))\n    + \"</label>\\n        <input name=\\\"type\\\" value=\\\"\";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <hr>\\n\\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allowed number of choices\", options) : helperMissing.call(depth0, \"__\", \"Allowed number of choices\", options)))\n    + \"\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of choices that the candidate is required to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of choices that the candidate is required to select to form a valid response.\", options)))\n    + \"<br>\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices that the candidate is allowed to select.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices that the candidate is allowed to select.\", options)))\n    + \"\\n        </span>\\n    </h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"minChoices\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"minChoices\\\" value=\\\"\";\n  if (helper = helpers.minChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.minChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"maxChoices\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"maxChoices\\\" value=\\\"\";\n  if (helper = helpers.maxChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" type=\\\"text\\\" />\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Question',[\n    'jquery',\n    'lodash',\n    'util/image',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/selectPoint'\n], function($, _, imageUtil, stateFactory, Question, imageSelector, formElement, interactionFormElement, formTpl){\n\n    \n    /**\n     * The question state for the selectPoint interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Question\n     */\n    var SelectPointInteractionStateQuestion = stateFactory.extend(Question);\n\n    /**\n     * Initialize the form linked to the interaction\n     */\n    SelectPointInteractionStateQuestion.prototype.initForm = function(){\n\n        var widget = this.widget;\n        var options = widget.options;\n        var interaction = widget.element;\n        var $form = widget.$form;\n\n        $form.html(formTpl({\n            baseUrl         : options.baseUrl,\n            maxChoices      : parseInt(interaction.attr('maxChoices')),\n            minChoices      : parseInt(interaction.attr('minChoices')),\n            choicesCount    : _.size(interaction.getChoices()),\n            data            : interaction.object.attr('data'),\n            width           : interaction.object.attr('width'),\n            height          : interaction.object.attr('height'),\n            type            : interaction.object.attr('type')\n        }));\n\n        imageSelector($form, options); \n\n        formElement.initWidget($form);\n        \n        //init data change callbacks\n        var callbacks = formElement.getMinMaxAttributeCallbacks(this.widget.$form, 'minChoices', 'maxChoices');\n        callbacks.data = function(inteaction, value){\n            interaction.object.attr('data', value);\n            widget.rebuild({\n                ready:function(widget){\n                    widget.changeState('question');\n                }\n            });\n        };\n        callbacks.width = function(inteaction, value){\n            interaction.object.attr('width', value);\n        };\n        callbacks.height = function(inteaction, value){\n            interaction.object.attr('height', value);\n        };\n        callbacks.type = function(inteaction, value){\n            if(!value || value === ''){\n                interaction.object.removeAttr('type');\n            } else {\n                interaction.object.attr('type', value);\n            }\n        };\n        formElement.setChangeCallbacks($form, interaction, callbacks, { validateOnInit : false });\n        \n        interactionFormElement.syncMaxChoices(widget);\n    };\n\n    return SelectPointInteractionStateQuestion;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    /**\n     * Just forward to the correct/map states\n     */\n    function initAnswerState(){\n        //answerStateHelper.forward(this.widget);\n        this.widget.changeState('map');\n    }\n    \n    \n    function exitAnswerState(){\n        //needed an exit callback even empty\n    }\n    \n    \n    /**\n     * The answer state for the selectPoint interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/states/Answer\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Answer\n     */\n    return stateFactory.extend(Answer, initAnswerState, exitAnswerState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Map',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse', \n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicScorePopup',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/response/graphicScoreMappingForm',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'ui/incrementer',\n    'ui/tooltipster'\n], function($, _, __, stateFactory, Map, commonRenderer, instructionMgr, graphicHelper, PciResponse, answerStateHelper, shapeEditor, grahicScorePopup, mappingFormTpl, formElement, incrementer, tooltipster){\n\n    /**\n     * Initialize the Map state.\n     */\n    function initMapState(){\n        var widget          = this.widget;\n        var interaction     = widget.element;\n        var $container      = widget.$original; \n        var response        = interaction.getResponseDeclaration();\n\n        widget._targets = [];\n\n        if(!interaction.paper){\n            return;\n        }\n\n        //really need to destroy before ? \n        commonRenderer.resetResponse(interaction); \n        commonRenderer.destroy(interaction);\n        \n        //add a specific instruction\n        instructionMgr.appendInstruction(interaction, __('Please create areas that correspond to the response and associate them a score.\\n' + \n                                                 'You can also position the target to the exact point as the correct response.'));\n        interaction.responseMappingMode = true;\n        if(_.isPlainObject(response.mapEntries)){\n            response.mapEntries = _.values(response.mapEntries);\n        }\n\n        //here we do not use the common renderer but the creator's widget to get only a basic paper with the choices\n        interaction.paper = widget.createPaper(); \n       \n        //we create the shapes from the response mapping \n        setCurrentResponses(widget);\n        \n        //set up of the shape editor\n        widget._editor = createEditor(widget);\n     \n        listenResponseAttrChange(widget);\n  \n    }\n\n    /**\n     * Creates an identifier based on an areaMapping entry\n     * @private\n     * @param {Object} area - the map entry\n     * @returns {String} the identifier\n     */\n    function areaId(area){\n        return area.shape + '-' + area.coords.replace(/,*/g, '-');\n    }\n\n    /**\n     * Get the index of a area map entry in the entries\n     * @private\n     * @param {Object} response - the response declaration\n     * @param {String} id - the identifier from areaId used to retrieve the index\n     * @returns {Number|Boolean} the index or false\n     */\n    function getAreaIndex(response, id){\n        var found = false;\n        _.forEach(response.mapEntries, function(area, index){\n            if(areaId(area) === id){\n                found = index;\n                return false;\n            }\n        });\n        return found;\n    }\n \n     \n    /**\n     * Creates the shapes on the paper from the responses\n     * @private\n     * @param {Object} widget - the current widget\n     */\n    function setCurrentResponses(widget){\n        var interaction = widget.element;\n        var $container  = widget.$original; \n        var response    = interaction.getResponseDeclaration();\n        var corrects    = _.values(response.getCorrect());\n\n        //set up for the existing areas\n        _.forEach(response.mapEntries, function(area){\n            var shape = widget.createResponseArea(area.shape, area.coords);\n            setUpScoringArea(widget, area, shape, false); \n        });\n\n        //set up a target if\n        if(answerStateHelper.defineCorrect(response) && corrects.length){\n             _.forEach(corrects, function(correct){\n                var point = correct.split(' ');\n                if(point.length >= 2){\n                   var target = graphicHelper.createTarget(interaction.paper, {\n                        point : {\n                            x : point[0],\n                            y : point[1]\n                        }\n                   }); \n                   widget._targets.push(target.id);\n                }\n           });\n        }\n\n        //hide popups by clicking the paper \n        interaction.paper.getById('bg-image-' + interaction.serial).click(function(){\n            $('.-mapping-editor', $container).hide();\n        });\n    }\n\n    /**\n     * Creates and initialize the shape editor \n     * @private\n     * @param {Object} widget - the current widget\n     * @return {ShapeEditor} the editor\n     */\n    function createEditor(widget){\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n\n        //instantiate the shape editor, attach it to the widget to retrieve it during the exit phase\n        var editor = shapeEditor(widget, {\n            currents : response.mapEntries.map(areaId).concat(widget._targets),\n            target : true,\n            shapeCreated : function(shape, type){\n                var point, corrects, area;\n                if(type === 'target'){\n                    //add a correct response \n                    point = shape.data('target');\n                    corrects = response.getCorrect() || [];\n                    corrects.push(qtiPoint(point));\n                    response.setCorrect(corrects);\n\n                } else {\n                    //create an area for the mapping\n                    area = {\n                        shape  : type === 'path' ? 'poly' : type,\n                        coords : graphicHelper.qtiCoords(shape),\n                        mappedValue :  response.mappingAttributes.defaultValue || '0'\n                    };\n                    setUpScoringArea(widget, area, shape, true);\n\n                    response.mapEntries.push(area);\n                }\n            },\n            shapeRemoved : function(id, data){\n                var scoreElt;\n                if(/^target/.test(id) && data.target){\n                    //remove from the correct response\n                    response.setCorrect(\n                        _.without(response.getCorrect(), qtiPoint(data.target))\n                    );\n                } else {\n                    //remove the score and the popup\n                    scoreElt = interaction.paper.getById('score-' + id);\n                    if(scoreElt){\n                        scoreElt.remove();\n                    }\n                    $('#score-popup-' + id).remove(); \n                    \n                    //remove the area from the mapping\n                    _.remove(response.mapEntries, function(area){\n                        return id && areaId(area) === id;\n                    });\n                }\n            },\n            enterHandling : function(shape){\n                if(shape.type === 'set'){\n                    shape.forEach(function(setElt){\n                        if(setElt.type === 'path'){\n                            setElt.attr(graphicHelper._style['target-hover']);\n                            return;\n                        }\n                    });\n    \n                } else {\n                    //move the score back the shape and show the popup\n                    shape.toFront();\n                    $('#score-popup-' + shape.id).show(); \n                }\n            },\n            quitHandling : function(shape){\n                if(shape.type === 'set'){\n                    shape.forEach(function(setElt){\n                        if(setElt.type === 'path'){\n                            setElt.attr(graphicHelper._style['target-success']);\n                            return;\n                        }\n                    });\n                } else {\n                    //move the score in above the shape and hide the popup\n                    var scoreElt = interaction.paper.getById('score-' + shape.id);\n                    if(scoreElt){\n                        scoreElt.show().toFront();\n                    }\n                    $('#score-popup-' + shape.id).hide();\n                } \n            },\n            shapeChanging : function(shape){\n                //move the score and the popup to create them again once the shape has moved\n                var scoreElt = interaction.paper.getById('score-' + shape.id);\n                if(scoreElt){\n                    scoreElt.remove();\n                }\n                $('#score-popup-' + shape.id).remove(); \n            },\n            shapeChange : function(shape){\n                //now the shape has moved, so we update the mapping and create again the score and the popup\n                var index = getAreaIndex(response, shape.id);\n                var mapEntry;\n                if(index !== false){\n                    mapEntry = response.mapEntries[index];\n                    response.mapEntries[index].coords = graphicHelper.qtiCoords(shape);\n                    setUpScoringArea(widget, mapEntry, shape, mapEntry.mappedValue === response.mappingAttributes.defaultValue);\n                    shape.id = areaId(mapEntry);\n                }\n            }\n        });\n\n        //Create our brand new editor\n        editor.create();\n\n        return editor;\n    }\n\n    /**\n     * Format a point to the qti format\n     * @param {Object} point\n     * @param {Number} point.x \n     * @param {Number} point.y\n     * @returns {String} the point as \"x y\"\n     */\n    function qtiPoint(point){\n        return Math.round(point.x) + ' ' + Math.round(point.y);\n    }\n \n    /**\n     * Creates the score element and the popup to view/edit the score \n     * @private\n     * @param {Object} widget - the current widget\n     * @param {Object} area   - the response area entry\n     * @param {Raphael.Element} shape   - the related shape\n     * @param {Boolean} default - if the score uses the default value\n     */\n    function setUpScoringArea(widget, area, shape, defaults){\n        var interaction     = widget.element;\n        var $container      = widget.$original; \n        var isResponsive    = $container.hasClass('responsive');\n        var response        = interaction.getResponseDeclaration();\n        var id              = areaId(area);        \n        var $imageBox       = $('.main-image-box', $container);\n        var $popup          = grahicScorePopup(interaction.paper, shape, $imageBox, isResponsive);\n        var score           = area.mappedValue || response.mappingAttributes.defaultValue || '0';\n\n        var scoreElt    = graphicHelper.createShapeText(interaction.paper, shape, {\n                    id          : 'score-' + id,\n                    content     : area.mappedValue + '',\n                    style       : 'score-text-default',\n                    title       : __('Score value'),\n                    shapeClick  : true\n                });\n        scoreElt.data('default', !!defaults);\n        shape.id = id; \n\n        $popup.attr('id', 'score-popup-' + id);\n\n        //create manually the mapping form (detached)\n        var $form = $(mappingFormTpl({\n            score     : area.mappedValue,\n            scoreMin  : response.getMappingAttribute('lowerBound'),\n            scoreMax  : response.getMappingAttribute('upperBound'),\n            noCorrect : true\n        }));\n        \n        //set up the form data binding\n        formElement.setChangeCallbacks($form, response, {\n            score : function(response, value){\n                if(value === ''){\n                    scoreElt.attr({text : response.mappingAttributes.defaultValue})\n                             .data('default', true);\n                } else {\n                    scoreElt.attr({text : value})\n                             .data('default', false);\n                }\n                area.mappedValue = parseFloat(value);\n            }\n        });\n        $form.appendTo($popup);\n    }\n\n    /**\n     * Listen for changes in the response form that affects the creator : defaultValue and defineCorrect. \n     * @private\n     * @param {Object} widget - the current widget\n     */\n    function listenResponseAttrChange(widget){\n        var interaction = widget.element;\n        var $container = widget.$container;        \n        var $target = $container.find('[data-type=\"target\"]');\n        var $separator = $target.prev('.separator');\n\n        //update the default scores when the form value change\n        widget.on('mappingAttributeChange', function(data){\n            if(data.key === 'defaultValue'){\n                interaction.paper.forEach(function(element){\n                    if(/^score/.test(element.id) && element.data('default') === true){\n                        element.attr({text : data.value });\n                    }\n                });\n            }\n        });\n\n        //update the targets when the defineCorrect field cahnges\n        widget.on('metaChange', function(data){\n            if(data.key === 'defineCorrect'){\n               if(data.value){\n                    $target.show();\n                    $separator.show();\n                } else {\n                    $target.hide();\n                    $separator.hide();\n    \n                    //remove targets\n                    _.forEach(widget._targets, function(targetId){\n                        var target = interaction.paper.getById(targetId);\n                        var layer  = interaction.paper.getById('layer-' + targetId);\n                        target.remove();\n                        layer.remove();\n                    }); \n                }\n            } \n        });\n    }\n\n    /**\n     * Exit the map state\n     */\n    function exitMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n\n        if(!interaction.paper){\n            return;\n        }\n\n        if(widget._editor){\n            widget._editor.destroy();\n        }\n        \n        //destroy the common renderer\n        commonRenderer.resetResponse(interaction); \n        commonRenderer.destroy(interaction); \n        instructionMgr.removeInstructions(interaction);\n\n        //initialize again the widget's paper\n        interaction.paper = this.widget.createPaper();\n    }\n\n    /**\n     * The map answer state for the selectPoint interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Map\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Map\n     */\n    return  stateFactory.create(Map, initMapState, exitMapState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Map'\n], function(factory, states){\n\n    //creates a state bundle for the interaction\n    return factory.createBundle(states, arguments);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/Widget',[\n    'jquery', 'lodash', 'i18n',\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/states',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n], function($, _, __, Widget, GraphicWidget, states, graphicHelper){\n\n    /**\n     * The Widget that provides components used by the QTI Creator for the SelectPoint Interaction\n     *\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/Widget\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/GraphicInteraction/Widget\n     *\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/Widget\n     */      \n    var SelectPointInteractionWidget = _.extend(Widget.clone(), GraphicWidget, {\n\n        /**\n         * Initialize the widget\n         * @see {taoQtiItem/qtiCreator/widgets/interactions/Widget#initCreator}\n         * @param {Object} options - extra options \n         * @param {String} options.baseUrl - the resource base url\n         * @param {jQueryElement} options.choiceForm = a reference to the form of the choices\n         */\n        initCreator : function(options){\n            var paper;\n            this.baseUrl = options.baseUrl;\n            this.choiceForm = options.choiceForm;\n            \n            this.registerStates(states);\n            \n            //call parent initCreator\n            Widget.initCreator.call(this);\n           \n            paper = this.createPaper(); \n            if(paper){\n                this.element.paper = paper;\n            }\n        },\n\n        /**\n         * Gracefull destroy the widget\n         * @see {taoQtiItem/qtiCreator/widgets/Widget#destroy}\n         * @param {Object} options - extra options \n         * @param {String} options.baseUrl - the resource base url\n         * @param {jQueryElement} options.choiceForm = a reference to the form of the choices\n         */\n        destroy : function(){\n\n            var $container = this.$original;\n            var $item      = $container.parents('.qti-item');\n\n            //stop listening the resize\n            $item.off('resize.gridEdit.' + this.element.serial);\n            $(window).off('resize.qti-widget.' + this.element.serial);\n            $container.off('resize.qti-widget.' + this.element.serial);\n\n            //call parent destroy\n            Widget.destroy.call(this);\n        },\n\n        /**\n         * Create shapes for the response mapping areas\n         * @param {String} shapeType - the QTI shape type \n         * @param {String} coords - the QTI shape coords\n         * @returns {Raphael.Element} the shape\n         */ \n        createResponseArea : function(shapeType, coords){\n            return graphicHelper.createElement(this.element.paper, shapeType, coords, {\n                touchEffect : false\n            });\n        }\n\n   });\n\n    return SelectPointInteractionWidget;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/renderers/interactions/SelectPointInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/Widget'\n], function(_, SelectPointInteraction, SelectPointInteractionWidget){\n        \n    /**\n     * The CreatorSelectPointInteraction  Renderer \n     * @extends taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction\n     * @exports taoQtiItem/qtiCreator/renderers/interactions/SelectPointInteraction\n     */\n    var CreatorSelectPointInteraction = _.clone(SelectPointInteraction);\n\n    /**\n     * Render the interaction for authoring.\n     * It delegates the rendering to the widget layer.\n     * @param {Object} interaction - the model\n     * @param {Object} [options] - extra options\n     */\n    CreatorSelectPointInteraction.render = function(interaction, options){\n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        options.choiceForm = this.getOption('choiceOptionForm');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        \n        return SelectPointInteractionWidget.build(\n            interaction,\n            SelectPointInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorSelectPointInteraction;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/sliderInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-sliderInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"sliderInteraction\\\" >\\r\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\r\\n    <div class=\\\"instruction-container\\\"></div>\\r\\n</div>\";\n  return buffer;\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/SliderInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/sliderInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'nouislider'\n], function($, _, __,tpl, containerHelper, instructionMgr, pciResponse){\n    'use strict';\n\n    var _slideTo = function(options){\n        options.sliderCurrentValue.find('.qti-slider-cur-value').text(options.value);\n        options.sliderValue.val(options.value);\n    };\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10333\n     *\n     * @param {object} interaction\n     */\n    var render = function(interaction){\n\n        var attributes = interaction.getAttributes(),\n            $container = interaction.getContainer(),\n            $el = $('<div />').attr({'id' : attributes.identifier + '-qti-slider', 'class' : 'qti-slider'}), //slider element\n        $sliderLabels = $('<div />').attr({'class' : 'qti-slider-values'}),\n        $sliderCurrentValue = $('<div />').attr({'id' : attributes.identifier + '-qti-slider-cur-value', 'class' : 'qti-slider-cur-value'}), //show the current selected value\n        $sliderValue = $('<input />').attr({'type' : 'hidden', 'id' : attributes.identifier + '-qti-slider-value'}); //the input that always holds the slider value\n\n        //getting the options\n        var orientation = 'horizontal',\n            reverse = typeof attributes.reverse !== 'undefined' && attributes.reverse ? true : false, //setting the slider whether to be reverse or not\n            min = parseInt(attributes.lowerBound),\n            max = parseInt(attributes.upperBound),\n            step = typeof attributes.step !== 'undefined' && attributes.step ? parseInt(attributes.step) : 1, //default value as per QTI standard\n            steps = (max - min) / step; //number of the steps\n\n        //add the containers\n        $sliderCurrentValue.append('<span class=\"qti-slider-cur-value-text\">'+__('Current value:')+' </span>')\n            .append('<span class=\"qti-slider-cur-value\"></span>');\n\n        $sliderLabels.append('<span class=\"slider-min\">' + (!reverse ? min : max) + '</span>')\n            .append('<span class=\"slider-max\">' + (!reverse ? max : min) + '</span>');\n\n        interaction.getContainer().append($el)\n            .append($sliderLabels)\n            .append($sliderCurrentValue)\n            .append($sliderValue);\n\n        //setting the orientation of the slider\n        if(typeof attributes.orientation !== 'undefined' && $.inArray(attributes.orientation, ['horizontal', 'vertical']) > -1){\n            orientation = attributes.orientation;\n        }\n\n        var sliderSize = 0;\n\n        if(orientation === 'horizontal'){\n            $container.addClass('qti-slider-horizontal');\n        }else{\n            var maxHeight = 300;\n            sliderSize = steps * 20;\n            if(sliderSize > maxHeight){\n                sliderSize = maxHeight;\n            }\n            $container.addClass('qti-slider-vertical');\n            $el.height(sliderSize + 'px');\n            $sliderLabels.height(sliderSize + 'px');\n        }\n\n        //set the middle value if the stepLabel attribute is enabled\n        if(typeof attributes.stepLabel !== 'undefined' && attributes.stepLabel){\n            var middleStep = parseInt(steps / 2),\n                leftOffset = (100 / steps) * middleStep,\n                middleValue = reverse ? max - (middleStep * step) : min + (middleStep * step);\n\n            if(orientation === 'horizontal'){\n                $sliderLabels.find('.slider-min').after('<span class=\"slider-middle\" style=\"left:' + leftOffset + '%\">' + middleValue + '</span>');\n            }else{\n                $sliderLabels.find('.slider-min').after('<span class=\"slider-middle\" style=\"top:' + leftOffset + '%\">' + middleValue + '</span>');\n            }\n\n        }\n\n        //create the slider\n        $el.noUiSlider({\n            start : reverse ? max : min,\n            range: {\n                'min': min,\n                'max': max\n            },\n            step : step,\n            orientation : orientation\n        }).on('slide', function(e){\n            var val = parseInt($(this).val());\n            if((interaction.attr('reverse'))){\n                val = (max + min) - val;\n            }\n            val = Math.round(val * 1000) / 1000;\n            _slideTo({\n                'value' : val,\n                'sliderValue' : $sliderValue,\n                'sliderCurrentValue' : $sliderCurrentValue\n            });\n\n            containerHelper.triggerResponseChangeEvent(interaction);\n        });\n\n        _slideTo({\n            'value' : min,\n            'sliderValue' : $sliderValue,\n            'sliderCurrentValue' : $sliderCurrentValue\n        });\n    };\n\n    var resetResponse = function(interaction){\n        var attributes = interaction.getAttributes(),\n            $el = $('#' + attributes.identifier + '-qti-slider'),\n            $sliderValue = $('#' + attributes.identifier + '-qti-slider-value'),\n            $sliderCurrentValue = $('#' + attributes.identifier + '-qti-slider-cur-value'),\n            min = parseInt(attributes.lowerBound),\n            max = parseInt(attributes.upperBound),\n            reverse = typeof attributes.reverse !== 'undefined' && attributes.reverse ? true : false,\n            startValue = reverse ? max : min;\n\n        _slideTo({\n            'value' : min,\n            'sliderValue' : $sliderValue,\n            'sliderCurrentValue' : $sliderCurrentValue\n        });\n\n        $el.val(startValue);\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10333\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n        var attributes = interaction.getAttributes(),\n            $sliderValue = $('#' + attributes.identifier + '-qti-slider-value'),\n            $sliderCurrentValue = $('#' + attributes.identifier + '-qti-slider-cur-value'),\n            $el = $('#' + attributes.identifier + '-qti-slider'),\n            min = parseInt(attributes.lowerBound),\n            max = parseInt(attributes.upperBound),\n            value;\n\n        value = pciResponse.unserialize(response, interaction)[0];\n\n        _slideTo({\n            'value' : value,\n            'sliderValue' : $sliderValue,\n            'sliderCurrentValue' : $sliderCurrentValue\n        });\n\n        $el.val(interaction.attr('reverse') ? (max + min) - value : value);\n    };\n\n    var _getRawResponse = function(interaction){\n\n        var value,\n            attributes = interaction.getAttributes(),\n            baseType = interaction.getResponseDeclaration().attr('baseType'),\n            min = parseInt(attributes.lowerBound),\n            $sliderValue = $('#' + attributes.identifier + '-qti-slider-value');\n\n        if(baseType === 'integer'){\n            value = parseInt($sliderValue.val());\n        }else if(baseType === 'float'){\n            value = parseFloat($sliderValue.val());\n        }\n\n        return isNaN(value) ? min : value;\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10333\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        return pciResponse.serialize([_getRawResponse(interaction)], interaction);\n    };\n\n    var destroy = function(interaction) {\n        var $container = interaction.getContainer();\n\n        $container.empty();\n\n        //remove all references to a cache container\n        containerHelper.reset(interaction);\n    };\n\n    /**\n     * Set the interaction state. It could be done anytime with any state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {Object} state - the interaction state\n     */\n    var setState  = function setState(interaction, state){\n        if(_.isObject(state)){\n            if(state.response){\n                interaction.resetResponse();\n                interaction.setResponse(state.response);\n            }\n        }\n    };\n\n    /**\n     * Get the interaction state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the interaction current state\n     */\n    var getState = function getState(interaction){\n        var $container;\n        var state =  {};\n        var response =  interaction.getResponse();\n\n        if(response){\n            state.response = response;\n        }\n        return state;\n    };\n\n\n    return {\n        qtiClass : 'sliderInteraction',\n        template : tpl,\n        render : render,\n        getContainer : containerHelper.get,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy,\n        setState : setState,\n        getState : getState\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/slider', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"\\n<div class=\\\"panel\\\">\\n    <label for=\\\"lowerBound\\\" class=\\\"spinner\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Lower Bound\", options) : helperMissing.call(depth0, \"__\", \"Lower Bound\", options)))\n    + \"</label>\\n    <input name=\\\"lowerBound\\\" value=\\\"\";\n  if (helper = helpers.lowerBound) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.lowerBound); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" type=\\\"text\\\" />\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The lower bound of the slider\", options) : helperMissing.call(depth0, \"__\", \"The lower bound of the slider\", options)))\n    + \"</span>\\n    <label for=\\\"upperBound\\\" class=\\\"spinner\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Upper Bound\", options) : helperMissing.call(depth0, \"__\", \"Upper Bound\", options)))\n    + \"</label>\\n    <input name=\\\"upperBound\\\" value=\\\"\";\n  if (helper = helpers.upperBound) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.upperBound); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" type=\\\"text\\\" />\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The upper bound of the slider\", options) : helperMissing.call(depth0, \"__\", \"The upper bound of the slider\", options)))\n    + \"</span>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"step\\\" class=\\\"spinner\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Step\", options) : helperMissing.call(depth0, \"__\", \"Step\", options)))\n    + \"</label>\\n    <input name=\\\"step\\\" value=\\\"\";\n  if (helper = helpers.step) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.step); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.upperBound) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.upperBound); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The number of units corresponding to a step on the slider\", options) : helperMissing.call(depth0, \"__\", \"The number of units corresponding to a step on the slider\", options)))\n    + \"</span>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Question',[\n'taoQtiItem/qtiCreator/widgets/states/factory',\n'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/slider'\n], function(stateFactory, Question, formElement, formTpl){\n    var SliderInteractionStateQuestion = stateFactory.extend(Question);\n    SliderInteractionStateQuestion.prototype.initForm = function(){\n        var _widget = this.widget,\n        $form = _widget.$form,\n        interaction = _widget.element;\n\n        $form.html(formTpl({\n            // tpl data for the interaction\n            lowerBound : parseFloat(interaction.attr('lowerBound')),\n            upperBound : parseFloat(interaction.attr('upperBound')),\n            orientation : interaction.attr('orientation'),\n            reverse : !!interaction.attr('reverse'),\n            step : parseInt(interaction.attr('step')),\n            stepLabel : !!interaction.attr('stepLabel')\n        }));\n        \n        formElement.initWidget($form);\n        //  init data change callbacks\n        var callbacks = {};\n        \n        // -- lowerBound Callback\n        callbacks.lowerBound = function(interaction, attrValue, attrName){\n            \n            interaction.attr('lowerBound', parseFloat(attrValue));\n            \n            var lowerBound = interaction.attr('lowerBound');\n            var upperBound = interaction.attr('upperBound');\n            var sliderLength = upperBound-lowerBound; //the lenght of the slider\n            var step = interaction.attr('step');\n            var reverse = !!interaction.attr('reverse');\n\n            //if min is greater than max change upperBound to be like lowerBound\n            if(lowerBound>upperBound){\n                callbacks.upperBound(interaction, lowerBound);\n                _widget.$form.find('input[name=\"upperBound\"]').val(lowerBound);\n            }\n            \n            //check if the lendth of the slide is smaller than the step\n            if(sliderLength<step && sliderLength>=0){\n                callbacks.step(interaction, sliderLength);\n                _widget.$form.find('input[name=\"step\"]').val(sliderLength);\n            }\n            _widget.$container.find((!reverse) ? '.slider-min' : '.slider-max').text(attrValue);\n            _widget.$container.find('span.qti-slider-cur-value').text(lowerBound);\n            _widget.$container.find('.qti-slider').noUiSlider({ range: { 'min': lowerBound, 'max': upperBound }}, true);\n            _widget.$container.find('.qti-slider').val(lowerBound);\n        };\n        \n        // -- upperBound Callback\n        callbacks.upperBound = function(interaction, attrValue, attrName){\n            \n            interaction.attr('upperBound', parseFloat(attrValue));\n            \n            var lowerBound = interaction.attr('lowerBound');\n            var upperBound = interaction.attr('upperBound');\n            var sliderLength = upperBound-lowerBound; //the lenght of the slider\n            var step = interaction.attr('step');\n            var reverse = !!interaction.attr('reverse');\n            \n            //if max is smaller than min then change lowerBound to be like upperBound\n            if(upperBound<lowerBound){\n                callbacks.lowerBound(interaction, upperBound);\n                _widget.$form.find('input[name=\"lowerBound\"]').val(upperBound);\n            }\n            \n            //check if the lendth of the slide is smaller than the step\n            if(sliderLength<step && sliderLength>=0){\n                callbacks.step(interaction, sliderLength);\n                _widget.$form.find('input[name=\"step\"]').val(sliderLength);\n            }\n            _widget.$form.find('input[name=\"step\"]').incrementer('options', {max: upperBound});\n            _widget.$container.find((!reverse) ? '.slider-max' : '.slider-min').text(attrValue);\n            _widget.$container.find('.qti-slider').noUiSlider({ range: { 'min': interaction.attr('lowerBound'), 'max': interaction.attr('upperBound') } }, true);\n        };\n        \n        // -- orientation Callback\n        callbacks.orientation = function(interaction, attrValue, attrName){\n            interaction.attr('orientation', attrValue);\n            \n            var orientation = (interaction.attr('orientation')) ? interaction.attr('orientation') : 'horizontal';\n            var reverse = interaction.attr('reverse');\n            \n            _widget.$container.find('.qti-slider').noUiSlider({ 'orientation': interaction.attr('orientation') }, true);\n        };\n        \n        // -- reverse Callback\n        callbacks.reverse = function(interaction, attrValue, attrName){\n            \n            interaction.attr('reverse', !!attrValue);\n            \n            var reverse = interaction.attr('reverse');\n            var lowerBound = parseInt(interaction.attr('lowerBound'));\n            var upperBound = parseInt(interaction.attr('upperBound'));\n            var $sliderElt = _widget.$container.find('.qti-slider');\n            var start = (reverse) ? upperBound : lowerBound;\n            $sliderElt.noUiSlider({ start: start }, true);\n            \n            _widget.$container.find('span.qti-slider-cur-value').text(lowerBound);\n            _widget.$container.find('.slider-min').text(!reverse ? lowerBound : upperBound);\n            _widget.$container.find('.slider-max').text(!reverse ? upperBound : lowerBound);\n        };\n        \n        // -- step Callback\n        callbacks.step = function(interaction, attrValue, attrName){\n            \n            var lowerBound = interaction.attr('lowerBound');\n            var upperBound = interaction.attr('upperBound');\n            var currentStep = parseInt(attrValue);\n            var sliderLength = upperBound-lowerBound; //the lenght of the slider\n            if(sliderLength>=currentStep){\n                interaction.attr('step', currentStep);\n                _widget.$container.find('.qti-slider').noUiSlider({ 'step': interaction.attr('step') }, true);\n                _widget.$form.find('input[name=\"step\"]').incrementer('options', {max: sliderLength});\n            }\n        };\n        \n        // -- stepLabel Callback\n        callbacks.stepLabel = function(interaction, attrValue, attrName){\n            \n            interaction.attr('stepLabel', !!attrValue);\n            \n            _widget.$container.find('span.slider-middle').remove();\n            \n            if (interaction.attr('stepLabel')) {\n                var upperBound = interaction.attr('upperBound');\n                var lowerBound = interaction.attr('lowerBound');\n                var step = interaction.attr('step');\n                var reverse = interaction.attr('reverse');\n                    \n                var steps = parseInt((upperBound - lowerBound) / step);\n                var middleStep = parseInt(steps / 2);\n                var leftOffset = (100 / steps) * middleStep;\n                var middleValue = (reverse) ? upperBound - middleStep * step : lowerBound + middleStep * step;\n                _widget.$container.find('.slider-min').after('<span class=\"slider-middle\" style=\"left:' + leftOffset + '%\">' + middleValue + '</span>');\n            }\n        };\n        \n        formElement.setChangeCallbacks($form, interaction, callbacks);\n    };\n    return SliderInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Answer',[\n'taoQtiItem/qtiCreator/widgets/states/factory',\n'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    var SliderInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        \n        // By default, select the correct state when entering response edition.\n        this.widget.changeState('correct');\n        \n    }, function(){\n        \n    });\n    return SliderInteractionStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Correct',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/SliderInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'lodash',\n    'i18n'\n], function(stateFactory, Correct, commonRenderer, instructionMgr, _, __){\n\n    var SliderInteractionStateCorrect = stateFactory.create(Correct, function(){\n        \n        _createResponseWidget(this.widget);\n        \n    }, function(){\n        \n        _destroyResponseWidget(this.widget);\n        \n    });\n    \n    var _createResponseWidget = function(widget){\n\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var correctResponse = _.values(response.getCorrect());\n\n        commonRenderer.setResponse(interaction, _formatResponse(correctResponse));\n        \n        var $sliderElt = widget.$container.find('.qti-slider');\n        $sliderElt.removeAttr('disabled');\n\n        instructionMgr.appendInstruction(interaction, __('Please define the correct response using the slider.'));\n\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            response.setCorrect(_unformatResponse(data.response));\n        });\n    };\n    \n    var _destroyResponseWidget = function(widget){\n        \n        var $sliderElt = widget.$container.find('.qti-slider');\n        var lowerBound = widget.element.attributes.lowerBound;\n        \n        $sliderElt.attr('disabled', 'disabled');\n        $sliderElt.val(lowerBound);\n        widget.$container.find('span.qti-slider-cur-value').text('' + lowerBound);\n        \n        instructionMgr.removeInstructions(widget.element);\n        widget.$container.off('responseChange.qti-widget');\n    };\n    \n    var _formatResponse = function(response){\n        return {\"base\" : {\"integer\" : response}};\n    };\n\n    var _unformatResponse = function(formatedResponse){\n        return [formatedResponse.base.integer];\n    };\n    \n    return SliderInteractionStateCorrect;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/states',[\n'taoQtiItem/qtiCreator/widgets/states/factory',\n'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n'taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Question',\n'taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Answer',\n'taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Correct'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/Widget',[\n'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n'taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/states'\n], function(Widget, states){\n    \n    var SliderInteractionWidget = Widget.clone();\n    \n    SliderInteractionWidget.initCreator = function(){\n        this.registerStates(states);\n        Widget.initCreator.call(this);\n        \n        // Disable slider until response edition.\n        this.$container.find('.qti-slider').attr('disabled', 'disabled');\n    };\n    \n    return SliderInteractionWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/interactions/SliderInteraction',[\n'lodash',\n'taoQtiItem/qtiCommonRenderer/renderers/interactions/SliderInteraction',\n'taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/Widget'\n], function(_, SliderInteraction, SliderInteractionWidget){\n    \n    var CreatorSliderInteraction = _.clone(SliderInteraction);\n    \n    CreatorSliderInteraction.render = function(interaction, options){\n        \n        SliderInteraction.render(interaction);\n        \n        return SliderInteractionWidget.build(\n                interaction,\n                SliderInteraction.getContainer(interaction),\n                this.getOption('interactionOptionForm'),\n                this.getOption('responseOptionForm'),\n                options\n        );\n    };\n    \n    return CreatorSliderInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/textEntryInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<input class=\\\"qti-interaction qti-inlineInteraction qti-textEntryInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"textEntryInteraction\\\" type=\\\"text\\\">\";\n  return buffer;\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/TextEntryInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/textEntryInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'polyfill/placeholders',\n    'tooltipster'\n], function($, _, __, tpl, containerHelper, instructionMgr, pciResponse){\n    'use strict';\n\n    /**\n     * Setting the pattern mask for the input, for browsers which doesn't support this feature\n     * @param {jQuery} $element\n     * @param {string} pattern\n     * @returns {undefined}\n     */\n    var _setPattern = function($element, pattern){\n        var patt = new RegExp('^' + pattern + '$'),\n            patternSupported = ('pattern' in document.createElement('input'));\n\n\n\n\n        $element.attr('pattern', pattern);\n        //test when some data is entering in the input field\n        $element.on('keyup', function(){\n            $element.removeClass('field-error');\n            if(!patt.test($element.val())){\n\n\n                /*\n                 * FIXME WTF is this check ? If I understand if there is a pattern attribute,\n                 *\n                 * --- orinal comment:\n                 * checking if pattern attribute is not supported of the browser\n                 * or if the browser is safari(bug with pattern attribute support)\n                 *\n                 */\n                if(!patternSupported || navigator.userAgent.match(/Safari/i)){\n                    $element.addClass('field-error');\n                }\n                $element.tooltipster('show');\n            } else {\n                $element.tooltipster('hide');\n            }\n        });\n    };\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10333\n     *\n     * @param {object} interaction\n     */\n    var render = function(interaction){\n        var attributes = interaction.getAttributes(),\n            $el = interaction.getContainer();\n\n\n\n        //setting up the width of the input field\n        if(attributes.expectedLength){\n            $el.css('width', parseInt(attributes.expectedLength) + 'em');\n        }\n\n        //checking if there's a pattern mask for the input\n        if(attributes.patternMask){\n            //set up the tooltip plugin for the input\n            $el.tooltipster({\n                theme: 'tao-error-tooltip',\n                content: __('This is not a valid answer'),\n                delay: 350,\n                trigger: 'custom'\n            });\n\n            _setPattern($el, attributes.patternMask);\n        }\n\n        //checking if there's a placeholder for the input\n        if(attributes.placeholderText){\n            $el.attr('placeholder', attributes.placeholderText);\n        }\n\n        $el.on('keyup', _.throttle(function(){\n            containerHelper.triggerResponseChangeEvent(interaction);\n        }, 300, {leading : false}));\n    };\n\n    var resetResponse = function(interaction){\n        interaction.getContainer().val('');\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10333\n     *\n     * Special value: the empty object value {} resets the interaction responses\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n\n        var responseValue;\n\n        try{\n            responseValue = pciResponse.unserialize(response, interaction);\n        }catch(e){\n        }\n\n        if(responseValue && responseValue.length){\n            interaction.getContainer().val(responseValue[0]);\n        }\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10333\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        var ret = {'base' : {}},\n        value,\n            $el = interaction.getContainer(),\n            attributes = interaction.getAttributes(),\n            baseType = interaction.getResponseDeclaration().attr('baseType'),\n            numericBase = attributes.base || 10;\n\n        if(attributes.placeholderText && $el.val() === attributes.placeholderText){\n            value = '';\n        }else{\n            if(baseType === 'integer'){\n                value = parseInt($el.val(), numericBase);\n            }else if(baseType === 'float'){\n                value = parseFloat($el.val());\n            }else if(baseType === 'string'){\n                value = $el.val();\n            }\n        }\n\n        ret.base[baseType] = isNaN(value) && typeof value === 'number' ? '' : value;\n\n        return ret;\n    };\n\n    var destroy = function(interaction){\n\n        //remove event\n        $(document).off('.commonRenderer');\n        containerHelper.get(interaction).off('.commonRenderer');\n\n        //remove instructions\n        instructionMgr.removeInstructions(interaction);\n\n        //remove all references to a cache container\n        containerHelper.reset(interaction);\n    };\n\n    /**\n     * Set the interaction state. It could be done anytime with any state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {Object} state - the interaction state\n     */\n    var setState  = function setState(interaction, state){\n        if(_.isObject(state)){\n            if(state.response){\n                interaction.resetResponse();\n                interaction.setResponse(state.response);\n            }\n        }\n    };\n\n    /**\n     * Get the interaction state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the interaction current state\n     */\n    var getState = function getState(interaction){\n        var $container;\n        var state =  {};\n        var response =  interaction.getResponse();\n\n        if(response){\n            state.response = response;\n        }\n        return state;\n    };\n\n\n    return {\n        qtiClass : 'textEntryInteraction',\n        template : tpl,\n        render : render,\n        getContainer : containerHelper.get,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy,\n        setState : setState,\n        getState : getState\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/textEntry', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<div class=\\\"panel\\\">\\r\\n    <label for=\\\"placeholderText\\\" class=\\\"spinner\\\">Placeholder Text</label>\\r\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\r\\n    <input name=\\\"placeholderText\\\" value=\\\"\";\n  if (helper = helpers.placeholderText) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.placeholderText); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\r\\n    <span class=\\\"tooltip-content\\\">\\r\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"In visual environments, string interactions are typically represented by empty boxes into which the candidate writes or types.  Delivery engines should use the value of this attribute (if provided) instead of their default placeholder text when this is required.\", options) : helperMissing.call(depth0, \"__\", \"In visual environments, string interactions are typically represented by empty boxes into which the candidate writes or types.  Delivery engines should use the value of this attribute (if provided) instead of their default placeholder text when this is required.\", options)))\n    + \"\\r\\n    </span>\\r\\n</div>\\r\\n<div class=\\\"panel\\\">\\r\\n    <label for=\\\"patternMask\\\" class=\\\"spinner\\\">Pattern Mask</label>\\r\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\r\\n    <input name=\\\"patternMask\\\" value=\\\"\";\n  if (helper = helpers.patternMask) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.patternMask); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" data-validate=\\\"$validRegex;\\\" placeholder=\\\"e.g. [A-Z][a-z]{3,}\\\"/>\\r\\n    <span class=\\\"tooltip-content\\\">\\r\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If given, the pattern mask specifies a regular expression that the candidate's response must match in order to be considered valid.Care is needed to ensure that the format of the required input is clear to the candidate, especially when validity checking of responses is required for progression through a test. This could be done by providing an illustrative sample response in the prompt, for example.\", options) : helperMissing.call(depth0, \"__\", \"If given, the pattern mask specifies a regular expression that the candidate's response must match in order to be considered valid.Care is needed to ensure that the format of the required input is clear to the candidate, especially when validity checking of responses is required for progression through a test. This could be done by providing an illustrative sample response in the prompt, for example.\", options)))\n    + \"\\r\\n    </span>\\r\\n</div>\\r\\n<div class=\\\"panel\\\">\\r\\n    <label for=\\\"expectedLength\\\" class=\\\"spinner\\\">Expected Length</label>\\r\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\r\\n    <input name=\\\"expectedLength\\\" value=\\\"\";\n  if (helper = helpers.expectedLength) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.expectedLength); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"1\\\" data-max=\\\"100\\\" type=\\\"text\\\" />\\r\\n    <span class=\\\"tooltip-content\\\">\\r\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The expectedLength attribute provides a hint to the candidate as to the expected overall length of the desired response measured in number of characters. This is not a validity constraint.\", options) : helperMissing.call(depth0, \"__\", \"The expectedLength attribute provides a hint to the candidate as to the expected overall length of the desired response measured in number of characters. This is not a validity constraint.\", options)))\n    + \"\\r\\n    </span>\\r\\n</div>\\r\\n<div class=\\\"panel\\\">\\r\\n    <label for=\\\"base\\\" class=\\\"spinner\\\">Base</label>\\r\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\r\\n    <input name=\\\"base\\\" value=\\\"\";\n  if (helper = helpers.base) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.base); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"1\\\" data-max=\\\"100\\\" type=\\\"text\\\" />\\r\\n    <span class=\\\"tooltip-content\\\">\\r\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If the string interaction is bound to a numeric response variable then the base attribute must be used to set the number base in which to interpret the value entered by the candidate.\", options) : helperMissing.call(depth0, \"__\", \"If the string interaction is bound to a numeric response variable then the base attribute must be used to set the number base in which to interpret the value entered by the candidate.\", options)))\n    + \"\\r\\n    </span>\\r\\n</div>\\r\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Question',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/textEntry'\n], function(stateFactory, Question, formElement, formTpl){\n\n    var TextEntryInteractionStateQuestion = stateFactory.extend(Question);\n\n    TextEntryInteractionStateQuestion.prototype.initForm = function(){\n        \n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n\n        $form.html(formTpl({\n            base : parseInt(interaction.attr('base')),\n            patternMask : interaction.attr('patternMask'),\n            placeholderText : interaction.attr('placeholderText'),\n            expectedLength : parseInt(interaction.attr('expectedLength'))\n        }));\n\n        formElement.initWidget($form);\n\n        formElement.setChangeCallbacks($form, interaction, {\n            base : formElement.getAttributeChangeCallback(),\n            patternMask : formElement.getAttributeChangeCallback(),\n            placeholderText : formElement.getAttributeChangeCallback(),\n            expectedLength : formElement.getAttributeChangeCallback()\n        });\n    };\n\n    return TextEntryInteractionStateQuestion;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    var TextEntryInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        answerStateHelper.forward(this.widget);\n    }, function(){\n        \n    });\n    \n    return TextEntryInteractionStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Correct',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'lodash',\n    'i18n'\n], function($, stateFactory, Correct, instructionMgr, _, __){\n\n    var TextEntryInteractionStateCorrect = stateFactory.create(Correct, function(){\n\n        var $container = this.widget.$container,\n            response = this.widget.element.getResponseDeclaration(),\n            correct = _.values(response.getCorrect()).pop() || '';\n\n        $container.find('tr[data-edit=correct] input[name=correct]').focus().val(correct);\n        $container.on('keyup.correct', 'tr[data-edit=correct] input[name=correct]', function(){\n            var value = $(this).val();\n            response.setCorrect(value);\n        });\n        instructionMgr.appendInstruction(this.widget.element, __('Please type the correct response in the box below.'));\n\n    }, function(){\n\n        this.widget.$container.off('.correct');\n        instructionMgr.removeInstructions(this.widget.element);\n\n    });\n\n    return TextEntryInteractionStateCorrect;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntry', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<tr class=\\\"\\\" data-edit=\\\"map\\\">\\r\\n    <td data-text><input type=\\\"text\\\" name=\\\"text\\\" value=\\\"\";\n  if (helper = helpers.text) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.text); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-old-text=\\\"\";\n  if (helper = helpers.text) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.text); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"/></td>\\r\\n    <td class=\\\"mini-tlb\\\" colspan=\\\"2\\\">\\r\\n        <label>\\r\\n            <input name=\\\"correct\\\" type=\\\"radio\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.correct), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" />\\r\\n            <span class=\\\"icon-radio\\\"></span>\\r\\n        </label>\\r\\n        <input name=\\\"score\\\" class=\\\"score\\\" value=\\\"\";\n  if (helper = helpers.score) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.score); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\"/>\\r\\n        <span class=\\\"icon-bin\\\" data-role=\\\"delete-option\\\"></span>\\r\\n    </td>\\r\\n</tr>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Map',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntry',\n    'lodash'\n], function($, stateFactory, Map, formElement, optionTpl, _){\n\n    var _getRelatedTextKey = function($elt){\n        return $elt.closest('tr').find('input[name=text]').val();\n    };\n\n    var TextEntryInteractionStateMap = stateFactory.create(Map, function(){\n        \n        this.initMapEntries();\n        this.initFormCallbacks();\n        this.hideCorrectInput();\n        \n    }, function(){\n        \n        this.widget.$container.off('.map');\n        this.widget.$container.find('tr[data-edit=map]:not([data-add-option])').remove();\n    });\n    \n    TextEntryInteractionStateMap.prototype.hideCorrectInput = function(){\n        \n        var $correct = this.widget.$container.find('tr[data-edit=correct]');\n        \n        this.widget.on('metaChange', function(data){\n            if(data.key === 'defineCorrect'){\n                $correct.hide();\n            }\n        });\n        \n        //@todo : fix this!\n        $correct.hide();\n        _.delay(function(){\n            $correct.hide();\n        }, 200);\n        \n    };\n    \n    TextEntryInteractionStateMap.prototype.initFormCallbacks = function(){\n\n        var $container = this.widget.$container,\n            response = this.widget.element.getResponseDeclaration();\n\n        formElement.setChangeCallbacks($container, response, {\n            text : _.throttle(function(response, value){\n\n                var $text = $(this),\n                    oldText = $text.data('old-text'),\n                    $tr = $text.closest('tr'),\n                    correct = !!$tr.find('input[name=correct]:checked').length,\n                    score = parseInt($tr.find('.score').val());\n\n                //@todo trigger validate score to check if is a valid score\n                if(!isNaN(score)){\n                    response.removeMapEntry(oldText, true);\n                    response.setMapEntry(value, score);\n                    $text.data('old-text', value);\n\n                    if(correct){\n                        response.setCorrect(value);\n                    }\n                }\n\n            }, 600),\n            correct : function(response){\n                var text = _getRelatedTextKey($(this));\n                response.setCorrect(text);\n            },\n            score : function(response, value){\n\n                var text = _getRelatedTextKey($(this));\n                var score = parseFloat(value);\n\n                if(!isNaN(score)){\n                    response.setMapEntry(text, score);\n                }\n            }\n        });\n    };\n\n    TextEntryInteractionStateMap.prototype.initMapEntries = function(){\n\n        var _this = this,\n            response = this.widget.element.getResponseDeclaration(),\n            correctValue = _.values(response.getCorrect()).pop(),\n            $container = this.widget.$container,\n            $addOption = $container.find('tr[data-add-option]');\n        \n        var appendOption = function(text, score){\n            \n            var $newOption = $(optionTpl({\n                text : text || '',\n                score : score || 0,\n                correct : (text === correctValue)\n            }));\n            $newOption.show();\n\n            $addOption.before($newOption);\n            \n            preventNullMapEntries();\n        };\n        \n        var preventNullMapEntries = function(){\n            var $deleteButtons = $container.find('tbody [data-role=delete-option]');\n            if($deleteButtons.length === 1){\n                $deleteButtons.css('visibility', 'hidden');\n            }else{\n                $deleteButtons.css('visibility', 'visible');\n            }\n        };\n        \n        if(!_.size(response.mapEntries)){\n            response.mapEntries = {'' : 0};\n        }\n        \n        _.forIn(response.mapEntries, function(score, text){\n            appendOption(text, score);\n        });\n\n        $container.on('click.map', '[data-role=delete-option]', function(){\n\n            //init delete:\n            var $del = $(this);\n            var text = _getRelatedTextKey($del);\n            var correct = !!$del.closest('tr').find('input[name=correct]:checked').length;\n\n            response.removeMapEntry(text, true);\n            $del.closest('tr').remove();\n            preventNullMapEntries();\n            \n            if(correct){\n                response.resetCorrect();//remove correct\n            }\n\n        }).on('click.map', '.add-option', function(){\n\n            //init add option button\n            appendOption('', 0);\n\n            _this.initFormCallbacks();\n        });\n\n    };\n\n    return TextEntryInteractionStateMap;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Map'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntryInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<div class=\\\"widget-box widget-inline widget-textEntryInteraction qti-interaction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-edit=\\\"active\\\">\\r\\n    <div class=\\\"qti-interaction qti-textEntryInteraction\\\">\\r\\n        <table>\\r\\n            <colgroup>\\r\\n                <col class=\\\"text\\\">\\r\\n                <col class=\\\"icon\\\">\\r\\n                <col class=\\\"icon\\\">\\r\\n            </colgroup>\\r\\n            <tbody>\\r\\n                <tr data-edit=\\\"question\\\">\\r\\n                    <td class=\\\"main-option\\\"></td>\\r\\n                    <td colspan=\\\"2\\\"></td>\\r\\n                </tr>\\r\\n                <tr data-edit=\\\"correct\\\">\\r\\n                    <td data-text>\\r\\n                        <div class=\\\"instruction-container\\\"></div>\\r\\n                        <input type=\\\"text\\\" name=\\\"correct\\\" value=\\\"\";\n  if (helper = helpers.text) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.text); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" /></td>\\r\\n                    <td class=\\\"mini-tlb\\\" colspan=\\\"2\\\">\\r\\n                    </td>\\r\\n                </tr>\\r\\n                <tr data-add-option data-edit=\\\"map\\\">\\r\\n                    <td>\\r\\n                        <div class=\\\"add-option\\\">\\r\\n                            <span class=\\\"icon-add\\\"></span>\\r\\n                            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Add another option\", options) : helperMissing.call(depth0, \"__\", \"Add another option\", options)))\n    + \"\\r\\n                        </div>\\r\\n                    </td>\\r\\n                    <td colspan=\\\"2\\\"></td>\\r\\n                </tr>\\r\\n            </tbody>\\r\\n        </table>\\r\\n    </div>\\r\\n\\r\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/Widget',[\n    'lodash',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/states',\n    'tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntryInteraction'\n], function(_, InteractionWidget, states, interactionTpl){\n\n    var TextEntryInteractionWidget = InteractionWidget.clone();\n\n    TextEntryInteractionWidget.initCreator = function(){\n\n        this.registerStates(states);\n\n        InteractionWidget.initCreator.call(this);\n\n        //remove toolbar title, because it is too large\n        this.$container.find('.tlb-title').remove();\n    };\n\n    TextEntryInteractionWidget.renderInteraction = function(){\n\n        var interaction = this.element,\n            tplData = {\n            tag : interaction.qtiClass,\n            serial : interaction.serial,\n            attributes : interaction.attributes\n        };\n\n        return interactionTpl(tplData);\n    };\n\n    TextEntryInteractionWidget.buildContainer = function(){\n        var previous, next;\n        //add a space to be able to place the cursor before and after it.\n        if(this.$original.length){\n            previous = this.$original[0].previousSibling;\n            next = this.$original[0].nextSibling;\n\n            if(!previous || (previous.nodeType === 3 && previous.nodeValue === '') || previous.nodeType !== 3){\n                this.$original.before('&nbsp;');\n            }\n            if(!next || (next.nodeType === 3 && next.nodeValue === '') || next.nodeType !== 3){\n                this.$original.after('&nbsp;');\n            }\n        }\n\n        //set the itemContainer where the actual widget should be append and be positioned absolutely\n        this.$itemContainer = this.$original.parents('.item-editor-item');\n\n        //prepare html: interaction & choices:\n        this.$itemContainer.append(this.renderInteraction());\n        \n        this.$container = this.$itemContainer.find('.widget-textEntryInteraction[data-serial=' + this.element.getSerial() + ']');\n    };\n\n    return TextEntryInteractionWidget;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntryInteraction.placeholder', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"widget-box textEntryInteraction-placeholder\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"textEntryInteraction\\\">\\r\\n    <label>&nbsp;</label>\\r\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/renderers/interactions/TextEntryInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/TextEntryInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/Widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntryInteraction.placeholder'\n], function($, _, TextEntryInteraction, TextEntryInteractionWidget, tpl){\n\n    var CreatorTextEntryInteraction = _.clone(TextEntryInteraction);\n\n    CreatorTextEntryInteraction.template = tpl;\n\n    CreatorTextEntryInteraction.render = function(interaction, options){\n\n        //need to pass choice option form to the interaction widget because it will manage everything\n        options = options || {};\n\n        return TextEntryInteractionWidget.build(\n            interaction,\n            $('.textEntryInteraction-placeholder[data-serial=\"' + interaction.serial + '\"]'),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorTextEntryInteraction;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/uploadInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-uploadInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n\t\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\t<div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"file-upload fixed-grid-row\\\">\\n        <div class=\\\"progressbar\\\"></div>\\n        <span class=\\\"btn-info small col-4\\\"></span>\\n        <span class=\\\"file-name placeholder col-8 truncate\\\"></span>\\n        <input type=\\\"file\\\"/>\\n    </div>\\n</div> \";\n  return buffer;\n  });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technlogies SA (under the project TAO-PRODUCT);\n *\n */\n\n/**\n * @author Sam Sipasseuth <sam@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/UploadInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'context',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/uploadInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/container',\n    'taoQtiItem/qtiCommonRenderer/helpers/instructions/instructionManager',\n    'ui/progressbar',\n    'filereader'\n], function($, _, __, context, tpl, containerHelper, instructionMgr) {\n    'use strict';\n\n    //FIXME this response is global to the app, it must be linked to the interaction!\n\tvar _response = { \"base\" : null };\n\n\tvar _initialInstructions = __('Browse your computer and select the appropriate file.');\n\n\tvar _readyInstructions = __('The selected file is ready to be sent.');\n\n    var _handleSelectedFiles = function(interaction, file) {\n    \tinstructionMgr.removeInstructions(interaction);\n    \tinstructionMgr.appendInstruction(interaction, _initialInstructions);\n\n    \tvar $container = containerHelper.get(interaction);\n\n        // Show information about the processed file to the candidate.\n        var filename = file.name;\n        var filesize = file.size;\n        var filetype = file.type;\n\n        $container.find('.file-name').empty()\n        \t\t\t\t\t\t\t .append(filename);\n\n        // Let's read the file to get its base64 encoded content.\n        var reader = new FileReader();\n\n        // Update file processing progress.\n\n        reader.onload = function (e) {\n        \tinstructionMgr.removeInstructions(interaction);\n        \tinstructionMgr.appendInstruction(interaction, _readyInstructions, function() {\n        \t\tthis.setLevel('success');\n        \t});\n        \tinstructionMgr.validateInstructions(interaction);\n\n        \t$container.find('.progressbar').progressbar('value', 100);\n\n            var base64Data = e.target.result;\n            var commaPosition = base64Data.indexOf(',');\n\n            // Store the base64 encoded data for later use.\n            var base64Raw = base64Data.substring(commaPosition + 1);\n            _response = { \"base\" : { \"file\" : { \"data\" : base64Raw, \"mime\" : filetype, \"name\" : filename } } };\n\n            //FIXME it should trigger a responseChange\n        };\n\n        reader.onloadstart = function (e) {\n        \tinstructionMgr.removeInstructions(interaction);\n        \t$container.find('.progressbar').progressbar('value', 0);\n        };\n\n        reader.onprogress = function (e) {\n        \tvar percentProgress = Math.ceil(Math.round(e.loaded) / Math.round(e.total) * 100);\n        \t$container.find('.progressbar').progressbar('value', percentProgress);\n        }\n\n        reader.readAsDataURL(file);\n    };\n\n    var _resetGui = function(interaction) {\n    \tvar $container = containerHelper.get(interaction);\n    \t$container.find('.file-name').text(__('No file selected'));\n    \t$container.find('.btn-info').text(__('Browse...'));\n    };\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     */\n    var render = function(interaction, options) {\n    \tvar $container = containerHelper.get(interaction);\n    \t_resetGui(interaction);\n\n    \tinstructionMgr.appendInstruction(interaction, _initialInstructions);\n\n    \tvar changeListener = function (e) {\n    \t\tvar file = e.target.files[0];\n\n    \t\t// Are you really sure something was selected\n    \t\t// by the user... huh? :)\n    \t\tif (typeof(file) !== 'undefined') {\n    \t\t\t_handleSelectedFiles(interaction, file);\n    \t\t}\n    \t};\n\n    \tvar $input = $container.find('input');\n\n        $container.find('.progressbar').progressbar();\n\n    \tif (window.File && window.FileReader && window.FileList) {\n    \t\t// Yep ! :D\n            $input.bind('change', changeListener);\n        }\n        else {\n        \t// Nope... :/\n            $input.fileReader({\n    \t        id: 'fileReaderSWFObject',\n    \t        //FIXME this is not going to work outside of TAO\n                filereader: context.taobase_www + 'js/lib/polyfill/filereader.swf',\n    \t        callback: function() {\n    \t            $input.bind('change', changeListener);\n    \t        }\n    \t    });\n        }\n\n    \t// IE Specific hack. It prevents the button to slightly\n    \t// move on click. Special thanks to Dieter Rabber, OAT S.A.\n    \t$input.bind('mousedown', function(e) {\n            e.preventDefault();\n            $(this).blur();\n            return false;\n        });\n    };\n\n    var resetResponse = function(interaction) {\n\n    \tvar $container = containerHelper.get(interaction);\n    \t_resetGui(interaction);\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response) {\n    \tvar $container = containerHelper.get(interaction);\n\n    \tif (response.base !== null) {\n    \t    var filename = (typeof response.base.file.name !== 'undefined') ? response.base.file.name : 'previously-uploaded-file';\n            $container.find('.file-name').empty()\n                                         .text(filename);\n    \t}\n\n    \t_response = response;\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction) {\n        return _response;\n    };\n\n    var destroy = function(interaction){\n\n        //remove event\n        $(document).off('.commonRenderer');\n        containerHelper.get(interaction).off('.commonRenderer');\n\n        //remove instructions\n        instructionMgr.removeInstructions(interaction);\n\n        //remove all references to a cache container\n        containerHelper.reset(interaction);\n    };\n\n    /**\n     * Set the interaction state. It could be done anytime with any state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @param {Object} state - the interaction state\n     */\n    var setState  = function setState(interaction, state){\n        if(_.isObject(state)){\n            if(state.response){\n                interaction.resetResponse();\n                interaction.setResponse(state.response);\n            }\n        }\n    };\n\n    /**\n     * Get the interaction state.\n     *\n     * @param {Object} interaction - the interaction instance\n     * @returns {Object} the interaction current state\n     */\n    var getState = function getState(interaction){\n        var $container;\n        var state =  {};\n        var response =  interaction.getResponse();\n\n        if(response){\n            state.response = response;\n        }\n        return state;\n    };\n\n    return {\n        qtiClass : 'uploadInteraction',\n        template : tpl,\n        render : render,\n        getContainer : containerHelper.get,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy,\n        setState : setState,\n        getState : getState,\n\n        // Exposed private methods for qtiCreator\n        resetGui : _resetGui\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/upload', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    \t\t<option value=\\\"\";\n  if (helper = helpers.mime) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.mime); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.selected), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n    \t\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  \n  return \"selected=\\\"selected\\\"\";\n  }\n\n  buffer += \"<h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"MIME-type\", options) : helperMissing.call(depth0, \"__\", \"MIME-type\", options)))\n    + \"</h3>\\n<span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n<div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The MIME-type attribute describes which kind of file may be uploaded.\", options) : helperMissing.call(depth0, \"__\", \"The MIME-type attribute describes which kind of file may be uploaded.\", options)))\n    + \"</div>\\n\\n<div class=\\\"reset-group\\\">\\n    <select name=\\\"type\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n    \t\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.types), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </select>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/states/Question',[\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/helper/uploadMime',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/upload'\n], function(_, __, stateFactory, Question, formElement, uploadHelper, formTpl){\n\n    var UploadInteractionStateQuestion = stateFactory.extend(Question);\n\n    UploadInteractionStateQuestion.prototype.initForm = function() {\n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n        \n        var types = uploadHelper.getMimeTypes();\n        types.unshift({ \"mime\" : \"any/kind\", \"label\" : __(\"-- Any kind of file --\") });\n        \n        // Prepare the work...\n        if (typeof interaction.attr('type') !== 'undefined') {\n            \n            if (interaction.attr('type') === '') {\n                // Kill the attribute if it is empty.\n                delete interaction.attributes['type'];\n            }\n            else {\n                // Pre-select a value in the types combo box if needed.\n                for (var i in types) {\n                    if (interaction.attr('type') == types[i].mime) {\n                        types[i].selected = true;\n                    }\n                }\n            }\n        }\n        \n        $form.html(formTpl({\n            \"types\" : types\n        }));\n\n        formElement.initWidget($form);\n        \n        callbacks = {};\n        \n        // -- type callback.\n        callbacks['type'] = function(interaction, attrValue){\n            \n            if (attrValue === 'any/kind') {\n                interaction.removeAttr('type');\n            }\n            else {\n                interaction.attr('type', attrValue);\n            }\n        };\n\n        //init data change callbacks\n        formElement.setChangeCallbacks($form, interaction, callbacks);\n    };\n\n    return UploadInteractionStateQuestion;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/states/Question'\n], function(factory, states){\n    //remove answer state, which does not make much sense here\n    return factory.createBundle(states, arguments, ['answer', 'correct', 'map']);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/states/states'\n], function(Widget, states){\n\n    var UploadInteractionWidget = Widget.clone();\n\n    UploadInteractionWidget.initCreator = function(){\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n    };\n\n    return UploadInteractionWidget;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/interactions/uploadInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-uploadInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n\t\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\t<div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"fixed-grid-row file-upload\\\">\\n        <span class=\\\"btn-info small col-4\\\"></span>\\n        <span class=\\\"file-name placeholder col-8 truncate\\\"></span>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/renderers/interactions/UploadInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/UploadInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/Widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/interactions/uploadInteraction'\n], function(_, UploadInteraction, UploadInteractionWidget, tpl){\n    \n    var UploadInteraction = _.clone(UploadInteraction);\n\n    UploadInteraction.template = tpl;\n    UploadInteraction.render = function(interaction, options){\n        \n        UploadInteraction.resetGui(interaction);\n        \n        return UploadInteractionWidget.build(\n            interaction,\n            UploadInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),//note : no response required...\n            options\n        );\n    };\n\n    return UploadInteraction;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/customInteraction/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/editor/customInteractionRegistry',\n    'lodash'\n], function(Widget, ciRegistry, _){\n\n    var CustomInteractionWidget = Widget.clone();\n\n    CustomInteractionWidget.initCreator = function(){\n\n        //note : abstract widget class must not register states\n\n        Widget.initCreator.call(this);\n    };\n\n    CustomInteractionWidget.createToolbar = function(options){\n\n        var creator = ciRegistry.get(this.element.typeIdentifier);\n        options = _.defaults(options || {}, {title : creator.manifest.label});\n\n        return Widget.createToolbar.call(this, options);\n    };\n\n    return CustomInteractionWidget;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/Question',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Question',\n    'jquery',\n    'lib/farbtastic/farbtastic'\n], function(stateFactory, Question, $){\n\n    var CustomInteractionStateQuestion = stateFactory.extend(Question);\n\n    CustomInteractionStateQuestion.prototype.initColorPickers = function(){\n\n        var $colorTriggers = this.widget.$form.find('.color-trigger:not([data-color-picker=initialized])');\n        \n        $colorTriggers.each(function(){\n\n            var $colorTrigger = $(this),\n                $input = $colorTrigger.siblings('input'),\n                color = $input.val();\n\n            //set color recorded in the hidden input to the color trigger\n            $colorTrigger.css('background-color', color);\n        });\n\n        $colorTriggers.on('click.color-picker', function(){\n\n            var $colorTrigger = $(this),\n                $context = $colorTrigger.closest('.item-editor-color-picker'),\n                $container = $context.find('.color-picker-container').show(),\n                $colorPicker = $container.find('.color-picker'),\n                $colorPickerInput = $container.find('.color-picker-input'),\n                $input = $colorTrigger.siblings('input[type=\"hidden\"]'),\n                color = $input.val();\n\n            // Init the color picker\n            $colorPicker.farbtastic('.color-picker-input', $context);\n\n            // Set the color to the currently set on the form init\n            $colorPickerInput.val(color).trigger('keyup');\n\n            // Populate the input with the color on quitting the modal\n            $container.find('.closer').off('click').on('click', function(){\n                $container.hide();\n                $colorPicker.off('.farbtastic');\n            });\n            \n            //listen to color change\n            $colorPicker.off('.farbtastic').on('colorchange.farbtastic', function(e, color){\n                $colorTrigger.css('background-color', color);\n                $input.val(color).trigger('change');\n            });\n            \n        });\n        \n        $colorTriggers.attr('data-color-picker', 'initialized');\n    };\n\n    CustomInteractionStateQuestion.prototype.destroyColorPickers = function(){\n        \n        var $colorTriggers = this.widget.$form.find('.color-trigger');\n        $colorTriggers.off('.color-picker');\n        $colorTriggers.removeAttr('data-color-picker');\n    };\n\n    return CustomInteractionStateQuestion;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/Sleep',[\r\n    'taoQtiItem/qtiCreator/widgets/states/factory',\r\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep',\r\n    'tpl!taoQtiItem/qtiCreator/tpl/notifications/widgetOverlay'\r\n], function(stateFactory, SleepState, overlayTpl){\r\n\r\n    return stateFactory.extend(SleepState, function(){\r\n\r\n        //add transparent protective layer\r\n        this.widget.$container.append(overlayTpl());\r\n\r\n    }, function(){\r\n\r\n        //remove transparent protective layer\r\n        this.widget.$container.children('.overlay').remove();\r\n    });\r\n});\r\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/Sleep'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/media',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n], function(stateFactory, Answer, answerStateHelper, formTpl, formElement){\n\n    //does not much sense for mediaInteraction (same remark for uploadInteraction)\n    //I would recommend disabling the answer button completely and remove this file if no longer required\n    \n    var MediaInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        var _widget = this.widget,\n            interaction = _widget.element;\n        \n        //forward to one of the available sub state, according to the response processing template\n        //answerStateHelper.forward(_widget);\n        \n    }, function(){\n        var _widget = this.widget;\n        \n    });\n    \n    \n    \n    MediaInteractionStateAnswer.prototype.initResponseForm = function(){\n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n\n    };\n    \n    \n    return MediaInteractionStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/static/portableInfoControl/Widget',[\n    'taoQtiItem/qtiCreator/widgets/static/Widget'\n], function(Widget) {\n    \n    var InfoControlWidget = Widget.clone();\n    \n    InfoControlWidget.initCreator = function() {\n        \n        //note : abstract widget class must not register states\n        \n        Widget.initCreator.call(this);\n    };\n    \n    return InfoControlWidget;\n});\n","define('taoQtiItem/qtiCreator/widgets/static/portableInfoControl/states/Sleep',[\r\n    'taoQtiItem/qtiCreator/widgets/states/factory',\r\n    'taoQtiItem/qtiCreator/widgets/states/Sleep',\r\n    'tpl!taoQtiItem/qtiCreator/tpl/notifications/widgetOverlay'\r\n], function(stateFactory, SleepState, overlayTpl){\r\n\r\n    return stateFactory.extend(SleepState, function(){\r\n\r\n        //add transparent protective layer\r\n//        this.widget.$container.append(overlayTpl());\r\n\r\n    }, function(){\r\n\r\n        //remove transparent protective layer\r\n//        this.widget.$container.children('.overlay').remove();\r\n    });\r\n});\r\n\n","define('taoQtiItem/qtiCreator/widgets/static/portableInfoControl/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/portableInfoControl/states/Sleep'\n], function(factory, states){\n    return factory.createBundle(states, arguments, ['answer', 'correct', 'map']);\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/container', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, helper, functionType=\"function\";\n\n\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/Container',['tpl!taoQtiItem/qtiXmlRenderer/tpl/container'], function(tpl){\n    \n    var xhtmlEntities = function(html){\n        //@todo : check other names entities\n        return html.replace(/&nbsp;/g, '&#160;');\n    };\n    \n    var xhtmlEncode = function(encodedStr){\n\n        var returnValue = '';\n\n        if(encodedStr){\n            \n            //<br...> are replaced by <br... />\n            returnValue = encodedStr;\n            returnValue = returnValue.replace(/<br([^>]*)?>/ig, '<br />');\n            returnValue = returnValue.replace(/<hr([^>]*)?>/ig, '<hr />');\n\n            //<img...> are replaced by <img... />\n            returnValue = returnValue.replace(/(<img([^>]*)?\\s?[^\\/]>)+/ig,\n                function($0, $1){\n                    return $0.replace('>', ' />');\n                });\n        }\n\n        return returnValue;\n    };\n    \n    return {\n        qtiClass : '_container',\n        template : tpl,\n        getData:function(container, data){\n            \n            data.body = xhtmlEntities(data.body);\n            data.body = xhtmlEncode(data.body);\n            \n            return data;\n        }\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/element', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, helperMissing=helpers.helperMissing, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \">\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" />\";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.body), {hash:{},inverse:self.program(4, program4, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/Img',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'img',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/item', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, (data == null || data === false ? data : data.key), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"xmlns:\"\n    + escapeExpression(((stack1 = (data == null || data === false ? data : data.key)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"=\\\"\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program4(depth0,data) {\n  \n  var stack1, helper, options;\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n        \";\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program8(depth0,data) {\n  \n  \n  return \"\\n            <div class=\\\"empty\\\"></div>\\n        \";\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n            \";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  return buffer;\n  }\n\nfunction program12(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n<assessmentItem xmlns=\\\"http://www.imsglobal.org/xsd/imsqti_v2p1\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:schemaLocation=\\\"http://www.imsglobal.org/xsd/imsqti_v2p1  http://www.imsglobal.org/xsd/qti/qtiv2p1/imsqti_v2p1.xsd\\\"\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.namespaces), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  options={hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}\n  if (helper = helpers.responses) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.responses); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.responses) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  options={hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}\n  if (helper = helpers.outcomes) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.outcomes); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.outcomes) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  options={hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}\n  if (helper = helpers.stylesheets) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.stylesheets); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.stylesheets) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \\n    <itemBody>\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.empty), {hash:{},inverse:self.program(10, program10, data),fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </itemBody>\\n    \\n    \";\n  if (helper = helpers.responseProcessing) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.responseProcessing); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  options={hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data}\n  if (helper = helpers.feedbacks) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.feedbacks); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.feedbacks) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</assessmentItem>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/Item',['lodash', 'tpl!taoQtiItem/qtiXmlRenderer/tpl/item'], function(_, tpl, rendererConfig){\n    return {\n        qtiClass : 'assessmentItem',\n        template : tpl,\n        getData : function(item, data){\n            \n            var ns = _.clone(item.namespaces) || [],\n                renderer = this;\n            \n            delete ns[''];\n            delete ns['xsi'];\n            delete ns['xml'];\n            \n            var defaultData = {\n                responses : [],\n                outcomes : [],\n                stylesheets : [],\n                feedbacks : [],\n                namespaces : ns,\n                empty : item.isEmpty(),\n                responseProcessing : item.responseProcessing ? item.responseProcessing.render(renderer) : ''\n            };\n            \n            _.each(item.responses, function(response){\n                defaultData.responses.push(response.render(renderer));\n            });\n            _.each(item.outcomes, function(outcome){\n                defaultData.outcomes.push(outcome.render(renderer));\n            });\n            _.each(item.stylesheets, function(stylesheet){\n                defaultData.stylesheets.push(stylesheet.render(renderer));\n            });\n            _.each(item.modalFeedbacks, function(feedback){\n                defaultData.feedbacks.push(feedback.render(renderer));\n            });\n            \n            return _.merge(data || {}, defaultData);\n        }\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/Math',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'math',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/Object',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'object',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/outcomeDeclaration', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helperMissing=helpers.helperMissing, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"/>\\n\";\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.defaultValue)),stack1 == null || stack1 === false ? stack1 : stack1.length), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</outcomeDeclaration>\";\n  return buffer;\n  }\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<defaultValue>\\n        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.defaultValue), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</defaultValue>\\n    \";\n  return buffer;\n  }\nfunction program7(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \"<value>\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"</value>\\n        \";\n  return buffer;\n  }\n\n  buffer += \"\\n<outcomeDeclaration\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.empty), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/OutcomeDeclaration',['lodash', 'tpl!taoQtiItem/qtiXmlRenderer/tpl/outcomeDeclaration'], function(_, tpl){\n    return {\n        qtiClass : 'outcomeDeclaration',\n        template : tpl,\n        getData:function(outcomeDeclaration, data){\n            var defaultValue = [];\n            if(outcomeDeclaration.defaultValue){\n                if(typeof(outcomeDeclaration.defaultValue) === 'object'){\n                    defaultValue = _.values(outcomeDeclaration.defaultValue);\n                }else{\n                    defaultValue = [outcomeDeclaration.defaultValue];\n                }\n            }\n            \n            var defaultData = {\n                empty: !_.size(defaultValue),\n                defaultValue: defaultValue\n            };\n            \n            return _.merge(data || {}, defaultData);\n        }\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/portableInfoControl', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, self=this;\n\nfunction program1(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n                <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth1 && depth1.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"lib id=\\\"\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"\\\"/>\\n                \";\n  return buffer;\n  }\n\n  buffer += \"<infoControl \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n    <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"portableInfoControl infoControlTypeIdentifier=\\\"\";\n  if (helper = helpers.typeIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.typeIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" hook=\\\"\";\n  if (helper = helpers.entryPoint) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.entryPoint); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n\\n        <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"resources location=\\\"http://imsglobal.org/pci/1.0.15/sharedLibraries.xml\\\">\\n            <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"libraries>\\n                \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.libraries), {hash:{},inverse:self.noop,fn:self.programWithDepth(1, program1, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n            </\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"libraries>\\n        </\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"resources>\\n\\n        \";\n  stack1 = (helper = helpers.portableElementProperties || (depth0 && depth0.portableElementProperties),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.properties), ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic), options) : helperMissing.call(depth0, \"portableElementProperties\", (depth0 && depth0.properties), ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic), options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n        <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"markup>\\n            \";\n  if (helper = helpers.markup) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.markup); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"markup>\\n\\n    </\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"portableInfoControl>\\n</infoControl>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/portableCustomInteraction/properties', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \" key=\\\"\";\n  if (helper = helpers.key) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.key); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program3(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.key), {hash:{},inverse:self.program(6, program6, data),fn:self.programWithDepth(4, program4, data, depth1),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\nfunction program4(depth0,data,depth2) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<\"\n    + escapeExpression(((stack1 = (depth2 && depth2.ns)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"entry key=\\\"\";\n  if (helper = helpers.key) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.key); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.value) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.value); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</\"\n    + escapeExpression(((stack1 = (depth2 && depth2.ns)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"entry>\\n        \";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n            \";\n  if (helper = helpers.value) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.value); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\n  buffer += \"<\";\n  if (helper = helpers.ns) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.ns); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"properties\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.key), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n    \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.entries), {hash:{},inverse:self.noop,fn:self.programWithDepth(3, program3, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</\";\n  if (helper = helpers.ns) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.ns); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"properties>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/helper/portableElementTpl',[\n    'lodash',\n    'handlebars',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/portableCustomInteraction/properties'\n], function(_, Handlebars, propertiesTpl){\n    \n    function renderPortableElementProperties(properties, ns, name){\n\n        var entries = [];\n\n        _.forIn(properties, function(value, key){\n            if(_.isObject(value)){\n                entries.push({\n                    value : renderPortableElementProperties(value, ns, key)\n                });\n            }else{\n                entries.push({\n                    key : key,\n                    value : value\n                });\n            }\n        });\n        \n        return propertiesTpl({\n            entries : entries,\n            ns : ns,\n            key : name\n        });\n    }\n\n    //register the pci properties helper:\n    Handlebars.registerHelper('portableElementProperties', function(properties, ns){\n        return renderPortableElementProperties(properties, ns, '');\n    });\n    \n});\n\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/PortableInfoControl',[\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/portableInfoControl',\n    'taoQtiItem/qtiItem/helper/util',\n    'taoQtiItem/qtiXmlRenderer/helper/portableElementTpl'\n], function(tpl, util){\n\n    return {\n        qtiClass : 'infoControl',\n        template : tpl,\n        getData : function(infoControl, data){\n            var markupNs = infoControl.getMarkupNamespace();\n            data.markup = util.addMarkupNamespace(infoControl.markup, markupNs ? markupNs.name : '');\n            return data;\n        }\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responseDeclaration', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"/>\";\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \">\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.defaultValue)),stack1 == null || stack1 === false ? stack1 : stack1.length), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.correctResponse)),stack1 == null || stack1 === false ? stack1 : stack1.length), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.MAP_RESPONSE), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.MAP_RESPONSE_POINT), {hash:{},inverse:self.noop,fn:self.program(16, program16, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </responseDeclaration>\";\n  return buffer;\n  }\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <defaultValue>\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.defaultValue), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </defaultValue>\\n    \";\n  return buffer;\n  }\nfunction program5(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \"\\n        <value>\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"</value>\\n        \";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <correctResponse>\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.correctResponse), {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </correctResponse>\\n    \";\n  return buffer;\n  }\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n        <value><![CDATA[\";\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"]]></value>\";\n  return buffer;\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.mapEntries), {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  return buffer;\n  }\nfunction program11(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<mapping\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.mappingAttributes), {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.mapEntries), {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </mapping>\\n        \";\n  return buffer;\n  }\nfunction program12(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" \"\n    + escapeExpression(((stack1 = (data == null || data === false ? data : data.key)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"=\\\"\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program14(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n            <mapEntry mapKey=\\\"\"\n    + escapeExpression(((stack1 = (data == null || data === false ? data : data.key)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" mappedValue=\\\"\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"\\\" caseSensitive=\\\"false\\\"/>\";\n  return buffer;\n  }\n\nfunction program16(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.mapEntries), {hash:{},inverse:self.noop,fn:self.program(17, program17, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  return buffer;\n  }\nfunction program17(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<areaMapping\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.mappingAttributes), {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.mapEntries), {hash:{},inverse:self.noop,fn:self.program(18, program18, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </areaMapping>\\n        \";\n  return buffer;\n  }\nfunction program18(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n            <areaMapEntry shape=\\\"\";\n  if (helper = helpers.shape) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.shape); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" coords=\\\"\";\n  if (helper = helpers.coords) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.coords); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" mappedValue=\\\"\";\n  if (helper = helpers.mappedValue) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.mappedValue); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\";\n  return buffer;\n  }\n\n  buffer += \"<responseDeclaration \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.empty), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/ResponseDeclaration',['lodash', 'tpl!taoQtiItem/qtiXmlRenderer/tpl/responseDeclaration'], function(_, tpl){\n    return {\n        qtiClass : 'responseDeclaration',\n        template : tpl,\n        getData : function(responseDeclaration, data){\n            var defaultData = {\n                empty : !_.size(responseDeclaration.mapEntries) && !_.size(responseDeclaration.correctResponse) && !_.size(responseDeclaration.defaultValue),\n                correctResponse : _.values(responseDeclaration.correctResponse),\n                MATCH_CORRECT : (responseDeclaration.template === \"http://www.imsglobal.org/question/qti_v2p1/rptemplates/match_correct\"),\n                MAP_RESPONSE : (responseDeclaration.template === \"http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response\"),\n                MAP_RESPONSE_POINT : (responseDeclaration.template === \"http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response_point\"),\n                mappingAttributes : responseDeclaration.mappingAttributes,\n                mapEntries : responseDeclaration.mapEntries,\n                defaultValue : responseDeclaration.defaultValue\n            };\n            return _.merge(defaultData, data || {});\n        }\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responseProcessing', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  if (helper = helpers.xml) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.xml); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<responseProcessing template=\\\"\";\n  if (helper = helpers.template) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.template); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"/>\";\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"<responseProcessing>\\n    \";\n  options={hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}\n  if (helper = helpers.responseRules) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.responseRules); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.responseRules) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  options={hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}\n  if (helper = helpers.feedbackRules) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.feedbackRules); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.feedbackRules) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</responseProcessing>\";\n  return buffer;\n  }\nfunction program6(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.custom), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.template), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.templateDriven), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/match_correct', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<responseCondition>\\n    <responseIf>\\n        <match>\\n            <variable identifier=\\\"\";\n  if (helper = helpers.responseIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.responseIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n            <correct identifier=\\\"\";\n  if (helper = helpers.responseIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.responseIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n        </match>\\n        <setOutcomeValue identifier=\\\"\";\n  if (helper = helpers.outcomeIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.outcomeIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n            <sum>\\n                <variable identifier=\\\"\";\n  if (helper = helpers.outcomeIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.outcomeIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n                <baseValue baseType=\\\"integer\\\">1</baseValue>\\n            </sum>\\n        </setOutcomeValue>\\n    </responseIf>\\n</responseCondition>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/map_response', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<responseCondition>\\n    <responseIf>\\n        <not>\\n            <isNull>\\n                <variable identifier=\\\"\";\n  if (helper = helpers.responseIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.responseIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n            </isNull>\\n        </not>\\n        <setOutcomeValue identifier=\\\"\";\n  if (helper = helpers.outcomeIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.outcomeIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n            <sum>\\n                <variable identifier=\\\"\";\n  if (helper = helpers.outcomeIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.outcomeIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n                <mapResponse identifier=\\\"\";\n  if (helper = helpers.responseIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.responseIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n            </sum>\\n        </setOutcomeValue>\\n    </responseIf>\\n</responseCondition>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/map_response_point', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<responseCondition>\\n    <responseIf>\\n        <not>\\n            <isNull>\\n                <variable identifier=\\\"\";\n  if (helper = helpers.responseIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.responseIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n            </isNull>\\n        </not>\\n        <setOutcomeValue identifier=\\\"\";\n  if (helper = helpers.outcomeIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.outcomeIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n            <sum>\\n                <variable identifier=\\\"\";\n  if (helper = helpers.outcomeIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.outcomeIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n                <mapResponsePoint identifier=\\\"\";\n  if (helper = helpers.responseIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.responseIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n            </sum>\\n        </setOutcomeValue>\\n    </responseIf>\\n</responseCondition>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/ResponseProcessing',[\n    'lodash',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/responseProcessing',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/match_correct',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/map_response',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/map_response_point'\n], function(_, tpl, correctTpl, mapTpl, mapPointTpl){\n    \n    var _renderInteractionRp = function(interaction){\n        var ret = '', response = interaction.getResponseDeclaration();\n        if(response.template){\n            ret = _renderRpTpl(response.template, {\n                responseIdentifier : response.id(),\n                outcomeIdentifier : 'SCORE'\n            });\n        }\n        return ret;\n    };\n\n    var _renderRpTpl = function(rpTpl, data){\n\n        var ret = '';\n\n        switch(rpTpl){\n            case 'http://www.imsglobal.org/question/qti_v2p1/rptemplates/match_correct':\n            case 'MATCH_CORRECT':\n                ret = correctTpl(data);\n                break;\n            case 'http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response':\n            case 'MAP_RESPONSE':\n                ret = mapTpl(data);\n                break;\n            case 'http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response_point':\n            case 'MAP_RESPONSE_POINT':\n                ret = mapPointTpl(data);\n                break;\n            default:\n                throw new Error('unknown rp template : ' + rpTpl)\n        }\n\n        return ret;\n    };\n    \n    var _renderFeedbackRules = function(renderer, response){\n        var ret = [];\n        _.each(response.getFeedbackRules(), function(rule){\n            ret.push(rule.render(renderer));\n        });\n        return ret;\n    };\n    \n    return {\n        qtiClass : 'responseProcessing',\n        template : tpl,\n        getData : function(responseProcessing, data){\n            \n            var defaultData = {},\n                _renderer = this;\n            \n            switch(responseProcessing.processingType){\n                case 'custom':\n                    defaultData.custom = true;\n                    defaultData.xml = responseProcessing.xml;\n                    break;\n                case 'templateDriven':\n                    var interactions = responseProcessing.getRelatedItem().getInteractions();\n                    if(interactions.length === 1){\n                        var response = interactions[0].getResponseDeclaration();\n                        if(!_.size(response.getFeedbackRules())){\n                            defaultData.template = response.template;\n                            break;\n                        }\n                    }\n                    defaultData.templateDriven = true;\n                    defaultData.responseRules = [];\n                    _.each(interactions, function(interaction){\n                        defaultData.responseRules.push(_renderInteractionRp(interaction));\n                    });\n                    \n                    defaultData.feedbackRules = [];\n                    _.each(interactions, function(interaction){\n                        defaultData.feedbackRules = _.union(defaultData.feedbackRules, _renderFeedbackRules(_renderer, interaction.getResponseDeclaration()));\n                    });\n                    \n                    break;\n            }\n            \n            return _.merge(data || {}, defaultData);\n        }\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/RubricBlock',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element', 'lodash'], function(tpl, _){\n    return {\n        qtiClass : 'rubricBlock',\n        template : tpl,\n        getData : function(rubricBlock, data){\n            var newData = {\n                view : data.attributes.view ? _.values(data.attributes.view).join(' ') : ''\n            };\n            return _.merge(data || {}, newData);\n        }\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/Stylesheet',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'stylesheet',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/AssociableHotspot',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'associableHotspot',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/Gap',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'gap',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/choices/gapImg', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, helperMissing=helpers.helperMissing, self=this, functionType=\"function\";\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\n  buffer += \"<gapImg\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n    \";\n  if (helper = helpers.renderedObject) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.renderedObject); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</gapImg>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/GapImg',['tpl!taoQtiItem/qtiXmlRenderer/tpl/choices/gapImg'], function(tpl){\n    return {\n        qtiClass : 'gapImg',\n        template : tpl,\n        getData:function(gapImg, data){\n            data.renderedObject = gapImg.object.render(this);\n            return data;\n        }\n    };\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/GapText',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'gapText',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/HotspotChoice',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'hotspotChoice',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/Hottext',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'hottext',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/InlineChoice',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'inlineChoice',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleAssociableChoice',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'simpleAssociableChoice',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleChoice',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'simpleChoice',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/feedbacks/ModalFeedback',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'modalFeedback',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program5(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.object) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.object); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program7(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program9(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.object), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  options={hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.body), {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \">\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/AssociateInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'associateInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/ChoiceInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'choiceInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/EndAttemptInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'endAttemptInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/ExtendedTextInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'extendedTextInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/GapMatchInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'gapMatchInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicAssociateInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'graphicAssociateInteraction',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/graphicGapMatchInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, functionType=\"function\", self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program5(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<graphicGapMatchInteraction\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  if (helper = helpers.object) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.object); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  options={hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}\n  if (helper = helpers.gapImgs) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.gapImgs); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.gapImgs) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  options={hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</graphicGapMatchInteraction>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicGapMatchInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/graphicGapMatchInteraction'], function(tpl){\n    return {\n        qtiClass : 'graphicGapMatchInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicOrderInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'graphicOrderInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/HotspotInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'hotspotInteraction',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/hottextInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, helperMissing=helpers.helperMissing, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program5(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.body), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \">\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/HottextInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/hottextInteraction'], function(tpl){\n    return {\n        qtiClass : 'hottextInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/InlineChoiceInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'inlineChoiceInteraction',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/matchInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program5(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <simpleMatchSet>\\n        \";\n  options={hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}\n  if (helper = helpers.matchSet1) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.matchSet1); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.matchSet1) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </simpleMatchSet>\\n    <simpleMatchSet>\\n        \";\n  options={hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}\n  if (helper = helpers.matchSet2) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.matchSet2); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.matchSet2) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </simpleMatchSet>\\n</\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \">\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/MatchInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/matchInteraction'], function(tpl){\n    return {\n        qtiClass : 'matchInteraction',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/mediaInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, ((stack1 = (depth0 && depth0.object)),stack1 == null || stack1 === false ? stack1 : stack1.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", ((stack1 = (depth0 && depth0.object)),stack1 == null || stack1 === false ? stack1 : stack1.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program9(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\r\\n    <object \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.object)),stack1 == null || stack1 === false ? stack1 : stack1.attributes), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" />\";\n  options={hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.body), {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\r\\n</\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \">\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/MediaInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/mediaInteraction'], function(tpl){\n    return {\n        qtiClass : 'mediaInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/OrderInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'orderInteraction',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/portableCustomInteraction/main', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, self=this;\n\nfunction program1(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n                <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth1 && depth1.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"lib id=\\\"\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"\\\"/>\\n                \";\n  return buffer;\n  }\n\n  buffer += \"<customInteraction \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n    <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"portableCustomInteraction customInteractionTypeIdentifier=\\\"\";\n  if (helper = helpers.typeIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.typeIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" hook=\\\"\";\n  if (helper = helpers.entryPoint) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.entryPoint); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n\\n        <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"responseSchema href=\\\"http://imsglobal.org/schema/json/v1.0/response.json\\\"/>\\n\\n        <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"resources location=\\\"http://imsglobal.org/pci/1.0.15/sharedLibraries.xml\\\">\\n            <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"libraries>\\n                \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.libraries), {hash:{},inverse:self.noop,fn:self.programWithDepth(1, program1, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n            </\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"libraries>\\n        </\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"resources>\\n\\n        \";\n  stack1 = (helper = helpers.portableElementProperties || (depth0 && depth0.portableElementProperties),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.properties), ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci), options) : helperMissing.call(depth0, \"portableElementProperties\", (depth0 && depth0.properties), ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci), options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n        <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"markup>\\n            \";\n  if (helper = helpers.markup) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.markup); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"markup>\\n\\n    </\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"portableCustomInteraction>\\n</customInteraction>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/PortableCustomInteraction',[\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/portableCustomInteraction/main',\n    'taoQtiItem/qtiItem/helper/util',\n    'taoQtiItem/qtiXmlRenderer/helper/portableElementTpl'\n], function(tpl, util){\n\n    return {\n        qtiClass : 'customInteraction',\n        template : tpl,\n        getData : function(interaction, data){\n            var markupNs = interaction.getMarkupNamespace();\n            data.markup = util.addMarkupNamespace(interaction.markup, markupNs ? markupNs.name : '');\n            return data;\n        }\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/Prompt',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'prompt',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/SelectPointInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'selectPointInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/SliderInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'sliderInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/TextEntryInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'textEntryInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/UploadInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'uploadInteraction',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, helper, functionType=\"function\";\n\n\n  if (helper = helpers.rule) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.rule); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_condition', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.mapResponsePoint), {hash:{},inverse:self.program(4, program4, data),fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n            <mapResponsePoint identifier=\\\"\";\n  if (helper = helpers.response) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.response); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\";\n  return buffer;\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n            <mapResponse identifier=\\\"\";\n  if (helper = helpers.response) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.response); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n            <variable identifier=\\\"\";\n  if (helper = helpers.outcome) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.outcome); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\";\n  return buffer;\n  }\n\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <responseElse>\\n        <setOutcomeValue identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.outcome)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n            <baseValue baseType=\\\"identifier\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1['else'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</baseValue>\\n        </setOutcomeValue>\\n    </responseElse>\";\n  return buffer;\n  }\n\n  buffer += \"<responseCondition>\\n    <responseIf>\\n        <\";\n  if (helper = helpers.condition) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.condition); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \">\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.response), {hash:{},inverse:self.program(6, program6, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n            <baseValue baseType=\\\"float\\\">\";\n  if (helper = helpers.comparedValue) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.comparedValue); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</baseValue>\\n        </\";\n  if (helper = helpers.condition) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.condition); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \">\\n        <setOutcomeValue identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.outcome)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n            <baseValue baseType=\\\"identifier\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.then)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</baseValue>\\n        </setOutcomeValue>\\n    </responseIf>\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1['else']), {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</responseCondition>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_correct', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <responseElse>\\n        <setOutcomeValue identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.outcome)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n            <baseValue baseType=\\\"identifier\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1['else'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</baseValue>\\n        </setOutcomeValue>\\n    </responseElse>\";\n  return buffer;\n  }\n\n  buffer += \"<responseCondition>\\n    <responseIf>\\n        <match>\\n            <variable identifier=\\\"\";\n  if (helper = helpers.response) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.response); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n            <correct identifier=\\\"\";\n  if (helper = helpers.response) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.response); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n        </match>\\n        <setOutcomeValue identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.outcome)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n            <baseValue baseType=\\\"identifier\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.then)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</baseValue>\\n        </setOutcomeValue>\\n    </responseIf>\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1['else']), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</responseCondition>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_incorrect', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <responseElse>\\n        <setOutcomeValue identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.outcome)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n            <baseValue baseType=\\\"identifier\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1['else'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</baseValue>\\n        </setOutcomeValue>\\n    </responseElse>\";\n  return buffer;\n  }\n\n  buffer += \"<responseCondition>\\n    <responseIf>\\n        <not>\\n            <match>\\n                <variable identifier=\\\"\";\n  if (helper = helpers.response) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.response); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n                <correct identifier=\\\"\";\n  if (helper = helpers.response) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.response); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n            </match>\\n        </not>\\n        <setOutcomeValue identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.outcome)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n            <baseValue baseType=\\\"identifier\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.then)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</baseValue>\\n        </setOutcomeValue>\\n    </responseIf>\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1['else']), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</responseCondition>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/responses/SimpleFeedbackRule',[\n    'lodash',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_condition',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_correct',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_incorrect'\n], function(_, tpl, tplCondition, tplCorrect, tplIncorrect){\n    return {\n        qtiClass : '_simpleFeedbackRule',\n        template : tpl,\n        getData : function(rule, data){\n\n            var template = null, ruleXml = '';\n\n            var tplData = {\n                response : rule.comparedOutcome.id(),\n                feedback : {\n                    'outcome' : rule.feedbackOutcome.id(),\n                    'then' : rule.feedbackThen.id(),\n                    'else' : rule.feedbackElse ? rule.feedbackElse.id() : ''\n                }\n            };\n\n            switch(rule.condition){\n                case 'correct':\n                    template = tplCorrect;\n                    break;\n                case 'incorrect':\n                    template = tplIncorrect;\n                    break;\n                case 'lt':\n                case 'lte':\n                case 'equal':\n                case 'gte':\n                case 'gt':\n                    template = tplCondition;\n                    tplData.condition = rule.condition;\n                    tplData.comparedValue = rule.comparedValue;\n                    break;\n                default:\n                    throw new Error('unknown condition in simple feedback rule rendering : '+rule.condition);\n            }\n\n            if(template){\n                ruleXml = template(tplData);\n            }\n\n            return _.merge(data || {}, {rule : ruleXml});\n        }\n    };\n});\n\n"]}